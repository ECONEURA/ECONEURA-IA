{
  "statistics": {
    "detectionDate": "2025-09-26T16:21:10.259Z",
    "formats": {
      "typescript": {
        "sources": {
          "packages/shared/src/ai/agents/specialized/sales-agent.ts": {
            "lines": 202,
            "tokens": 1751,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/specialized/operations-agent.ts": {
            "lines": 204,
            "tokens": 1895,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/specialized/index.ts": {
            "lines": 62,
            "tokens": 412,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/specialized/compliance-agent.ts": {
            "lines": 264,
            "tokens": 2668,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/orchestrator/workflow-engine.ts": {
            "lines": 261,
            "tokens": 2167,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/learning/learning-engine.ts": {
            "lines": 312,
            "tokens": 3073,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/examples/usage-example.ts": {
            "lines": 238,
            "tokens": 1750,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/core/autonomous-agent.ts": {
            "lines": 195,
            "tokens": 1576,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/system/monitoring.ts": {
            "lines": 106,
            "tokens": 610,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/system/audit.ts": {
            "lines": 65,
            "tokens": 362,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/user.ts": {
            "lines": 57,
            "tokens": 370,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/product.ts": {
            "lines": 52,
            "tokens": 320,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/org.ts": {
            "lines": 90,
            "tokens": 498,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/invoice.ts": {
            "lines": 30,
            "tokens": 188,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/customer.ts": {
            "lines": 103,
            "tokens": 616,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/base.ts": {
            "lines": 45,
            "tokens": 212,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models/ai.ts": {
            "lines": 63,
            "tokens": 464,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/api/responses.ts": {
            "lines": 82,
            "tokens": 448,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/api/requests.ts": {
            "lines": 87,
            "tokens": 580,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/notifications/templates/template-engine.ts": {
            "lines": 705,
            "tokens": 6493,
            "sources": 1,
            "clones": 18,
            "duplicatedLines": 348,
            "duplicatedTokens": 3068,
            "percentage": 49.36,
            "percentageTokens": 47.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/notifications/providers/sms.provider.ts": {
            "lines": 504,
            "tokens": 4426,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 126,
            "duplicatedTokens": 1361,
            "percentage": 25,
            "percentageTokens": 30.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/notifications/providers/push.provider.ts": {
            "lines": 589,
            "tokens": 5343,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 55,
            "duplicatedTokens": 624,
            "percentage": 9.34,
            "percentageTokens": 11.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/notifications/providers/email.provider.ts": {
            "lines": 493,
            "tokens": 4418,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 65,
            "duplicatedTokens": 627,
            "percentage": 13.18,
            "percentageTokens": 14.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/utils/index.ts": {
            "lines": 44,
            "tokens": 222,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/utils/format.ts": {
            "lines": 163,
            "tokens": 1525,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/utils/common.ts": {
            "lines": 188,
            "tokens": 1500,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 145,
            "percentage": 6.91,
            "percentageTokens": 9.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/utils/api.ts": {
            "lines": 82,
            "tokens": 388,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/errors/index.ts": {
            "lines": 120,
            "tokens": 844,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/config/env.ts": {
            "lines": 65,
            "tokens": 636,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/workflow-engine.ts": {
            "lines": 414,
            "tokens": 3790,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/types.ts": {
            "lines": 115,
            "tokens": 902,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/learning-model.ts": {
            "lines": 302,
            "tokens": 2537,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/index.ts": {
            "lines": 156,
            "tokens": 1309,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/decision-engine.ts": {
            "lines": 541,
            "tokens": 4312,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/agents/autonomous-agent.ts": {
            "lines": 310,
            "tokens": 2293,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/models.ts": {
            "lines": 17,
            "tokens": 115,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/external-stubs.local.d.ts": {
            "lines": 33,
            "tokens": 201,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/express-shims.d.ts": {
            "lines": 60,
            "tokens": 532,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types/api.ts": {
            "lines": 9,
            "tokens": 50,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/telemetry/index.ts": {
            "lines": 531,
            "tokens": 5165,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/services/webhook-manager.ts": {
            "lines": 378,
            "tokens": 2972,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/services/service-discovery.ts": {
            "lines": 253,
            "tokens": 1901,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/security/index.ts": {
            "lines": 174,
            "tokens": 1482,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/security/idempotency.ts": {
            "lines": 38,
            "tokens": 444,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/security/hmac.ts": {
            "lines": 34,
            "tokens": 509,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/inventory.ts": {
            "lines": 142,
            "tokens": 1823,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/index.ts": {
            "lines": 194,
            "tokens": 2029,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/finance.ts": {
            "lines": 66,
            "tokens": 659,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/erp.ts": {
            "lines": 61,
            "tokens": 647,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/crm.ts": {
            "lines": 165,
            "tokens": 2475,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/common.ts": {
            "lines": 176,
            "tokens": 2199,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/base.ts": {
            "lines": 25,
            "tokens": 310,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/auth.ts": {
            "lines": 253,
            "tokens": 3387,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/schemas/analytics.ts": {
            "lines": 203,
            "tokens": 2139,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/rate-limiting/index.ts": {
            "lines": 500,
            "tokens": 4045,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/playbooks/dsl.ts": {
            "lines": 689,
            "tokens": 5471,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/playbooks/cfo-collection.ts": {
            "lines": 411,
            "tokens": 2007,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/otel/index.ts": {
            "lines": 106,
            "tokens": 1727,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/observability/index.ts": {
            "lines": 347,
            "tokens": 3277,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/monitoring/tracing.ts": {
            "lines": 143,
            "tokens": 1136,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/monitoring/routes.ts": {
            "lines": 26,
            "tokens": 219,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/monitoring/middleware.ts": {
            "lines": 113,
            "tokens": 1076,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/monitoring/metrics.ts": {
            "lines": 163,
            "tokens": 1163,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/monitoring/logger.ts": {
            "lines": 422,
            "tokens": 3556,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/middleware/telemetry.ts": {
            "lines": 69,
            "tokens": 501,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/metrics/metrics.ts": {
            "lines": 358,
            "tokens": 3045,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/logging/index.ts": {
            "lines": 218,
            "tokens": 1785,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/logging/enhanced.ts": {
            "lines": 214,
            "tokens": 1876,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/idempotency/store.ts": {
            "lines": 42,
            "tokens": 582,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/health/index.ts": {
            "lines": 246,
            "tokens": 1968,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 44,
            "duplicatedTokens": 412,
            "percentage": 17.89,
            "percentageTokens": 20.93,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/graph/client.ts": {
            "lines": 432,
            "tokens": 3194,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/errors/index.ts": {
            "lines": 412,
            "tokens": 3195,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/correlation/index.ts": {
            "lines": 366,
            "tokens": 2736,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/core/index.ts": {
            "lines": 13,
            "tokens": 104,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/contracts/sdk.ts": {
            "lines": 459,
            "tokens": 4581,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/contracts/index.ts": {
            "lines": 456,
            "tokens": 5502,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/service-client.ts": {
            "lines": 347,
            "tokens": 2746,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/index.ts": {
            "lines": 112,
            "tokens": 719,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/finance-client.ts": {
            "lines": 69,
            "tokens": 681,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/example-usage.ts": {
            "lines": 246,
            "tokens": 1529,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/erp-client.ts": {
            "lines": 69,
            "tokens": 681,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/crm-client.ts": {
            "lines": 344,
            "tokens": 3163,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 76,
            "duplicatedTokens": 660,
            "percentage": 22.09,
            "percentageTokens": 20.87,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/clients/base-client.ts": {
            "lines": 99,
            "tokens": 1025,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/backup/intermediate.ts": {
            "lines": 326,
            "tokens": 2683,
            "sources": 1,
            "clones": 17,
            "duplicatedLines": 349,
            "duplicatedTokens": 3324,
            "percentage": 107.06,
            "percentageTokens": 123.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/backup/basic.ts": {
            "lines": 137,
            "tokens": 1269,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 111,
            "duplicatedTokens": 1018,
            "percentage": 81.02,
            "percentageTokens": 80.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/router.ts": {
            "lines": 288,
            "tokens": 2289,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/providers.ts": {
            "lines": 687,
            "tokens": 5158,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/enhanced-router.ts": {
            "lines": 554,
            "tokens": 4583,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/cost-guardrails.ts": {
            "lines": 392,
            "tokens": 3445,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/sdk/src/resources/crm.ts": {
            "lines": 155,
            "tokens": 1758,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/sdk/src/resources/auth.ts": {
            "lines": 77,
            "tokens": 525,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/types/prisma-shim.d.ts": {
            "lines": 25,
            "tokens": 343,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/seeds/inventory.seeds.ts": {
            "lines": 332,
            "tokens": 2121,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/schema/index.ts": {
            "lines": 379,
            "tokens": 4911,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/utils.ts": {
            "lines": 144,
            "tokens": 1320,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 145,
            "percentage": 9.03,
            "percentageTokens": 10.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/types.ts": {
            "lines": 77,
            "tokens": 712,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/minimal.ts": {
            "lines": 23,
            "tokens": 179,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/metrics.ts": {
            "lines": 298,
            "tokens": 2497,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/logger.ts": {
            "lines": 185,
            "tokens": 1600,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/index.ts": {
            "lines": 85,
            "tokens": 547,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/errors.ts": {
            "lines": 96,
            "tokens": 724,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/env.ts": {
            "lines": 77,
            "tokens": 888,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/cost-meter.ts": {
            "lines": 354,
            "tokens": 4828,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 50,
            "duplicatedTokens": 1154,
            "percentage": 14.12,
            "percentageTokens": 23.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/config.ts": {
            "lines": 78,
            "tokens": 766,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/cache.ts": {
            "lines": 314,
            "tokens": 2451,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 104,
            "percentage": 3.82,
            "percentageTokens": 4.24,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/sdk/src/index.ts": {
            "lines": 30,
            "tokens": 121,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/sdk/src/client.ts": {
            "lines": 261,
            "tokens": 2422,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 23,
            "duplicatedTokens": 258,
            "percentage": 8.81,
            "percentageTokens": 10.65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/seed.ts": {
            "lines": 272,
            "tokens": 2061,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/schema.ts": {
            "lines": 409,
            "tokens": 5316,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/index.ts": {
            "lines": 36,
            "tokens": 297,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/database.ts": {
            "lines": 379,
            "tokens": 2950,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/connection.ts": {
            "lines": 62,
            "tokens": 636,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/client.ts": {
            "lines": 159,
            "tokens": 1667,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/src/client.lazy.ts": {
            "lines": 9,
            "tokens": 72,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/config/src/env.ts": {
            "lines": 13,
            "tokens": 175,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/src/types.ts": {
            "lines": 105,
            "tokens": 1030,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/drizzle.config.ts": {
            "lines": 14,
            "tokens": 99,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/memory.ts": {
            "lines": 456,
            "tokens": 2165,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/connector.d.ts": {
            "lines": 314,
            "tokens": 1346,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/ai-router.client.ts": {
            "lines": 349,
            "tokens": 2923,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/user/update-user.use-case.ts": {
            "lines": 149,
            "tokens": 1131,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/user/delete-user.use-case.ts": {
            "lines": 85,
            "tokens": 573,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/user/create-user.use-case.ts": {
            "lines": 141,
            "tokens": 1047,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/search/intelligent-search.use-case.ts": {
            "lines": 78,
            "tokens": 710,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/search/index-entity.use-case.ts": {
            "lines": 50,
            "tokens": 386,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/search/get-suggestions.use-case.ts": {
            "lines": 57,
            "tokens": 446,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/product/update-product.use-case.ts": {
            "lines": 300,
            "tokens": 2319,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 39,
            "duplicatedTokens": 303,
            "percentage": 13,
            "percentageTokens": 13.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/product/create-product.use-case.ts": {
            "lines": 231,
            "tokens": 1788,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 62,
            "duplicatedTokens": 446,
            "percentage": 26.84,
            "percentageTokens": 24.94,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/predictive-analytics/update-predictive-analytics.use-case.ts": {
            "lines": 146,
            "tokens": 1282,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 20,
            "duplicatedTokens": 102,
            "percentage": 13.7,
            "percentageTokens": 7.96,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/predictive-analytics/train-model.use-case.ts": {
            "lines": 204,
            "tokens": 1493,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 20,
            "duplicatedTokens": 102,
            "percentage": 9.8,
            "percentageTokens": 6.83,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/predictive-analytics/generate-prediction.use-case.ts": {
            "lines": 115,
            "tokens": 809,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/predictive-analytics/create-predictive-analytics.use-case.ts": {
            "lines": 150,
            "tokens": 1200,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 84,
            "percentage": 6.67,
            "percentageTokens": 7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/invoice/update-invoice.use-case.ts": {
            "lines": 234,
            "tokens": 1979,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 37,
            "duplicatedTokens": 373,
            "percentage": 15.81,
            "percentageTokens": 18.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/invoice/create-invoice.use-case.ts": {
            "lines": 185,
            "tokens": 1603,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 37,
            "duplicatedTokens": 373,
            "percentage": 20,
            "percentageTokens": 23.27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/inventory-kardex/update-inventory-kardex.use-case.ts": {
            "lines": 145,
            "tokens": 1262,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/inventory-kardex/record-movement.use-case.ts": {
            "lines": 206,
            "tokens": 1470,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 27,
            "duplicatedTokens": 233,
            "percentage": 13.11,
            "percentageTokens": 15.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/inventory-kardex/create-inventory-kardex.use-case.ts": {
            "lines": 166,
            "tokens": 1227,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 17,
            "duplicatedTokens": 135,
            "percentage": 10.24,
            "percentageTokens": 11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/interaction/update-interaction.use-case.ts": {
            "lines": 388,
            "tokens": 2816,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 110,
            "duplicatedTokens": 813,
            "percentage": 28.35,
            "percentageTokens": 28.87,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/interaction/create-interaction.use-case.ts": {
            "lines": 235,
            "tokens": 1580,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 52,
            "duplicatedTokens": 358,
            "percentage": 22.13,
            "percentageTokens": 22.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/deal/update-deal.use-case.ts": {
            "lines": 528,
            "tokens": 4035,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 182,
            "duplicatedTokens": 1438,
            "percentage": 34.47,
            "percentageTokens": 35.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/deal/create-deal.use-case.ts": {
            "lines": 342,
            "tokens": 2448,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 175,
            "duplicatedTokens": 1190,
            "percentage": 51.17,
            "percentageTokens": 48.61,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/database-schema/create-database-schema.use-case.ts": {
            "lines": 369,
            "tokens": 3126,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 146,
            "duplicatedTokens": 1208,
            "percentage": 39.57,
            "percentageTokens": 38.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/database-schema/analyze-database-schema.use-case.ts": {
            "lines": 138,
            "tokens": 945,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 25,
            "duplicatedTokens": 161,
            "percentage": 18.12,
            "percentageTokens": 17.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/contact/update-contact.use-case.ts": {
            "lines": 420,
            "tokens": 3946,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 132,
            "duplicatedTokens": 1266,
            "percentage": 31.43,
            "percentageTokens": 32.08,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/contact/create-contact.use-case.ts": {
            "lines": 377,
            "tokens": 3494,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 132,
            "duplicatedTokens": 1266,
            "percentage": 35.01,
            "percentageTokens": 36.23,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/company/update-company.use-case.ts": {
            "lines": 367,
            "tokens": 3137,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 81,
            "duplicatedTokens": 671,
            "percentage": 22.07,
            "percentageTokens": 21.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/company/create-company.use-case.ts": {
            "lines": 310,
            "tokens": 2624,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 81,
            "duplicatedTokens": 671,
            "percentage": 26.13,
            "percentageTokens": 25.57,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/architecture/create-architecture.use-case.ts": {
            "lines": 216,
            "tokens": 1803,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 92,
            "duplicatedTokens": 844,
            "percentage": 42.59,
            "percentageTokens": 46.81,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/architecture/analyze-architecture.use-case.ts": {
            "lines": 120,
            "tokens": 797,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 16,
            "duplicatedTokens": 96,
            "percentage": 13.33,
            "percentageTokens": 12.05,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/__tests__/setup/test-setup.ts": {
            "lines": 31,
            "tokens": 272,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/shared/utils/validation.utils.ts": {
            "lines": 437,
            "tokens": 4338,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/shared/utils/error.utils.ts": {
            "lines": 527,
            "tokens": 4060,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/sepa/types.ts": {
            "lines": 21,
            "tokens": 142,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/sepa/reconciler.ts": {
            "lines": 37,
            "tokens": 625,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/sepa/parser.ts": {
            "lines": 62,
            "tokens": 805,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/sepa/index.ts": {
            "lines": 53,
            "tokens": 864,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai/azure-openai.service.ts": {
            "lines": 25,
            "tokens": 266,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/user.routes.ts": {
            "lines": 214,
            "tokens": 1647,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/search.routes.ts": {
            "lines": 185,
            "tokens": 953,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/product.routes.ts": {
            "lines": 708,
            "tokens": 7688,
            "sources": 1,
            "clones": 32,
            "duplicatedLines": 608,
            "duplicatedTokens": 6174,
            "percentage": 85.88,
            "percentageTokens": 80.31,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/predictive-analytics.routes.ts": {
            "lines": 328,
            "tokens": 3815,
            "sources": 1,
            "clones": 18,
            "duplicatedLines": 229,
            "duplicatedTokens": 3689,
            "percentage": 69.82,
            "percentageTokens": 96.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/invoice.routes.ts": {
            "lines": 446,
            "tokens": 5261,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 135,
            "duplicatedTokens": 2106,
            "percentage": 30.27,
            "percentageTokens": 40.03,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/inventory-kardex.routes.ts": {
            "lines": 391,
            "tokens": 4465,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 163,
            "duplicatedTokens": 2534,
            "percentage": 41.69,
            "percentageTokens": 56.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/interaction.routes.ts": {
            "lines": 433,
            "tokens": 2565,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/deal.routes.ts": {
            "lines": 532,
            "tokens": 3216,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/contact.routes.ts": {
            "lines": 601,
            "tokens": 6972,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 251,
            "duplicatedTokens": 4238,
            "percentage": 41.76,
            "percentageTokens": 60.79,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/company.routes.ts": {
            "lines": 437,
            "tokens": 5256,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 218,
            "duplicatedTokens": 3628,
            "percentage": 49.89,
            "percentageTokens": 69.03,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/basic-ai.routes.ts": {
            "lines": 150,
            "tokens": 771,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/architecture.routes.ts": {
            "lines": 334,
            "tokens": 3902,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 161,
            "duplicatedTokens": 2683,
            "percentage": 48.2,
            "percentageTokens": 68.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/routes/agents.routes.ts": {
            "lines": 388,
            "tokens": 1608,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/middleware/validation.middleware.ts": {
            "lines": 47,
            "tokens": 425,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/middleware/response.middleware.ts": {
            "lines": 71,
            "tokens": 673,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/middleware/error.middleware.ts": {
            "lines": 81,
            "tokens": 688,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/middleware/base.middleware.ts": {
            "lines": 325,
            "tokens": 2434,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/user.dto.ts": {
            "lines": 209,
            "tokens": 2327,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/search.dto.ts": {
            "lines": 166,
            "tokens": 1942,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/product.dto.ts": {
            "lines": 361,
            "tokens": 4933,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 70,
            "duplicatedTokens": 884,
            "percentage": 19.39,
            "percentageTokens": 17.92,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/predictive-analytics.dto.ts": {
            "lines": 298,
            "tokens": 3858,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 613,
            "percentage": 8.72,
            "percentageTokens": 15.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/organization.dto.ts": {
            "lines": 257,
            "tokens": 3165,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/invoice.dto.ts": {
            "lines": 300,
            "tokens": 3806,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 362,
            "percentage": 6.67,
            "percentageTokens": 9.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/inventory-kardex.dto.ts": {
            "lines": 326,
            "tokens": 4011,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/interaction.dto.ts": {
            "lines": 374,
            "tokens": 3720,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 100,
            "duplicatedTokens": 893,
            "percentage": 26.74,
            "percentageTokens": 24.01,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/deal.dto.ts": {
            "lines": 541,
            "tokens": 6071,
            "sources": 1,
            "clones": 14,
            "duplicatedLines": 214,
            "duplicatedTokens": 2523,
            "percentage": 39.56,
            "percentageTokens": 41.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/database-schema.dto.ts": {
            "lines": 637,
            "tokens": 9051,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 84,
            "duplicatedTokens": 1328,
            "percentage": 13.19,
            "percentageTokens": 14.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/contact.dto.ts": {
            "lines": 608,
            "tokens": 8155,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 52,
            "duplicatedTokens": 803,
            "percentage": 8.55,
            "percentageTokens": 9.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/company.dto.ts": {
            "lines": 428,
            "tokens": 5633,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 21,
            "duplicatedTokens": 327,
            "percentage": 4.91,
            "percentageTokens": 5.81,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/base.dto.ts": {
            "lines": 190,
            "tokens": 1605,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/dto/architecture.dto.ts": {
            "lines": 318,
            "tokens": 3943,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 68,
            "duplicatedTokens": 1289,
            "percentage": 21.38,
            "percentageTokens": 32.69,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/user.controller.ts": {
            "lines": 486,
            "tokens": 4105,
            "sources": 1,
            "clones": 18,
            "duplicatedLines": 270,
            "duplicatedTokens": 2146,
            "percentage": 55.56,
            "percentageTokens": 52.28,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/search.controller.ts": {
            "lines": 209,
            "tokens": 1704,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/product.controller.ts": {
            "lines": 652,
            "tokens": 6401,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 428,
            "duplicatedTokens": 4452,
            "percentage": 65.64,
            "percentageTokens": 69.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/predictive-analytics.controller.ts": {
            "lines": 375,
            "tokens": 3739,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 132,
            "duplicatedTokens": 1056,
            "percentage": 35.2,
            "percentageTokens": 28.24,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/invoice.controller.ts": {
            "lines": 443,
            "tokens": 4441,
            "sources": 1,
            "clones": 15,
            "duplicatedLines": 165,
            "duplicatedTokens": 1319,
            "percentage": 37.25,
            "percentageTokens": 29.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/inventory-kardex.controller.ts": {
            "lines": 455,
            "tokens": 4448,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 159,
            "duplicatedTokens": 1283,
            "percentage": 34.95,
            "percentageTokens": 28.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/interaction.controller.ts": {
            "lines": 801,
            "tokens": 7631,
            "sources": 1,
            "clones": 42,
            "duplicatedLines": 952,
            "duplicatedTokens": 9594,
            "percentage": 118.85,
            "percentageTokens": 125.72,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/company.controller.ts": {
            "lines": 739,
            "tokens": 6650,
            "sources": 1,
            "clones": 30,
            "duplicatedLines": 436,
            "duplicatedTokens": 3268,
            "percentage": 59,
            "percentageTokens": 49.14,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/basic-ai.controller.ts": {
            "lines": 399,
            "tokens": 2870,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 102,
            "duplicatedTokens": 754,
            "percentage": 25.56,
            "percentageTokens": 26.27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/base.controller.ts": {
            "lines": 205,
            "tokens": 1585,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/architecture.controller.ts": {
            "lines": 424,
            "tokens": 4173,
            "sources": 1,
            "clones": 15,
            "duplicatedLines": 199,
            "duplicatedTokens": 1727,
            "percentage": 46.93,
            "percentageTokens": 41.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/controllers/agents.controller.ts": {
            "lines": 607,
            "tokens": 4459,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 136,
            "duplicatedTokens": 980,
            "percentage": 22.41,
            "percentageTokens": 21.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/performance/optimization.ts": {
            "lines": 36,
            "tokens": 340,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/system-cockpit/system-health.service.ts": {
            "lines": 483,
            "tokens": 3714,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/handlers/user-handlers.ts": {
            "lines": 178,
            "tokens": 1736,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/basic-ai/basic-ai.service.ts": {
            "lines": 510,
            "tokens": 3893,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 23,
            "duplicatedTokens": 217,
            "percentage": 4.51,
            "percentageTokens": 5.57,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/aggregates/user.ts": {
            "lines": 196,
            "tokens": 1323,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/tracing.service.ts": {
            "lines": 396,
            "tokens": 3106,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 105,
            "duplicatedTokens": 809,
            "percentage": 26.52,
            "percentageTokens": 26.05,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/metrics.service.ts": {
            "lines": 397,
            "tokens": 3280,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/logger.service.ts": {
            "lines": 298,
            "tokens": 2533,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/index.ts": {
            "lines": 18,
            "tokens": 241,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/health.service.ts": {
            "lines": 485,
            "tokens": 3788,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/dashboard.service.ts": {
            "lines": 316,
            "tokens": 2856,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/infrastructure/observability/alerting.service.ts": {
            "lines": 592,
            "tokens": 4863,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 95,
            "percentage": 2.03,
            "percentageTokens": 1.95,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/value-objects/money.vo.ts": {
            "lines": 274,
            "tokens": 2658,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/value-objects/email.vo.ts": {
            "lines": 109,
            "tokens": 744,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/value-objects/address.vo.ts": {
            "lines": 341,
            "tokens": 2535,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 44,
            "duplicatedTokens": 300,
            "percentage": 12.9,
            "percentageTokens": 11.83,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/services/user.domain.service.ts": {
            "lines": 405,
            "tokens": 3287,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/user.repository.ts": {
            "lines": 104,
            "tokens": 811,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/search.repository.ts": {
            "lines": 66,
            "tokens": 543,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/product.repository.ts": {
            "lines": 192,
            "tokens": 1804,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/predictive-analytics.repository.ts": {
            "lines": 273,
            "tokens": 2422,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 32,
            "duplicatedTokens": 226,
            "percentage": 11.72,
            "percentageTokens": 9.33,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/organization.repository.ts": {
            "lines": 102,
            "tokens": 739,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/invoice.repository.ts": {
            "lines": 231,
            "tokens": 2217,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/inventory-kardex.repository.ts": {
            "lines": 323,
            "tokens": 2932,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 40,
            "duplicatedTokens": 290,
            "percentage": 12.38,
            "percentageTokens": 9.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/interaction.repository.ts": {
            "lines": 207,
            "tokens": 2049,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/deal.repository.ts": {
            "lines": 274,
            "tokens": 3075,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/database-schema.repository.ts": {
            "lines": 351,
            "tokens": 3303,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 42,
            "duplicatedTokens": 306,
            "percentage": 11.97,
            "percentageTokens": 9.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/contact.repository.ts": {
            "lines": 396,
            "tokens": 4218,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 113,
            "duplicatedTokens": 902,
            "percentage": 28.54,
            "percentageTokens": 21.38,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/company.repository.ts": {
            "lines": 254,
            "tokens": 2528,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 73,
            "duplicatedTokens": 582,
            "percentage": 28.74,
            "percentageTokens": 23.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/base.repository.ts": {
            "lines": 89,
            "tokens": 627,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/repositories/architecture.repository.ts": {
            "lines": 271,
            "tokens": 2414,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 178,
            "percentage": 9.59,
            "percentageTokens": 7.37,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/user.entity.ts": {
            "lines": 323,
            "tokens": 2422,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 182,
            "percentage": 6.81,
            "percentageTokens": 7.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/search-result.entity.ts": {
            "lines": 281,
            "tokens": 2315,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/product.entity.ts": {
            "lines": 364,
            "tokens": 3317,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 80,
            "duplicatedTokens": 484,
            "percentage": 21.98,
            "percentageTokens": 14.59,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/predictive-analytics.entity.ts": {
            "lines": 441,
            "tokens": 3795,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 78,
            "duplicatedTokens": 570,
            "percentage": 17.69,
            "percentageTokens": 15.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/organization.entity.ts": {
            "lines": 433,
            "tokens": 3241,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 93,
            "duplicatedTokens": 721,
            "percentage": 21.48,
            "percentageTokens": 22.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/invoice.entity.ts": {
            "lines": 437,
            "tokens": 3925,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/inventory-kardex.entity.ts": {
            "lines": 608,
            "tokens": 4887,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 17,
            "duplicatedTokens": 135,
            "percentage": 2.8,
            "percentageTokens": 2.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/interaction.entity.ts": {
            "lines": 330,
            "tokens": 2781,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 96,
            "duplicatedTokens": 776,
            "percentage": 29.09,
            "percentageTokens": 27.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/deal.entity.ts": {
            "lines": 528,
            "tokens": 4850,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 215,
            "duplicatedTokens": 1585,
            "percentage": 40.72,
            "percentageTokens": 32.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/database-schema.entity.ts": {
            "lines": 650,
            "tokens": 5688,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 143,
            "duplicatedTokens": 999,
            "percentage": 22,
            "percentageTokens": 17.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/company.entity.ts": {
            "lines": 626,
            "tokens": 5471,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 106,
            "duplicatedTokens": 1014,
            "percentage": 16.93,
            "percentageTokens": 18.53,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/base.entity.ts": {
            "lines": 76,
            "tokens": 526,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/entities/architecture.entity.ts": {
            "lines": 411,
            "tokens": 3719,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 62,
            "duplicatedTokens": 434,
            "percentage": 15.09,
            "percentageTokens": 11.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/db/partitions/partition-manager.service.ts": {
            "lines": 530,
            "tokens": 4745,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 102,
            "percentage": 2.83,
            "percentageTokens": 2.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/db/optimization/database-optimizer.service.ts": {
            "lines": 819,
            "tokens": 6014,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 51,
            "duplicatedTokens": 440,
            "percentage": 6.23,
            "percentageTokens": 7.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/db/indexes/index-manager.service.ts": {
            "lines": 419,
            "tokens": 3311,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 102,
            "percentage": 3.58,
            "percentageTokens": 3.08,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/use-cases/base.use-case.ts": {
            "lines": 116,
            "tokens": 907,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/services/user.application.service.ts": {
            "lines": 368,
            "tokens": 2874,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 38,
            "duplicatedTokens": 242,
            "percentage": 10.33,
            "percentageTokens": 8.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/utils/metrics.ts": {
            "lines": 313,
            "tokens": 2401,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/utils/logger.ts": {
            "lines": 140,
            "tokens": 1316,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/types/email.types.ts": {
            "lines": 263,
            "tokens": 2005,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/services/graph-service.ts": {
            "lines": 317,
            "tokens": 2341,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/services/cron-service.ts": {
            "lines": 441,
            "tokens": 3412,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/queues/job-queue.ts": {
            "lines": 429,
            "tokens": 4006,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 50,
            "duplicatedTokens": 617,
            "percentage": 11.66,
            "percentageTokens": 15.4,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/queues/job-queue-methods.ts": {
            "lines": 93,
            "tokens": 965,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 22,
            "duplicatedTokens": 281,
            "percentage": 23.66,
            "percentageTokens": 29.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/processors/email-processor.ts": {
            "lines": 371,
            "tokens": 3202,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/config/env.ts": {
            "lines": 108,
            "tokens": 987,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/web/src/types/econeura-shared.d.ts": {
            "lines": 49,
            "tokens": 299,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-neura-comet/src/svc/memory.ts": {
            "lines": 149,
            "tokens": 1246,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-neura-comet/src/routes/chat.ts": {
            "lines": 152,
            "tokens": 1269,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-neura-comet/src/middleware/finops.ts": {
            "lines": 84,
            "tokens": 689,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 66,
            "duplicatedTokens": 557,
            "percentage": 78.57,
            "percentageTokens": 80.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-agents-make/src/svc/runs.ts": {
            "lines": 160,
            "tokens": 1066,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-agents-make/src/routes/trigger.ts": {
            "lines": 88,
            "tokens": 684,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-agents-make/src/routes/events.ts": {
            "lines": 87,
            "tokens": 736,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-agents-make/src/middleware/finops.ts": {
            "lines": 80,
            "tokens": 633,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 66,
            "duplicatedTokens": 557,
            "percentage": 82.5,
            "percentageTokens": 87.99,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/types/shims.d.ts": {
            "lines": 16,
            "tokens": 121,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/types/problem-details.types.ts": {
            "lines": 49,
            "tokens": 120,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/types/module-stubs.d.ts": {
            "lines": 18,
            "tokens": 151,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/types/express.d.ts": {
            "lines": 18,
            "tokens": 118,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/types/ambient.d.ts": {
            "lines": 13,
            "tokens": 77,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/shared/index.ts": {
            "lines": 36,
            "tokens": 127,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/web-search.service.ts": {
            "lines": 377,
            "tokens": 3691,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/stabilization.service.ts": {
            "lines": 16,
            "tokens": 142,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/sentiment-analysis.service.ts": {
            "lines": 762,
            "tokens": 7687,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/security-config.service.ts": {
            "lines": 517,
            "tokens": 3598,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 79,
            "duplicatedTokens": 369,
            "percentage": 15.28,
            "percentageTokens": 10.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/products.service.ts": {
            "lines": 29,
            "tokens": 245,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/predictive-ai.service.ts": {
            "lines": 260,
            "tokens": 2360,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/observability-otel.service.ts": {
            "lines": 824,
            "tokens": 6588,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 187,
            "duplicatedTokens": 1343,
            "percentage": 22.69,
            "percentageTokens": 20.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/next-ai-platform.service.ts": {
            "lines": 34,
            "tokens": 236,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/mistral.local.ts": {
            "lines": 12,
            "tokens": 183,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/memory.service.ts": {
            "lines": 79,
            "tokens": 679,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 164,
            "percentage": 25.32,
            "percentageTokens": 24.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/invoices.service.ts": {
            "lines": 26,
            "tokens": 231,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/health-checks.service.ts": {
            "lines": 27,
            "tokens": 199,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/finops.ts": {
            "lines": 29,
            "tokens": 365,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/external-integrations.service.ts": {
            "lines": 733,
            "tokens": 7206,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 48,
            "duplicatedTokens": 360,
            "percentage": 6.55,
            "percentageTokens": 5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/document-management.service.ts": {
            "lines": 878,
            "tokens": 7304,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 77,
            "duplicatedTokens": 774,
            "percentage": 8.77,
            "percentageTokens": 10.6,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/customer-support.service.ts": {
            "lines": 975,
            "tokens": 7869,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 306,
            "percentage": 2.46,
            "percentageTokens": 3.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/content-management.service.ts": {
            "lines": 996,
            "tokens": 8543,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 112,
            "duplicatedTokens": 1379,
            "percentage": 11.24,
            "percentageTokens": 16.14,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/cockpit-integration.service.ts": {
            "lines": 711,
            "tokens": 6043,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 102,
            "duplicatedTokens": 1097,
            "percentage": 14.35,
            "percentageTokens": 18.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/cockpit-bff-live.service.ts": {
            "lines": 585,
            "tokens": 4638,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/breaker.ts": {
            "lines": 26,
            "tokens": 261,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/azure-openai.service.ts": {
            "lines": 410,
            "tokens": 3408,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 186,
            "percentage": 4.88,
            "percentageTokens": 5.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/azure-integration.service.ts": {
            "lines": 526,
            "tokens": 4102,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/automl.service.ts": {
            "lines": 356,
            "tokens": 3133,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/analytics.service.ts": {
            "lines": 31,
            "tokens": 220,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai.ts": {
            "lines": 146,
            "tokens": 1435,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-training.service.ts": {
            "lines": 835,
            "tokens": 6070,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 83,
            "percentage": 1.2,
            "percentageTokens": 1.37,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-security-compliance.service.ts": {
            "lines": 929,
            "tokens": 7898,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 86,
            "duplicatedTokens": 777,
            "percentage": 9.26,
            "percentageTokens": 9.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-performance-optimization.service.ts": {
            "lines": 918,
            "tokens": 7794,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 52,
            "duplicatedTokens": 429,
            "percentage": 5.66,
            "percentageTokens": 5.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-model-management.service.ts": {
            "lines": 998,
            "tokens": 6878,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 83,
            "percentage": 1,
            "percentageTokens": 1.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-dashboard-consolidation.service.ts": {
            "lines": 551,
            "tokens": 4800,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 137,
            "duplicatedTokens": 1475,
            "percentage": 24.86,
            "percentageTokens": 30.73,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/ai-cost-prediction.service.ts": {
            "lines": 982,
            "tokens": 8917,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 73,
            "duplicatedTokens": 638,
            "percentage": 7.43,
            "percentageTokens": 7.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/advanced-observability.service.ts": {
            "lines": 634,
            "tokens": 5172,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/services/advanced-cicd.service.ts": {
            "lines": 789,
            "tokens": 6290,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/security/security-manager.service.ts": {
            "lines": 855,
            "tokens": 6528,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 109,
            "percentage": 1.29,
            "percentageTokens": 1.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/security/rbac.service.ts": {
            "lines": 820,
            "tokens": 7535,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/security/mfa.service.ts": {
            "lines": 835,
            "tokens": 6078,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 109,
            "percentage": 1.32,
            "percentageTokens": 1.79,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/workflows.ts": {
            "lines": 468,
            "tokens": 3550,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/workers-integration.ts": {
            "lines": 331,
            "tokens": 2674,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 146,
            "duplicatedTokens": 1108,
            "percentage": 44.11,
            "percentageTokens": 41.44,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/warmup.ts": {
            "lines": 357,
            "tokens": 2807,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 17,
            "duplicatedTokens": 179,
            "percentage": 4.76,
            "percentageTokens": 6.38,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/supplier-scorecard.ts": {
            "lines": 472,
            "tokens": 5092,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 164,
            "duplicatedTokens": 1210,
            "percentage": 34.75,
            "percentageTokens": 23.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/stripe-receipts.ts": {
            "lines": 353,
            "tokens": 3336,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 52,
            "duplicatedTokens": 389,
            "percentage": 14.73,
            "percentageTokens": 11.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/status.ts": {
            "lines": 458,
            "tokens": 3757,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/stabilization.ts": {
            "lines": 15,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/social-media-management.ts": {
            "lines": 674,
            "tokens": 5865,
            "sources": 1,
            "clones": 26,
            "duplicatedLines": 373,
            "duplicatedTokens": 3034,
            "percentage": 55.34,
            "percentageTokens": 51.73,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/sepa.ts": {
            "lines": 25,
            "tokens": 415,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/sepa-robust.ts": {
            "lines": 335,
            "tokens": 3435,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 78,
            "duplicatedTokens": 563,
            "percentage": 23.28,
            "percentageTokens": 16.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/semantic-search-crm.ts": {
            "lines": 389,
            "tokens": 4214,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 30,
            "duplicatedTokens": 216,
            "percentage": 7.71,
            "percentageTokens": 5.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/security.ts": {
            "lines": 876,
            "tokens": 7350,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/security-config.ts": {
            "lines": 527,
            "tokens": 3928,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 164,
            "percentage": 4.55,
            "percentageTokens": 4.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/rls-tenant-policies.ts": {
            "lines": 542,
            "tokens": 4096,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 82,
            "percentage": 2.21,
            "percentageTokens": 2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/rls-generativa.ts": {
            "lines": 392,
            "tokens": 4092,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 87,
            "percentage": 3.06,
            "percentageTokens": 2.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/reportes-mensuales.ts": {
            "lines": 478,
            "tokens": 4552,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 42,
            "duplicatedTokens": 303,
            "percentage": 8.79,
            "percentageTokens": 6.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/rbac-granular.ts": {
            "lines": 358,
            "tokens": 2940,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/rate-limiting.ts": {
            "lines": 540,
            "tokens": 4386,
            "sources": 1,
            "clones": 28,
            "duplicatedLines": 304,
            "duplicatedTokens": 2733,
            "percentage": 56.3,
            "percentageTokens": 62.31,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/prompt-library.ts": {
            "lines": 183,
            "tokens": 1535,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/project-completion-deployment.ts": {
            "lines": 585,
            "tokens": 5126,
            "sources": 1,
            "clones": 36,
            "duplicatedLines": 430,
            "duplicatedTokens": 3332,
            "percentage": 73.5,
            "percentageTokens": 65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/progress.ts": {
            "lines": 34,
            "tokens": 480,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ping.ts": {
            "lines": 13,
            "tokens": 107,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/performance.ts": {
            "lines": 282,
            "tokens": 2538,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/performance-v2.ts": {
            "lines": 515,
            "tokens": 4538,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 104,
            "duplicatedTokens": 765,
            "percentage": 20.19,
            "percentageTokens": 16.86,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/openapi.ts": {
            "lines": 299,
            "tokens": 1464,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/observability-otel.ts": {
            "lines": 609,
            "tokens": 4639,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 82,
            "duplicatedTokens": 624,
            "percentage": 13.46,
            "percentageTokens": 13.45,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/notifications.ts": {
            "lines": 932,
            "tokens": 7716,
            "sources": 1,
            "clones": 44,
            "duplicatedLines": 532,
            "duplicatedTokens": 4246,
            "percentage": 57.08,
            "percentageTokens": 55.03,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/next-ai-platform.ts": {
            "lines": 811,
            "tokens": 2586,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 119,
            "duplicatedTokens": 506,
            "percentage": 14.67,
            "percentageTokens": 19.57,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/monitoring.ts": {
            "lines": 22,
            "tokens": 227,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/metrics.ts": {
            "lines": 312,
            "tokens": 2590,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/memory.routes.ts": {
            "lines": 18,
            "tokens": 129,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/memory-management.ts": {
            "lines": 604,
            "tokens": 5373,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 92,
            "duplicatedTokens": 672,
            "percentage": 15.23,
            "percentageTokens": 12.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/make-quotas.ts": {
            "lines": 275,
            "tokens": 2261,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/invoices.ts": {
            "lines": 492,
            "tokens": 4194,
            "sources": 1,
            "clones": 21,
            "duplicatedLines": 249,
            "duplicatedTokens": 2584,
            "percentage": 50.61,
            "percentageTokens": 61.61,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/inventory-kardex.ts": {
            "lines": 494,
            "tokens": 4925,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 47,
            "duplicatedTokens": 336,
            "percentage": 9.51,
            "percentageTokens": 6.82,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/interactions.ts": {
            "lines": 344,
            "tokens": 2886,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 78,
            "duplicatedTokens": 554,
            "percentage": 22.67,
            "percentageTokens": 19.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/interactions-sas-av.ts": {
            "lines": 409,
            "tokens": 4613,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 50,
            "duplicatedTokens": 363,
            "percentage": 12.22,
            "percentageTokens": 7.87,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/integrations.make.health.ts": {
            "lines": 11,
            "tokens": 148,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/index.ts": {
            "lines": 65,
            "tokens": 559,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hitl-v2.ts": {
            "lines": 519,
            "tokens": 4778,
            "sources": 1,
            "clones": 18,
            "duplicatedLines": 280,
            "duplicatedTokens": 2199,
            "percentage": 53.95,
            "percentageTokens": 46.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hitl-ownership-sla.ts": {
            "lines": 632,
            "tokens": 6980,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 38,
            "duplicatedTokens": 274,
            "percentage": 6.01,
            "percentageTokens": 3.93,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hil.ts": {
            "lines": 67,
            "tokens": 1192,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hil.approvals.v2.ts": {
            "lines": 50,
            "tokens": 955,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hil.approvals.ts": {
            "lines": 35,
            "tokens": 469,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/hil.alias.ts": {
            "lines": 19,
            "tokens": 162,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/health.ts": {
            "lines": 245,
            "tokens": 2187,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/health-checks.ts": {
            "lines": 15,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/graph-wrappers.ts": {
            "lines": 561,
            "tokens": 4747,
            "sources": 1,
            "clones": 17,
            "duplicatedLines": 244,
            "duplicatedTokens": 2008,
            "percentage": 43.49,
            "percentageTokens": 42.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/graph-chaos-light.ts": {
            "lines": 215,
            "tokens": 1853,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/gdpr.ts": {
            "lines": 99,
            "tokens": 1331,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/gdpr-hitl.ts": {
            "lines": 617,
            "tokens": 4803,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/gdpr-compliance.ts": {
            "lines": 975,
            "tokens": 7723,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/fiscalidad-regional.ts": {
            "lines": 448,
            "tokens": 4637,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 27,
            "duplicatedTokens": 195,
            "percentage": 6.03,
            "percentageTokens": 4.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/fiscalidad-regional-ue.ts": {
            "lines": 532,
            "tokens": 4325,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 108,
            "percentage": 2.82,
            "percentageTokens": 2.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/finops-admin.ts": {
            "lines": 276,
            "tokens": 2087,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 64,
            "duplicatedTokens": 384,
            "percentage": 23.19,
            "percentageTokens": 18.4,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/external-integrations.ts": {
            "lines": 643,
            "tokens": 5117,
            "sources": 1,
            "clones": 28,
            "duplicatedLines": 408,
            "duplicatedTokens": 2654,
            "percentage": 63.45,
            "percentageTokens": 51.87,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/events.ts": {
            "lines": 137,
            "tokens": 1106,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 112,
            "percentage": 8.76,
            "percentageTokens": 10.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/email-marketing.ts": {
            "lines": 731,
            "tokens": 6491,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 147,
            "duplicatedTokens": 1429,
            "percentage": 20.11,
            "percentageTokens": 22.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/dunning-solid.ts": {
            "lines": 582,
            "tokens": 5289,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 80,
            "duplicatedTokens": 600,
            "percentage": 13.75,
            "percentageTokens": 11.34,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/dunning-3-toques.ts": {
            "lines": 483,
            "tokens": 3924,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 92,
            "duplicatedTokens": 704,
            "percentage": 19.05,
            "percentageTokens": 17.94,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/document-management.ts": {
            "lines": 564,
            "tokens": 4735,
            "sources": 1,
            "clones": 14,
            "duplicatedLines": 204,
            "duplicatedTokens": 1874,
            "percentage": 36.17,
            "percentageTokens": 39.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/dlg-grooming.ts": {
            "lines": 396,
            "tokens": 4201,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 67,
            "duplicatedTokens": 523,
            "percentage": 16.92,
            "percentageTokens": 12.45,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/deals.ts": {
            "lines": 662,
            "tokens": 5781,
            "sources": 1,
            "clones": 17,
            "duplicatedLines": 227,
            "duplicatedTokens": 1831,
            "percentage": 34.29,
            "percentageTokens": 31.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/deals-nba.ts": {
            "lines": 418,
            "tokens": 3427,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 68,
            "duplicatedTokens": 593,
            "percentage": 16.27,
            "percentageTokens": 17.3,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/database-optimization.ts": {
            "lines": 578,
            "tokens": 4809,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/data-analytics-dashboard.ts": {
            "lines": 622,
            "tokens": 5541,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 89,
            "duplicatedTokens": 1165,
            "percentage": 14.31,
            "percentageTokens": 21.03,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/customer-support.ts": {
            "lines": 555,
            "tokens": 4451,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 147,
            "duplicatedTokens": 1274,
            "percentage": 26.49,
            "percentageTokens": 28.62,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/csp-sri-banking.ts": {
            "lines": 474,
            "tokens": 4081,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 335,
            "percentage": 6.12,
            "percentageTokens": 8.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/content-management.ts": {
            "lines": 749,
            "tokens": 7108,
            "sources": 1,
            "clones": 19,
            "duplicatedLines": 309,
            "duplicatedTokens": 3255,
            "percentage": 41.26,
            "percentageTokens": 45.79,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/contacts.ts": {
            "lines": 338,
            "tokens": 2798,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 119,
            "duplicatedTokens": 1067,
            "percentage": 35.21,
            "percentageTokens": 38.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/contacts-simple.ts": {
            "lines": 118,
            "tokens": 986,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 58,
            "duplicatedTokens": 419,
            "percentage": 49.15,
            "percentageTokens": 42.49,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/contacts-dedupe.ts": {
            "lines": 340,
            "tokens": 3885,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/connection-pool.ts": {
            "lines": 740,
            "tokens": 6455,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 272,
            "percentage": 3.92,
            "percentageTokens": 4.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/configuration.ts": {
            "lines": 575,
            "tokens": 4259,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 89,
            "percentage": 2.43,
            "percentageTokens": 2.09,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/companies.ts": {
            "lines": 318,
            "tokens": 2552,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 129,
            "duplicatedTokens": 1143,
            "percentage": 40.57,
            "percentageTokens": 44.79,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/companies-taxonomy.ts": {
            "lines": 369,
            "tokens": 2802,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/companies-simple.ts": {
            "lines": 160,
            "tokens": 1327,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 82,
            "duplicatedTokens": 628,
            "percentage": 51.25,
            "percentageTokens": 47.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/cockpit.ts": {
            "lines": 548,
            "tokens": 5171,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/cockpit-integration.ts": {
            "lines": 353,
            "tokens": 3140,
            "sources": 1,
            "clones": 16,
            "duplicatedLines": 195,
            "duplicatedTokens": 1756,
            "percentage": 55.24,
            "percentageTokens": 55.92,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/cockpit-bff-live.ts": {
            "lines": 450,
            "tokens": 3445,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 88,
            "duplicatedTokens": 636,
            "percentage": 19.56,
            "percentageTokens": 18.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/centralized-logging.ts": {
            "lines": 782,
            "tokens": 7330,
            "sources": 1,
            "clones": 17,
            "duplicatedLines": 285,
            "duplicatedTokens": 2439,
            "percentage": 36.45,
            "percentageTokens": 33.27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/cache-warmup.ts": {
            "lines": 181,
            "tokens": 1427,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/blue-green-deployment.ts": {
            "lines": 363,
            "tokens": 3609,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 30,
            "duplicatedTokens": 216,
            "percentage": 8.26,
            "percentageTokens": 5.99,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/basic-ai.ts": {
            "lines": 16,
            "tokens": 171,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/backup-recovery.ts": {
            "lines": 644,
            "tokens": 5759,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 134,
            "duplicatedTokens": 1420,
            "percentage": 20.81,
            "percentageTokens": 24.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/azure-integration.ts": {
            "lines": 406,
            "tokens": 3081,
            "sources": 1,
            "clones": 14,
            "duplicatedLines": 309,
            "duplicatedTokens": 1920,
            "percentage": 76.11,
            "percentageTokens": 62.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/automated-testing.ts": {
            "lines": 621,
            "tokens": 5503,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 177,
            "duplicatedTokens": 1390,
            "percentage": 28.5,
            "percentageTokens": 25.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/automated-documentation.ts": {
            "lines": 596,
            "tokens": 5213,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 96,
            "duplicatedTokens": 790,
            "percentage": 16.11,
            "percentageTokens": 15.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/auth.ts": {
            "lines": 650,
            "tokens": 5311,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 70,
            "duplicatedTokens": 677,
            "percentage": 10.77,
            "percentageTokens": 12.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/audit-trail-crm-undo.ts": {
            "lines": 450,
            "tokens": 3986,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 30,
            "duplicatedTokens": 402,
            "percentage": 6.67,
            "percentageTokens": 10.09,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/antivirus-global.ts": {
            "lines": 512,
            "tokens": 4362,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 145,
            "percentage": 2.73,
            "percentageTokens": 3.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/analytics.ts": {
            "lines": 15,
            "tokens": 151,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-training.ts": {
            "lines": 619,
            "tokens": 4423,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 145,
            "duplicatedTokens": 893,
            "percentage": 23.42,
            "percentageTokens": 20.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-security-compliance.ts": {
            "lines": 510,
            "tokens": 4060,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 168,
            "duplicatedTokens": 1348,
            "percentage": 32.94,
            "percentageTokens": 33.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-performance-optimization.ts": {
            "lines": 624,
            "tokens": 4871,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 82,
            "duplicatedTokens": 607,
            "percentage": 13.14,
            "percentageTokens": 12.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-model-management.ts": {
            "lines": 708,
            "tokens": 5528,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 155,
            "duplicatedTokens": 952,
            "percentage": 21.89,
            "percentageTokens": 17.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-dashboard-consolidation.ts": {
            "lines": 324,
            "tokens": 2795,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 148,
            "duplicatedTokens": 1336,
            "percentage": 45.68,
            "percentageTokens": 47.8,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-cost-prediction.ts": {
            "lines": 768,
            "tokens": 5726,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 82,
            "duplicatedTokens": 639,
            "percentage": 10.68,
            "percentageTokens": 11.16,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-cost-optimization.ts": {
            "lines": 673,
            "tokens": 5392,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 82,
            "duplicatedTokens": 628,
            "percentage": 12.18,
            "percentageTokens": 11.65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-chat-advanced.ts": {
            "lines": 542,
            "tokens": 5074,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 95,
            "duplicatedTokens": 775,
            "percentage": 17.53,
            "percentageTokens": 15.27,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-budget-ux.ts": {
            "lines": 486,
            "tokens": 3923,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 28,
            "duplicatedTokens": 258,
            "percentage": 5.76,
            "percentageTokens": 6.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/ai-analytics.ts": {
            "lines": 751,
            "tokens": 2680,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 89,
            "duplicatedTokens": 220,
            "percentage": 11.85,
            "percentageTokens": 8.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/agents.ts": {
            "lines": 127,
            "tokens": 1660,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/agents-simple.ts": {
            "lines": 476,
            "tokens": 5494,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-security.ts": {
            "lines": 440,
            "tokens": 3554,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 74,
            "duplicatedTokens": 482,
            "percentage": 16.82,
            "percentageTokens": 13.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-security-framework.ts": {
            "lines": 531,
            "tokens": 3959,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-reporting.ts": {
            "lines": 471,
            "tokens": 3483,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 124,
            "duplicatedTokens": 942,
            "percentage": 26.33,
            "percentageTokens": 27.05,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-performance-monitoring.ts": {
            "lines": 450,
            "tokens": 3988,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 58,
            "duplicatedTokens": 391,
            "percentage": 12.89,
            "percentageTokens": 9.8,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-observability.ts": {
            "lines": 622,
            "tokens": 5145,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 178,
            "percentage": 3.22,
            "percentageTokens": 3.46,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-metrics-alerts.ts": {
            "lines": 708,
            "tokens": 6321,
            "sources": 1,
            "clones": 11,
            "duplicatedLines": 214,
            "duplicatedTokens": 1640,
            "percentage": 30.23,
            "percentageTokens": 25.95,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-features.ts": {
            "lines": 359,
            "tokens": 4059,
            "sources": 1,
            "clones": 28,
            "duplicatedLines": 280,
            "duplicatedTokens": 2948,
            "percentage": 77.99,
            "percentageTokens": 72.63,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-error-management.ts": {
            "lines": 558,
            "tokens": 6101,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 73,
            "duplicatedTokens": 555,
            "percentage": 13.08,
            "percentageTokens": 9.1,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-deployment-automation.ts": {
            "lines": 681,
            "tokens": 5915,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 72,
            "duplicatedTokens": 485,
            "percentage": 10.57,
            "percentageTokens": 8.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-configuration-management.ts": {
            "lines": 814,
            "tokens": 7241,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 151,
            "duplicatedTokens": 1498,
            "percentage": 18.55,
            "percentageTokens": 20.69,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-cicd.ts": {
            "lines": 632,
            "tokens": 4878,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 70,
            "duplicatedTokens": 516,
            "percentage": 11.08,
            "percentageTokens": 10.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-audit-compliance.ts": {
            "lines": 670,
            "tokens": 5372,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 244,
            "percentage": 5.37,
            "percentageTokens": 4.54,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/advanced-analytics.ts": {
            "lines": 256,
            "tokens": 2298,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/routes/admin.finops.ts": {
            "lines": 74,
            "tokens": 806,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/presentation/index.ts": {
            "lines": 55,
            "tokens": 450,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/openapi/spec.ts": {
            "lines": 579,
            "tokens": 4302,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 190,
            "percentage": 4.15,
            "percentageTokens": 4.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/validation.ts": {
            "lines": 301,
            "tokens": 2568,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/validation.middleware.ts": {
            "lines": 148,
            "tokens": 1465,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 244,
            "percentage": 24.32,
            "percentageTokens": 16.66,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/trace-propagation.middleware.ts": {
            "lines": 440,
            "tokens": 3031,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/security.ts": {
            "lines": 432,
            "tokens": 3535,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 19,
            "duplicatedTokens": 173,
            "percentage": 4.4,
            "percentageTokens": 4.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/security.middleware.ts": {
            "lines": 379,
            "tokens": 3025,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 19,
            "duplicatedTokens": 173,
            "percentage": 5.01,
            "percentageTokens": 5.72,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/security-enhanced.middleware.ts": {
            "lines": 528,
            "tokens": 3896,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 79,
            "duplicatedTokens": 369,
            "percentage": 14.96,
            "percentageTokens": 9.47,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/rls.ts": {
            "lines": 245,
            "tokens": 2012,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 126,
            "percentage": 4.49,
            "percentageTokens": 6.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/rls-tenant.middleware.ts": {
            "lines": 507,
            "tokens": 3877,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 126,
            "percentage": 2.17,
            "percentageTokens": 3.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/response-optimizer.ts": {
            "lines": 369,
            "tokens": 2844,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/raw-body.ts": {
            "lines": 10,
            "tokens": 192,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/rate-limiting.ts": {
            "lines": 219,
            "tokens": 1797,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/rate-limiter.ts": {
            "lines": 361,
            "tokens": 3004,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/rate-limit-org.ts": {
            "lines": 410,
            "tokens": 3370,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/performance.middleware.ts": {
            "lines": 326,
            "tokens": 2859,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/org.ts": {
            "lines": 39,
            "tokens": 439,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/observability.ts": {
            "lines": 206,
            "tokens": 2489,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/metrics.ts": {
            "lines": 324,
            "tokens": 2354,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/latency.ts": {
            "lines": 19,
            "tokens": 222,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/gateway.ts": {
            "lines": 286,
            "tokens": 2442,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 226,
            "percentage": 8.39,
            "percentageTokens": 9.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/finops.ts": {
            "lines": 23,
            "tokens": 392,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/finops.guard.ts": {
            "lines": 93,
            "tokens": 1351,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/finops-enforce.ts": {
            "lines": 284,
            "tokens": 2158,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/finops-enforce-v2.ts": {
            "lines": 535,
            "tokens": 4633,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/feature-flags.ts": {
            "lines": 233,
            "tokens": 1999,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/error-handler.ts": {
            "lines": 337,
            "tokens": 2514,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/correlation.ts": {
            "lines": 317,
            "tokens": 2211,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/chaos.ts": {
            "lines": 116,
            "tokens": 1289,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/auth.ts": {
            "lines": 66,
            "tokens": 683,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/aadRole.ts": {
            "lines": 10,
            "tokens": 211,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/middleware/aad.ts": {
            "lines": 27,
            "tokens": 464,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/workflows.ts": {
            "lines": 901,
            "tokens": 8611,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 35,
            "duplicatedTokens": 300,
            "percentage": 3.88,
            "percentageTokens": 3.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/workflows.service.ts": {
            "lines": 691,
            "tokens": 7161,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 120,
            "percentage": 1.59,
            "percentageTokens": 1.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/workflows-simple.ts": {
            "lines": 43,
            "tokens": 358,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/workers-integration.service.ts": {
            "lines": 495,
            "tokens": 3497,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/warmup.service.ts": {
            "lines": 554,
            "tokens": 4509,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/warmup-types.ts": {
            "lines": 563,
            "tokens": 3722,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/warmup-system.service.ts": {
            "lines": 540,
            "tokens": 4470,
            "sources": 1,
            "clones": 14,
            "duplicatedLines": 168,
            "duplicatedTokens": 1792,
            "percentage": 31.11,
            "percentageTokens": 40.09,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/validation-manager.service.ts": {
            "lines": 485,
            "tokens": 4950,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/tracing.ts": {
            "lines": 262,
            "tokens": 2643,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/trace.ts": {
            "lines": 47,
            "tokens": 868,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/threat-detection.service.ts": {
            "lines": 739,
            "tokens": 6537,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/testing-framework.ts": {
            "lines": 431,
            "tokens": 3248,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/swagger-config.ts": {
            "lines": 738,
            "tokens": 4113,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/supplier-scorecard.service.ts": {
            "lines": 992,
            "tokens": 9577,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 33,
            "duplicatedTokens": 315,
            "percentage": 3.33,
            "percentageTokens": 3.29,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/structured-logger.ts": {
            "lines": 186,
            "tokens": 2117,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/stripe-receipts.service.ts": {
            "lines": 598,
            "tokens": 5880,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/sse-manager.ts": {
            "lines": 272,
            "tokens": 2121,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/smart-cache.service.ts": {
            "lines": 550,
            "tokens": 4660,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/service-mesh.ts": {
            "lines": 333,
            "tokens": 2845,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/service-discovery.ts": {
            "lines": 396,
            "tokens": 3538,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/sepa.service.ts": {
            "lines": 891,
            "tokens": 8724,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/sepa-types.ts": {
            "lines": 67,
            "tokens": 473,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/sepa-robust.service.ts": {
            "lines": 794,
            "tokens": 7513,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 105,
            "percentage": 1.39,
            "percentageTokens": 1.4,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/sepa-parser.service.ts": {
            "lines": 225,
            "tokens": 2081,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 220,
            "percentage": 8.89,
            "percentageTokens": 10.57,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/semantic-search-crm.service.ts": {
            "lines": 884,
            "tokens": 8013,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security.ts": {
            "lines": 655,
            "tokens": 5409,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security.service.ts": {
            "lines": 472,
            "tokens": 3979,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security-types.ts": {
            "lines": 678,
            "tokens": 5177,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 168,
            "percentage": 2.95,
            "percentageTokens": 3.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security-manager.service.ts": {
            "lines": 624,
            "tokens": 5716,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security-enhanced.service.ts": {
            "lines": 53,
            "tokens": 504,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/security-compliance-enhanced.service.ts": {
            "lines": 894,
            "tokens": 7330,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rule-engine.service.ts": {
            "lines": 396,
            "tokens": 3483,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 90,
            "percentage": 2.78,
            "percentageTokens": 2.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls.ts": {
            "lines": 424,
            "tokens": 3018,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls-types.ts": {
            "lines": 331,
            "tokens": 2617,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls-policy-validator.service.ts": {
            "lines": 687,
            "tokens": 5496,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls-policy-generator.service.ts": {
            "lines": 716,
            "tokens": 5051,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 216,
            "duplicatedTokens": 1258,
            "percentage": 30.17,
            "percentageTokens": 24.91,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls-policy-deployer.service.ts": {
            "lines": 507,
            "tokens": 4456,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rls-cicd.service.ts": {
            "lines": 652,
            "tokens": 3858,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/resource-management.service.ts": {
            "lines": 72,
            "tokens": 698,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/request-tracing.service.ts": {
            "lines": 65,
            "tokens": 555,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/reporting-engine.service.ts": {
            "lines": 653,
            "tokens": 6418,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/reportes-mensuales.service.ts": {
            "lines": 866,
            "tokens": 7192,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/reconciliation.service.ts": {
            "lines": 204,
            "tokens": 1772,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/real-time-collaboration.ts": {
            "lines": 855,
            "tokens": 7498,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 168,
            "percentage": 2.81,
            "percentageTokens": 2.24,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rbac.service.ts": {
            "lines": 694,
            "tokens": 6155,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rbac-simple.ts": {
            "lines": 186,
            "tokens": 1806,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 148,
            "duplicatedTokens": 1283,
            "percentage": 79.57,
            "percentageTokens": 71.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rbac-granular.ts": {
            "lines": 379,
            "tokens": 3318,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 73,
            "duplicatedTokens": 570,
            "percentage": 19.26,
            "percentageTokens": 17.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rbac-basic.ts": {
            "lines": 174,
            "tokens": 1545,
            "sources": 1,
            "clones": 5,
            "duplicatedLines": 101,
            "duplicatedTokens": 919,
            "percentage": 58.05,
            "percentageTokens": 59.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rate-limiting.ts": {
            "lines": 328,
            "tokens": 3106,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/rate-limiting.service.ts": {
            "lines": 65,
            "tokens": 552,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/quiet-hours.service.ts": {
            "lines": 373,
            "tokens": 3282,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/quiet-hours-types.ts": {
            "lines": 484,
            "tokens": 3367,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/prompt-library.service.ts": {
            "lines": 165,
            "tokens": 1610,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/process-manager.ts": {
            "lines": 452,
            "tokens": 3790,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/performance-optimizer.ts": {
            "lines": 440,
            "tokens": 3541,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/performance-optimizer.service.ts": {
            "lines": 577,
            "tokens": 4124,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 51,
            "duplicatedTokens": 440,
            "percentage": 8.84,
            "percentageTokens": 10.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/performance-optimizer-v3.service.ts": {
            "lines": 501,
            "tokens": 3704,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 124,
            "percentage": 2.4,
            "percentageTokens": 3.35,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/performance-optimizer-v2.service.ts": {
            "lines": 686,
            "tokens": 4846,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/performance-optimization.service.ts": {
            "lines": 553,
            "tokens": 4948,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/oncall.service.ts": {
            "lines": 406,
            "tokens": 3455,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 436,
            "percentage": 5.42,
            "percentageTokens": 12.62,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/observability.ts": {
            "lines": 156,
            "tokens": 1587,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/notification-intelligence.service.ts": {
            "lines": 586,
            "tokens": 4891,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/monitoring.service.ts": {
            "lines": 706,
            "tokens": 6405,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/monitoring-alerts.service.ts": {
            "lines": 642,
            "tokens": 5093,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 24,
            "duplicatedTokens": 204,
            "percentage": 3.74,
            "percentageTokens": 4.01,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/metrics.ts": {
            "lines": 126,
            "tokens": 1026,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 43,
            "duplicatedTokens": 349,
            "percentage": 34.13,
            "percentageTokens": 34.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/metrics.old.ts": {
            "lines": 294,
            "tokens": 2892,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/metrics.new.ts": {
            "lines": 59,
            "tokens": 474,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 43,
            "duplicatedTokens": 349,
            "percentage": 72.88,
            "percentageTokens": 73.63,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/memory-manager.service.ts": {
            "lines": 677,
            "tokens": 5413,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 30,
            "duplicatedTokens": 536,
            "percentage": 4.43,
            "percentageTokens": 9.9,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/matching-engine.service.ts": {
            "lines": 241,
            "tokens": 2158,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 90,
            "percentage": 4.56,
            "percentageTokens": 4.17,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/make-quotas.service.ts": {
            "lines": 250,
            "tokens": 2272,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/logger.ts": {
            "lines": 488,
            "tokens": 4085,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/inventory.ts": {
            "lines": 964,
            "tokens": 9266,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/inventory-kardex.service.ts": {
            "lines": 947,
            "tokens": 9079,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 105,
            "percentage": 1.16,
            "percentageTokens": 1.16,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/interactions.service.ts": {
            "lines": 647,
            "tokens": 6613,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 98,
            "percentage": 2.16,
            "percentageTokens": 1.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/interactions-sas-av.service.ts": {
            "lines": 961,
            "tokens": 8858,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 31,
            "duplicatedTokens": 303,
            "percentage": 3.23,
            "percentageTokens": 3.42,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/intelligent-search.service.ts": {
            "lines": 511,
            "tokens": 4379,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/intelligent-reporting.service.ts": {
            "lines": 659,
            "tokens": 6105,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 224,
            "percentage": 3.95,
            "percentageTokens": 3.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/integrations.ts": {
            "lines": 217,
            "tokens": 1879,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/hitl-v2.service.ts": {
            "lines": 614,
            "tokens": 5641,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/health-monitor.ts": {
            "lines": 522,
            "tokens": 4716,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/health-modes.ts": {
            "lines": 209,
            "tokens": 1837,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/health-check.service.ts": {
            "lines": 328,
            "tokens": 2693,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/graph-wrappers.service.ts": {
            "lines": 622,
            "tokens": 4723,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/graph-chaos-light.service.ts": {
            "lines": 369,
            "tokens": 3036,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/graceful-shutdown.service.ts": {
            "lines": 60,
            "tokens": 486,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/gdpr-types.ts": {
            "lines": 185,
            "tokens": 1436,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/gdpr-export.service.ts": {
            "lines": 416,
            "tokens": 3569,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/gdpr-erase.service.ts": {
            "lines": 423,
            "tokens": 3838,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/gdpr-audit.service.ts": {
            "lines": 435,
            "tokens": 3580,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/gateway.ts": {
            "lines": 498,
            "tokens": 4488,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/fiscalidad-regional.service.ts": {
            "lines": 821,
            "tokens": 7125,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/fiscalidad-regional-ue.service.ts": {
            "lines": 614,
            "tokens": 5209,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/finops.ts": {
            "lines": 565,
            "tokens": 5609,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/finops-types.ts": {
            "lines": 439,
            "tokens": 3596,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/executive-dashboard.service.ts": {
            "lines": 64,
            "tokens": 606,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/events.ts": {
            "lines": 531,
            "tokens": 4577,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/escalation.service.ts": {
            "lines": 461,
            "tokens": 3696,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/errors.ts": {
            "lines": 126,
            "tokens": 1415,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/error-recovery.service.ts": {
            "lines": 56,
            "tokens": 581,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/error-manager.service.ts": {
            "lines": 537,
            "tokens": 4743,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/error-handler.ts": {
            "lines": 248,
            "tokens": 2027,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/error-handler.service.ts": {
            "lines": 445,
            "tokens": 3428,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/dunning-solid.service.ts": {
            "lines": 707,
            "tokens": 6245,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/dunning-3-toques.service.ts": {
            "lines": 565,
            "tokens": 4859,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/distributed-cache.ts": {
            "lines": 532,
            "tokens": 4017,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/deals.service.ts": {
            "lines": 696,
            "tokens": 6976,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 186,
            "percentage": 3.74,
            "percentageTokens": 2.67,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/deals-nba.service.ts": {
            "lines": 554,
            "tokens": 5183,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 26,
            "duplicatedTokens": 267,
            "percentage": 4.69,
            "percentageTokens": 5.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/database.ts": {
            "lines": 89,
            "tokens": 770,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/database-pool.ts": {
            "lines": 573,
            "tokens": 4994,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/data-validator.ts": {
            "lines": 598,
            "tokens": 4673,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/data-encryption.service.ts": {
            "lines": 66,
            "tokens": 636,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/data-analytics-dashboard.service.ts": {
            "lines": 984,
            "tokens": 9502,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 75,
            "duplicatedTokens": 1076,
            "percentage": 7.62,
            "percentageTokens": 11.32,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/csp-sri-banking.service.ts": {
            "lines": 706,
            "tokens": 6752,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 29,
            "duplicatedTokens": 335,
            "percentage": 4.11,
            "percentageTokens": 4.96,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cost-tracker.service.ts": {
            "lines": 545,
            "tokens": 5405,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cost-optimizer.service.ts": {
            "lines": 615,
            "tokens": 5593,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/contacts-dedupe.service.ts": {
            "lines": 652,
            "tokens": 5997,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 20,
            "duplicatedTokens": 270,
            "percentage": 3.07,
            "percentageTokens": 4.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/connection-pool.service.ts": {
            "lines": 838,
            "tokens": 6773,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/configuration.ts": {
            "lines": 513,
            "tokens": 4543,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/configuration.service.ts": {
            "lines": 479,
            "tokens": 4613,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 13,
            "duplicatedTokens": 242,
            "percentage": 2.71,
            "percentageTokens": 5.25,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/config-validation.service.ts": {
            "lines": 54,
            "tokens": 529,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/comprehensive-audit.service.ts": {
            "lines": 854,
            "tokens": 8126,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/compliance-management.service.ts": {
            "lines": 649,
            "tokens": 5832,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/companies-taxonomy.service.ts": {
            "lines": 195,
            "tokens": 1811,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/clients.ts": {
            "lines": 20,
            "tokens": 288,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/circuit-breaker.service.ts": {
            "lines": 285,
            "tokens": 2197,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/centralized-logging.service.ts": {
            "lines": 975,
            "tokens": 9806,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 123,
            "duplicatedTokens": 1394,
            "percentage": 12.62,
            "percentageTokens": 14.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cache.ts": {
            "lines": 372,
            "tokens": 3244,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cache.service.ts": {
            "lines": 407,
            "tokens": 3398,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 104,
            "percentage": 2.95,
            "percentageTokens": 3.06,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cache-warmup.service.ts": {
            "lines": 286,
            "tokens": 2353,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/cache-manager.service.ts": {
            "lines": 489,
            "tokens": 3997,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/business-intelligence.service.ts": {
            "lines": 739,
            "tokens": 6738,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/budget-manager.service.ts": {
            "lines": 573,
            "tokens": 5559,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/blue-green-deployment.service.ts": {
            "lines": 858,
            "tokens": 7565,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/backup-recovery.service.ts": {
            "lines": 981,
            "tokens": 9242,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 121,
            "duplicatedTokens": 1178,
            "percentage": 12.33,
            "percentageTokens": 12.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/backup-recovery-automated.service.ts": {
            "lines": 851,
            "tokens": 7222,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/automated-testing.service.ts": {
            "lines": 744,
            "tokens": 7518,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/auth.ts": {
            "lines": 126,
            "tokens": 1021,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/auth.service.ts": {
            "lines": 619,
            "tokens": 5011,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/audit-trail-crm-undo.service.ts": {
            "lines": 604,
            "tokens": 4946,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 116,
            "percentage": 1.66,
            "percentageTokens": 2.35,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/api-versioning.service.ts": {
            "lines": 539,
            "tokens": 4268,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/api-gateway.service.ts": {
            "lines": 543,
            "tokens": 3998,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/api-gateway-enhanced.service.ts": {
            "lines": 733,
            "tokens": 6210,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/antivirus-global.service.ts": {
            "lines": 554,
            "tokens": 4647,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 14,
            "duplicatedTokens": 145,
            "percentage": 2.53,
            "percentageTokens": 3.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/analytics.ts": {
            "lines": 888,
            "tokens": 7638,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/analytics-types.ts": {
            "lines": 547,
            "tokens": 3736,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/analytics-schemas.ts": {
            "lines": 89,
            "tokens": 796,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/alerts.ts": {
            "lines": 496,
            "tokens": 4458,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 112,
            "percentage": 2.22,
            "percentageTokens": 2.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/alerting-system.ts": {
            "lines": 591,
            "tokens": 4362,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 72,
            "duplicatedTokens": 418,
            "percentage": 12.18,
            "percentageTokens": 9.58,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/ai-router.ts": {
            "lines": 42,
            "tokens": 303,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/ai-ml-types.ts": {
            "lines": 401,
            "tokens": 2947,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/ai-chat-advanced.service.ts": {
            "lines": 812,
            "tokens": 7720,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/ai-budget-ux.service.ts": {
            "lines": 680,
            "tokens": 6467,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/agent-runtime.service.ts": {
            "lines": 829,
            "tokens": 6973,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 420,
            "percentage": 4.34,
            "percentageTokens": 6.02,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-search.ts": {
            "lines": 684,
            "tokens": 6403,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-rate-limiter.ts": {
            "lines": 428,
            "tokens": 3317,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-performance-monitoring.service.ts": {
            "lines": 850,
            "tokens": 8230,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-monitoring-alerts.service.ts": {
            "lines": 793,
            "tokens": 6695,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 124,
            "percentage": 1.51,
            "percentageTokens": 1.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-metrics-alerts.service.ts": {
            "lines": 895,
            "tokens": 9173,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 11,
            "duplicatedTokens": 112,
            "percentage": 1.23,
            "percentageTokens": 1.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-configuration-management.service.ts": {
            "lines": 874,
            "tokens": 8551,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 44,
            "duplicatedTokens": 775,
            "percentage": 5.03,
            "percentageTokens": 9.06,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-cache.ts": {
            "lines": 224,
            "tokens": 1803,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-audit-compliance.service.ts": {
            "lines": 654,
            "tokens": 6347,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 181,
            "percentage": 1.83,
            "percentageTokens": 2.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-analytics.ts": {
            "lines": 380,
            "tokens": 4046,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 12,
            "duplicatedTokens": 181,
            "percentage": 3.16,
            "percentageTokens": 4.47,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/advanced-analytics.service.ts": {
            "lines": 707,
            "tokens": 7018,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/jobs/hil-autocancel.ts": {
            "lines": 26,
            "tokens": 414,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/hil/service.ts": {
            "lines": 14,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/finops/estimator.ts": {
            "lines": 8,
            "tokens": 165,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/domain/index.ts": {
            "lines": 68,
            "tokens": 981,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/db/migrations.ts": {
            "lines": 200,
            "tokens": 1907,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/db/memory.repo.ts": {
            "lines": 160,
            "tokens": 1817,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 23,
            "duplicatedTokens": 258,
            "percentage": 14.38,
            "percentageTokens": 14.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/cron/hil-expirer.ts": {
            "lines": 17,
            "tokens": 182,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/controllers/memory.controller.ts": {
            "lines": 119,
            "tokens": 956,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 46,
            "duplicatedTokens": 320,
            "percentage": 38.66,
            "percentageTokens": 33.47,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/controllers/advanced-features.controller.ts": {
            "lines": 666,
            "tokens": 6062,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/config/environment.ts": {
            "lines": 33,
            "tokens": 266,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/config/env.ts": {
            "lines": 133,
            "tokens": 1217,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/config/agents.master.ts": {
            "lines": 43,
            "tokens": 501,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/application/index.ts": {
            "lines": 63,
            "tokens": 809,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/index.ts": {
            "lines": 572,
            "tokens": 5882,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/src/bootstrap.example.ts": {
            "lines": 220,
            "tokens": 1604,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 89,
            "percentage": 4.55,
            "percentageTokens": 5.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/web/types/shims.d.ts": {
            "lines": 11,
            "tokens": 53,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/web/types/db-shim.d.ts": {
            "lines": 12,
            "tokens": 76,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/voice/src/voice-recognition.ts": {
            "lines": 166,
            "tokens": 1224,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-neura-comet/src/server.ts": {
            "lines": 77,
            "tokens": 570,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 51,
            "duplicatedTokens": 406,
            "percentage": 66.23,
            "percentageTokens": 71.23,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api-agents-make/src/server.ts": {
            "lines": 76,
            "tokens": 583,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 51,
            "duplicatedTokens": 406,
            "percentage": 67.11,
            "percentageTokens": 69.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/tests/setup-e2e.ts": {
            "lines": 80,
            "tokens": 469,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/test-e2e-advanced.ts": {
            "lines": 305,
            "tokens": 2196,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/test-all-endpoints.ts": {
            "lines": 235,
            "tokens": 2043,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/openapi.ts": {
            "lines": 101,
            "tokens": 622,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/index.final.ts": {
            "lines": 859,
            "tokens": 7172,
            "sources": 1,
            "clones": 20,
            "duplicatedLines": 520,
            "duplicatedTokens": 4704,
            "percentage": 60.54,
            "percentageTokens": 65.59,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/index.expanded.ts": {
            "lines": 273,
            "tokens": 2059,
            "sources": 1,
            "clones": 14,
            "duplicatedLines": 849,
            "duplicatedTokens": 6765,
            "percentage": 310.99,
            "percentageTokens": 328.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/bootstrap.example.ts": {
            "lines": 153,
            "tokens": 961,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 89,
            "percentage": 6.54,
            "percentageTokens": 9.26,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/scripts/smoke-pr-42.ts": {
            "lines": 19,
            "tokens": 250,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/scripts/rollback.ts": {
            "lines": 81,
            "tokens": 779,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/scripts/openapi.ts": {
            "lines": 620,
            "tokens": 4090,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 33,
            "duplicatedTokens": 267,
            "percentage": 5.32,
            "percentageTokens": 6.53,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/scripts/generate-openapi.ts": {
            "lines": 590,
            "tokens": 5143,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 105,
            "duplicatedTokens": 1193,
            "percentage": 17.8,
            "percentageTokens": 23.2,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/prisma/seed.ts": {
            "lines": 678,
            "tokens": 6806,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/prisma/seed.improved.ts": {
            "lines": 574,
            "tokens": 5745,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.working.backup.ts": {
            "lines": 620,
            "tokens": 4888,
            "sources": 1,
            "clones": 28,
            "duplicatedLines": 710,
            "duplicatedTokens": 5555,
            "percentage": 114.52,
            "percentageTokens": 113.65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.restored.backup.ts": {
            "lines": 166,
            "tokens": 1386,
            "sources": 1,
            "clones": 8,
            "duplicatedLines": 247,
            "duplicatedTokens": 2137,
            "percentage": 148.8,
            "percentageTokens": 154.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.minimal.ts": {
            "lines": 136,
            "tokens": 1222,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 132,
            "duplicatedTokens": 1192,
            "percentage": 97.06,
            "percentageTokens": 97.55,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.mega.ts": {
            "lines": 530,
            "tokens": 4149,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 555,
            "duplicatedTokens": 4181,
            "percentage": 104.72,
            "percentageTokens": 100.77,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.intermediate.backup.ts": {
            "lines": 323,
            "tokens": 2598,
            "sources": 1,
            "clones": 9,
            "duplicatedLines": 315,
            "duplicatedTokens": 2540,
            "percentage": 97.52,
            "percentageTokens": 97.77,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.expanded.ts": {
            "lines": 273,
            "tokens": 2059,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 273,
            "duplicatedTokens": 2059,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/backup/index.expanded.backup.ts": {
            "lines": 273,
            "tokens": 2059,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 273,
            "duplicatedTokens": 2059,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/web/next-env.d.ts": {
            "lines": 9,
            "tokens": 42,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/vitest.e2e.config.ts": {
            "lines": 34,
            "tokens": 263,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 238945,
          "tokens": 2077848,
          "sources": 662,
          "clones": 756,
          "duplicatedLines": 13482,
          "duplicatedTokens": 120815,
          "percentage": 5.64,
          "percentageTokens": 5.81,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "javascript": {
        "sources": {
          "packages/shared/src/security/index.js": {
            "lines": 152,
            "tokens": 1367,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/metrics/index.js": {
            "lines": 315,
            "tokens": 2940,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/logging/index.js": {
            "lines": 116,
            "tokens": 924,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/providers.js": {
            "lines": 542,
            "tokens": 4312,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/enhanced-router.js": {
            "lines": 483,
            "tokens": 4173,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/src/ai/cost-guardrails.js": {
            "lines": 286,
            "tokens": 2852,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/src/connector/neuraRouter.js": {
            "lines": 40,
            "tokens": 495,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/src/connector/makeConnector.js": {
            "lines": 28,
            "tokens": 361,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/agents/src/connector/logger.js": {
            "lines": 15,
            "tokens": 220,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/shared/eslint.config.js": {
            "lines": 63,
            "tokens": 412,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 42,
            "duplicatedTokens": 275,
            "percentage": 66.67,
            "percentageTokens": 66.75,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "packages/db/eslint.config.js": {
            "lines": 30,
            "tokens": 195,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 36,
            "duplicatedTokens": 248,
            "percentage": 120,
            "percentageTokens": 127.18,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/cockpit.api/src/index.js": {
            "lines": 9,
            "tokens": 96,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/cockpit.api/src/app.js": {
            "lines": 42,
            "tokens": 488,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 183,
            "percentage": 35.71,
            "percentageTokens": 37.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/cockpit.api/src/app-otel-snippet.js": {
            "lines": 15,
            "tokens": 183,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 15,
            "duplicatedTokens": 183,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/redis.service.js": {
            "lines": 23,
            "tokens": 154,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/lib/database.service.js": {
            "lines": 14,
            "tokens": 92,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/src/hil/service.js": {
            "lines": 10,
            "tokens": 91,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/tests/stress-test.js": {
            "lines": 173,
            "tokens": 1711,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/tests/load-test.js": {
            "lines": 157,
            "tokens": 1575,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/scripts/optimize.js": {
            "lines": 352,
            "tokens": 2850,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/scripts/monitor.js": {
            "lines": 358,
            "tokens": 3381,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/workers/eslint.config.js": {
            "lines": 31,
            "tokens": 202,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 18,
            "duplicatedTokens": 124,
            "percentage": 58.06,
            "percentageTokens": 61.39,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/web/tailwind.config.js": {
            "lines": 11,
            "tokens": 57,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "apps/api/eslint.config.js": {
            "lines": 61,
            "tokens": 397,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 60,
            "duplicatedTokens": 399,
            "percentage": 98.36,
            "percentageTokens": 100.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 3326,
          "tokens": 29528,
          "sources": 24,
          "clones": 5,
          "duplicatedLines": 93,
          "duplicatedTokens": 706,
          "percentage": 2.8,
          "percentageTokens": 2.39,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 242271,
      "tokens": 2107376,
      "sources": 686,
      "clones": 761,
      "duplicatedLines": 13575,
      "duplicatedTokens": 121521,
      "percentage": 5.6,
      "percentageTokens": 5.77,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "> = new Map();\n  private cache: Map<string, TemplateRenderResult> = new Map();\n\n  constructor(config: TemplateEngineConfig) {\n    this.config = config;\n    this.initializeDefaultTemplates();\n  }\n\n  async render(request: TemplateRenderRequest): Promise<TemplateRenderResult> {\n    const startTime = Date.now();\n    const cacheKey = this.generateCacheKey(request);\n\n    try {/\n      // Check cache first\n      if (this.config.cacheEnabled && this.cache.has(cacheKey)) {\n        const cached = this.cache.get(cacheKey)!;\n        return",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 459,
        "end": 475,
        "startLoc": {
          "line": 459,
          "column": 9,
          "position": 4181
        },
        "endLoc": {
          "line": 475,
          "column": 7,
          "position": 4350
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 119,
        "end": 135,
        "startLoc": {
          "line": 119,
          "column": 4,
          "position": 1099
        },
        "endLoc": {
          "line": 135,
          "column": 7,
          "position": 1268
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\n        return {\n          ...cached,\n          metadata: {\n            ...cached.metadata,\n            cacheHit: true,\n            renderTime: Date.now() - startTime\n          }\n        };\n      }\n/\n      // Get template\n      const template = await this.getTemplate(request.templateId, request.language);\n      if (!template) {\n        throw new Error(`Template not found: ${request.templateId}`);\n      }\n/\n      // Prepare context",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 474,
        "end": 491,
        "startLoc": {
          "line": 474,
          "column": 2,
          "position": 4347
        },
        "endLoc": {
          "line": 491,
          "column": 19,
          "position": 4465
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 139,
        "end": 156,
        "startLoc": {
          "line": 139,
          "column": 2,
          "position": 1304
        },
        "endLoc": {
          "line": 156,
          "column": 34,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n          renderTime: Date.now() - startTime,\n          cacheHit: false,\n          warnings: []\n        }\n      };\n/\n      // Cache result\n      if (this.config.cacheEnabled) {\n        this.cache.set(cacheKey, result);\n        this.cleanupCache();\n      }\n\n      return",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 508,
        "end": 521,
        "startLoc": {
          "line": 508,
          "column": 11,
          "position": 4615
        },
        "endLoc": {
          "line": 521,
          "column": 7,
          "position": 4698
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 188,
        "end": 201,
        "startLoc": {
          "line": 188,
          "column": 13,
          "position": 1719
        },
        "endLoc": {
          "line": 201,
          "column": 7,
          "position": 1802
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ", {\n        templateId: request.templateId,\n        error: (error as Error).message\n      });\n      throw error;\n    }\n  }\n\n  async validateTemplate(template: Template): Promise<{ valid: boolean; errors: string[] }> {\n    const errors: string[] = [];\n\n    try {/\n      // Basic validation\n      if (!template.name || !template.body) {\n        errors.push('Template name and body are required');\n      }\n\n      if (!this.config.supportedLanguages.includes(template.language)) {\n        errors.push(`Unsupported language: ${template.language}`);\n      }\n/\n      // Mustache syntax validation",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 524,
        "end": 545,
        "startLoc": {
          "line": 524,
          "column": 34,
          "position": 4721
        },
        "endLoc": {
          "line": 545,
          "column": 30,
          "position": 4900
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 211,
        "end": 232,
        "startLoc": {
          "line": 211,
          "column": 25,
          "position": 1876
        },
        "endLoc": {
          "line": 232,
          "column": 32,
          "position": 2055
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": "}`);\n      }\n\n      return {\n        valid: errors.length === 0,\n        errors\n      };\n\n    } catch (error) {\n      return {\n        valid: false,\n        errors: [`Validation error: ${(error as Error).message}`]\n      };\n    }\n  }\n\n  async getTemplate(templateId: string, language?: string): Promise<Template | null> {\n    const lang = language || this.config.defaultLanguage;\n    const key = `${templateId}_${lang}`;\n    return this.templates.get(key) || null;\n  }\n\n  async listTemplates(type?: string, language?: string): Promise<Template[]> {\n    let templates = Array.from(this.templates.values());\n\n    if (type) {\n      templates = templates.filter(t => t.type === type);\n    }\n\n    if (language) {\n      templates = templates.filter(t => t.language === language);\n    }\n\n    return templates.filter(t => t.isActive);\n  }\n\n  async clearCache(): Promise<void> {\n    this.cache.clear();\n    logger",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 549,
        "end": 587,
        "startLoc": {
          "line": 549,
          "column": 8,
          "position": 4947
        },
        "endLoc": {
          "line": 587,
          "column": 7,
          "position": 5291
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 245,
        "end": 283,
        "startLoc": {
          "line": 245,
          "column": 2,
          "position": 2198
        },
        "endLoc": {
          "line": 283,
          "column": 5,
          "position": 2542
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", String(item));\n        \n        if (typeof item === 'object') {\n          for (const [key, value] of Object.entries(item)) {\n            const regex = new RegExp(`\\\\{\\\\{${key}\\\\}\\\\}`, 'g');\n            itemContent = itemContent.replace(regex, String(value || ''));\n          }\n        }\n        \n        return itemContent;\n      }).join('');\n    });\n\n    return result;\n  }\n\n  private",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 617,
        "end": 633,
        "startLoc": {
          "line": 617,
          "column": 14,
          "position": 5741
        },
        "endLoc": {
          "line": 633,
          "column": 8,
          "position": 5878
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 313,
        "end": 327,
        "startLoc": {
          "line": 313,
          "column": 16,
          "position": 2956
        },
        "endLoc": {
          "line": 327,
          "column": 2,
          "position": 3090
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\n  }\n\n  private generateCacheKey(request: TemplateRenderRequest): string {\n    const variablesHash = JSON.stringify(request.variables);\n    const contextHash = JSON.stringify(request.context || {});\n    return `${request.templateId}_${request.language || this.config.defaultLanguage}_${variablesHash}_${contextHash}`;\n  }\n\n  private cleanupCache(): void {\n    if (this.cache.size > this.config.cacheSize) {\n      const entries = Array.from(this.cache.entries());\n      const toDelete = entries.slice(0, entries.length - this.config.cacheSize);\n      toDelete.forEach(([key]) => this.cache.delete(key));\n    }\n  }\n\n  private initializeDefaultTemplates(): void {/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 630,
        "end": 647,
        "startLoc": {
          "line": 630,
          "column": 7,
          "position": 5871
        },
        "endLoc": {
          "line": 647,
          "column": 2,
          "position": 6093
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 362,
        "end": 380,
        "startLoc": {
          "line": 362,
          "column": 2,
          "position": 3377
        },
        "endLoc": {
          "line": 380,
          "column": 6,
          "position": 3601
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "const defaultTemplates: Omit<Template, 'id' | 'createdAt' | 'updatedAt'>[] = [;\n      {\n        name: 'Welcome Email',\n        description: 'Welcome email template',\n        type: 'email',\n        language: 'es',\n        subject: 'Bienvenido a {{app_name}}',\n        body: 'Hola {{user_name}}, bienvenido a {{app_name}}! Estamos emocionados de tenerte a bordo.',\n        variables: ['app_name', 'user_name'],\n        isActive: true,\n        version: 1\n      }\n    ]",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 649,
        "end": 661,
        "startLoc": {
          "line": 649,
          "column": 5,
          "position": 6099
        },
        "endLoc": {
          "line": 661,
          "column": 2,
          "position": 6201
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 380,
        "end": 391,
        "startLoc": {
          "line": 380,
          "column": 5,
          "position": 3601
        },
        "endLoc": {
          "line": 391,
          "column": 2,
          "position": 3701
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "],\n        isActive: true,\n        version: 1\n      }\n    ];\n\n    for (const template of defaultTemplates) {\n      const id = `template_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      const now = new Date();\n      \n      const newTemplate: Template = {;\n        ...template,\n        id,\n        createdAt: now,\n        updatedAt: now\n      };\n\n      const key = `${id}_${template.language}`;\n      this.templates.set(key, newTemplate);\n    }\n  }\n}\n/\n// ============================================================================/\n// TEMPLATE ENGINE FACTORY/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 657,
        "end": 681,
        "startLoc": {
          "line": 657,
          "column": 12,
          "position": 6181
        },
        "endLoc": {
          "line": 681,
          "column": 28,
          "position": 6361
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\templates\\template-engine.ts",
        "start": 430,
        "end": 454,
        "startLoc": {
          "line": 430,
          "column": 16,
          "position": 3962
        },
        "endLoc": {
          "line": 454,
          "column": 20,
          "position": 4142
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.config",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 306,
        "end": 319,
        "startLoc": {
          "line": 306,
          "column": 3,
          "position": 2650
        },
        "endLoc": {
          "line": 319,
          "column": 7,
          "position": 2798
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 177,
        "end": 190,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 1536
        },
        "endLoc": {
          "line": 190,
          "column": 11,
          "position": 1684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.apiKey",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 438,
        "end": 451,
        "startLoc": {
          "line": 438,
          "column": 3,
          "position": 3862
        },
        "endLoc": {
          "line": 451,
          "column": 7,
          "position": 4010
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 177,
        "end": 190,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 1536
        },
        "endLoc": {
          "line": 190,
          "column": 11,
          "position": 1684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.serverKey",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\push.provider.ts",
        "start": 247,
        "end": 260,
        "startLoc": {
          "line": 247,
          "column": 4,
          "position": 2242
        },
        "endLoc": {
          "line": 260,
          "column": 10,
          "position": 2390
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 177,
        "end": 190,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 1536
        },
        "endLoc": {
          "line": 190,
          "column": 11,
          "position": 1684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.vapidPublicKey",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\push.provider.ts",
        "start": 391,
        "end": 404,
        "startLoc": {
          "line": 391,
          "column": 3,
          "position": 3577
        },
        "endLoc": {
          "line": 404,
          "column": 15,
          "position": 3725
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 177,
        "end": 190,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 1536
        },
        "endLoc": {
          "line": 190,
          "column": 11,
          "position": 1684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "[] = [];\n    /\n    // Process in batches of 20\n    const batchSize = 20;\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.privateKey",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\push.provider.ts",
        "start": 531,
        "end": 547,
        "startLoc": {
          "line": 531,
          "column": 11,
          "position": 4867
        },
        "endLoc": {
          "line": 547,
          "column": 11,
          "position": 5038
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 303,
        "end": 190,
        "startLoc": {
          "line": 303,
          "column": 10,
          "position": 2627
        },
        "endLoc": {
          "line": 190,
          "column": 11,
          "position": 1684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "[] = [];\n    /\n    // Process in batches of 10\n    const batchSize = 10;\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\email.provider.ts",
        "start": 208,
        "end": 223,
        "startLoc": {
          "line": 208,
          "column": 12,
          "position": 1991
        },
        "endLoc": {
          "line": 223,
          "column": 2,
          "position": 2153
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 174,
        "end": 190,
        "startLoc": {
          "line": 174,
          "column": 10,
          "position": 1513
        },
        "endLoc": {
          "line": 190,
          "column": 7,
          "position": 1677
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\n    } catch (error) {\n      return false;\n    }\n  }\n\n  async getQuota(): Promise<{ used: number; limit: number; resetAt: Date }> {/\n    // Simulate quota check\n    return {\n      used: Math.floor(Math.random() * 1000),\n      limit: 10000,\n      resetAt: new Date(Date.now() + 24 * 60 * 60 * 1000)\n    };\n  }\n}\n/\n// ============================================================================/\n// AWS SES PROVIDER/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\email.provider.ts",
        "start": 225,
        "end": 242,
        "startLoc": {
          "line": 225,
          "column": 2,
          "position": 2170
        },
        "endLoc": {
          "line": 242,
          "column": 21,
          "position": 2310
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\sms.provider.ts",
        "start": 190,
        "end": 277,
        "startLoc": {
          "line": 190,
          "column": 2,
          "position": 1692
        },
        "endLoc": {
          "line": 277,
          "column": 22,
          "position": 2538
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "const batchSize = 50;\n    for (let i = 0; i < messages.length; i += batchSize) {\n      const batch = messages.slice(i, i + batchSize);\n      const batchPromises = batch.map(message => this.send(message));\n      const batchResults = await Promise.all(batchPromises);\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  async validateConfig(): Promise<boolean> {\n    try {\n      return !!(this.config.secretKey",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\email.provider.ts",
        "start": 329,
        "end": 342,
        "startLoc": {
          "line": 329,
          "column": 5,
          "position": 3082
        },
        "endLoc": {
          "line": 342,
          "column": 10,
          "position": 3239
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\push.provider.ts",
        "start": 391,
        "end": 319,
        "startLoc": {
          "line": 391,
          "column": 5,
          "position": 3570
        },
        "endLoc": {
          "line": 319,
          "column": 7,
          "position": 2800
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "implements IEmailProvider {;\n  private config: EmailProviderConfig;\n\n  constructor(config: EmailProviderConfig) {\n    this.config = config;\n  }\n\n  async send(message: EmailMessage): Promise<EmailResult> {\n    try {\n      if (this.config.testMode) {\n        logger.info('SMTP email sent (test mode)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\email.provider.ts",
        "start": 362,
        "end": 372,
        "startLoc": {
          "line": 362,
          "column": 2,
          "position": 3400
        },
        "endLoc": {
          "line": 372,
          "column": 30,
          "position": 3484
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\notifications\\providers\\email.provider.ts",
        "start": 245,
        "end": 255,
        "startLoc": {
          "line": 245,
          "column": 2,
          "position": 2321
        },
        "endLoc": {
          "line": 255,
          "column": 33,
          "position": 2405
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "// For now, return a mock healthy status\n    return {\n      status: 'healthy',\n      responseTime: 0,\n      lastCheck: new Date().toISOString(),\n    };\n  } catch (error) {\n    return {\n      status: 'unhealthy',\n      responseTime: 0,\n      lastCheck: new Date().toISOString(),\n      error: error instanceof Error ? error.message : 'Redis connection failed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\health\\index.ts",
        "start": 150,
        "end": 161,
        "startLoc": {
          "line": 150,
          "column": 5,
          "position": 1329
        },
        "endLoc": {
          "line": 161,
          "column": 26,
          "position": 1432
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\health\\index.ts",
        "start": 131,
        "end": 142,
        "startLoc": {
          "line": 131,
          "column": 5,
          "position": 1184
        },
        "endLoc": {
          "line": 142,
          "column": 29,
          "position": 1287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "// For now, return a mock healthy status\n    return {\n      status: 'healthy',\n      responseTime: 0,\n      lastCheck: new Date().toISOString(),\n    };\n  } catch (error) {\n    return {\n      status: 'unhealthy',\n      responseTime: 0,\n      lastCheck: new Date().toISOString(),\n      error: error instanceof Error ? error.message : 'Azure OpenAI connection failed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\health\\index.ts",
        "start": 169,
        "end": 180,
        "startLoc": {
          "line": 169,
          "column": 5,
          "position": 1474
        },
        "endLoc": {
          "line": 180,
          "column": 33,
          "position": 1577
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\health\\index.ts",
        "start": 131,
        "end": 142,
        "startLoc": {
          "line": 131,
          "column": 5,
          "position": 1184
        },
        "endLoc": {
          "line": 142,
          "column": 29,
          "position": 1287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ";\n  name: string;\n  industry?: string;\n  size?: 'startup' | 'small' | 'medium' | 'large' | 'enterprise';\n  website?: string;\n  phone?: string;\n  email?: string;\n  address?: string;\n  country?: string;\n  vat_number?: string;\n  tags?: string[];\n  notes?: string;\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 104,
        "end": 116,
        "startLoc": {
          "line": 104,
          "column": 2,
          "position": 784
        },
        "endLoc": {
          "line": 116,
          "column": 2,
          "position": 891
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 20,
        "end": 32,
        "startLoc": {
          "line": 20,
          "column": 7,
          "position": 138
        },
        "endLoc": {
          "line": 32,
          "column": 11,
          "position": 246
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ": string;\n  industry?: string;\n  size?: 'startup' | 'small' | 'medium' | 'large' | 'enterprise';\n  website?: string;\n  phone?: string;\n  email?: string;\n  address?: string;\n  country?: string;\n  vat_number?: string;\n  tags?: string[];\n  notes?: string;\n}\n\nexport interface CreateDealInput",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 119,
        "end": 132,
        "startLoc": {
          "line": 119,
          "column": 2,
          "position": 906
        },
        "endLoc": {
          "line": 132,
          "column": 16,
          "position": 1016
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 21,
        "end": 118,
        "startLoc": {
          "line": 21,
          "column": 5,
          "position": 142
        },
        "endLoc": {
          "line": 118,
          "column": 19,
          "position": 898
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n  title: string;\n  description?: string;\n  value: number;\n  currency: string;\n  stage: 'lead' | 'qualified' | 'proposal' | 'negotiation' | 'closed-won' | 'closed-lost';\n  probability: number;\n  expected_close_date: string;\n  contact_id?: string;\n  company_id?: string;\n  owner_id: string;\n  tags?: string[];\n  notes?: string;\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 132,
        "end": 145,
        "startLoc": {
          "line": 132,
          "column": 2,
          "position": 1019
        },
        "endLoc": {
          "line": 145,
          "column": 2,
          "position": 1132
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\clients\\crm-client.ts",
        "start": 37,
        "end": 50,
        "startLoc": {
          "line": 37,
          "column": 7,
          "position": 276
        },
        "endLoc": {
          "line": 50,
          "column": 11,
          "position": 390
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n/\n// System metrics endpoint/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 135,
        "end": 150,
        "startLoc": {
          "line": 135,
          "column": 18,
          "position": 1294
        },
        "endLoc": {
          "line": 150,
          "column": 28,
          "position": 1445
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 118,
        "end": 133,
        "startLoc": {
          "line": 118,
          "column": 17,
          "position": 1106
        },
        "endLoc": {
          "line": 133,
          "column": 4,
          "position": 1257
        }
      }
    },
    {
      "format": "typescript",
      "lines": 52,
      "fragment": ");\n/\n// Basic health check endpoint (< 200ms, no external dependencies)/\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n/\n// Enhanced Health check endpoints (PR-22)/\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n/\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n/\n// Basic API info endpoint/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\backup\\basic.ts",
        "start": 21,
        "end": 72,
        "startLoc": {
          "line": 21,
          "column": 2,
          "position": 208
        },
        "endLoc": {
          "line": 72,
          "column": 28,
          "position": 717
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 99,
        "end": 133,
        "startLoc": {
          "line": 99,
          "column": 2,
          "position": 936
        },
        "endLoc": {
          "line": 133,
          "column": 4,
          "position": 1257
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n    timestamp: new Date().toISOString()\n  });\n});\n/\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString()\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\backup\\basic.ts",
        "start": 97,
        "end": 108,
        "startLoc": {
          "line": 97,
          "column": 31,
          "position": 933
        },
        "endLoc": {
          "line": 108,
          "column": 2,
          "position": 1040
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 270,
        "end": 280,
        "startLoc": {
          "line": 270,
          "column": 8,
          "position": 2257
        },
        "endLoc": {
          "line": 280,
          "column": 2,
          "position": 2362
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "process.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;\n/",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\backup\\basic.ts",
        "start": 121,
        "end": 138,
        "startLoc": {
          "line": 121,
          "column": 1,
          "position": 1136
        },
        "endLoc": {
          "line": 138,
          "column": 2,
          "position": 1269
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 310,
        "end": 327,
        "startLoc": {
          "line": 310,
          "column": 1,
          "position": 2550
        },
        "endLoc": {
          "line": 327,
          "column": 2,
          "position": 2683
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "export function chunk<T>(array: T[], size: number): T[][] {;\n  return array.reduce((chunks, item, index) => {/\n    const chunkIndex = Math.floor(index / size);\n    \n    if (!chunks[chunkIndex]) {\n      chunks[chunkIndex] = [];\n    }\n    \n    chunks[chunkIndex].push(item);\n    return chunks;\n  }, [] as T[][]);\n}\n/\n// String helpers",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\utils.ts",
        "start": 45,
        "end": 58,
        "startLoc": {
          "line": 45,
          "column": 1,
          "position": 430
        },
        "endLoc": {
          "line": 58,
          "column": 18,
          "position": 575
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\core\\utils\\common.ts",
        "start": 128,
        "end": 143,
        "startLoc": {
          "line": 128,
          "column": 1,
          "position": 982
        },
        "endLoc": {
          "line": 143,
          "column": 4,
          "position": 1125
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n\n  const execChain = () => {;\n      try {\n    const s: unknown = (db as unknown as { select?: () => unknown }).select ? (db as unknown as { select: () => unknown }).select() : db;\n    const f = (s && typeof (s as { from?: (t: unknown) => unknown }).from === 'function') ? (s as { from: (t: unknown) => unknown }).from(aiCostUsage) : s;\n    const w = (f && typeof (f as { where?: (q?: unknown) => unknown }).where === 'function') ? (f as { where: (q?: unknown) => unknown }).where({}) : f;\n    return (w && typeof (w as { execute?: () => Promise<unknown> }).execute === 'function') ? w : ((f && typeof (f as { execute?: () => Promise<unknown> }).execute === 'function') ? f : s)\n      } catch {\n        return []\n      }\n    }\n    const rows = await this.runDbExecute(execChain);\n  const",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\cost-meter.ts",
        "start": 314,
        "end": 327,
        "startLoc": {
          "line": 314,
          "column": 2,
          "position": 4080
        },
        "endLoc": {
          "line": 327,
          "column": 6,
          "position": 4475
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\cost-meter.ts",
        "start": 93,
        "end": 107,
        "startLoc": {
          "line": 93,
          "column": 15,
          "position": 884
        },
        "endLoc": {
          "line": 107,
          "column": 3,
          "position": 1283
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ")\n      } catch {\n        return []\n      }\n    }\n    const rows = await this.runDbExecute(execChain);\n  const filtered = (rows || []).filter((r: any) => {;\n    const dateVal = r.createdAt || r.timestamp || r.created_at;\n    if (!dateVal) return true\n    const d = new Date(dateVal);\n    return !Number.isNaN(d.getTime()) && d >= startOfMonth\n  })\n  const totalCost = filtered.reduce((sum: number, row: any) => sum + Number(row.costEur ?",
      "tokens": 0,
      "firstFile": {
        "name": "packages\\shared\\src\\cost-meter.ts",
        "start": 321,
        "end": 333,
        "startLoc": {
          "line": 321,
          "column": 2,
          "position": 4436
        },
        "endLoc": {
          "line": 333,
          "column": 2,
          "position": 4618
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\cost-meter.ts",
        "start": 217,
        "end": 122,
        "startLoc": {
          "line": 217,
          "column": 2,
          "position": 2823
        },
        "endLoc": {
          "line": 122,
          "column": 3,
          "position": 1522
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "name: string;\n    sku: string;\n    price: {\n      amount: number;\n      currency: string;\n    };\n    compareAtPrice?: {\n      amount: number;\n      currency: string;\n    };\n    costPrice?: {\n      amount: number;\n      currency: string;\n    };\n    inventory: {\n      quantity: number;\n      reserved: number;\n      available: number;\n    };\n    attributes: Record<string, any>;\n    isActive: boolean;\n  }>;\n}\n\nexport interface CreateProductResponse",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\product\\create-product.use-case.ts",
        "start": 66,
        "end": 90,
        "startLoc": {
          "line": 66,
          "column": 5,
          "position": 479
        },
        "endLoc": {
          "line": 90,
          "column": 22,
          "position": 629
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\product\\update-product.use-case.ts",
        "start": 67,
        "end": 91,
        "startLoc": {
          "line": 67,
          "column": 5,
          "position": 508
        },
        "endLoc": {
          "line": 91,
          "column": 22,
          "position": 658
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "crypto.randomUUID(),\n        name: variant.name,\n        sku: variant.sku,\n        price: Money.create(variant.price.amount, variant.price.currency),\n        compareAtPrice: variant.compareAtPrice ? Money.create(\n          variant.compareAtPrice.amount,\n          variant.compareAtPrice.currency\n        ) : undefined,\n        costPrice: variant.costPrice ? Money.create(\n          variant.costPrice.amount,\n          variant.costPrice.currency\n        ) : undefined,\n        inventory: variant.inventory,\n        attributes: variant.attributes,\n        isActive: variant.isActive,\n      })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\product\\create-product.use-case.ts",
        "start": 188,
        "end": 203,
        "startLoc": {
          "line": 188,
          "column": 2,
          "position": 1503
        },
        "endLoc": {
          "line": 203,
          "column": 2,
          "position": 1656
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\product\\update-product.use-case.ts",
        "start": 256,
        "end": 271,
        "startLoc": {
          "line": 256,
          "column": 2,
          "position": 2031
        },
        "endLoc": {
          "line": 271,
          "column": 2,
          "position": 2184
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "> {\n    // ========================================================================\n    // VALIDATION\n    // ========================================================================\n\n    this.validateId(request.id, 'Predictive Analytics ID');\n\n    // ========================================================================\n    // FIND EXISTING PREDICTIVE ANALYTICS\n    // ========================================================================\n\n    const existingPredictiveAnalytics = await this.predictiveAnalyticsRepository.findById(request.id);\n    if (!existingPredictiveAnalytics) {\n      throw new Error(`Predictive analytics with ID '${request.id}' not found`);\n    }\n\n    // ========================================================================\n    // BUSINESS LOGIC VALIDATION\n    // ========================================================================\n\n    // Check if model is already training",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\predictive-analytics\\train-model.use-case.ts",
        "start": 42,
        "end": 62,
        "startLoc": {
          "line": 42,
          "column": 19,
          "position": 287
        },
        "endLoc": {
          "line": 62,
          "column": 38,
          "position": 389
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\predictive-analytics\\update-predictive-analytics.use-case.ts",
        "start": 46,
        "end": 66,
        "startLoc": {
          "line": 46,
          "column": 34,
          "position": 406
        },
        "endLoc": {
          "line": 66,
          "column": 47,
          "position": 508
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": "productId?: string;\n    description: string;\n    quantity: number;\n    unitPrice: {\n      amount: number;\n      currency: string;\n    };\n    totalPrice: {\n      amount: number;\n      currency: string;\n    };\n    taxRate?: number;\n    taxAmount?: {\n      amount: number;\n      currency: string;\n    };\n    discountRate?: number;\n    discountAmount?: {\n      amount: number;\n      currency: string;\n    };\n    notes?: string;\n  }>;\n  paymentMethod?: 'cash' | 'credit_card' | 'bank_transfer' | 'check' | 'paypal' | 'stripe' | 'other';\n  reference?: string;\n  notes?: string;\n  settings:",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\invoice\\create-invoice.use-case.ts",
        "start": 21,
        "end": 47,
        "startLoc": {
          "line": 21,
          "column": 5,
          "position": 212
        },
        "endLoc": {
          "line": 47,
          "column": 2,
          "position": 410
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\invoice\\update-invoice.use-case.ts",
        "start": 23,
        "end": 49,
        "startLoc": {
          "line": 23,
          "column": 5,
          "position": 235
        },
        "endLoc": {
          "line": 49,
          "column": 2,
          "position": 433
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "this.generateId(),\n        productId: item.productId,\n        description: item.description,\n        quantity: item.quantity,\n        unitPrice: Money.create(item.unitPrice.amount, item.unitPrice.currency),\n        totalPrice: Money.create(item.totalPrice.amount, item.totalPrice.currency),\n        taxRate: item.taxRate,\n        taxAmount: item.taxAmount ? Money.create(item.taxAmount.amount, item.taxAmount.currency) : undefined,\n        discountRate: item.discountRate,\n        discountAmount: item.discountAmount ? Money.create(item.discountAmount.amount, item.discountAmount.currency) : undefined,\n        notes: item.notes,\n      })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\invoice\\create-invoice.use-case.ts",
        "start": 130,
        "end": 141,
        "startLoc": {
          "line": 130,
          "column": 2,
          "position": 1106
        },
        "endLoc": {
          "line": 141,
          "column": 2,
          "position": 1281
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\invoice\\update-invoice.use-case.ts",
        "start": 168,
        "end": 179,
        "startLoc": {
          "line": 168,
          "column": 2,
          "position": 1314
        },
        "endLoc": {
          "line": 179,
          "column": 2,
          "position": 1489
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(\n    id: InteractionId,\n    organizationId: OrganizationId,\n    userId: UserId,\n    tag: string\n  ): Promise<UpdateInteractionResponse> {\n    const existingInteraction = await this.interactionRepository.findById(id);\n    if (!existingInteraction) {\n      throw createNotFoundError('Interaction', id);\n    }\n\n    const currentTags = existingInteraction.tags.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 324,
        "end": 335,
        "startLoc": {
          "line": 324,
          "column": 10,
          "position": 2336
        },
        "endLoc": {
          "line": 335,
          "column": 2,
          "position": 2431
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 300,
        "end": 311,
        "startLoc": {
          "line": 300,
          "column": 7,
          "position": 2164
        },
        "endLoc": {
          "line": 311,
          "column": 2,
          "position": 2259
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ".attachments.length > 5) {\n      throw createValidationError('Cannot have more than 5 attachments', 'attachments');\n    }\n\n    // ========================================================================\n    // BUSINESS LOGIC VALIDATION\n    // ========================================================================\n\n    // Check if user exists and has access to organization\n    const user = await this.userDomainService.findById(request.userId);\n    if (!user) {\n      throw createNotFoundError('User', request.userId);\n    }\n\n    if (user.organizationId !== request.organizationId) {\n      throw createConflictError('User', 'User does not belong to the specified organization');\n    }\n\n    // Check if user is active\n    if (user.status !== 'ACTIVE') {\n      throw createConflictError('User', 'User is not active');\n    }\n\n    // ========================================================================\n    // CREATE INTERACTION",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\create-interaction.use-case.ts",
        "start": 83,
        "end": 107,
        "startLoc": {
          "line": 83,
          "column": 8,
          "position": 647
        },
        "endLoc": {
          "line": 107,
          "column": 22,
          "position": 808
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 100,
        "end": 124,
        "startLoc": {
          "line": 100,
          "column": 8,
          "position": 881
        },
        "endLoc": {
          "line": 124,
          "column": 20,
          "position": 1042
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", 'id');\n    }\n    if (!request.organizationId) {\n      throw createValidationError('Organization ID is required', 'organizationId');\n    }\n    if (!request.userId) {\n      throw createValidationError('User ID is required', 'userId');\n    }\n\n    // Validate updates\n    if (!request.updates || Object.keys(request.updates).length === 0) {\n      throw createValidationError('At least one update field is required', 'updates');\n    }\n\n    // Validate name length",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 59,
        "end": 73,
        "startLoc": {
          "line": 59,
          "column": 22,
          "position": 437
        },
        "endLoc": {
          "line": 73,
          "column": 24,
          "position": 550
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 50,
        "end": 64,
        "startLoc": {
          "line": 50,
          "column": 29,
          "position": 354
        },
        "endLoc": {
          "line": 64,
          "column": 27,
          "position": 467
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n    }\n\n    // Validate tags\n    if (request.updates.tags !== undefined && request.updates.tags && request.updates.tags.length > 10) {\n      throw createValidationError('Cannot have more than 10 tags', 'tags');\n    }\n\n    // Validate attachments\n    if (request.updates.attachments !== undefined && request.updates.attachments && request.updates.attachments.length > 5) {\n      throw createValidationError('Cannot have more than 5 attachments', 'attachments');\n    }\n\n    // Validate competitors",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 105,
        "end": 118,
        "startLoc": {
          "line": 105,
          "column": 8,
          "position": 931
        },
        "endLoc": {
          "line": 118,
          "column": 24,
          "position": 1055
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 91,
        "end": 104,
        "startLoc": {
          "line": 91,
          "column": 11,
          "position": 786
        },
        "endLoc": {
          "line": 104,
          "column": 76,
          "position": 910
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ");\n    }\n\n    // ========================================================================\n    // BUSINESS LOGIC VALIDATION\n    // ========================================================================\n\n    // Check if user exists and has access to organization\n    const user = await this.userDomainService.findById(request.userId);\n    if (!user) {\n      throw createNotFoundError('User', request.userId);\n    }\n\n    if (user.organizationId !== request.organizationId) {\n      throw createConflictError('User', 'User does not belong to the specified organization');\n    }\n\n    // Check if user is active\n    if (user.status !== 'ACTIVE') {\n      throw createConflictError('User', 'User is not active');\n    }\n\n    // ========================================================================\n    // FIND DEAL",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 135,
        "end": 158,
        "startLoc": {
          "line": 135,
          "column": 13,
          "position": 1279
        },
        "endLoc": {
          "line": 158,
          "column": 13,
          "position": 1419
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 101,
        "end": 124,
        "startLoc": {
          "line": 101,
          "column": 14,
          "position": 902
        },
        "endLoc": {
          "line": 124,
          "column": 20,
          "position": 1042
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ".tags;\n    if (!currentTags.includes(tag)) {\n      currentTags.push(tag);\n    }\n\n    return this.execute({\n      id,\n      organizationId,\n      userId,\n      updates: { tags: currentTags }\n    });\n  }\n\n  async removeTag(\n    id: DealId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 406,
        "end": 420,
        "startLoc": {
          "line": 406,
          "column": 13,
          "position": 3143
        },
        "endLoc": {
          "line": 420,
          "column": 7,
          "position": 3228
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\update-interaction.use-case.ts",
        "start": 311,
        "end": 325,
        "startLoc": {
          "line": 311,
          "column": 20,
          "position": 2257
        },
        "endLoc": {
          "line": 325,
          "column": 14,
          "position": 2342
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(\n    id: DealId,\n    organizationId: OrganizationId,\n    userId: UserId,\n    tag: string\n  ): Promise<UpdateDealResponse> {\n    const existingDeal = await this.dealRepository.findById(id);\n    if (!existingDeal) {\n      throw createNotFoundError('Deal', id);\n    }\n\n    const currentTags = existingDeal.tags.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 419,
        "end": 430,
        "startLoc": {
          "line": 419,
          "column": 10,
          "position": 3222
        },
        "endLoc": {
          "line": 430,
          "column": 2,
          "position": 3317
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 395,
        "end": 406,
        "startLoc": {
          "line": 395,
          "column": 7,
          "position": 3050
        },
        "endLoc": {
          "line": 406,
          "column": 2,
          "position": 3145
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(\n    id: DealId,\n    organizationId: OrganizationId,\n    userId: UserId,\n    competitor: string\n  ): Promise<UpdateDealResponse> {\n    const existingDeal = await this.dealRepository.findById(id);\n    if (!existingDeal) {\n      throw createNotFoundError('Deal', id);\n    }\n\n    const currentCompetitors = existingDeal.competitors.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 464,
        "end": 475,
        "startLoc": {
          "line": 464,
          "column": 17,
          "position": 3552
        },
        "endLoc": {
          "line": 475,
          "column": 2,
          "position": 3647
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 440,
        "end": 451,
        "startLoc": {
          "line": 440,
          "column": 14,
          "position": 3380
        },
        "endLoc": {
          "line": 451,
          "column": 2,
          "position": 3475
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(\n    id: DealId,\n    organizationId: OrganizationId,\n    userId: UserId,\n    decisionMaker: string\n  ): Promise<UpdateDealResponse> {\n    const existingDeal = await this.dealRepository.findById(id);\n    if (!existingDeal) {\n      throw createNotFoundError('Deal', id);\n    }\n\n    const currentDecisionMakers = existingDeal.decisionMakers.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 509,
        "end": 520,
        "startLoc": {
          "line": 509,
          "column": 20,
          "position": 3882
        },
        "endLoc": {
          "line": 520,
          "column": 2,
          "position": 3977
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 485,
        "end": 496,
        "startLoc": {
          "line": 485,
          "column": 17,
          "position": 3710
        },
        "endLoc": {
          "line": 496,
          "column": 2,
          "position": 3805
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ";\n  expectedCloseDate?: Date;\n  nextStep?: string;\n  nextStepDate?: Date;\n  tags?: string[];\n  customFields?: Record<string, any>;\n  attachments?: string[];\n  notes?: string;\n  competitors?: string[];\n  decisionMakers?: string[];\n  budget?: number;\n  timeline?: string;\n  requirements?: string[];\n  objections?: string[];\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 22,
        "end": 38,
        "startLoc": {
          "line": 22,
          "column": 10,
          "position": 184
        },
        "endLoc": {
          "line": 38,
          "column": 7,
          "position": 311
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 22,
        "end": 36,
        "startLoc": {
          "line": 22,
          "column": 7,
          "position": 181
        },
        "endLoc": {
          "line": 36,
          "column": 2,
          "position": 307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "> {\n    // ========================================================================\n    // VALIDATION\n    // ========================================================================\n\n    // Validate required fields\n    if (!request.organizationId) {\n      throw createValidationError('Organization ID is required', 'organizationId');\n    }\n    if (!request.contactId) {\n      throw createValidationError('Contact ID is required', 'contactId');\n    }\n    if (!request.userId) {\n      throw createValidationError('User ID is required', 'userId');\n    }\n    if (!request.name",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 51,
        "end": 66,
        "startLoc": {
          "line": 51,
          "column": 19,
          "position": 401
        },
        "endLoc": {
          "line": 66,
          "column": 5,
          "position": 506
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\create-interaction.use-case.ts",
        "start": 40,
        "end": 55,
        "startLoc": {
          "line": 40,
          "column": 26,
          "position": 302
        },
        "endLoc": {
          "line": 55,
          "column": 5,
          "position": 407
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n    }\n\n    // Validate tags\n    if (request.tags && request.tags.length > 10) {\n      throw createValidationError('Cannot have more than 10 tags', 'tags');\n    }\n\n    // Validate attachments\n    if (request.attachments && request.attachments.length > 5) {\n      throw createValidationError('Cannot have more than 5 attachments', 'attachments');\n    }\n\n    // Validate competitors",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 100,
        "end": 113,
        "startLoc": {
          "line": 100,
          "column": 8,
          "position": 828
        },
        "endLoc": {
          "line": 113,
          "column": 24,
          "position": 920
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\interaction\\create-interaction.use-case.ts",
        "start": 74,
        "end": 87,
        "startLoc": {
          "line": 74,
          "column": 13,
          "position": 584
        },
        "endLoc": {
          "line": 87,
          "column": 76,
          "position": 676
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".objections.length > 20) {\n      throw createValidationError('Cannot have more than 20 objections', 'objections');\n    }\n\n    // ========================================================================\n    // BUSINESS LOGIC VALIDATION\n    // ========================================================================\n\n    // Check if user exists and has access to organization\n    const user = await this.userDomainService.findById(request.userId);\n    if (!user) {\n      throw createNotFoundError('User', request.userId);\n    }\n\n    if (user.organizationId !== request.organizationId) {\n      throw createConflictError('User', 'User does not belong to the specified organization');\n    }\n\n    // Check if user is active\n    if (user.status !== 'ACTIVE') {\n      throw createConflictError('User', 'User is not active');\n    }\n\n    // Check if deal with same name already exists for this contact",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 129,
        "end": 152,
        "startLoc": {
          "line": 129,
          "column": 8,
          "position": 1059
        },
        "endLoc": {
          "line": 152,
          "column": 64,
          "position": 1217
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 134,
        "end": 123,
        "startLoc": {
          "line": 134,
          "column": 8,
          "position": 1258
        },
        "endLoc": {
          "line": 123,
          "column": 76,
          "position": 1039
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Promise<CreateDealResponse> {\n    return this.execute({\n      organizationId,\n      contactId,\n      userId,\n      name,\n      value,\n      currency,\n      source,\n      stage: 'QUALIFIED'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 248,
        "end": 266,
        "startLoc": {
          "line": 248,
          "column": 16,
          "position": 1894
        },
        "endLoc": {
          "line": 266,
          "column": 12,
          "position": 2012
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 225,
        "end": 243,
        "startLoc": {
          "line": 225,
          "column": 11,
          "position": 1757
        },
        "endLoc": {
          "line": 243,
          "column": 7,
          "position": 1875
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Promise<CreateDealResponse> {\n    return this.execute({\n      organizationId,\n      contactId,\n      userId,\n      name,\n      value,\n      currency,\n      source,\n      stage: 'PROPOSAL'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 271,
        "end": 289,
        "startLoc": {
          "line": 271,
          "column": 15,
          "position": 2031
        },
        "endLoc": {
          "line": 289,
          "column": 11,
          "position": 2149
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 225,
        "end": 243,
        "startLoc": {
          "line": 225,
          "column": 11,
          "position": 1757
        },
        "endLoc": {
          "line": 243,
          "column": 7,
          "position": 1875
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Promise<CreateDealResponse> {\n    return this.execute({\n      organizationId,\n      contactId,\n      userId,\n      name,\n      value,\n      currency,\n      source,\n      stage: 'NEGOTIATION'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 294,
        "end": 312,
        "startLoc": {
          "line": 294,
          "column": 18,
          "position": 2168
        },
        "endLoc": {
          "line": 312,
          "column": 14,
          "position": 2286
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\create-deal.use-case.ts",
        "start": 225,
        "end": 243,
        "startLoc": {
          "line": 225,
          "column": 11,
          "position": 1757
        },
        "endLoc": {
          "line": 243,
          "column": 7,
          "position": 1875
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ";\n    constraints: Array<{\n      id: string;\n      name: string;\n      type: 'primary_key' | 'foreign_key' | 'unique' | 'check' | 'not_null' | 'default' | 'index';\n      columns: string[];\n      referencedTable?: string;\n      referencedColumns?: string[];\n      condition?: string;\n      description: string;\n      isDeferrable: boolean;\n      initiallyDeferred: boolean;\n      onDelete?: 'CASCADE' | 'SET NULL' | 'RESTRICT' | 'NO ACTION';\n      onUpdate?: 'CASCADE' | 'SET NULL' | 'RESTRICT' | 'NO ACTION';\n    }>;\n    indexes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 94,
        "end": 109,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 798
        },
        "endLoc": {
          "line": 109,
          "column": 8,
          "position": 955
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 73,
        "end": 88,
        "startLoc": {
          "line": 73,
          "column": 4,
          "position": 595
        },
        "endLoc": {
          "line": 88,
          "column": 12,
          "position": 752
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ".constraints.map(constraint => ({\n          id: constraint.id,\n          name: constraint.name,\n          type: constraint.type,\n          columns: constraint.columns,\n          referencedTable: constraint.referencedTable,\n          referencedColumns: constraint.referencedColumns,\n          condition: constraint.condition,\n          description: constraint.description,\n          isDeferrable: constraint.isDeferrable,\n          initiallyDeferred: constraint.initiallyDeferred,\n          onDelete: constraint.onDelete,\n          onUpdate: constraint.onUpdate,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        })),\n        indexes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 278,
        "end": 294,
        "startLoc": {
          "line": 278,
          "column": 6,
          "position": 2378
        },
        "endLoc": {
          "line": 294,
          "column": 8,
          "position": 2526
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 253,
        "end": 269,
        "startLoc": {
          "line": 253,
          "column": 7,
          "position": 2145
        },
        "endLoc": {
          "line": 269,
          "column": 12,
          "position": 2293
        }
      }
    },
    {
      "format": "typescript",
      "lines": 68,
      "fragment": ": 'low' | 'medium' | 'high' | 'urgent';\n  email?: string;\n  phone?: string;\n  mobile?: string;\n  fax?: string;\n  website?: string;\n  address?: {\n    street: string;\n    city: string;\n    state?: string;\n    postalCode: string;\n    country: string;\n    countryCode: string;\n  };\n  birthday?: Date;\n  anniversary?: Date;\n  gender?: 'male' | 'female' | 'other' | 'prefer_not_to_say';\n  maritalStatus?: 'single' | 'married' | 'divorced' | 'widowed' | 'separated';\n  children?: number;\n  education?: string;\n  profession?: string;\n  industry?: string;\n  experience?: number;\n  salary?: {\n    amount: number;\n    currency: string;\n  };\n  socialMedia?: {\n    linkedin?: string;\n    twitter?: string;\n    facebook?: string;\n    instagram?: string;\n    youtube?: string;\n    tiktok?: string;\n    other?: Record<string, string>;\n  };\n  communication?: {\n    preferredMethod?: 'email' | 'phone' | 'sms' | 'whatsapp' | 'linkedin' | 'other';\n    bestTimeToCall?: string;\n    timeZone?: string;\n    doNotCall?: boolean;\n    doNotEmail?: boolean;\n    doNotSms?: boolean;\n  };\n  settings?: {\n    notifications?: {\n      email?: boolean;\n      sms?: boolean;\n      push?: boolean;\n      phone?: boolean;\n    };\n    preferences?: {\n      language?: string;\n      timezone?: string;\n      currency?: string;\n      dateFormat?: string;\n      timeFormat?: string;\n    };\n    customFields?: Record<string, any>;\n    tags?: string[];\n    notes?: string;\n    internalNotes?: string;\n  };\n  assignedUserId?: string;\n  nextFollowUpDate?: Date;\n  leadScore?: number;\n  engagementScore?: number;\n  createdBy",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\create-contact.use-case.ts",
        "start": 21,
        "end": 88,
        "startLoc": {
          "line": 21,
          "column": 9,
          "position": 232
        },
        "endLoc": {
          "line": 88,
          "column": 10,
          "position": 798
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\update-contact.use-case.ts",
        "start": 21,
        "end": 88,
        "startLoc": {
          "line": 21,
          "column": 2,
          "position": 238
        },
        "endLoc": {
          "line": 88,
          "column": 10,
          "position": 804
        }
      }
    },
    {
      "format": "typescript",
      "lines": 26,
      "fragment": "request.companyId && request.companyId.trim().length === 0) {\n      errors.push('Company ID cannot be empty');\n    }\n\n    // Validate children if provided\n    if (request.children !== undefined && (request.children < 0 || request.children > 20)) {\n      errors.push('Children count must be between 0 and 20');\n    }\n\n    // Validate experience if provided\n    if (request.experience !== undefined && (request.experience < 0 || request.experience > 50)) {\n      errors.push('Experience must be between 0 and 50 years');\n    }\n\n    // Validate lead score if provided\n    if (request.leadScore !== undefined && (request.leadScore < 0 || request.leadScore > 100)) {\n      errors.push('Lead score must be between 0 and 100');\n    }\n\n    // Validate engagement score if provided\n    if (request.engagementScore !== undefined && (request.engagementScore < 0 || request.engagementScore > 100)) {\n      errors.push('Engagement score must be between 0 and 100');\n    }\n\n    // Validate salary if provided\n    if (request.salary)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\create-contact.use-case.ts",
        "start": 299,
        "end": 324,
        "startLoc": {
          "line": 299,
          "column": 2,
          "position": 2690
        },
        "endLoc": {
          "line": 324,
          "column": 2,
          "position": 2948
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\update-contact.use-case.ts",
        "start": 331,
        "end": 356,
        "startLoc": {
          "line": 331,
          "column": 2,
          "position": 3040
        },
        "endLoc": {
          "line": 356,
          "column": 4,
          "position": 3299
        }
      }
    },
    {
      "format": "typescript",
      "lines": 41,
      "fragment": ") {\n      if (request.salary.amount < 0) {\n        errors.push('Salary cannot be negative');\n      }\n      if (!request.salary.currency || request.salary.currency.length !== 3) {\n        errors.push('Salary currency must be a 3-letter code');\n      }\n    }\n\n    // Validate social media URLs if provided\n    if (request.socialMedia) {\n      if (request.socialMedia.linkedin && !Contact.validateSocialMediaUrl(request.socialMedia.linkedin, 'linkedin')) {\n        errors.push('Invalid LinkedIn URL');\n      }\n      if (request.socialMedia.twitter && !Contact.validateSocialMediaUrl(request.socialMedia.twitter, 'twitter')) {\n        errors.push('Invalid Twitter URL');\n      }\n      if (request.socialMedia.facebook && !Contact.validateSocialMediaUrl(request.socialMedia.facebook, 'facebook')) {\n        errors.push('Invalid Facebook URL');\n      }\n      if (request.socialMedia.instagram && !Contact.validateSocialMediaUrl(request.socialMedia.instagram, 'instagram')) {\n        errors.push('Invalid Instagram URL');\n      }\n      if (request.socialMedia.youtube && !Contact.validateSocialMediaUrl(request.socialMedia.youtube, 'youtube')) {\n        errors.push('Invalid YouTube URL');\n      }\n      if (request.socialMedia.tiktok && !Contact.validateSocialMediaUrl(request.socialMedia.tiktok, 'tiktok')) {\n        errors.push('Invalid TikTok URL');\n      }\n    }\n\n    // Validate communication preferences if provided\n    if (request.communication) {\n      const validMethods = ['email', 'phone', 'sms', 'whatsapp', 'linkedin', 'other'];\n      if (request.communication.preferredMethod && !validMethods.includes(request.communication.preferredMethod)) {\n        errors.push('Invalid preferred communication method');\n      }\n    }\n\n    // Validate assigned user ID if provided\n    if (request.assignedUserId &&",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\create-contact.use-case.ts",
        "start": 324,
        "end": 364,
        "startLoc": {
          "line": 324,
          "column": 7,
          "position": 2948
        },
        "endLoc": {
          "line": 364,
          "column": 3,
          "position": 3390
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\contact\\update-contact.use-case.ts",
        "start": 356,
        "end": 396,
        "startLoc": {
          "line": 356,
          "column": 10,
          "position": 3302
        },
        "endLoc": {
          "line": 396,
          "column": 4,
          "position": 3744
        }
      }
    },
    {
      "format": "typescript",
      "lines": 59,
      "fragment": ": 'website' | 'referral' | 'cold_call' | 'email' | 'social_media' | 'event' | 'other';\n  website?: string;\n  email?: string;\n  phone?: string;\n  address?: {\n    street: string;\n    city: string;\n    state?: string;\n    postalCode: string;\n    country: string;\n    countryCode: string;\n  };\n  billingAddress?: {\n    street: string;\n    city: string;\n    state?: string;\n    postalCode: string;\n    country: string;\n    countryCode: string;\n  };\n  shippingAddress?: {\n    street: string;\n    city: string;\n    state?: string;\n    postalCode: string;\n    country: string;\n    countryCode: string;\n  };\n  taxId?: string;\n  vatNumber?: string;\n  registrationNumber?: string;\n  description?: string;\n  annualRevenue?: {\n    amount: number;\n    currency: string;\n  };\n  employeeCount?: number;\n  foundedYear?: number;\n  parentCompanyId?: string;\n  assignedUserId?: string;\n  nextFollowUpDate?: Date;\n  leadScore?: number;\n  settings?: {\n    notifications?: {\n      email?: boolean;\n      sms?: boolean;\n      push?: boolean;\n    };\n    preferences?: {\n      language?: string;\n      timezone?: string;\n      currency?: string;\n      dateFormat?: string;\n    };\n    customFields?: Record<string, any>;\n    tags?: string[];\n    notes?: string;\n  };\n  createdBy",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\company\\create-company.use-case.ts",
        "start": 18,
        "end": 76,
        "startLoc": {
          "line": 18,
          "column": 7,
          "position": 168
        },
        "endLoc": {
          "line": 76,
          "column": 10,
          "position": 610
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\company\\update-company.use-case.ts",
        "start": 18,
        "end": 76,
        "startLoc": {
          "line": 18,
          "column": 2,
          "position": 174
        },
        "endLoc": {
          "line": 76,
          "column": 10,
          "position": 616
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": "request.vatNumber && !Company.validateVatNumber(request.vatNumber)) {\n      errors.push('Invalid VAT number format');\n    }\n\n    // Validate employee count if provided\n    if (request.employeeCount !== undefined && (request.employeeCount < 0 || request.employeeCount > 1000000)) {\n      errors.push('Employee count must be between 0 and 1,000,000');\n    }\n\n    // Validate founded year if provided\n    if (request.foundedYear !== undefined) {\n      const currentYear = new Date().getFullYear();\n      if (request.foundedYear < 1800 || request.foundedYear > currentYear) {\n        errors.push(`Founded year must be between 1800 and ${currentYear}`);\n      }\n    }\n\n    // Validate lead score if provided\n    if (request.leadScore !== undefined && (request.leadScore < 0 || request.leadScore > 100)) {\n      errors.push('Lead score must be between 0 and 100');\n    }\n\n    // Validate annual revenue if provided\n    if (request.annualRevenue)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\company\\create-company.use-case.ts",
        "start": 269,
        "end": 292,
        "startLoc": {
          "line": 269,
          "column": 2,
          "position": 2246
        },
        "endLoc": {
          "line": 292,
          "column": 2,
          "position": 2475
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\company\\update-company.use-case.ts",
        "start": 315,
        "end": 338,
        "startLoc": {
          "line": 315,
          "column": 2,
          "position": 2667
        },
        "endLoc": {
          "line": 338,
          "column": 4,
          "position": 2897
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "layer.components.map(component => ({\n          id: component.id,\n          name: component.name,\n          type: component.type,\n          layer: layer.type,\n          description: component.description,\n          dependencies: component.dependencies,\n          interfaces: component.interfaces,\n          implementation: component.implementation,\n          tests: component.tests,\n          documentation: component.documentation,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        }))\n      )",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\create-architecture.use-case.ts",
        "start": 152,
        "end": 166,
        "startLoc": {
          "line": 152,
          "column": 9,
          "position": 1308
        },
        "endLoc": {
          "line": 166,
          "column": 2,
          "position": 1438
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\create-architecture.use-case.ts",
        "start": 121,
        "end": 134,
        "startLoc": {
          "line": 121,
          "column": 2,
          "position": 1003
        },
        "endLoc": {
          "line": 134,
          "column": 2,
          "position": 1131
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ",\n      layers: request.settings.layers.map(layer => ({\n        id: layer.id,\n        name: layer.name,\n        type: layer.type,\n        description: layer.description,\n        components: layer.components.map(component => ({\n          id: component.id,\n          name: component.name,\n          type: component.type,\n          layer: layer.type,\n          description: component.description,\n          dependencies: component.dependencies,\n          interfaces: component.interfaces,\n          implementation: component.implementation,\n          tests: component.tests,\n          documentation: component.documentation,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        })),\n        dependencies: layer.dependencies,\n        responsibilities: layer.responsibilities,\n        patterns: layer.patterns,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      })),\n      isActive",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\create-architecture.use-case.ts",
        "start": 166,
        "end": 192,
        "startLoc": {
          "line": 166,
          "column": 2,
          "position": 1439
        },
        "endLoc": {
          "line": 192,
          "column": 9,
          "position": 1685
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\create-architecture.use-case.ts",
        "start": 115,
        "end": 141,
        "startLoc": {
          "line": 115,
          "column": 5,
          "position": 942
        },
        "endLoc": {
          "line": 141,
          "column": 9,
          "position": 1188
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "name: z.string().min(1).max(100),\n          sku: z.string().min(1).max(100),\n          price: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }),\n          compareAtPrice: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }).optional(),\n          costPrice: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }).optional(),\n          inventory: z.object({\n            quantity: z.number().int().min(0),\n            reserved: z.number().int().min(0),\n            available: z.number().int().min(0)\n          }),\n          attributes: z.record(z.any()).default({}),\n          isActive: z.boolean().default(true)\n        })).optional()\n      })\n    }),\n    productController.updateProduct",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 168,
        "end": 192,
        "startLoc": {
          "line": 168,
          "column": 11,
          "position": 2301
        },
        "endLoc": {
          "line": 192,
          "column": 14,
          "position": 2620
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 78,
        "end": 102,
        "startLoc": {
          "line": 78,
          "column": 11,
          "position": 1003
        },
        "endLoc": {
          "line": 102,
          "column": 14,
          "position": 1322
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": ",\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.enum(['name', 'sku', 'category', 'brand', 'createdAt', 'updatedAt']).default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['physical', 'digital', 'service', 'subscription', 'bundle']).optional(),\n        status: z.enum(['active', 'inactive', 'discontinued', 'draft', 'archived']).optional(),\n        category: z.string().optional(),\n        brand: z.string().optional(),\n        supplier: z.string().optional(),\n        minPrice: z.coerce.number().min(0).optional(),\n        maxPrice: z.coerce.number().min(0).optional(),\n        inStock: z.coerce.boolean().optional(),\n        lowStock: z.coerce.boolean().optional()\n      })\n    }),\n    productController.searchProducts",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 246,
        "end": 268,
        "startLoc": {
          "line": 246,
          "column": 40,
          "position": 3175
        },
        "endLoc": {
          "line": 268,
          "column": 15,
          "position": 3550
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 220,
        "end": 242,
        "startLoc": {
          "line": 220,
          "column": 33,
          "position": 2779
        },
        "endLoc": {
          "line": 242,
          "column": 26,
          "position": 3154
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "])\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.enum(['name', 'sku', 'category', 'brand', 'createdAt', 'updatedAt']).default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    async (req, res, next) => {\n      try {\n        const { status",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 329,
        "end": 340,
        "startLoc": {
          "line": 329,
          "column": 11,
          "position": 4118
        },
        "endLoc": {
          "line": 340,
          "column": 7,
          "position": 4286
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 289,
        "end": 300,
        "startLoc": {
          "line": 289,
          "column": 9,
          "position": 3684
        },
        "endLoc": {
          "line": 300,
          "column": 5,
          "position": 3852
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/category/:category - Get products by category",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 341,
        "end": 365,
        "startLoc": {
          "line": 341,
          "column": 7,
          "position": 4314
        },
        "endLoc": {
          "line": 365,
          "column": 63,
          "position": 4505
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ")\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.enum(['name', 'sku', 'category', 'brand', 'createdAt', 'updatedAt']).default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    async (req, res, next) => {\n      try {\n        const { category",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 369,
        "end": 380,
        "startLoc": {
          "line": 369,
          "column": 4,
          "position": 4548
        },
        "endLoc": {
          "line": 380,
          "column": 9,
          "position": 4715
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 223,
        "end": 300,
        "startLoc": {
          "line": 223,
          "column": 2,
          "position": 2808
        },
        "endLoc": {
          "line": 300,
          "column": 5,
          "position": 3852
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/brand/:brand - Get products by brand",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 381,
        "end": 405,
        "startLoc": {
          "line": 381,
          "column": 9,
          "position": 4743
        },
        "endLoc": {
          "line": 405,
          "column": 54,
          "position": 4934
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.string().min(1).max(100)\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.enum(['name', 'sku', 'category', 'brand', 'createdAt', 'updatedAt']).default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    async (req, res, next) => {\n      try {\n        const { brand",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 409,
        "end": 420,
        "startLoc": {
          "line": 409,
          "column": 6,
          "position": 4961
        },
        "endLoc": {
          "line": 420,
          "column": 6,
          "position": 5144
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 369,
        "end": 300,
        "startLoc": {
          "line": 369,
          "column": 9,
          "position": 4532
        },
        "endLoc": {
          "line": 300,
          "column": 5,
          "position": 3852
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/supplier/:supplier - Get products by supplier",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 421,
        "end": 445,
        "startLoc": {
          "line": 421,
          "column": 6,
          "position": 5172
        },
        "endLoc": {
          "line": 445,
          "column": 63,
          "position": 5363
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.string().min(1).max(100)\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.enum(['name', 'sku', 'category', 'brand', 'createdAt', 'updatedAt']).default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    async (req, res, next) => {\n      try {\n        const { supplier",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 449,
        "end": 460,
        "startLoc": {
          "line": 449,
          "column": 9,
          "position": 5390
        },
        "endLoc": {
          "line": 460,
          "column": 9,
          "position": 5573
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 369,
        "end": 300,
        "startLoc": {
          "line": 369,
          "column": 9,
          "position": 4532
        },
        "endLoc": {
          "line": 300,
          "column": 5,
          "position": 3852
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/sku/:sku - Get product by SKU",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 461,
        "end": 485,
        "startLoc": {
          "line": 461,
          "column": 9,
          "position": 5601
        },
        "endLoc": {
          "line": 485,
          "column": 47,
          "position": 5792
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "{\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }\n        }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 507,
        "end": 520,
        "startLoc": {
          "line": 507,
          "column": 2,
          "position": 5977
        },
        "endLoc": {
          "line": 520,
          "column": 2,
          "position": 6095
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 305,
        "end": 317,
        "startLoc": {
          "line": 305,
          "column": 2,
          "position": 3917
        },
        "endLoc": {
          "line": 317,
          "column": 2,
          "position": 4033
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ");\n        \n        if (!product) {\n          res.status(404).json({\n            success: false,\n            message: 'Product not found'\n          });\n          return;\n        }\n\n        res.status(200).json({\n          success: true,\n          data: {\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            barcode",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 537,
        "end": 553,
        "startLoc": {
          "line": 537,
          "column": 8,
          "position": 6238
        },
        "endLoc": {
          "line": 553,
          "column": 8,
          "position": 6346
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 495,
        "end": 511,
        "startLoc": {
          "line": 495,
          "column": 4,
          "position": 5901
        },
        "endLoc": {
          "line": 511,
          "column": 5,
          "position": 6009
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ",\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 553,
        "end": 570,
        "startLoc": {
          "line": 553,
          "column": 8,
          "position": 6352
        },
        "endLoc": {
          "line": 570,
          "column": 76,
          "position": 6475
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 308,
        "end": 527,
        "startLoc": {
          "line": 308,
          "column": 4,
          "position": 3946
        },
        "endLoc": {
          "line": 527,
          "column": 59,
          "position": 6129
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/inventory/out-of-stock - Get products out of stock",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 585,
        "end": 609,
        "startLoc": {
          "line": 585,
          "column": 7,
          "position": 6628
        },
        "endLoc": {
          "line": 609,
          "column": 68,
          "position": 6819
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // GET /products/inventory/in-stock - Get products in stock",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 619,
        "end": 643,
        "startLoc": {
          "line": 619,
          "column": 7,
          "position": 6926
        },
        "endLoc": {
          "line": 643,
          "column": 60,
          "position": 7117
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 301,
        "end": 325,
        "startLoc": {
          "line": 301,
          "column": 5,
          "position": 3880
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "(organizationId as string);\n        \n        res.status(200).json({\n          success: true,\n          data: products.map(product => ({\n            id: product.id.value,\n            name: product.name,\n            sku: product.sku,\n            type: product.type.value,\n            status: product.status.value,\n            category: product.category.value,\n            brand: product.brand?.value,\n            supplier: product.supplier?.value,\n            isActive: product.isActive,\n            createdAt: product.createdAt,\n            updatedAt: product.updatedAt\n          }))\n        });\n      } catch (error) {\n        next(error);\n      }\n    }\n  );\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 653,
        "end": 677,
        "startLoc": {
          "line": 653,
          "column": 14,
          "position": 7218
        },
        "endLoc": {
          "line": 677,
          "column": 76,
          "position": 7415
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\product.routes.ts",
        "start": 619,
        "end": 325,
        "startLoc": {
          "line": 619,
          "column": 17,
          "position": 6920
        },
        "endLoc": {
          "line": 325,
          "column": 57,
          "position": 4071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 29,
      "fragment": ",\n    authenticate,\n    authorize(['analytics:read']),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['sales_forecast', 'demand_prediction', 'churn_prediction', 'revenue_forecast', 'inventory_optimization', 'customer_lifetime_value', 'market_trend', 'risk_assessment']).optional(),\n        status: z.enum(['pending', 'processing', 'completed', 'failed', 'cancelled']).optional(),\n        modelType: z.enum(['linear_regression', 'decision_tree', 'random_forest', 'neural_network', 'time_series', 'clustering', 'classification', 'deep_learning']).optional(),\n        accuracy: z.enum(['low', 'medium', 'high', 'very_high']).optional(),\n        isActive: z.coerce.boolean().optional(),\n        needsRetraining: z.coerce.boolean().optional(),\n        hasPredictions: z.coerce.boolean().optional(),\n        minAccuracy: z.coerce.number().min(0).max(1).optional(),\n        maxAccuracy: z.coerce.number().min(0).max(1).optional(),\n        lastPredictionFrom: z.coerce.date().optional(),\n        lastPredictionTo: z.coerce.date().optional(),\n        nextRetrainFrom: z.coerce.date().optional(),\n        nextRetrainTo: z.coerce.date().optional()\n      })\n    }),\n    predictiveAnalyticsController.searchPredictiveAnalytics",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 145,
        "end": 173,
        "startLoc": {
          "line": 145,
          "column": 40,
          "position": 1886
        },
        "endLoc": {
          "line": 173,
          "column": 26,
          "position": 2381
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 113,
        "end": 141,
        "startLoc": {
          "line": 113,
          "column": 33,
          "position": 1370
        },
        "endLoc": {
          "line": 141,
          "column": 37,
          "position": 1865
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "])\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    predictiveAnalyticsController.getAnalyticsByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 217,
        "end": 227,
        "startLoc": {
          "line": 217,
          "column": 12,
          "position": 2764
        },
        "endLoc": {
          "line": 227,
          "column": 21,
          "position": 2905
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 198,
        "end": 208,
        "startLoc": {
          "line": 198,
          "column": 18,
          "position": 2550
        },
        "endLoc": {
          "line": 208,
          "column": 19,
          "position": 2691
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n    authenticate,\n    authorize(['analytics:read']),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    predictiveAnalyticsController.getNeedsRetraining",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 247,
        "end": 259,
        "startLoc": {
          "line": 247,
          "column": 20,
          "position": 3100
        },
        "endLoc": {
          "line": 259,
          "column": 19,
          "position": 3253
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 231,
        "end": 208,
        "startLoc": {
          "line": 231,
          "column": 10,
          "position": 2926
        },
        "endLoc": {
          "line": 208,
          "column": 19,
          "position": 2691
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": "productId: z.string().uuid().optional(),\n          description: z.string().min(1).max(500),\n          quantity: z.number().min(0.01),\n          unitPrice: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }),\n          totalPrice: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }),\n          taxRate: z.number().min(0).max(100).optional(),\n          taxAmount: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }).optional(),\n          discountRate: z.number().min(0).max(100).optional(),\n          discountAmount: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }).optional(),\n          notes: z.string().max(500).optional()\n        })).optional",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 102,
        "end": 124,
        "startLoc": {
          "line": 102,
          "column": 11,
          "position": 1387
        },
        "endLoc": {
          "line": 124,
          "column": 9,
          "position": 1708
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 35,
        "end": 57,
        "startLoc": {
          "line": 35,
          "column": 11,
          "position": 366
        },
        "endLoc": {
          "line": 57,
          "column": 4,
          "position": 687
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "]),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['invoice'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 180,
        "end": 191,
        "startLoc": {
          "line": 180,
          "column": 15,
          "position": 2277
        },
        "endLoc": {
          "line": 191,
          "column": 10,
          "position": 2451
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 115,
        "end": 126,
        "startLoc": {
          "line": 115,
          "column": 17,
          "position": 1381
        },
        "endLoc": {
          "line": 126,
          "column": 17,
          "position": 1555
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": ",\n    authenticate,\n    authorize(['invoice:read']),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['invoice', 'credit_note', 'debit_note', 'proforma', 'quote', 'receipt']).optional(),\n        status: z.enum(['draft', 'sent', 'paid', 'overdue', 'cancelled', 'refunded', 'partially_paid']).optional(),\n        paymentStatus: z.enum(['pending', 'paid', 'partial', 'overdue', 'cancelled']).optional(),\n        companyId: z.string().uuid().optional(),\n        contactId: z.string().uuid().optional(),\n        issueDateFrom: z.coerce.date().optional(),\n        issueDateTo: z.coerce.date().optional(),\n        dueDateFrom: z.coerce.date().optional(),\n        dueDateTo: z.coerce.date().optional(),\n        minAmount: z.coerce.number().min(0).optional(),\n        maxAmount: z.coerce.number().min(0).optional(),\n        isOverdue: z.coerce.boolean().optional(),\n        isPaid: z.coerce.boolean().optional(),\n        isPartiallyPaid: z.coerce.boolean().optional(),\n        isPending: z.coerce.boolean().optional()\n      })\n    }),\n    invoiceController.searchInvoices",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 212,
        "end": 242,
        "startLoc": {
          "line": 212,
          "column": 40,
          "position": 2791
        },
        "endLoc": {
          "line": 242,
          "column": 15,
          "position": 3295
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 178,
        "end": 208,
        "startLoc": {
          "line": 178,
          "column": 33,
          "position": 2266
        },
        "endLoc": {
          "line": 208,
          "column": 26,
          "position": 2770
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "]),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    invoiceController.getOverdueInvoices",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 336,
        "end": 346,
        "startLoc": {
          "line": 336,
          "column": 15,
          "position": 4208
        },
        "endLoc": {
          "line": 346,
          "column": 19,
          "position": 4350
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 233,
        "end": 276,
        "startLoc": {
          "line": 233,
          "column": 17,
          "position": 2937
        },
        "endLoc": {
          "line": 276,
          "column": 18,
          "position": 3584
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ")\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    invoiceController.getInvoicesDueSoon",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\invoice.routes.ts",
        "start": 355,
        "end": 365,
        "startLoc": {
          "line": 355,
          "column": 4,
          "position": 4425
        },
        "endLoc": {
          "line": 365,
          "column": 19,
          "position": 4565
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 198,
        "end": 276,
        "startLoc": {
          "line": 198,
          "column": 2,
          "position": 2551
        },
        "endLoc": {
          "line": 276,
          "column": 18,
          "position": 3584
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "]),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        productId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 117,
        "end": 128,
        "startLoc": {
          "line": 117,
          "column": 17,
          "position": 1193
        },
        "endLoc": {
          "line": 128,
          "column": 10,
          "position": 1359
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 115,
        "end": 126,
        "startLoc": {
          "line": 115,
          "column": 17,
          "position": 1381
        },
        "endLoc": {
          "line": 126,
          "column": 5,
          "position": 1547
        }
      }
    },
    {
      "format": "typescript",
      "lines": 33,
      "fragment": ",\n    authenticate,\n    authorize(['inventory:read']),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        productId: z.string().uuid().optional(),\n        warehouseId: z.string().uuid().optional(),\n        locationId: z.string().uuid().optional(),\n        movementType: z.enum(['in', 'out', 'transfer', 'adjustment', 'return', 'damage', 'expired', 'theft']).optional(),\n        movementReason: z.enum(['purchase', 'sale', 'transfer_in', 'transfer_out', 'adjustment', 'return', 'damage', 'expired', 'theft', 'production', 'consumption', 'other']).optional(),\n        status: z.enum(['pending', 'completed', 'cancelled', 'reversed']).optional(),\n        lowStock: z.coerce.boolean().optional(),\n        outOfStock: z.coerce.boolean().optional(),\n        needsReorder: z.coerce.boolean().optional(),\n        hasExpiredItems: z.coerce.boolean().optional(),\n        hasExpiringItems: z.coerce.boolean().optional(),\n        minQuantity: z.coerce.number().min(0).optional(),\n        maxQuantity: z.coerce.number().min(0).optional(),\n        minValue: z.coerce.number().min(0).optional(),\n        maxValue: z.coerce.number().min(0).optional(),\n        costMethod: z.enum(['fifo', 'lifo', 'average', 'standard']).optional(),\n        valuationMethod: z.enum(['fifo', 'lifo', 'average', 'standard']).optional()\n      })\n    }),\n    inventoryKardexController.searchInventoryKardex",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 151,
        "end": 183,
        "startLoc": {
          "line": 151,
          "column": 40,
          "position": 1791
        },
        "endLoc": {
          "line": 183,
          "column": 22,
          "position": 2379
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 115,
        "end": 147,
        "startLoc": {
          "line": 115,
          "column": 33,
          "position": 1182
        },
        "endLoc": {
          "line": 147,
          "column": 33,
          "position": 1770
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ")\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    inventoryKardexController",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 208,
        "end": 218,
        "startLoc": {
          "line": 208,
          "column": 2,
          "position": 2529
        },
        "endLoc": {
          "line": 218,
          "column": 26,
          "position": 2667
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 198,
        "end": 208,
        "startLoc": {
          "line": 198,
          "column": 2,
          "position": 2551
        },
        "endLoc": {
          "line": 208,
          "column": 30,
          "position": 2689
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ": z.string().uuid()\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    inventoryKardexController.getInventoryByWarehouse",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 227,
        "end": 237,
        "startLoc": {
          "line": 227,
          "column": 12,
          "position": 2722
        },
        "endLoc": {
          "line": 237,
          "column": 24,
          "position": 2872
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 208,
        "end": 218,
        "startLoc": {
          "line": 208,
          "column": 10,
          "position": 2519
        },
        "endLoc": {
          "line": 218,
          "column": 22,
          "position": 2669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "]),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    inventoryKardexController.getLowStockInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 243,
        "end": 253,
        "startLoc": {
          "line": 243,
          "column": 17,
          "position": 2904
        },
        "endLoc": {
          "line": 253,
          "column": 21,
          "position": 3046
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 233,
        "end": 218,
        "startLoc": {
          "line": 233,
          "column": 17,
          "position": 2937
        },
        "endLoc": {
          "line": 218,
          "column": 22,
          "position": 2669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n    authenticate,\n    authorize(['inventory:read']),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    inventoryKardexController.getOutOfStockInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 257,
        "end": 269,
        "startLoc": {
          "line": 257,
          "column": 16,
          "position": 3067
        },
        "endLoc": {
          "line": 269,
          "column": 23,
          "position": 3220
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 241,
        "end": 218,
        "startLoc": {
          "line": 241,
          "column": 13,
          "position": 2893
        },
        "endLoc": {
          "line": 218,
          "column": 22,
          "position": 2669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n    authenticate,\n    authorize(['inventory:read']),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    inventoryKardexController.getNeedsReorderInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 273,
        "end": 285,
        "startLoc": {
          "line": 273,
          "column": 17,
          "position": 3241
        },
        "endLoc": {
          "line": 285,
          "column": 25,
          "position": 3394
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\inventory-kardex.routes.ts",
        "start": 241,
        "end": 218,
        "startLoc": {
          "line": 241,
          "column": 13,
          "position": 2893
        },
        "endLoc": {
          "line": 218,
          "column": 22,
          "position": 2669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 70,
      "fragment": "),\n        email: z.string().email().optional(),\n        phone: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n        mobile: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n        fax: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n        website: z.string().url().optional(),\n        address: z.object({\n          street: z.string().min(1),\n          city: z.string().min(1),\n          state: z.string().optional(),\n          postalCode: z.string().min(1),\n          country: z.string().min(1),\n          countryCode: z.string().length(2)\n        }).optional(),\n        birthday: z.coerce.date().optional(),\n        anniversary: z.coerce.date().optional(),\n        gender: z.enum(['male', 'female', 'other', 'prefer_not_to_say']).optional(),\n        maritalStatus: z.enum(['single', 'married', 'divorced', 'widowed', 'separated']).optional(),\n        children: z.number().int().min(0).max(20).optional(),\n        education: z.string().max(200).optional(),\n        profession: z.string().max(100).optional(),\n        industry: z.string().max(100).optional(),\n        experience: z.number().int().min(0).max(50).optional(),\n        salary: z.object({\n          amount: z.number().min(0),\n          currency: z.string().length(3)\n        }).optional(),\n        socialMedia: z.object({\n          linkedin: z.string().url().optional(),\n          twitter: z.string().url().optional(),\n          facebook: z.string().url().optional(),\n          instagram: z.string().url().optional(),\n          youtube: z.string().url().optional(),\n          tiktok: z.string().url().optional(),\n          other: z.record(z.string()).optional()\n        }).optional(),\n        communication: z.object({\n          preferredMethod: z.enum(['email', 'phone', 'sms', 'whatsapp', 'linkedin', 'other']).optional(),\n          bestTimeToCall: z.string().optional(),\n          timeZone: z.string().optional(),\n          doNotCall: z.boolean().optional(),\n          doNotEmail: z.boolean().optional(),\n          doNotSms: z.boolean().optional()\n        }).optional(),\n        settings: z.object({\n          notifications: z.object({\n            email: z.boolean().optional(),\n            sms: z.boolean().optional(),\n            push: z.boolean().optional(),\n            phone: z.boolean().optional()\n          }).optional(),\n          preferences: z.object({\n            language: z.string().length(2).optional(),\n            timezone: z.string().optional(),\n            currency: z.string().length(3).optional(),\n            dateFormat: z.string().optional(),\n            timeFormat: z.string().optional()\n          }).optional(),\n          customFields: z.record(z.any()).optional(),\n          tags: z.array(z.string()).optional(),\n          notes: z.string().optional(),\n          internalNotes: z.string().optional()\n        }).optional(),\n        assignedUserId: z.string().uuid().optional(),\n        nextFollowUpDate: z.coerce.date().optional(),\n        leadScore: z.number().int().min(0).max(100).optional(),\n        engagementScore: z.number().int().min(0).max(100).optional()\n      })\n    }),\n    contactController.updateContact",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 120,
        "end": 189,
        "startLoc": {
          "line": 120,
          "column": 2,
          "position": 1861
        },
        "endLoc": {
          "line": 189,
          "column": 14,
          "position": 2986
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 32,
        "end": 101,
        "startLoc": {
          "line": 32,
          "column": 2,
          "position": 396
        },
        "endLoc": {
          "line": 101,
          "column": 14,
          "position": 1521
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ": z.object({\n          companyId: z.string().uuid().optional(),\n          firstName: z.string().min(1).max(100).optional(),\n          lastName: z.string().min(1).max(100).optional(),\n          middleName: z.string().max(100).optional(),\n          title: z.string().max(100).optional(),\n          department: z.string().max(100).optional(),\n          type: z.enum(['primary', 'secondary', 'decision_maker', 'influencer', 'user', 'technical', 'financial', 'procurement']).optional(),\n          status: z.enum(['active', 'inactive', 'unsubscribed', 'bounced', 'spam', 'deleted']).optional(),\n          source: z.enum(['website', 'referral', 'cold_call', 'email', 'social_media', 'event', 'trade_show', 'webinar', 'content', 'advertising', 'other']).optional(),\n          priority: z.enum(['low', 'medium', 'high', 'urgent']).optional(),\n          email: z.string().email().optional(),\n          phone: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n          mobile: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n          fax: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n          website: z.string().url().optional(),\n          assignedUserId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 546,
        "end": 562,
        "startLoc": {
          "line": 546,
          "column": 8,
          "position": 6114
        },
        "endLoc": {
          "line": 562,
          "column": 15,
          "position": 6497
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 110,
        "end": 38,
        "startLoc": {
          "line": 110,
          "column": 5,
          "position": 1580
        },
        "endLoc": {
          "line": 38,
          "column": 8,
          "position": 498
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ").optional(),\n          settings: z.object({\n            notifications: z.object({\n              email: z.boolean().optional(),\n              sms: z.boolean().optional(),\n              push: z.boolean().optional(),\n              phone: z.boolean().optional()\n            }).optional(),\n            preferences: z.object({\n              language: z.string().length(2).optional(),\n              timezone: z.string().optional(),\n              currency: z.string().length(3).optional(),\n              dateFormat: z.string().optional(),\n              timeFormat: z.string().optional()\n            }).optional(),\n            customFields: z.record(z.any()).optional(),\n            tags: z.array(z.string()).optional(),\n            notes: z.string().optional(),\n            internalNotes: z.string().optional()\n          }).optional()\n        }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 565,
        "end": 585,
        "startLoc": {
          "line": 565,
          "column": 4,
          "position": 6583
        },
        "endLoc": {
          "line": 585,
          "column": 2,
          "position": 6859
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 75,
        "end": 94,
        "startLoc": {
          "line": 75,
          "column": 2,
          "position": 1140
        },
        "endLoc": {
          "line": 94,
          "column": 2,
          "position": 1414
        }
      }
    },
    {
      "format": "typescript",
      "lines": 61,
      "fragment": "),\n        website: z.string().url().optional(),\n        email: z.string().email().optional(),\n        phone: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n        address: z.object({\n          street: z.string().min(1),\n          city: z.string().min(1),\n          state: z.string().optional(),\n          postalCode: z.string().min(1),\n          country: z.string().min(1),\n          countryCode: z.string().length(2)\n        }).optional(),\n        billingAddress: z.object({\n          street: z.string().min(1),\n          city: z.string().min(1),\n          state: z.string().optional(),\n          postalCode: z.string().min(1),\n          country: z.string().min(1),\n          countryCode: z.string().length(2)\n        }).optional(),\n        shippingAddress: z.object({\n          street: z.string().min(1),\n          city: z.string().min(1),\n          state: z.string().optional(),\n          postalCode: z.string().min(1),\n          country: z.string().min(1),\n          countryCode: z.string().length(2)\n        }).optional(),\n        taxId: z.string().min(5).max(20).optional(),\n        vatNumber: z.string().min(8).max(15).optional(),\n        registrationNumber: z.string().max(50).optional(),\n        description: z.string().max(1000).optional(),\n        annualRevenue: z.object({\n          amount: z.number().min(0),\n          currency: z.string().length(3)\n        }).optional(),\n        employeeCount: z.number().int().min(0).max(1000000).optional(),\n        foundedYear: z.number().int().min(1800).max(new Date().getFullYear()).optional(),\n        parentCompanyId: z.string().uuid().optional(),\n        assignedUserId: z.string().uuid().optional(),\n        nextFollowUpDate: z.coerce.date().optional(),\n        leadScore: z.number().int().min(0).max(100).optional(),\n        settings: z.object({\n          notifications: z.object({\n            email: z.boolean().optional(),\n            sms: z.boolean().optional(),\n            push: z.boolean().optional()\n          }).optional(),\n          preferences: z.object({\n            language: z.string().length(2).optional(),\n            timezone: z.string().optional(),\n            currency: z.string().length(3).optional(),\n            dateFormat: z.string().optional()\n          }).optional(),\n          customFields: z.record(z.any()).optional(),\n          tags: z.array(z.string()).optional(),\n          notes: z.string().optional()\n        }).optional()\n      })\n    }),\n    companyController.updateCompany",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 105,
        "end": 165,
        "startLoc": {
          "line": 105,
          "column": 2,
          "position": 1501
        },
        "endLoc": {
          "line": 165,
          "column": 14,
          "position": 2426
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 29,
        "end": 89,
        "startLoc": {
          "line": 29,
          "column": 2,
          "position": 316
        },
        "endLoc": {
          "line": 89,
          "column": 14,
          "position": 1241
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.object({\n          name: z.string().min(1).max(200).optional(),\n          legalName: z.string().max(200).optional(),\n          type: z.enum(['customer', 'supplier', 'partner', 'prospect', 'competitor']).optional(),\n          status: z.enum(['active', 'inactive', 'suspended', 'prospect', 'lead']).optional(),\n          size: z.enum(['startup', 'small', 'medium', 'large', 'enterprise']).optional(),\n          industry: z.string().min(1).max(100).optional(),\n          source: z.enum(['website', 'referral', 'cold_call', 'email', 'social_media', 'event', 'other']).optional(),\n          website: z.string().url().optional(),\n          email: z.string().email().optional(),\n          phone: z.string().regex(/^[\\+]?[1-9][\\d]{0,15}$/).optional(),\n          taxId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 380,
        "end": 391,
        "startLoc": {
          "line": 380,
          "column": 8,
          "position": 4367
        },
        "endLoc": {
          "line": 391,
          "column": 6,
          "position": 4630
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 98,
        "end": 33,
        "startLoc": {
          "line": 98,
          "column": 5,
          "position": 1300
        },
        "endLoc": {
          "line": 33,
          "column": 8,
          "position": 378
        }
      }
    },
    {
      "format": "typescript",
      "lines": 34,
      "fragment": ").optional(),\n          taxId: z.string().min(5).max(20).optional(),\n          vatNumber: z.string().min(8).max(15).optional(),\n          registrationNumber: z.string().max(50).optional(),\n          description: z.string().max(1000).optional(),\n          annualRevenue: z.object({\n            amount: z.number().min(0),\n            currency: z.string().length(3)\n          }).optional(),\n          employeeCount: z.number().int().min(0).max(1000000).optional(),\n          foundedYear: z.number().int().min(1800).max(new Date().getFullYear()).optional(),\n          parentCompanyId: z.string().uuid().optional(),\n          assignedUserId: z.string().uuid().optional(),\n          nextFollowUpDate: z.coerce.date().optional(),\n          leadScore: z.number().int().min(0).max(100).optional(),\n          settings: z.object({\n            notifications: z.object({\n              email: z.boolean().optional(),\n              sms: z.boolean().optional(),\n              push: z.boolean().optional()\n            }).optional(),\n            preferences: z.object({\n              language: z.string().length(2).optional(),\n              timezone: z.string().optional(),\n              currency: z.string().length(3).optional(),\n              dateFormat: z.string().optional()\n            }).optional(),\n            customFields: z.record(z.any()).optional(),\n            tags: z.array(z.string()).optional(),\n            notes: z.string().optional()\n          }).optional()\n        })\n      })\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 390,
        "end": 423,
        "startLoc": {
          "line": 390,
          "column": 25,
          "position": 4622
        },
        "endLoc": {
          "line": 423,
          "column": 2,
          "position": 5151
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 56,
        "end": 88,
        "startLoc": {
          "line": 56,
          "column": 2,
          "position": 709
        },
        "endLoc": {
          "line": 88,
          "column": 2,
          "position": 1236
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "),\n        description: z.string().max(1000).optional(),\n        settings: z.object({\n          layers: z.array(z.object({\n            id: z.string().uuid(),\n            name: z.string().min(1).max(255),\n            type: z.enum(['domain', 'application', 'infrastructure', 'presentation', 'shared']),\n            description: z.string().max(1000),\n            components: z.array(z.object({\n              id: z.string().uuid(),\n              name: z.string().min(1).max(255),\n              type: z.enum(['entity', 'repository', 'use_case', 'service', 'controller', 'middleware', 'dto', 'route']),\n              description: z.string().max(1000),\n              dependencies: z.array(z.string()).default([]),\n              interfaces: z.array(z.string()).default([]),\n              implementation: z.string().max(5000),\n              tests: z.array(z.string()).default([]),\n              documentation: z.string().max(5000)\n            })),",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 74,
        "end": 92,
        "startLoc": {
          "line": 74,
          "column": 2,
          "position": 964
        },
        "endLoc": {
          "line": 92,
          "column": 2,
          "position": 1291
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 26,
        "end": 44,
        "startLoc": {
          "line": 26,
          "column": 2,
          "position": 210
        },
        "endLoc": {
          "line": 44,
          "column": 2,
          "position": 537
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "]),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['hexagonal'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 143,
        "end": 154,
        "startLoc": {
          "line": 143,
          "column": 20,
          "position": 1763
        },
        "endLoc": {
          "line": 154,
          "column": 12,
          "position": 1937
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 115,
        "end": 126,
        "startLoc": {
          "line": 115,
          "column": 17,
          "position": 1381
        },
        "endLoc": {
          "line": 126,
          "column": 17,
          "position": 1555
        }
      }
    },
    {
      "format": "typescript",
      "lines": 26,
      "fragment": ",\n    authenticate,\n    authorize(['architecture:read']),\n    validateRequest({\n      params: z.object({\n        organizationId: z.string().uuid()\n      }),\n      query: z.object({\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc'),\n        search: z.string().max(200).optional(),\n        type: z.enum(['hexagonal', 'layered', 'microservices', 'monolithic', 'event_driven']).optional(),\n        status: z.enum(['design', 'implementation', 'testing', 'deployed', 'maintenance']).optional(),\n        layerType: z.enum(['domain', 'application', 'infrastructure', 'presentation', 'shared']).optional(),\n        componentType: z.enum(['entity', 'repository', 'use_case', 'service', 'controller', 'middleware', 'dto', 'route']).optional(),\n        isActive: z.coerce.boolean().optional(),\n        hasMetrics: z.coerce.boolean().optional(),\n        minQualityScore: z.coerce.number().min(0).max(10).optional(),\n        maxQualityScore: z.coerce.number().min(0).max(10).optional(),\n        lastAnalysisFrom: z.coerce.date().optional(),\n        lastAnalysisTo: z.coerce.date().optional()\n      })\n    }),\n    architectureController.searchArchitectures",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 170,
        "end": 195,
        "startLoc": {
          "line": 170,
          "column": 40,
          "position": 2211
        },
        "endLoc": {
          "line": 195,
          "column": 20,
          "position": 2649
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 141,
        "end": 166,
        "startLoc": {
          "line": 141,
          "column": 33,
          "position": 1752
        },
        "endLoc": {
          "line": 166,
          "column": 31,
          "position": 2190
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "])\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    architectureController",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 220,
        "end": 230,
        "startLoc": {
          "line": 220,
          "column": 15,
          "position": 2809
        },
        "endLoc": {
          "line": 230,
          "column": 23,
          "position": 2948
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 198,
        "end": 208,
        "startLoc": {
          "line": 198,
          "column": 18,
          "position": 2550
        },
        "endLoc": {
          "line": 208,
          "column": 30,
          "position": 2689
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "])\n      }),\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    architectureController.getArchitecturesByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 239,
        "end": 249,
        "startLoc": {
          "line": 239,
          "column": 14,
          "position": 3023
        },
        "endLoc": {
          "line": 249,
          "column": 25,
          "position": 3164
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 198,
        "end": 230,
        "startLoc": {
          "line": 198,
          "column": 18,
          "position": 2550
        },
        "endLoc": {
          "line": 230,
          "column": 23,
          "position": 2950
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "]),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    architectureController.getActiveArchitectures",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 255,
        "end": 265,
        "startLoc": {
          "line": 255,
          "column": 20,
          "position": 3196
        },
        "endLoc": {
          "line": 265,
          "column": 23,
          "position": 3338
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 233,
        "end": 230,
        "startLoc": {
          "line": 233,
          "column": 17,
          "position": 2937
        },
        "endLoc": {
          "line": 230,
          "column": 23,
          "position": 2950
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n    authenticate,\n    authorize(['architecture:read']),\n    validateRequest({\n      query: z.object({\n        organizationId: z.string().uuid(),\n        page: z.coerce.number().int().min(1).default(1),\n        limit: z.coerce.number().int().min(1).max(100).default(20),\n        sortBy: z.string().default('createdAt'),\n        sortOrder: z.enum(['asc', 'desc']).default('desc')\n      })\n    }),\n    architectureController.getArchitecturesWithMetrics",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 269,
        "end": 281,
        "startLoc": {
          "line": 269,
          "column": 16,
          "position": 3359
        },
        "endLoc": {
          "line": 281,
          "column": 28,
          "position": 3512
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 253,
        "end": 230,
        "startLoc": {
          "line": 253,
          "column": 10,
          "position": 3185
        },
        "endLoc": {
          "line": 230,
          "column": 23,
          "position": 2950
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "name: z.string().min(1, 'Variant name is required').max(100, 'Variant name cannot exceed 100 characters'),\n    sku: z.string().min(1, 'Variant SKU is required').max(100, 'Variant SKU cannot exceed 100 characters'),\n    price: z.object({\n      amount: z.number().min(0, 'Variant price must be non-negative'),\n      currency: z.string().length(3, 'Currency must be 3 characters')\n    }),\n    compareAtPrice: z.object({\n      amount: z.number().min(0, 'Compare at price must be non-negative'),\n      currency: z.string().length(3, 'Currency must be 3 characters')\n    }).optional(),\n    costPrice: z.object({\n      amount: z.number().min(0, 'Cost price must be non-negative'),\n      currency: z.string().length(3, 'Currency must be 3 characters')\n    }).optional(),\n    inventory: z.object({\n      quantity: z.number().int().min(0, 'Quantity must be non-negative'),\n      reserved: z.number().int().min(0, 'Reserved quantity must be non-negative'),\n      available: z.number().int().min(0, 'Available quantity must be non-negative')\n    }),\n    attributes: z.record(z.any()).default({}),\n    isActive: z.boolean().default(true)\n  })).optional()\n});\n\n// ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\product.dto.ts",
        "start": 157,
        "end": 181,
        "startLoc": {
          "line": 157,
          "column": 5,
          "position": 2474
        },
        "endLoc": {
          "line": 181,
          "column": 76,
          "position": 2825
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\product.dto.ts",
        "start": 72,
        "end": 96,
        "startLoc": {
          "line": 72,
          "column": 5,
          "position": 1055
        },
        "endLoc": {
          "line": 96,
          "column": 7,
          "position": 1406
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ".optional(),\n  settings: z.object({\n    modelType: z.enum(['linear_regression', 'decision_tree', 'random_forest', 'neural_network', 'time_series', 'clustering', 'classification', 'deep_learning']).optional(),\n    trainingPeriod: z.number().int().min(1).max(3650).optional(),\n    predictionHorizon: z.number().int().min(1).max(365).optional(),\n    confidenceThreshold: z.number().min(0).max(1).optional(),\n    autoRetrain: z.boolean().optional(),\n    retrainFrequency: z.number().int().min(1).max(365).optional(),\n    dataSource: z.array(z.string().min(1)).optional(),\n    features: z.array(z.string().min(1)).optional(),\n    targetVariable: z.string().min(1).max(100).optional(),\n    validationMethod: z.enum(['cross_validation', 'holdout', 'time_series_split']).optional(),\n    hyperparameters: z.record(z.any()).optional(),\n    customFields: CustomFieldsSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\predictive-analytics.dto.ts",
        "start": 62,
        "end": 75,
        "startLoc": {
          "line": 62,
          "column": 11,
          "position": 696
        },
        "endLoc": {
          "line": 75,
          "column": 19,
          "position": 1001
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 62,
        "end": 75,
        "startLoc": {
          "line": 62,
          "column": 2,
          "position": 805
        },
        "endLoc": {
          "line": 75,
          "column": 2,
          "position": 1110
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "type: z.enum(['sales_forecast', 'demand_prediction', 'churn_prediction', 'revenue_forecast', 'inventory_optimization', 'customer_lifetime_value', 'market_trend', 'risk_assessment']).optional(),\n  status: z.enum(['pending', 'processing', 'completed', 'failed', 'cancelled']).optional(),\n  modelType: z.enum(['linear_regression', 'decision_tree', 'random_forest', 'neural_network', 'time_series', 'clustering', 'classification', 'deep_learning']).optional(),\n  accuracy: z.enum(['low', 'medium', 'high', 'very_high']).optional(),\n  isActive: z.coerce.boolean().optional(),\n  needsRetraining: z.coerce.boolean().optional(),\n  hasPredictions: z.coerce.boolean().optional(),\n  minAccuracy: z.coerce.number().min(0).max(1).optional(),\n  maxAccuracy: z.coerce.number().min(0).max(1).optional(),\n  lastPredictionFrom: z.coerce.date().optional(),\n  lastPredictionTo: z.coerce.date().optional(),\n  nextRetrainFrom: z.coerce.date().optional(),\n  nextRetrainTo: z.coerce.date().optional()\n});",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\predictive-analytics.dto.ts",
        "start": 105,
        "end": 118,
        "startLoc": {
          "line": 105,
          "column": 3,
          "position": 1240
        },
        "endLoc": {
          "line": 118,
          "column": 2,
          "position": 1548
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\predictive-analytics.routes.ts",
        "start": 126,
        "end": 140,
        "startLoc": {
          "line": 126,
          "column": 9,
          "position": 1547
        },
        "endLoc": {
          "line": 140,
          "column": 2,
          "position": 1858
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "productId: UUIDSchema.optional(),\n    description: z.string().min(1, 'Item description is required').max(500, 'Description cannot exceed 500 characters'),\n    quantity: z.number().min(0.01, 'Quantity must be greater than 0'),\n    unitPrice: MoneySchema,\n    totalPrice: MoneySchema,\n    taxRate: z.number().min(0, 'Tax rate must be non-negative').max(100, 'Tax rate cannot exceed 100%').optional(),\n    taxAmount: MoneySchema.optional(),\n    discountRate: z.number().min(0, 'Discount rate must be non-negative').max(100, 'Discount rate cannot exceed 100%').optional(),\n    discountAmount: MoneySchema.optional(),\n    notes: z.string().max(500, 'Item notes cannot exceed 500 characters').optional()\n  })).optional",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\invoice.dto.ts",
        "start": 92,
        "end": 102,
        "startLoc": {
          "line": 92,
          "column": 5,
          "position": 1163
        },
        "endLoc": {
          "line": 102,
          "column": 9,
          "position": 1344
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\invoice.dto.ts",
        "start": 45,
        "end": 55,
        "startLoc": {
          "line": 45,
          "column": 5,
          "position": 380
        },
        "endLoc": {
          "line": 55,
          "column": 4,
          "position": 561
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "type: InteractionTypeSchema.optional(),\n  status: InteractionStatusSchema.optional(),\n  priority: InteractionPrioritySchema.optional(),\n  contactId: UUIDSchema.optional(),\n  companyId: UUIDSchema.optional(),\n  userId: UUIDSchema.optional(),\n  scheduledFrom: z.coerce.date().optional(),\n  scheduledTo: z.coerce.date().optional(),\n  completedFrom: z.coerce.date().optional(),\n  completedTo: z.coerce.date().optional(),\n  tags: z.string().optional(),\n  hasOutcome: z.coerce.boolean().optional(),\n  hasNextAction: z.coerce.boolean().optional(),\n  overdue: z.coerce.boolean().optional(),\n  upcoming: z.coerce.boolean().optional()\n});\n\n// ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 205,
        "end": 222,
        "startLoc": {
          "line": 205,
          "column": 3,
          "position": 1854
        },
        "endLoc": {
          "line": 222,
          "column": 76,
          "position": 2074
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 187,
        "end": 204,
        "startLoc": {
          "line": 187,
          "column": 3,
          "position": 1619
        },
        "endLoc": {
          "line": 204,
          "column": 7,
          "position": 1839
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "),\n  pagination: z.object({\n    page: z.number(),\n    limit: z.number(),\n    total: z.number(),\n    totalPages: z.number(),\n    hasNext: z.boolean(),\n    hasPrev: z.boolean()\n  })\n});\n\nexport const InteractionStatsResponseSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 289,
        "end": 300,
        "startLoc": {
          "line": 289,
          "column": 26,
          "position": 2664
        },
        "endLoc": {
          "line": 300,
          "column": 31,
          "position": 2755
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\product.dto.ts",
        "start": 320,
        "end": 331,
        "startLoc": {
          "line": 320,
          "column": 22,
          "position": 4458
        },
        "endLoc": {
          "line": 331,
          "column": 27,
          "position": 4549
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "= z.object({\n  contactId: UUIDSchema,\n  name: NameSchema,\n  value: z.number().min(0, 'Deal value cannot be negative'),\n  currency: z.string().length(3, 'Currency must be 3 characters').default('USD'),\n  source: DealSourceSchema.default('WEBSITE'),\n  companyId: UUIDSchema.optional(),\n  description: DescriptionSchema.optional()\n});\n\nexport const CreateProposalSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 2,
          "position": 833
        },
        "endLoc": {
          "line": 101,
          "column": 21,
          "position": 940
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 81,
        "end": 91,
        "startLoc": {
          "line": 81,
          "column": 2,
          "position": 724
        },
        "endLoc": {
          "line": 91,
          "column": 22,
          "position": 831
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "= z.object({\n  contactId: UUIDSchema,\n  name: NameSchema,\n  value: z.number().min(0, 'Deal value cannot be negative'),\n  currency: z.string().length(3, 'Currency must be 3 characters').default('USD'),\n  source: DealSourceSchema.default('WEBSITE'),\n  companyId: UUIDSchema.optional(),\n  description: DescriptionSchema.optional()\n});\n\nexport const CreateNegotiationSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 101,
        "end": 111,
        "startLoc": {
          "line": 101,
          "column": 2,
          "position": 942
        },
        "endLoc": {
          "line": 111,
          "column": 24,
          "position": 1049
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 81,
        "end": 91,
        "startLoc": {
          "line": 81,
          "column": 2,
          "position": 724
        },
        "endLoc": {
          "line": 91,
          "column": 22,
          "position": 831
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "= z.object({\n  contactId: UUIDSchema,\n  name: NameSchema,\n  value: z.number().min(0, 'Deal value cannot be negative'),\n  currency: z.string().length(3, 'Currency must be 3 characters').default('USD'),\n  source: DealSourceSchema.default('WEBSITE'),\n  companyId: UUIDSchema.optional(),\n  description: DescriptionSchema.optional()\n});\n\n// ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 111,
        "end": 121,
        "startLoc": {
          "line": 111,
          "column": 2,
          "position": 1051
        },
        "endLoc": {
          "line": 121,
          "column": 76,
          "position": 1154
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 81,
        "end": 91,
        "startLoc": {
          "line": 81,
          "column": 2,
          "position": 724
        },
        "endLoc": {
          "line": 91,
          "column": 7,
          "position": 827
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ".optional(),\n  expectedCloseDate: z.coerce.date().optional(),\n  nextStep: z.string().max(500, 'Next step cannot exceed 500 characters').optional(),\n  nextStepDate: z.coerce.date().optional(),\n  tags: TagsSchema,\n  customFields: CustomFieldsSchema,\n  attachments: z.array(z.string().url('Invalid attachment URL')).max(5, 'Cannot have more than 5 attachments').optional(),\n  notes: z.string().max(2000, 'Notes cannot exceed 2000 characters').optional(),\n  competitors: z.array(z.string().max(100, 'Competitor name cannot exceed 100 characters')).max(10, 'Cannot have more than 10 competitors').optional(),\n  decisionMakers: z.array(z.string().max(100, 'Decision maker name cannot exceed 100 characters')).max(10, 'Cannot have more than 10 decision makers').optional(),\n  budget: z.number().min(0, 'Budget cannot be negative').optional(),\n  timeline: z.string().max(200, 'Timeline cannot exceed 200 characters').optional(),\n  requirements: z.array(z.string().max(500, 'Requirement cannot exceed 500 characters')).max(20, 'Cannot have more than 20 requirements').optional(),\n  objections: z.array(z.string().max(500, 'Objection cannot exceed 500 characters')).max(20, 'Cannot have more than 20 objections').optional()\n});\n\nexport const UpdateStageSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 133,
        "end": 149,
        "startLoc": {
          "line": 133,
          "column": 2,
          "position": 1301
        },
        "endLoc": {
          "line": 149,
          "column": 18,
          "position": 1632
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 65,
        "end": 81,
        "startLoc": {
          "line": 65,
          "column": 11,
          "position": 391
        },
        "endLoc": {
          "line": 81,
          "column": 17,
          "position": 722
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.coerce.date().optional()\n});\n\nexport const AddTagSchema = z.object({\n  tag: z.string().min(1, 'Tag cannot be empty').max(50, 'Tag cannot exceed 50 characters')\n});\n\nexport const RemoveTagSchema = z.object({\n  tag: z.string().min(1, 'Tag cannot be empty').max(50, 'Tag cannot exceed 50 characters')\n});\n\nexport const AddCompetitorSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 176,
        "end": 187,
        "startLoc": {
          "line": 176,
          "column": 13,
          "position": 1882
        },
        "endLoc": {
          "line": 187,
          "column": 20,
          "position": 1995
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 133,
        "end": 144,
        "startLoc": {
          "line": 133,
          "column": 15,
          "position": 1108
        },
        "endLoc": {
          "line": 144,
          "column": 21,
          "position": 1221
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ")\n});\n\nexport const SetCustomFieldSchema = z.object({\n  key: z.string().min(1, 'Key cannot be empty').max(100, 'Key cannot exceed 100 characters'),\n  value: z.any()\n});\n\nexport const RemoveCustomFieldSchema = z.object({\n  key: z.string().min(1, 'Key cannot be empty').max(100, 'Key cannot exceed 100 characters')\n});\n\n// ========================================================================\n// PARAMETER SCHEMAS\n// ========================================================================\n\nexport const DealIdParamSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 200,
        "end": 216,
        "startLoc": {
          "line": 200,
          "column": 51,
          "position": 2164
        },
        "endLoc": {
          "line": 216,
          "column": 18,
          "position": 2283
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 141,
        "end": 157,
        "startLoc": {
          "line": 141,
          "column": 34,
          "position": 1210
        },
        "endLoc": {
          "line": 157,
          "column": 25,
          "position": 1329
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": "stage: DealStageSchema.optional(),\n  status: DealStatusSchema.optional(),\n  priority: DealPrioritySchema.optional(),\n  source: DealSourceSchema.optional(),\n  contactId: UUIDSchema.optional(),\n  companyId: UUIDSchema.optional(),\n  userId: UUIDSchema.optional(),\n  valueFrom: z.coerce.number().min(0, 'Value from cannot be negative').optional(),\n  valueTo: z.coerce.number().min(0, 'Value to cannot be negative').optional(),\n  probabilityFrom: z.coerce.number().min(0, 'Probability from cannot be negative').max(100, 'Probability from cannot exceed 100').optional(),\n  probabilityTo: z.coerce.number().min(0, 'Probability to cannot be negative').max(100, 'Probability to cannot exceed 100').optional(),\n  expectedCloseFrom: z.coerce.date().optional(),\n  expectedCloseTo: z.coerce.date().optional(),\n  actualCloseFrom: z.coerce.date().optional(),\n  actualCloseTo: z.coerce.date().optional(),\n  tags: z.string().optional(),\n  hasNextStep: z.coerce.boolean().optional(),\n  overdue: z.coerce.boolean().optional(),\n  won: z.coerce.boolean().optional(),\n  lost: z.coerce.boolean().optional(),\n  active: z.coerce.boolean().optional()\n});\n\n// ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 270,
        "end": 293,
        "startLoc": {
          "line": 270,
          "column": 3,
          "position": 2958
        },
        "endLoc": {
          "line": 293,
          "column": 76,
          "position": 3322
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 246,
        "end": 269,
        "startLoc": {
          "line": 246,
          "column": 3,
          "position": 2579
        },
        "endLoc": {
          "line": 269,
          "column": 7,
          "position": 2943
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "),\n  pagination: z.object({\n    page: z.number(),\n    limit: z.number(),\n    total: z.number(),\n    totalPages: z.number(),\n    hasNext: z.boolean(),\n    hasPrev: z.boolean()\n  })\n});\n\nexport const DealStatsResponseSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 384,
        "end": 395,
        "startLoc": {
          "line": 384,
          "column": 19,
          "position": 4204
        },
        "endLoc": {
          "line": 395,
          "column": 24,
          "position": 4295
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\product.dto.ts",
        "start": 320,
        "end": 331,
        "startLoc": {
          "line": 320,
          "column": 22,
          "position": 4458
        },
        "endLoc": {
          "line": 331,
          "column": 27,
          "position": 4549
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "),\n    constraints: z.array(z.object({\n      id: z.string().uuid(),\n      name: z.string().min(1, 'Constraint name is required').max(255, 'Constraint name cannot exceed 255 characters'),\n      type: z.enum(['primary_key', 'foreign_key', 'unique', 'check', 'not_null', 'default', 'index'], {\n        errorMap: () => ({ message: 'Constraint type must be one of: primary_key, foreign_key, unique, check, not_null, default, index' })\n      }),\n      columns: z.array(z.string()).min(1, 'At least one column is required'),\n      referencedTable: z.string().max(255).optional(),\n      referencedColumns: z.array(z.string()).optional(),\n      condition: z.string().max(1000).optional(),\n      description: z.string().max(1000, 'Description cannot exceed 1000 characters'),\n      isDeferrable: z.boolean().default(false),\n      initiallyDeferred: z.boolean().default(false),\n      onDelete: z.enum(['CASCADE', 'SET NULL', 'RESTRICT', 'NO ACTION']).optional(),\n      onUpdate: z.enum(['CASCADE', 'SET NULL', 'RESTRICT', 'NO ACTION']).optional()\n    })).default([]),\n    indexes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 124,
        "end": 141,
        "startLoc": {
          "line": 124,
          "column": 44,
          "position": 1917
        },
        "endLoc": {
          "line": 141,
          "column": 8,
          "position": 2235
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 101,
        "end": 118,
        "startLoc": {
          "line": 101,
          "column": 2,
          "position": 1483
        },
        "endLoc": {
          "line": 118,
          "column": 12,
          "position": 1801
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "z.object({\n  id: z.string(),\n  name: z.string(),\n  type: z.enum(['primary_key', 'foreign_key', 'unique', 'check', 'not_null', 'default', 'index']),\n  columns: z.array(z.string()),\n  referencedTable: z.string().optional(),\n  referencedColumns: z.array(z.string()).optional(),\n  condition: z.string().optional(),\n  description: z.string(),\n  isDeferrable: z.boolean(),\n  initiallyDeferred: z.boolean(),\n  onDelete: z.enum(['CASCADE', 'SET NULL', 'RESTRICT', 'NO ACTION']).optional(),\n  onUpdate: z.enum(['CASCADE', 'SET NULL', 'RESTRICT', 'NO ACTION']).optional(),\n  createdAt: z.date(),\n  updatedAt: z.date()\n});",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 341,
        "end": 356,
        "startLoc": {
          "line": 341,
          "column": 2,
          "position": 5442
        },
        "endLoc": {
          "line": 356,
          "column": 2,
          "position": 5678
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 315,
        "end": 330,
        "startLoc": {
          "line": 315,
          "column": 2,
          "position": 5094
        },
        "endLoc": {
          "line": 330,
          "column": 2,
          "position": 5331
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "totalTables: z.number(),\n  totalViews: z.number(),\n  totalFunctions: z.number(),\n  totalProcedures: z.number(),\n  totalTriggers: z.number(),\n  totalIndexes: z.number(),\n  totalConstraints: z.number(),\n  totalPolicies: z.number(),\n  totalSize: z.number(),\n  averageTableSize: z.number(),\n  averageHealthScore",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 539,
        "end": 549,
        "startLoc": {
          "line": 539,
          "column": 3,
          "position": 7742
        },
        "endLoc": {
          "line": 549,
          "column": 19,
          "position": 7852
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\database-schema.dto.ts",
        "start": 436,
        "end": 446,
        "startLoc": {
          "line": 436,
          "column": 3,
          "position": 6588
        },
        "endLoc": {
          "line": 446,
          "column": 13,
          "position": 6698
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ").optional(),\n    other: z.record(z.string()).optional()\n  }).optional(),\n  communication: z.object({\n    preferredMethod: z.enum(['email', 'phone', 'sms', 'whatsapp', 'linkedin', 'other']).optional(),\n    bestTimeToCall: z.string().optional(),\n    timeZone: z.string().optional(),\n    doNotCall: z.boolean().optional(),\n    doNotEmail: z.boolean().optional(),\n    doNotSms: z.boolean().optional()\n  }).optional(),\n  settings: z.object({\n    notifications: z.object({\n      email: z.boolean().optional(),\n      sms: z.boolean().optional(),\n      push: z.boolean().optional(),\n      phone: z.boolean().optional()\n    }).optional(),\n    preferences: z.object({\n      language: z.string().length(2,",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\contact.dto.ts",
        "start": 63,
        "end": 82,
        "startLoc": {
          "line": 63,
          "column": 21,
          "position": 1082
        },
        "endLoc": {
          "line": 82,
          "column": 2,
          "position": 1354
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 65,
        "end": 84,
        "startLoc": {
          "line": 65,
          "column": 2,
          "position": 986
        },
        "endLoc": {
          "line": 84,
          "column": 2,
          "position": 1258
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": ".number().int().min(0).optional(),\n  lastContactAfter: z.coerce.date().optional(),\n  lastContactBefore: z.coerce.date().optional(),\n  nextFollowUpAfter: z.coerce.date().optional(),\n  nextFollowUpBefore: z.coerce.date().optional(),\n  lastEmailOpenAfter: z.coerce.date().optional(),\n  lastEmailOpenBefore: z.coerce.date().optional(),\n  lastEmailClickAfter: z.coerce.date().optional(),\n  lastEmailClickBefore: z.coerce.date().optional(),\n  lastWebsiteVisitAfter: z.coerce.date().optional(),\n  lastWebsiteVisitBefore: z.coerce.date().optional(),\n  lastSocialMediaInteractionAfter: z.coerce.date().optional(),\n  lastSocialMediaInteractionBefore: z.coerce.date().optional(),\n  createdAfter: z.coerce.date().optional(),\n  createdBefore: z.coerce.date().optional(),\n  updatedAfter: z.coerce.date().optional(),\n  updatedBefore: z.coerce.date().optional(),\n  birthdayAfter: z.coerce.date().optional(),\n  birthdayBefore: z.coerce.date().optional(),\n  anniversaryAfter: z.coerce.date().optional(),\n  anniversaryBefore: z.coerce.date().optional(),\n  tags: z.array(z.string()).optional(),\n  page: z.coerce.number().int().min(1,",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\contact.dto.ts",
        "start": 138,
        "end": 160,
        "startLoc": {
          "line": 138,
          "column": 2,
          "position": 2370
        },
        "endLoc": {
          "line": 160,
          "column": 2,
          "position": 2768
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\contact.routes.ts",
        "start": 270,
        "end": 292,
        "startLoc": {
          "line": 270,
          "column": 7,
          "position": 3956
        },
        "endLoc": {
          "line": 292,
          "column": 2,
          "position": 4354
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ".number().int().min(1800).optional(),\n  lastContactAfter: z.coerce.date().optional(),\n  lastContactBefore: z.coerce.date().optional(),\n  nextFollowUpAfter: z.coerce.date().optional(),\n  nextFollowUpBefore: z.coerce.date().optional(),\n  createdAfter: z.coerce.date().optional(),\n  createdBefore: z.coerce.date().optional(),\n  updatedAfter: z.coerce.date().optional(),\n  updatedBefore: z.coerce.date().optional(),\n  tags: z.array(z.string()).optional(),\n  page: z.coerce.number().int().min(1,",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\company.dto.ts",
        "start": 118,
        "end": 128,
        "startLoc": {
          "line": 118,
          "column": 2,
          "position": 1926
        },
        "endLoc": {
          "line": 128,
          "column": 2,
          "position": 2120
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\company.routes.ts",
        "start": 228,
        "end": 238,
        "startLoc": {
          "line": 228,
          "column": 7,
          "position": 3145
        },
        "endLoc": {
          "line": 238,
          "column": 2,
          "position": 3339
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.string(),\n    count: z.number().int().min(0)\n  })),\n  topSources: z.array(z.object({\n    source: z.string(),\n    count: z.number().int().min(0)\n  })),\n  topAssignedUsers: z.array(z.object({\n    userId: z.string(),\n    count: z.number().int().min(0)\n  }))\n}",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\company.dto.ts",
        "start": 271,
        "end": 282,
        "startLoc": {
          "line": 271,
          "column": 9,
          "position": 4209
        },
        "endLoc": {
          "line": 282,
          "column": 2,
          "position": 4342
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\contact.dto.ts",
        "start": 369,
        "end": 379,
        "startLoc": {
          "line": 369,
          "column": 11,
          "position": 5913
        },
        "endLoc": {
          "line": 379,
          "column": 2,
          "position": 6045
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": "),\n  description: DescriptionSchema.optional(),\n  settings: z.object({\n    layers: z.array(z.object({\n      id: z.string().uuid(),\n      name: z.string().min(1).max(255),\n      type: z.enum(['domain', 'application', 'infrastructure', 'presentation', 'shared']),\n      description: z.string().max(1000),\n      components: z.array(z.object({\n        id: z.string().uuid(),\n        name: z.string().min(1).max(255),\n        type: z.enum(['entity', 'repository', 'use_case', 'service', 'controller', 'middleware', 'dto', 'route']),\n        description: z.string().max(1000),\n        dependencies: z.array(z.string()).default([]),\n        interfaces: z.array(z.string()).default([]),\n        implementation: z.string().max(5000),\n        tests: z.array(z.string()).default([]),\n        documentation: z.string().max(5000)\n      })),\n      dependencies: z.array(z.string()).default([]),\n      responsibilities: z.array(z.string()).default([]),\n      patterns: z.array(z.string()).default([])\n    })).optional(),\n    patterns: z.array(z.string()).optional(),\n    principles: z.array(z.string()).optional(),\n    conventions: z.record(z.any()).optional(),\n    tools: z.array(z.string()).optional(),\n    frameworks: z.array(z.string()).optional(),\n    libraries: z.array(z.string()).optional(),\n    customFields: CustomFieldsSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\architecture.dto.ts",
        "start": 74,
        "end": 103,
        "startLoc": {
          "line": 74,
          "column": 2,
          "position": 844
        },
        "endLoc": {
          "line": 103,
          "column": 19,
          "position": 1363
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\architecture.dto.ts",
        "start": 33,
        "end": 103,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 172
        },
        "endLoc": {
          "line": 103,
          "column": 2,
          "position": 1492
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "type: z.enum(['hexagonal', 'layered', 'microservices', 'monolithic', 'event_driven']).optional(),\n  status: z.enum(['design', 'implementation', 'testing', 'deployed', 'maintenance']).optional(),\n  layerType: z.enum(['domain', 'application', 'infrastructure', 'presentation', 'shared']).optional(),\n  componentType: z.enum(['entity', 'repository', 'use_case', 'service', 'controller', 'middleware', 'dto', 'route']).optional(),\n  isActive: z.coerce.boolean().optional(),\n  hasMetrics: z.coerce.boolean().optional(),\n  minQualityScore: z.coerce.number().min(0).max(10).optional(),\n  maxQualityScore: z.coerce.number().min(0).max(10).optional(),\n  lastAnalysisFrom: z.coerce.date().optional(),\n  lastAnalysisTo: z.coerce.date().optional()\n});",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\dto\\architecture.dto.ts",
        "start": 126,
        "end": 136,
        "startLoc": {
          "line": 126,
          "column": 3,
          "position": 1497
        },
        "endLoc": {
          "line": 136,
          "column": 2,
          "position": 1748
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\routes\\architecture.routes.ts",
        "start": 154,
        "end": 165,
        "startLoc": {
          "line": 154,
          "column": 9,
          "position": 1929
        },
        "endLoc": {
          "line": 165,
          "column": 2,
          "position": 2183
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "});\n\n      if (!result.success) {\n        res.status(400).json({\n          success: false,\n          error: result.error,\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse<UserResponse> = {\n        success: true,\n        data: transformUserToResponse(result.user!),\n        message: 'User updated successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 93,
        "end": 107,
        "startLoc": {
          "line": 93,
          "column": 7,
          "position": 680
        },
        "endLoc": {
          "line": 107,
          "column": 28,
          "position": 791
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 49,
        "end": 63,
        "startLoc": {
          "line": 49,
          "column": 7,
          "position": 309
        },
        "endLoc": {
          "line": 63,
          "column": 28,
          "position": 420
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ");\n\n      if (!user) {\n        res.status(404).json({\n          success: false,\n          error: 'User not found',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse<UserResponse> = {\n        success: true,\n        data: transformUserToResponse(user),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getUsersByOrganization",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 203,
        "end": 227,
        "startLoc": {
          "line": 203,
          "column": 6,
          "position": 1601
        },
        "endLoc": {
          "line": 227,
          "column": 23,
          "position": 1773
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 166,
        "end": 190,
        "startLoc": {
          "line": 166,
          "column": 7,
          "position": 1298
        },
        "endLoc": {
          "line": 190,
          "column": 15,
          "position": 1470
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(req.body);\n      const updatedBy = req.user?.id || req.headers['x-user-id'] as string;\n\n      if (!updatedBy) {\n        res.status(401).json({\n          success: false,\n          error: 'User ID is required',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const result = await this.userApplicationService.bulkUpdateUsers",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 295,
        "end": 307,
        "startLoc": {
          "line": 295,
          "column": 31,
          "position": 2374
        },
        "endLoc": {
          "line": 307,
          "column": 16,
          "position": 2486
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 77,
        "end": 89,
        "startLoc": {
          "line": 77,
          "column": 26,
          "position": 551
        },
        "endLoc": {
          "line": 89,
          "column": 11,
          "position": 663
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n\n      if (!result.success) {\n        res.status(400).json({\n          success: false,\n          error: result.error,\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse = {\n        success: true,\n        data",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 311,
        "end": 324,
        "startLoc": {
          "line": 311,
          "column": 7,
          "position": 2505
        },
        "endLoc": {
          "line": 324,
          "column": 5,
          "position": 2596
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 135,
        "end": 148,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1043
        },
        "endLoc": {
          "line": 148,
          "column": 8,
          "position": 1134
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n      const deletedBy = req.user?.id || req.headers['x-user-id'] as string;\n\n      if (!deletedBy) {\n        res.status(401).json({\n          success: false,\n          error: 'User ID is required',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const result = await this.userApplicationService.bulkDeleteUsers",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 343,
        "end": 355,
        "startLoc": {
          "line": 343,
          "column": 5,
          "position": 2794
        },
        "endLoc": {
          "line": 355,
          "column": 16,
          "position": 2902
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 120,
        "end": 132,
        "startLoc": {
          "line": 120,
          "column": 2,
          "position": 921
        },
        "endLoc": {
          "line": 132,
          "column": 11,
          "position": 1029
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ");\n\n      if (!result.success) {\n        res.status(400).json({\n          success: false,\n          error: result.error,\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse = {\n        success: true,\n        data: {\n          total: result.results.length,\n          successful: result.results.filter(r => r.success).length,\n          failed: result.results.filter(r => !r.success).length,\n          results: result.results\n        },\n        message: 'Bulk delete completed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 358,
        "end": 377,
        "startLoc": {
          "line": 358,
          "column": 7,
          "position": 2915
        },
        "endLoc": {
          "line": 377,
          "column": 24,
          "position": 3083
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 135,
        "end": 330,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 1043
        },
        "endLoc": {
          "line": 330,
          "column": 24,
          "position": 2673
        }
      }
    },
    {
      "format": "typescript",
      "lines": 67,
      "fragment": "});\n\n      const response: ProductResponse = {\n        id: result.data.product.id.value,\n        organizationId: result.data.product.organizationId.value,\n        name: result.data.product.name,\n        description: result.data.product.description,\n        shortDescription: result.data.product.shortDescription,\n        sku: result.data.product.sku,\n        barcode: result.data.product.barcode,\n        type: result.data.product.type.value,\n        status: result.data.product.status.value,\n        category: result.data.product.category.value,\n        brand: result.data.product.brand?.value,\n        supplier: result.data.product.supplier?.value,\n        settings: {\n          inventory: result.data.product.settings.inventory,\n          pricing: {\n            costPrice: result.data.product.settings.pricing.costPrice ? {\n              amount: result.data.product.settings.pricing.costPrice.amount,\n              currency: result.data.product.settings.pricing.costPrice.currency\n            } : undefined,\n            sellingPrice: {\n              amount: result.data.product.settings.pricing.sellingPrice.amount,\n              currency: result.data.product.settings.pricing.sellingPrice.currency\n            },\n            compareAtPrice: result.data.product.settings.pricing.compareAtPrice ? {\n              amount: result.data.product.settings.pricing.compareAtPrice.amount,\n              currency: result.data.product.settings.pricing.compareAtPrice.currency\n            } : undefined,\n            margin: result.data.product.settings.pricing.margin\n          },\n          shipping: result.data.product.settings.shipping,\n          seo: result.data.product.settings.seo,\n          customFields: result.data.product.settings.customFields,\n          tags: result.data.product.settings.tags,\n          notes: result.data.product.settings.notes\n        },\n        images: result.data.product.images,\n        documents: result.data.product.documents,\n        specifications: result.data.product.specifications,\n        variants: result.data.product.variants?.map(variant => ({\n          id: variant.id,\n          name: variant.name,\n          sku: variant.sku,\n          price: {\n            amount: variant.price.amount,\n            currency: variant.price.currency\n          },\n          compareAtPrice: variant.compareAtPrice ? {\n            amount: variant.compareAtPrice.amount,\n            currency: variant.compareAtPrice.currency\n          } : undefined,\n          costPrice: variant.costPrice ? {\n            amount: variant.costPrice.amount,\n            currency: variant.costPrice.currency\n          } : undefined,\n          inventory: variant.inventory,\n          attributes: variant.attributes,\n          isActive: variant.isActive\n        })),\n        isActive: result.data.product.isActive,\n        createdAt: result.data.product.createdAt,\n        updatedAt: result.data.product.updatedAt\n      };\n\n      res.status(200",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 130,
        "end": 196,
        "startLoc": {
          "line": 130,
          "column": 7,
          "position": 1277
        },
        "endLoc": {
          "line": 196,
          "column": 4,
          "position": 2049
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 44,
        "end": 110,
        "startLoc": {
          "line": 44,
          "column": 7,
          "position": 315
        },
        "endLoc": {
          "line": 110,
          "column": 4,
          "position": 1087
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "product.variants?.map(variant => ({\n          id: variant.id,\n          name: variant.name,\n          sku: variant.sku,\n          price: {\n            amount: variant.price.amount,\n            currency: variant.price.currency\n          },\n          compareAtPrice: variant.compareAtPrice ? {\n            amount: variant.compareAtPrice.amount,\n            currency: variant.compareAtPrice.currency\n          } : undefined,\n          costPrice: variant.costPrice ? {\n            amount: variant.costPrice.amount,\n            currency: variant.costPrice.currency\n          } : undefined,\n          inventory: variant.inventory,\n          attributes: variant.attributes,\n          isActive: variant.isActive\n        })),\n        isActive: product",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 274,
        "end": 294,
        "startLoc": {
          "line": 274,
          "column": 2,
          "position": 2795
        },
        "endLoc": {
          "line": 294,
          "column": 8,
          "position": 2985
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 85,
        "end": 105,
        "startLoc": {
          "line": 85,
          "column": 2,
          "position": 853
        },
        "endLoc": {
          "line": 105,
          "column": 7,
          "position": 1043
        }
      }
    },
    {
      "format": "typescript",
      "lines": 63,
      "fragment": "{\n          id: product.id.value,\n          organizationId: product.organizationId.value,\n          name: product.name,\n          description: product.description,\n          shortDescription: product.shortDescription,\n          sku: product.sku,\n          barcode: product.barcode,\n          type: product.type.value,\n          status: product.status.value,\n          category: product.category.value,\n          brand: product.brand?.value,\n          supplier: product.supplier?.value,\n          settings: {\n            inventory: product.settings.inventory,\n            pricing: {\n              costPrice: product.settings.pricing.costPrice ? {\n                amount: product.settings.pricing.costPrice.amount,\n                currency: product.settings.pricing.costPrice.currency\n              } : undefined,\n              sellingPrice: {\n                amount: product.settings.pricing.sellingPrice.amount,\n                currency: product.settings.pricing.sellingPrice.currency\n              },\n              compareAtPrice: product.settings.pricing.compareAtPrice ? {\n                amount: product.settings.pricing.compareAtPrice.amount,\n                currency: product.settings.pricing.compareAtPrice.currency\n              } : undefined,\n              margin: product.settings.pricing.margin\n            },\n            shipping: product.settings.shipping,\n            seo: product.settings.seo,\n            customFields: product.settings.customFields,\n            tags: product.settings.tags,\n            notes: product.settings.notes\n          },\n          images: product.images,\n          documents: product.documents,\n          specifications: product.specifications,\n          variants: product.variants?.map(variant => ({\n            id: variant.id,\n            name: variant.name,\n            sku: variant.sku,\n            price: {\n              amount: variant.price.amount,\n              currency: variant.price.currency\n            },\n            compareAtPrice: variant.compareAtPrice ? {\n              amount: variant.compareAtPrice.amount,\n              currency: variant.compareAtPrice.currency\n            } : undefined,\n            costPrice: variant.costPrice ? {\n              amount: variant.costPrice.amount,\n              currency: variant.costPrice.currency\n            } : undefined,\n            inventory: variant.inventory,\n            attributes: variant.attributes,\n            isActive: variant.isActive\n          })),\n          isActive: product.isActive,\n          createdAt: product.createdAt,\n          updatedAt: product.updatedAt\n        })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 366,
        "end": 428,
        "startLoc": {
          "line": 366,
          "column": 2,
          "position": 3747
        },
        "endLoc": {
          "line": 428,
          "column": 2,
          "position": 4360
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 235,
        "end": 297,
        "startLoc": {
          "line": 235,
          "column": 2,
          "position": 2396
        },
        "endLoc": {
          "line": 297,
          "column": 2,
          "position": 3009
        }
      }
    },
    {
      "format": "typescript",
      "lines": 67,
      "fragment": ".map(product => ({\n          id: product.id.value,\n          organizationId: product.organizationId.value,\n          name: product.name,\n          description: product.description,\n          shortDescription: product.shortDescription,\n          sku: product.sku,\n          barcode: product.barcode,\n          type: product.type.value,\n          status: product.status.value,\n          category: product.category.value,\n          brand: product.brand?.value,\n          supplier: product.supplier?.value,\n          settings: {\n            inventory: product.settings.inventory,\n            pricing: {\n              costPrice: product.settings.pricing.costPrice ? {\n                amount: product.settings.pricing.costPrice.amount,\n                currency: product.settings.pricing.costPrice.currency\n              } : undefined,\n              sellingPrice: {\n                amount: product.settings.pricing.sellingPrice.amount,\n                currency: product.settings.pricing.sellingPrice.currency\n              },\n              compareAtPrice: product.settings.pricing.compareAtPrice ? {\n                amount: product.settings.pricing.compareAtPrice.amount,\n                currency: product.settings.pricing.compareAtPrice.currency\n              } : undefined,\n              margin: product.settings.pricing.margin\n            },\n            shipping: product.settings.shipping,\n            seo: product.settings.seo,\n            customFields: product.settings.customFields,\n            tags: product.settings.tags,\n            notes: product.settings.notes\n          },\n          images: product.images,\n          documents: product.documents,\n          specifications: product.specifications,\n          variants: product.variants?.map(variant => ({\n            id: variant.id,\n            name: variant.name,\n            sku: variant.sku,\n            price: {\n              amount: variant.price.amount,\n              currency: variant.price.currency\n            },\n            compareAtPrice: variant.compareAtPrice ? {\n              amount: variant.compareAtPrice.amount,\n              currency: variant.compareAtPrice.currency\n            } : undefined,\n            costPrice: variant.costPrice ? {\n              amount: variant.costPrice.amount,\n              currency: variant.costPrice.currency\n            } : undefined,\n            inventory: variant.inventory,\n            attributes: variant.attributes,\n            isActive: variant.isActive\n          })),\n          isActive: product.isActive,\n          createdAt: product.createdAt,\n          updatedAt: product.updatedAt\n        })),\n        pagination: {\n          page: query.page,\n          limit: query.limit,\n          total:",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 456,
        "end": 522,
        "startLoc": {
          "line": 456,
          "column": 9,
          "position": 4605
        },
        "endLoc": {
          "line": 522,
          "column": 2,
          "position": 5256
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\product.controller.ts",
        "start": 366,
        "end": 432,
        "startLoc": {
          "line": 366,
          "column": 18,
          "position": 3739
        },
        "endLoc": {
          "line": 432,
          "column": 2,
          "position": 4390
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "organizationId, query);\n      \n      const response: PredictiveAnalyticsListResponse = {\n        data: result.data.map(predictiveAnalytics => this.transformPredictiveAnalyticsToResponse(predictiveAnalytics)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getPredictiveAnalyticsStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 125,
        "end": 136,
        "startLoc": {
          "line": 125,
          "column": 2,
          "position": 1252
        },
        "endLoc": {
          "line": 136,
          "column": 28,
          "position": 1339
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 109,
        "end": 120,
        "startLoc": {
          "line": 109,
          "column": 2,
          "position": 1058
        },
        "endLoc": {
          "line": 120,
          "column": 26,
          "position": 1145
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: PredictiveAnalyticsListResponse = {\n        data: result.data.map(predictiveAnalytics => this.transformPredictiveAnalyticsToResponse(predictiveAnalytics)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getAnalyticsByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 157,
        "end": 168,
        "startLoc": {
          "line": 157,
          "column": 5,
          "position": 1598
        },
        "endLoc": {
          "line": 168,
          "column": 21,
          "position": 1687
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 125,
        "end": 120,
        "startLoc": {
          "line": 125,
          "column": 3,
          "position": 1250
        },
        "endLoc": {
          "line": 120,
          "column": 26,
          "position": 1145
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: PredictiveAnalyticsListResponse = {\n        data: result.data.map(predictiveAnalytics => this.transformPredictiveAnalyticsToResponse(predictiveAnalytics)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getActiveModels",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 174,
        "end": 185,
        "startLoc": {
          "line": 174,
          "column": 7,
          "position": 1802
        },
        "endLoc": {
          "line": 185,
          "column": 16,
          "position": 1891
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 125,
        "end": 120,
        "startLoc": {
          "line": 125,
          "column": 3,
          "position": 1250
        },
        "endLoc": {
          "line": 120,
          "column": 26,
          "position": 1145
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: PredictiveAnalyticsListResponse = {\n        data: result.data.map(predictiveAnalytics => this.transformPredictiveAnalyticsToResponse(predictiveAnalytics)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getNeedsRetraining",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 190,
        "end": 201,
        "startLoc": {
          "line": 190,
          "column": 17,
          "position": 1988
        },
        "endLoc": {
          "line": 201,
          "column": 19,
          "position": 2076
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 109,
        "end": 120,
        "startLoc": {
          "line": 109,
          "column": 21,
          "position": 1057
        },
        "endLoc": {
          "line": 120,
          "column": 26,
          "position": 1145
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: PredictiveAnalyticsListResponse = {\n        data: result.data.map(predictiveAnalytics => this.transformPredictiveAnalyticsToResponse(predictiveAnalytics)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 206,
        "end": 217,
        "startLoc": {
          "line": 206,
          "column": 20,
          "position": 2173
        },
        "endLoc": {
          "line": 217,
          "column": 76,
          "position": 2259
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 109,
        "end": 120,
        "startLoc": {
          "line": 109,
          "column": 21,
          "position": 1057
        },
        "endLoc": {
          "line": 120,
          "column": 6,
          "position": 1143
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInvoiceStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 119,
        "end": 130,
        "startLoc": {
          "line": 119,
          "column": 2,
          "position": 1178
        },
        "endLoc": {
          "line": 130,
          "column": 16,
          "position": 1265
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 103,
        "end": 114,
        "startLoc": {
          "line": 103,
          "column": 2,
          "position": 984
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInvoicesByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 151,
        "end": 162,
        "startLoc": {
          "line": 151,
          "column": 5,
          "position": 1524
        },
        "endLoc": {
          "line": 162,
          "column": 20,
          "position": 1613
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 119,
        "end": 114,
        "startLoc": {
          "line": 119,
          "column": 3,
          "position": 1176
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInvoicesByPaymentStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 168,
        "end": 179,
        "startLoc": {
          "line": 168,
          "column": 7,
          "position": 1728
        },
        "endLoc": {
          "line": 179,
          "column": 27,
          "position": 1817
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 119,
        "end": 114,
        "startLoc": {
          "line": 119,
          "column": 3,
          "position": 1176
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInvoicesByCompany",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 185,
        "end": 196,
        "startLoc": {
          "line": 185,
          "column": 14,
          "position": 1932
        },
        "endLoc": {
          "line": 196,
          "column": 21,
          "position": 2021
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 119,
        "end": 114,
        "startLoc": {
          "line": 119,
          "column": 3,
          "position": 1176
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getOverdueInvoices",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 202,
        "end": 213,
        "startLoc": {
          "line": 202,
          "column": 10,
          "position": 2136
        },
        "endLoc": {
          "line": 213,
          "column": 19,
          "position": 2225
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 119,
        "end": 114,
        "startLoc": {
          "line": 119,
          "column": 3,
          "position": 1176
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInvoicesDueSoon",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 218,
        "end": 229,
        "startLoc": {
          "line": 218,
          "column": 20,
          "position": 2322
        },
        "endLoc": {
          "line": 229,
          "column": 19,
          "position": 2410
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 103,
        "end": 114,
        "startLoc": {
          "line": 103,
          "column": 21,
          "position": 983
        },
        "endLoc": {
          "line": 114,
          "column": 15,
          "position": 1071
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", query);\n      \n      const response: InvoiceListResponse = {\n        data: result.data.map(invoice => this.transformInvoiceToResponse(invoice)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 235,
        "end": 246,
        "startLoc": {
          "line": 235,
          "column": 2,
          "position": 2531
        },
        "endLoc": {
          "line": 246,
          "column": 76,
          "position": 2615
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 103,
        "end": 114,
        "startLoc": {
          "line": 103,
          "column": 15,
          "position": 985
        },
        "endLoc": {
          "line": 114,
          "column": 6,
          "position": 1069
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "{\n    return {\n      total: stats.total,\n      active: stats.active,\n      inactive: stats.inactive,\n      createdThisMonth: stats.createdThisMonth,\n      createdThisYear: stats.createdThisYear,\n      updatedThisMonth: stats.updatedThisMonth,\n      updatedThisYear: stats.updatedThisYear,\n      byType: stats.byType,\n      byStatus: stats.byStatus,\n      byPaymentStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\invoice.controller.ts",
        "start": 420,
        "end": 431,
        "startLoc": {
          "line": 420,
          "column": 2,
          "position": 4248
        },
        "endLoc": {
          "line": 431,
          "column": 16,
          "position": 4337
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 351,
        "end": 362,
        "startLoc": {
          "line": 351,
          "column": 2,
          "position": 3537
        },
        "endLoc": {
          "line": 362,
          "column": 12,
          "position": 3626
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "organizationId, query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInventoryKardexStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 123,
        "end": 134,
        "startLoc": {
          "line": 123,
          "column": 2,
          "position": 1219
        },
        "endLoc": {
          "line": 134,
          "column": 24,
          "position": 1306
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 107,
        "end": 118,
        "startLoc": {
          "line": 107,
          "column": 2,
          "position": 1025
        },
        "endLoc": {
          "line": 118,
          "column": 22,
          "position": 1112
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getInventoryByWarehouse",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 155,
        "end": 166,
        "startLoc": {
          "line": 155,
          "column": 10,
          "position": 1565
        },
        "endLoc": {
          "line": 166,
          "column": 24,
          "position": 1654
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 123,
        "end": 118,
        "startLoc": {
          "line": 123,
          "column": 3,
          "position": 1217
        },
        "endLoc": {
          "line": 118,
          "column": 22,
          "position": 1112
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getLowStockInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 172,
        "end": 183,
        "startLoc": {
          "line": 172,
          "column": 12,
          "position": 1769
        },
        "endLoc": {
          "line": 183,
          "column": 21,
          "position": 1858
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 123,
        "end": 118,
        "startLoc": {
          "line": 123,
          "column": 3,
          "position": 1217
        },
        "endLoc": {
          "line": 118,
          "column": 22,
          "position": 1112
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getOutOfStockInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 188,
        "end": 199,
        "startLoc": {
          "line": 188,
          "column": 10,
          "position": 1960
        },
        "endLoc": {
          "line": 199,
          "column": 23,
          "position": 2046
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 107,
        "end": 118,
        "startLoc": {
          "line": 107,
          "column": 15,
          "position": 1026
        },
        "endLoc": {
          "line": 118,
          "column": 22,
          "position": 1112
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getNeedsReorderInventory",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 204,
        "end": 215,
        "startLoc": {
          "line": 204,
          "column": 15,
          "position": 2143
        },
        "endLoc": {
          "line": 215,
          "column": 25,
          "position": 2231
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 107,
        "end": 118,
        "startLoc": {
          "line": 107,
          "column": 21,
          "position": 1024
        },
        "endLoc": {
          "line": 118,
          "column": 22,
          "position": 1112
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: InventoryKardexListResponse = {\n        data: result.data.map(inventoryKardex => this.transformInventoryKardexToResponse(inventoryKardex)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 220,
        "end": 231,
        "startLoc": {
          "line": 220,
          "column": 17,
          "position": 2328
        },
        "endLoc": {
          "line": 231,
          "column": 76,
          "position": 2414
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 107,
        "end": 118,
        "startLoc": {
          "line": 107,
          "column": 21,
          "position": 1024
        },
        "endLoc": {
          "line": 118,
          "column": 6,
          "position": 1110
        }
      }
    },
    {
      "format": "typescript",
      "lines": 28,
      "fragment": "{\n        id: movement.id,\n        productId: movement.productId,\n        warehouseId: movement.warehouseId,\n        locationId: movement.locationId,\n        movementType: movement.movementType.value,\n        movementReason: movement.movementReason.value,\n        quantity: movement.quantity,\n        unitCost: {\n          amount: movement.unitCost.amount,\n          currency: movement.unitCost.currency\n        },\n        totalCost: {\n          amount: movement.totalCost.amount,\n          currency: movement.totalCost.currency\n        },\n        reference: movement.reference,\n        referenceId: movement.referenceId,\n        notes: movement.notes,\n        batchNumber: movement.batchNumber,\n        expirationDate: movement.expirationDate,\n        serialNumber: movement.serialNumber,\n        supplierId: movement.supplierId,\n        customerId: movement.customerId,\n        userId: movement.userId,\n        movementDate: movement.movementDate,\n        status: movement.status.value\n      })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\inventory-kardex.controller.ts",
        "start": 373,
        "end": 400,
        "startLoc": {
          "line": 373,
          "column": 2,
          "position": 3726
        },
        "endLoc": {
          "line": 400,
          "column": 2,
          "position": 3959
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\inventory-kardex\\record-movement.use-case.ts",
        "start": 177,
        "end": 205,
        "startLoc": {
          "line": 177,
          "column": 2,
          "position": 1225
        },
        "endLoc": {
          "line": 205,
          "column": 2,
          "position": 1460
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n      const userId = req.user?.id;\n\n      if (!organizationId || !userId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const result",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 88,
        "end": 98,
        "startLoc": {
          "line": 88,
          "column": 27,
          "position": 713
        },
        "endLoc": {
          "line": 98,
          "column": 7,
          "position": 818
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 43,
          "column": 8,
          "position": 290
        }
      }
    },
    {
      "format": "typescript",
      "lines": 37,
      "fragment": ");\n\n      const response: InteractionResponse = {\n        id: result.data.interaction.id,\n        organizationId: result.data.interaction.organizationId,\n        contactId: result.data.interaction.contactId,\n        companyId: result.data.interaction.companyId,\n        userId: result.data.interaction.userId,\n        type: result.data.interaction.type,\n        status: result.data.interaction.status,\n        priority: result.data.interaction.priority,\n        subject: result.data.interaction.subject,\n        description: result.data.interaction.description,\n        scheduledAt: result.data.interaction.scheduledAt,\n        completedAt: result.data.interaction.completedAt,\n        duration: result.data.interaction.duration,\n        outcome: result.data.interaction.outcome,\n        nextAction: result.data.interaction.nextAction,\n        nextActionDate: result.data.interaction.nextActionDate,\n        tags: result.data.interaction.tags,\n        customFields: result.data.interaction.customFields,\n        attachments: result.data.interaction.attachments,\n        createdAt: result.data.interaction.createdAt,\n        updatedAt: result.data.interaction.updatedAt\n      };\n\n      res.status(201).json({\n        success: true,\n        data: { interaction: response }\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // CREATE TASK",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 106,
        "end": 142,
        "startLoc": {
          "line": 106,
          "column": 7,
          "position": 879
        },
        "endLoc": {
          "line": 142,
          "column": 15,
          "position": 1248
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 49,
        "end": 85,
        "startLoc": {
          "line": 49,
          "column": 8,
          "position": 334
        },
        "endLoc": {
          "line": 85,
          "column": 32,
          "position": 703
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n      const userId = req.user?.id;\n\n      if (!organizationId || !userId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const result = await this.createInteractionUseCase.createTask",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 145,
        "end": 155,
        "startLoc": {
          "line": 145,
          "column": 11,
          "position": 1258
        },
        "endLoc": {
          "line": 155,
          "column": 11,
          "position": 1373
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 33,
        "end": 98,
        "startLoc": {
          "line": 33,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 98,
          "column": 27,
          "position": 828
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": ",\n        req.body.companyId\n      );\n\n      const response: InteractionResponse = {\n        id: result.data.interaction.id,\n        organizationId: result.data.interaction.organizationId,\n        contactId: result.data.interaction.contactId,\n        companyId: result.data.interaction.companyId,\n        userId: result.data.interaction.userId,\n        type: result.data.interaction.type,\n        status: result.data.interaction.status,\n        priority: result.data.interaction.priority,\n        subject: result.data.interaction.subject,\n        description: result.data.interaction.description,\n        scheduledAt: result.data.interaction.scheduledAt,\n        completedAt: result.data.interaction.completedAt,\n        duration: result.data.interaction.duration,\n        outcome: result.data.interaction.outcome,\n        nextAction: result.data.interaction.nextAction,\n        nextActionDate: result.data.interaction.nextActionDate,\n        tags: result.data.interaction.tags,\n        customFields: result.data.interaction.customFields,\n        attachments: result.data.interaction.attachments,\n        createdAt: result.data.interaction.createdAt,\n        updatedAt: result.data.interaction.updatedAt\n      };\n\n      res.status(201).json({\n        success: true,\n        data: { interaction: response }\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // CREATE NOTE",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 161,
        "end": 199,
        "startLoc": {
          "line": 161,
          "column": 9,
          "position": 1414
        },
        "endLoc": {
          "line": 199,
          "column": 15,
          "position": 1793
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 104,
        "end": 85,
        "startLoc": {
          "line": 104,
          "column": 12,
          "position": 869
        },
        "endLoc": {
          "line": 85,
          "column": 32,
          "position": 703
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n      const userId = req.user?.id;\n\n      if (!organizationId || !userId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const result = await this.createInteractionUseCase.createNote",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 202,
        "end": 212,
        "startLoc": {
          "line": 202,
          "column": 11,
          "position": 1803
        },
        "endLoc": {
          "line": 212,
          "column": 11,
          "position": 1918
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 33,
        "end": 98,
        "startLoc": {
          "line": 33,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 98,
          "column": 27,
          "position": 828
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": ",\n        req.body.companyId\n      );\n\n      const response: InteractionResponse = {\n        id: result.data.interaction.id,\n        organizationId: result.data.interaction.organizationId,\n        contactId: result.data.interaction.contactId,\n        companyId: result.data.interaction.companyId,\n        userId: result.data.interaction.userId,\n        type: result.data.interaction.type,\n        status: result.data.interaction.status,\n        priority: result.data.interaction.priority,\n        subject: result.data.interaction.subject,\n        description: result.data.interaction.description,\n        scheduledAt: result.data.interaction.scheduledAt,\n        completedAt: result.data.interaction.completedAt,\n        duration: result.data.interaction.duration,\n        outcome: result.data.interaction.outcome,\n        nextAction: result.data.interaction.nextAction,\n        nextActionDate: result.data.interaction.nextActionDate,\n        tags: result.data.interaction.tags,\n        customFields: result.data.interaction.customFields,\n        attachments: result.data.interaction.attachments,\n        createdAt: result.data.interaction.createdAt,\n        updatedAt: result.data.interaction.updatedAt\n      };\n\n      res.status(201).json({\n        success: true,\n        data: { interaction: response }\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // CREATE FOLLOW-UP",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 217,
        "end": 255,
        "startLoc": {
          "line": 217,
          "column": 12,
          "position": 1951
        },
        "endLoc": {
          "line": 255,
          "column": 20,
          "position": 2330
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 104,
        "end": 85,
        "startLoc": {
          "line": 104,
          "column": 12,
          "position": 869
        },
        "endLoc": {
          "line": 85,
          "column": 32,
          "position": 703
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n      const userId = req.user?.id;\n\n      if (!organizationId || !userId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const result = await this.createInteractionUseCase.createFollowUp",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 258,
        "end": 268,
        "startLoc": {
          "line": 258,
          "column": 15,
          "position": 2340
        },
        "endLoc": {
          "line": 268,
          "column": 15,
          "position": 2455
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 33,
        "end": 98,
        "startLoc": {
          "line": 33,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 98,
          "column": 27,
          "position": 828
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": ",\n        req.body.companyId\n      );\n\n      const response: InteractionResponse = {\n        id: result.data.interaction.id,\n        organizationId: result.data.interaction.organizationId,\n        contactId: result.data.interaction.contactId,\n        companyId: result.data.interaction.companyId,\n        userId: result.data.interaction.userId,\n        type: result.data.interaction.type,\n        status: result.data.interaction.status,\n        priority: result.data.interaction.priority,\n        subject: result.data.interaction.subject,\n        description: result.data.interaction.description,\n        scheduledAt: result.data.interaction.scheduledAt,\n        completedAt: result.data.interaction.completedAt,\n        duration: result.data.interaction.duration,\n        outcome: result.data.interaction.outcome,\n        nextAction: result.data.interaction.nextAction,\n        nextActionDate: result.data.interaction.nextActionDate,\n        tags: result.data.interaction.tags,\n        customFields: result.data.interaction.customFields,\n        attachments: result.data.interaction.attachments,\n        createdAt: result.data.interaction.createdAt,\n        updatedAt: result.data.interaction.updatedAt\n      };\n\n      res.status(201).json({\n        success: true,\n        data: { interaction: response }\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // UPDATE INTERACTION",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 273,
        "end": 311,
        "startLoc": {
          "line": 273,
          "column": 15,
          "position": 2488
        },
        "endLoc": {
          "line": 311,
          "column": 22,
          "position": 2867
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 104,
        "end": 85,
        "startLoc": {
          "line": 104,
          "column": 12,
          "position": 869
        },
        "endLoc": {
          "line": 85,
          "column": 32,
          "position": 703
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n      const userId = req.user?.id;\n\n      if (!organizationId || !userId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const request: UpdateInteractionRequest",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 314,
        "end": 324,
        "startLoc": {
          "line": 314,
          "column": 18,
          "position": 2877
        },
        "endLoc": {
          "line": 324,
          "column": 25,
          "position": 2985
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 43,
          "column": 25,
          "position": 293
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ".execute(request);\n\n      const response: InteractionResponse = {\n        id: result.data.interaction.id,\n        organizationId: result.data.interaction.organizationId,\n        contactId: result.data.interaction.contactId,\n        companyId: result.data.interaction.companyId,\n        userId: result.data.interaction.userId,\n        type: result.data.interaction.type,\n        status: result.data.interaction.status,\n        priority: result.data.interaction.priority,\n        subject: result.data.interaction.subject,\n        description: result.data.interaction.description,\n        scheduledAt: result.data.interaction.scheduledAt,\n        completedAt: result.data.interaction.completedAt,\n        duration: result.data.interaction.duration,\n        outcome: result.data.interaction.outcome,\n        nextAction: result.data.interaction.nextAction,\n        nextActionDate: result.data.interaction.nextActionDate,\n        tags: result.data.interaction.tags,\n        customFields: result.data.interaction.customFields,\n        attachments: result.data.interaction.attachments,\n        createdAt: result.data.interaction.createdAt,\n        updatedAt: result.data.interaction.updatedAt\n      };\n\n      res.status(200",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 331,
        "end": 357,
        "startLoc": {
          "line": 331,
          "column": 25,
          "position": 3035
        },
        "endLoc": {
          "line": 357,
          "column": 4,
          "position": 3337
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 49,
        "end": 75,
        "startLoc": {
          "line": 49,
          "column": 25,
          "position": 330
        },
        "endLoc": {
          "line": 75,
          "column": 4,
          "position": 632
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "interaction.updatedAt\n      };\n\n      res.status(200).json({\n        success: true,\n        data: { interaction: response }\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // GET INTERACTIONS BY ORGANIZATION",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 412,
        "end": 425,
        "startLoc": {
          "line": 412,
          "column": 2,
          "position": 3805
        },
        "endLoc": {
          "line": 425,
          "column": 36,
          "position": 3890
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 354,
        "end": 367,
        "startLoc": {
          "line": 354,
          "column": 2,
          "position": 3323
        },
        "endLoc": {
          "line": 367,
          "column": 25,
          "position": 3408
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": "{\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 463,
        "end": 485,
        "startLoc": {
          "line": 463,
          "column": 2,
          "position": 4490
        },
        "endLoc": {
          "line": 485,
          "column": 2,
          "position": 4682
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 391,
        "end": 413,
        "startLoc": {
          "line": 391,
          "column": 2,
          "position": 3619
        },
        "endLoc": {
          "line": 413,
          "column": 2,
          "position": 3811
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n\n      if (!organizationId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const query: InteractionSearchQuery = {\n        page: parseInt(req.query.page as string) || 1,\n        limit: parseInt(req.query.limit as string) || 20,\n        sortBy: (req.query.sortBy as any) || 'createdAt',\n        sortOrder: (req.query.sortOrder as any) || 'desc'\n      }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 502,
        "end": 516,
        "startLoc": {
          "line": 502,
          "column": 25,
          "position": 4778
        },
        "endLoc": {
          "line": 516,
          "column": 2,
          "position": 4958
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 370,
        "end": 441,
        "startLoc": {
          "line": 370,
          "column": 19,
          "position": 3418
        },
        "endLoc": {
          "line": 441,
          "column": 2,
          "position": 4078
        }
      }
    },
    {
      "format": "typescript",
      "lines": 40,
      "fragment": ", query);\n\n      const response: InteractionListResponse = {\n        data: result.data.map(interaction => ({\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        })),\n        pagination: result.pagination\n      };\n\n      res.status(200).json({\n        success: true,\n        data: response\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // GET INTERACTIONS BY COMPANY",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 518,
        "end": 557,
        "startLoc": {
          "line": 518,
          "column": 10,
          "position": 4982
        },
        "endLoc": {
          "line": 557,
          "column": 31,
          "position": 5294
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 460,
        "end": 499,
        "startLoc": {
          "line": 460,
          "column": 15,
          "position": 4456
        },
        "endLoc": {
          "line": 499,
          "column": 31,
          "position": 4768
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n\n      if (!organizationId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const query: InteractionSearchQuery = {\n        page: parseInt(req.query.page as string) || 1,\n        limit: parseInt(req.query.limit as string) || 20,\n        sortBy: (req.query.sortBy as any) || 'createdAt',\n        sortOrder: (req.query.sortOrder as any) || 'desc'\n      };\n\n      const result = await this.interactionRepository.findByCompanyId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 560,
        "end": 576,
        "startLoc": {
          "line": 560,
          "column": 25,
          "position": 5304
        },
        "endLoc": {
          "line": 576,
          "column": 16,
          "position": 5501
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 370,
        "end": 518,
        "startLoc": {
          "line": 370,
          "column": 19,
          "position": 3418
        },
        "endLoc": {
          "line": 518,
          "column": 16,
          "position": 4975
        }
      }
    },
    {
      "format": "typescript",
      "lines": 40,
      "fragment": ", query);\n\n      const response: InteractionListResponse = {\n        data: result.data.map(interaction => ({\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        })),\n        pagination: result.pagination\n      };\n\n      res.status(200).json({\n        success: true,\n        data: response\n      });\n    } catch (error) {\n      res.status(400).json(createErrorResponse(error));\n    }\n  }\n\n  // ========================================================================\n  // GET INTERACTION STATS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 576,
        "end": 615,
        "startLoc": {
          "line": 576,
          "column": 10,
          "position": 5508
        },
        "endLoc": {
          "line": 615,
          "column": 25,
          "position": 5820
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 460,
        "end": 499,
        "startLoc": {
          "line": 460,
          "column": 15,
          "position": 4456
        },
        "endLoc": {
          "line": 499,
          "column": 31,
          "position": 4768
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "type: req.query.type as any,\n        status: req.query.status as any,\n        priority: req.query.priority as any,\n        contactId: req.query.contactId as string,\n        companyId: req.query.companyId as string,\n        userId: req.query.userId as string,\n        scheduledFrom: req.query.scheduledFrom ? new Date(req.query.scheduledFrom as string) : undefined,\n        scheduledTo: req.query.scheduledTo ? new Date(req.query.scheduledTo as string) : undefined,\n        completedFrom: req.query.completedFrom ? new Date(req.query.completedFrom as string) : undefined,\n        completedTo: req.query.completedTo ? new Date(req.query.completedTo as string) : undefined,\n        tags: req.query.tags as string,\n        hasOutcome: req.query.hasOutcome ? req.query.hasOutcome === 'true' : undefined,\n        hasNextAction: req.query.hasNextAction ? req.query.hasNextAction === 'true' : undefined,\n        overdue: req.query.overdue ? req.query.overdue === 'true' : undefined,\n        upcoming: req.query.upcoming ? req.query.upcoming === 'true' : undefined\n      };\n\n      const stats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 628,
        "end": 645,
        "startLoc": {
          "line": 628,
          "column": 9,
          "position": 5925
        },
        "endLoc": {
          "line": 645,
          "column": 6,
          "position": 6272
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 443,
        "end": 460,
        "startLoc": {
          "line": 443,
          "column": 9,
          "position": 4096
        },
        "endLoc": {
          "line": 460,
          "column": 7,
          "position": 4443
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".map(interaction => ({\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        })),\n        upcomingInteractions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 690,
        "end": 713,
        "startLoc": {
          "line": 690,
          "column": 19,
          "position": 6659
        },
        "endLoc": {
          "line": 713,
          "column": 21,
          "position": 6864
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 463,
        "end": 486,
        "startLoc": {
          "line": 463,
          "column": 5,
          "position": 4482
        },
        "endLoc": {
          "line": 486,
          "column": 11,
          "position": 4687
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".map(interaction => ({\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        })),\n        overdueInteractions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 713,
        "end": 736,
        "startLoc": {
          "line": 713,
          "column": 21,
          "position": 6870
        },
        "endLoc": {
          "line": 736,
          "column": 20,
          "position": 7075
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 463,
        "end": 486,
        "startLoc": {
          "line": 463,
          "column": 5,
          "position": 4482
        },
        "endLoc": {
          "line": 486,
          "column": 11,
          "position": 4687
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".map(interaction => ({\n          id: interaction.id,\n          organizationId: interaction.organizationId,\n          contactId: interaction.contactId,\n          companyId: interaction.companyId,\n          userId: interaction.userId,\n          type: interaction.type,\n          status: interaction.status,\n          priority: interaction.priority,\n          subject: interaction.subject,\n          description: interaction.description,\n          scheduledAt: interaction.scheduledAt,\n          completedAt: interaction.completedAt,\n          duration: interaction.duration,\n          outcome: interaction.outcome,\n          nextAction: interaction.nextAction,\n          nextActionDate: interaction.nextActionDate,\n          tags: interaction.tags,\n          customFields: interaction.customFields,\n          attachments: interaction.attachments,\n          createdAt: interaction.createdAt,\n          updatedAt: interaction.updatedAt\n        }))\n      }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 736,
        "end": 759,
        "startLoc": {
          "line": 736,
          "column": 20,
          "position": 7081
        },
        "endLoc": {
          "line": 759,
          "column": 2,
          "position": 7285
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 463,
        "end": 485,
        "startLoc": {
          "line": 463,
          "column": 5,
          "position": 4482
        },
        "endLoc": {
          "line": 485,
          "column": 2,
          "position": 4684
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "(req: Request, res: Response): Promise<void> {\n    try {\n      const organizationId = req.user?.organizationId;\n\n      if (!organizationId) {\n        res.status(401).json(createErrorResponse(new Error('Unauthorized')));\n        return;\n      }\n\n      const interaction = await this.interactionRepository.findById(req.params.id);\n\n      if (!interaction) {\n        res.status(404).json(createErrorResponse(new Error('Interaction not found')));\n        return;\n      }\n\n      if (interaction.organizationId !== organizationId) {\n        res.status(403).json(createErrorResponse(new Error('Forbidden')));\n        return;\n      }\n\n      await",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 774,
        "end": 795,
        "startLoc": {
          "line": 774,
          "column": 18,
          "position": 7375
        },
        "endLoc": {
          "line": 795,
          "column": 6,
          "position": 7567
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\interaction.controller.ts",
        "start": 370,
        "end": 391,
        "startLoc": {
          "line": 370,
          "column": 19,
          "position": 3418
        },
        "endLoc": {
          "line": 391,
          "column": 6,
          "position": 3610
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(req.body);\n      const createdBy = req.user?.id || req.headers['x-user-id'] as string;\n\n      if (!createdBy) {\n        res.status(401).json({\n          success: false,\n          error: 'User ID is required',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const result = await this.createCompanyUseCase",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 42,
        "end": 54,
        "startLoc": {
          "line": 42,
          "column": 29,
          "position": 261
        },
        "endLoc": {
          "line": 54,
          "column": 21,
          "position": 371
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 34,
        "end": 46,
        "startLoc": {
          "line": 34,
          "column": 26,
          "position": 184
        },
        "endLoc": {
          "line": 46,
          "column": 23,
          "position": 294
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "({\n        ...requestData,\n        createdBy\n      });\n\n      if (!result.success) {\n        res.status(400).json({\n          success: false,\n          error: result.error,\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse<CompanyResponse",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 54,
        "end": 68,
        "startLoc": {
          "line": 54,
          "column": 8,
          "position": 374
        },
        "endLoc": {
          "line": 68,
          "column": 16,
          "position": 466
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 46,
        "end": 60,
        "startLoc": {
          "line": 46,
          "column": 11,
          "position": 297
        },
        "endLoc": {
          "line": 60,
          "column": 13,
          "position": 389
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(req.body);\n      const updatedBy = req.user?.id || req.headers['x-user-id'] as string;\n\n      if (!updatedBy) {\n        res.status(401).json({\n          success: false,\n          error: 'User ID is required',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const result = await this.updateCompanyUseCase",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 85,
        "end": 97,
        "startLoc": {
          "line": 85,
          "column": 29,
          "position": 628
        },
        "endLoc": {
          "line": 97,
          "column": 21,
          "position": 738
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 77,
        "end": 89,
        "startLoc": {
          "line": 77,
          "column": 26,
          "position": 551
        },
        "endLoc": {
          "line": 89,
          "column": 23,
          "position": 661
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ",\n        ...requestData,\n        updatedBy\n      });\n\n      if (!result.success) {\n        res.status(400).json({\n          success: false,\n          error: result.error,\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const response: ApiResponse<CompanyResponse> = {\n        success: true,\n        data: transformCompanyToResponse(result.company!),\n        message: 'Company updated successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 98,
        "end": 115,
        "startLoc": {
          "line": 98,
          "column": 10,
          "position": 746
        },
        "endLoc": {
          "line": 115,
          "column": 31,
          "position": 868
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 90,
        "end": 71,
        "startLoc": {
          "line": 90,
          "column": 7,
          "position": 669
        },
        "endLoc": {
          "line": 71,
          "column": 31,
          "position": 497
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "const company = await this.companyRepository.findById(requestData.companyId);\n\n      if (!company) {\n        res.status(404).json({\n          success: false,\n          error: 'Company not found',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 163,
        "end": 174,
        "startLoc": {
          "line": 163,
          "column": 7,
          "position": 1272
        },
        "endLoc": {
          "line": 174,
          "column": 6,
          "position": 1357
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 131,
        "end": 141,
        "startLoc": {
          "line": 131,
          "column": 7,
          "position": 1006
        },
        "endLoc": {
          "line": 141,
          "column": 6,
          "position": 1090
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getCompaniesByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 293,
        "end": 308,
        "startLoc": {
          "line": 293,
          "column": 5,
          "position": 2393
        },
        "endLoc": {
          "line": 308,
          "column": 21,
          "position": 2506
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getCompaniesByIndustry",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 312,
        "end": 327,
        "startLoc": {
          "line": 312,
          "column": 7,
          "position": 2586
        },
        "endLoc": {
          "line": 327,
          "column": 23,
          "position": 2699
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getCompaniesByAssignedUser",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 331,
        "end": 346,
        "startLoc": {
          "line": 331,
          "column": 9,
          "position": 2779
        },
        "endLoc": {
          "line": 346,
          "column": 27,
          "position": 2892
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 350,
        "end": 365,
        "startLoc": {
          "line": 350,
          "column": 7,
          "position": 2972
        },
        "endLoc": {
          "line": 365,
          "column": 76,
          "position": 3083
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 205,
          "column": 6,
          "position": 1635
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "(organizationId);\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getScheduledForFollowUp",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 372,
        "end": 387,
        "startLoc": {
          "line": 372,
          "column": 23,
          "position": 3156
        },
        "endLoc": {
          "line": 387,
          "column": 24,
          "position": 3271
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 21,
          "position": 1522
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  // ========================================================================\n  // LEAD SCORING QUERIES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 391,
        "end": 407,
        "startLoc": {
          "line": 391,
          "column": 5,
          "position": 3356
        },
        "endLoc": {
          "line": 407,
          "column": 24,
          "position": 3470
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 366,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 366,
          "column": 21,
          "position": 3086
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getMediumScoreLeads",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 414,
        "end": 429,
        "startLoc": {
          "line": 414,
          "column": 9,
          "position": 3570
        },
        "endLoc": {
          "line": 429,
          "column": 20,
          "position": 3683
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 15,
          "position": 1524
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "(organizationId);\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  async getLowScoreLeads",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 432,
        "end": 447,
        "startLoc": {
          "line": 432,
          "column": 21,
          "position": 3744
        },
        "endLoc": {
          "line": 447,
          "column": 17,
          "position": 3859
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 205,
        "startLoc": {
          "line": 190,
          "column": 21,
          "position": 1522
        },
        "endLoc": {
          "line": 205,
          "column": 16,
          "position": 1637
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(organizationId);\n\n      const response: ApiResponse<CompanyResponse[]> = {\n        success: true,\n        data: companies.map(transformCompanyToResponse),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  // ========================================================================\n  // BULK OPERATIONS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 450,
        "end": 466,
        "startLoc": {
          "line": 450,
          "column": 18,
          "position": 3920
        },
        "endLoc": {
          "line": 466,
          "column": 19,
          "position": 4036
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 190,
        "end": 366,
        "startLoc": {
          "line": 190,
          "column": 21,
          "position": 1522
        },
        "endLoc": {
          "line": 366,
          "column": 21,
          "position": 3086
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "),\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  // ========================================================================\n  // BULK OPERATIONS\n  // ========================================================================\n\n  async bulkUpdateCompanies",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 454,
        "end": 469,
        "startLoc": {
          "line": 454,
          "column": 27,
          "position": 3959
        },
        "endLoc": {
          "line": 469,
          "column": 20,
          "position": 4045
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 278,
        "end": 293,
        "startLoc": {
          "line": 278,
          "column": 6,
          "position": 2247
        },
        "endLoc": {
          "line": 293,
          "column": 16,
          "position": 2333
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(req.body);\n      const updatedBy = req.user?.id || req.headers['x-user-id'] as string;\n\n      if (!updatedBy) {\n        res.status(401).json({\n          success: false,\n          error: 'User ID is required',\n          timestamp: new Date()\n        } as ApiResponse);\n        return;\n      }\n\n      const results",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 471,
        "end": 483,
        "startLoc": {
          "line": 471,
          "column": 35,
          "position": 4086
        },
        "endLoc": {
          "line": 483,
          "column": 8,
          "position": 4188
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\user.controller.ts",
        "start": 77,
        "end": 89,
        "startLoc": {
          "line": 77,
          "column": 26,
          "position": 551
        },
        "endLoc": {
          "line": 89,
          "column": 7,
          "position": 653
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "} catch (error) {\n          errorCount++;\n          results.push({ \n            companyId, \n            success: false, \n            error: error instanceof Error ? error.message : 'Unknown error' \n          });\n        }\n      }\n\n      const response: ApiResponse = {\n        success: errorCount === 0,\n        data: {\n          total: requestData.companyIds.length,\n          successful: successCount,\n          failed: errorCount,\n          results\n        },\n        message: `Bulk delete completed: ",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 551,
        "end": 569,
        "startLoc": {
          "line": 551,
          "column": 9,
          "position": 4788
        },
        "endLoc": {
          "line": 569,
          "column": 25,
          "position": 4922
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 502,
        "end": 520,
        "startLoc": {
          "line": 502,
          "column": 9,
          "position": 4362
        },
        "endLoc": {
          "line": 520,
          "column": 25,
          "position": 4496
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "${successCount} successful, ${errorCount} failed`,\n        timestamp: new Date(),\n        requestId: req.headers['x-request-id'] as string\n      };\n\n      res.status(200).json(response);\n    } catch (error) {\n      next(error);\n    }\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 569,
        "end": 580,
        "startLoc": {
          "line": 569,
          "column": 25,
          "position": 4923
        },
        "endLoc": {
          "line": 580,
          "column": 76,
          "position": 5004
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\company.controller.ts",
        "start": 520,
        "end": 531,
        "startLoc": {
          "line": 520,
          "column": 25,
          "position": 4497
        },
        "endLoc": {
          "line": 531,
          "column": 6,
          "position": 4578
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", error as Error, {\n        userId: req.user?.id,\n        organizationId: req.user?.organizationId\n      });\n\n      const errorResponse = ErrorHandler.handle(error as Error);\n      res.status(errorResponse.statusCode).json({\n        success: false,\n        error: errorResponse.message,\n        code: errorResponse.code\n      });\n    }\n  }\n\n  // ============================================================================\n  // GET /api/ai/sessions/:sessionId/history - Get Session History",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 194,
        "end": 209,
        "startLoc": {
          "line": 194,
          "column": 30,
          "position": 1410
        },
        "endLoc": {
          "line": 209,
          "column": 65,
          "position": 1523
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 126,
        "end": 141,
        "startLoc": {
          "line": 126,
          "column": 33,
          "position": 935
        },
        "endLoc": {
          "line": 141,
          "column": 46,
          "position": 1048
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "(req: AuthenticatedRequest, res: Response): Promise<void> {\n    try {\n      const { sessionId } = req.params;\n      const user = req.user;\n\n      if (!user) {\n        res.status(401).json({\n          success: false,\n          error: 'Authentication required'\n        });\n        return;\n      }\n\n      if (!sessionId) {\n        res.status(400).json({\n          success: false,\n          error: 'Session ID is required'\n        });\n        return;\n      }\n\n      // Limpiar sesin",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 264,
        "end": 285,
        "startLoc": {
          "line": 264,
          "column": 13,
          "position": 1891
        },
        "endLoc": {
          "line": 285,
          "column": 18,
          "position": 2043
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 212,
        "end": 233,
        "startLoc": {
          "line": 212,
          "column": 18,
          "position": 1534
        },
        "endLoc": {
          "line": 233,
          "column": 34,
          "position": 1686
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", error as Error, {\n        userId: req.user?.id,\n        sessionId: req.params.sessionId\n      });\n\n      const errorResponse = ErrorHandler.handle(error as Error);\n      res.status(errorResponse.statusCode).json({\n        success: false,\n        error: errorResponse.message,\n        code: errorResponse.code\n      });\n    }\n  }\n\n  // ============================================================================\n  // GET /api/ai/health - Health Check",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 300,
        "end": 315,
        "startLoc": {
          "line": 300,
          "column": 29,
          "position": 2137
        },
        "endLoc": {
          "line": 315,
          "column": 37,
          "position": 2249
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\basic-ai.controller.ts",
        "start": 246,
        "end": 261,
        "startLoc": {
          "line": 246,
          "column": 32,
          "position": 1768
        },
        "endLoc": {
          "line": 261,
          "column": 54,
          "position": 1880
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "organizationId, query);\n      \n      const response: ArchitectureListResponse = {\n        data: result.data.map(architecture => this.transformArchitectureToResponse(architecture)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getArchitectureStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 139,
        "end": 150,
        "startLoc": {
          "line": 139,
          "column": 2,
          "position": 1333
        },
        "endLoc": {
          "line": 150,
          "column": 21,
          "position": 1420
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 123,
        "end": 134,
        "startLoc": {
          "line": 123,
          "column": 2,
          "position": 1139
        },
        "endLoc": {
          "line": 134,
          "column": 20,
          "position": 1226
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: ArchitectureListResponse = {\n        data: result.data.map(architecture => this.transformArchitectureToResponse(architecture)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getArchitecturesByStatus",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 171,
        "end": 182,
        "startLoc": {
          "line": 171,
          "column": 5,
          "position": 1679
        },
        "endLoc": {
          "line": 182,
          "column": 25,
          "position": 1768
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 139,
        "end": 134,
        "startLoc": {
          "line": 139,
          "column": 3,
          "position": 1331
        },
        "endLoc": {
          "line": 134,
          "column": 20,
          "position": 1226
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", organizationId, query);\n      \n      const response: ArchitectureListResponse = {\n        data: result.data.map(architecture => this.transformArchitectureToResponse(architecture)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getActiveArchitectures",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 188,
        "end": 199,
        "startLoc": {
          "line": 188,
          "column": 7,
          "position": 1883
        },
        "endLoc": {
          "line": 199,
          "column": 23,
          "position": 1972
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 139,
        "end": 134,
        "startLoc": {
          "line": 139,
          "column": 3,
          "position": 1331
        },
        "endLoc": {
          "line": 134,
          "column": 20,
          "position": 1226
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: ArchitectureListResponse = {\n        data: result.data.map(architecture => this.transformArchitectureToResponse(architecture)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  async getArchitecturesWithMetrics",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 204,
        "end": 215,
        "startLoc": {
          "line": 204,
          "column": 24,
          "position": 2069
        },
        "endLoc": {
          "line": 215,
          "column": 28,
          "position": 2157
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 123,
        "end": 134,
        "startLoc": {
          "line": 123,
          "column": 21,
          "position": 1138
        },
        "endLoc": {
          "line": 134,
          "column": 20,
          "position": 1226
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "(organizationId, query);\n      \n      const response: ArchitectureListResponse = {\n        data: result.data.map(architecture => this.transformArchitectureToResponse(architecture)),\n        pagination: result.pagination\n      };\n\n      this.sendSuccessResponse(res, response);\n    }, res, next);\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 220,
        "end": 231,
        "startLoc": {
          "line": 220,
          "column": 16,
          "position": 2254
        },
        "endLoc": {
          "line": 231,
          "column": 76,
          "position": 2340
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 123,
        "end": 134,
        "startLoc": {
          "line": 123,
          "column": 21,
          "position": 1138
        },
        "endLoc": {
          "line": 134,
          "column": 6,
          "position": 1224
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ".components.map((component: any) => ({\n        id: component.id,\n        name: component.name,\n        type: component.type.value,\n        layer: component.layer.value,\n        description: component.description,\n        dependencies: component.dependencies,\n        interfaces: component.interfaces,\n        implementation: component.implementation,\n        tests: component.tests,\n        documentation: component.documentation,\n        createdAt: component.createdAt,\n        updatedAt: component.updatedAt\n      })),\n      layers",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 350,
        "end": 364,
        "startLoc": {
          "line": 350,
          "column": 13,
          "position": 3495
        },
        "endLoc": {
          "line": 364,
          "column": 7,
          "position": 3630
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 305,
        "end": 319,
        "startLoc": {
          "line": 305,
          "column": 6,
          "position": 3042
        },
        "endLoc": {
          "line": 319,
          "column": 13,
          "position": 3177
        }
      }
    },
    {
      "format": "typescript",
      "lines": 26,
      "fragment": ".layers.map((layer: any) => ({\n        id: layer.id,\n        name: layer.name,\n        type: layer.type.value,\n        description: layer.description,\n        components: layer.components.map((component: any) => ({\n          id: component.id,\n          name: component.name,\n          type: component.type.value,\n          layer: component.layer.value,\n          description: component.description,\n          dependencies: component.dependencies,\n          interfaces: component.interfaces,\n          implementation: component.implementation,\n          tests: component.tests,\n          documentation: component.documentation,\n          createdAt: component.createdAt,\n          updatedAt: component.updatedAt\n        })),\n        dependencies: layer.dependencies,\n        responsibilities: layer.responsibilities,\n        patterns: layer.patterns,\n        createdAt: layer.createdAt,\n        updatedAt: layer.updatedAt\n      })),\n      lastAnalysisDate",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 364,
        "end": 389,
        "startLoc": {
          "line": 364,
          "column": 13,
          "position": 3634
        },
        "endLoc": {
          "line": 389,
          "column": 17,
          "position": 3879
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 300,
        "end": 325,
        "startLoc": {
          "line": 300,
          "column": 9,
          "position": 2982
        },
        "endLoc": {
          "line": 325,
          "column": 9,
          "position": 3227
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "{\n    return {\n      total: stats.total,\n      active: stats.active,\n      inactive: stats.inactive,\n      createdThisMonth: stats.createdThisMonth,\n      createdThisYear: stats.createdThisYear,\n      updatedThisMonth: stats.updatedThisMonth,\n      updatedThisYear: stats.updatedThisYear,\n      byType: stats.byType,\n      byStatus: stats.byStatus,\n      byLayerType",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\architecture.controller.ts",
        "start": 396,
        "end": 407,
        "startLoc": {
          "line": 396,
          "column": 2,
          "position": 3935
        },
        "endLoc": {
          "line": 407,
          "column": 12,
          "position": 4024
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\predictive-analytics.controller.ts",
        "start": 351,
        "end": 362,
        "startLoc": {
          "line": 351,
          "column": 2,
          "position": 3537
        },
        "endLoc": {
          "line": 362,
          "column": 12,
          "position": 3626
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ";\n      const correlationId = generateCorrelationId();\n\n      // Obtener conector del agente\n      const connector = this.agentConnectors.get(id);\n      if (!connector) {\n        res.status(404).json({\n          success: false,\n          error: 'Agent not found',\n          agentId: id,\n          correlationId\n        });\n        return;\n      }\n\n      // Obtener estadsticas",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 254,
        "end": 269,
        "startLoc": {
          "line": 254,
          "column": 6,
          "position": 1858
        },
        "endLoc": {
          "line": 269,
          "column": 24,
          "position": 1953
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 203,
        "end": 218,
        "startLoc": {
          "line": 203,
          "column": 7,
          "position": 1487
        },
        "endLoc": {
          "line": 218,
          "column": 32,
          "position": 1582
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n      if (!bodyValidation.success) {\n        res.status(400).json({\n          success: false,\n          error: 'Invalid request body',\n          details: bodyValidation.error.errors,\n          correlationId\n        });\n        return;\n      }\n\n      const { resetCircuitBreaker",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 303,
        "end": 314,
        "startLoc": {
          "line": 303,
          "column": 24,
          "position": 2207
        },
        "endLoc": {
          "line": 314,
          "column": 20,
          "position": 2286
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 71,
        "end": 82,
        "startLoc": {
          "line": 71,
          "column": 26,
          "position": 480
        },
        "endLoc": {
          "line": 82,
          "column": 7,
          "position": 559
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "} = bodyValidation.data;\n\n      // Obtener conector del agente\n      const connector = this.agentConnectors.get(id);\n      if (!connector) {\n        res.status(404).json({\n          success: false,\n          error: 'Agent not found',\n          agentId: id,\n          correlationId\n        });\n        return;\n      }\n\n      // Verificar permisos de administrador",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 314,
        "end": 328,
        "startLoc": {
          "line": 314,
          "column": 2,
          "position": 2291
        },
        "endLoc": {
          "line": 328,
          "column": 39,
          "position": 2381
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 82,
        "end": 96,
        "startLoc": {
          "line": 82,
          "column": 2,
          "position": 567
        },
        "endLoc": {
          "line": 96,
          "column": 31,
          "position": 657
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "= async (req: Request, res: Response, next: NextFunction): Promise<void> => {\n    try {\n      const { id } = req.params;\n      const correlationId = generateCorrelationId();\n\n      // Obtener conector del agente\n      const connector = this.agentConnectors.get(id);\n      if (!connector) {\n        res.status(404).json({\n          success: false,\n          error: 'Agent not found',\n          agentId: id,\n          correlationId\n        });\n        return;\n      }\n\n      // Respuesta",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 430,
        "end": 447,
        "startLoc": {
          "line": 430,
          "column": 2,
          "position": 3152
        },
        "endLoc": {
          "line": 447,
          "column": 13,
          "position": 3299
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 201,
        "end": 218,
        "startLoc": {
          "line": 201,
          "column": 2,
          "position": 1435
        },
        "endLoc": {
          "line": 218,
          "column": 32,
          "position": 1582
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n      if (!bodyValidation.success) {\n        res.status(400).json({\n          success: false,\n          error: 'Invalid request body',\n          details: bodyValidation.error.errors,\n          correlationId\n        });\n        return;\n      }\n\n      const { keyPattern",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 530,
        "end": 541,
        "startLoc": {
          "line": 530,
          "column": 25,
          "position": 3946
        },
        "endLoc": {
          "line": 541,
          "column": 11,
          "position": 4025
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\controllers\\agents.controller.ts",
        "start": 71,
        "end": 82,
        "startLoc": {
          "line": 71,
          "column": 26,
          "position": 480
        },
        "endLoc": {
          "line": 82,
          "column": 7,
          "position": 559
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ");\n      \n      span.setStatus({ code: SpanStatusCode.OK });\n      return result;\n    } catch (error) {\n      span.setStatus({\n        code: SpanStatusCode.ERROR,\n        message: error instanceof Error ? error.message : 'Unknown error'\n      });\n      span.recordException(error as Error);\n      throw error;\n    } finally {\n      span.end();\n    }\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 174,
        "end": 190,
        "startLoc": {
          "line": 174,
          "column": 2,
          "position": 1455
        },
        "endLoc": {
          "line": 190,
          "column": 76,
          "position": 1578
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 145,
        "end": 160,
        "startLoc": {
          "line": 145,
          "column": 10,
          "position": 1173
        },
        "endLoc": {
          "line": 160,
          "column": 6,
          "position": 1294
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": ",\n      'MG': 'Indian/Antananarivo',\n      'MU': 'Indian/Mauritius',\n      'SC': 'Indian/Mahe',\n      'RE': 'Indian/Reunion',\n      'YT': 'Indian/Mayotte',\n      'KM': 'Indian/Comoro',\n      'DJ': 'Africa/Djibouti',\n      'SO': 'Africa/Mogadishu',\n      'SD': 'Africa/Khartoum',\n      'SS': 'Africa/Juba',\n      'CF': 'Africa/Bangui',\n      'TD': 'Africa/Ndjamena',\n      'NE': 'Africa/Niamey',\n      'BF': 'Africa/Ouagadougou',\n      'ML': 'Africa/Bamako',\n      'SN': 'Africa/Dakar',\n      'GM': 'Africa/Banjul',\n      'GN': 'Africa/Conakry',\n      'SL': 'Africa/Freetown',\n      'LR': 'Africa/Monrovia',\n      'CI': 'Africa/Abidjan',\n      'TG'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\value-objects\\address.vo.ts",
        "start": 278,
        "end": 300,
        "startLoc": {
          "line": 278,
          "column": 17,
          "position": 2053
        },
        "endLoc": {
          "line": 300,
          "column": 5,
          "position": 2203
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\value-objects\\address.vo.ts",
        "start": 240,
        "end": 262,
        "startLoc": {
          "line": 240,
          "column": 16,
          "position": 1787
        },
        "endLoc": {
          "line": 262,
          "column": 5,
          "position": 1937
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "{\n  type?: string;\n  status?: string;\n  modelType?: string;\n  accuracy?: string;\n  isActive?: boolean;\n  needsRetraining?: boolean;\n  hasPredictions?: boolean;\n  minAccuracy?: number;\n  maxAccuracy?: number;\n  lastPredictionFrom?: Date;\n  lastPredictionTo?: Date;\n  nextRetrainFrom?: Date;\n  nextRetrainTo?: Date;\n}\n\nexport interface PredictiveAnalyticsStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\predictive-analytics.repository.ts",
        "start": 25,
        "end": 41,
        "startLoc": {
          "line": 25,
          "column": 2,
          "position": 176
        },
        "endLoc": {
          "line": 41,
          "column": 25,
          "position": 289
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\predictive-analytics.repository.ts",
        "start": 9,
        "end": 25,
        "startLoc": {
          "line": 9,
          "column": 2,
          "position": 57
        },
        "endLoc": {
          "line": 25,
          "column": 33,
          "position": 170
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "{\n  productId?: string;\n  warehouseId?: string;\n  locationId?: string;\n  movementType?: string;\n  movementReason?: string;\n  status?: string;\n  lowStock?: boolean;\n  outOfStock?: boolean;\n  needsReorder?: boolean;\n  hasExpiredItems?: boolean;\n  hasExpiringItems?: boolean;\n  minQuantity?: number;\n  maxQuantity?: number;\n  minValue?: number;\n  maxValue?: number;\n  costMethod?: string;\n  valuationMethod?: string;\n}\n\nexport interface InventoryKardexStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\inventory-kardex.repository.ts",
        "start": 29,
        "end": 49,
        "startLoc": {
          "line": 29,
          "column": 2,
          "position": 208
        },
        "endLoc": {
          "line": 49,
          "column": 21,
          "position": 353
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\inventory-kardex.repository.ts",
        "start": 9,
        "end": 29,
        "startLoc": {
          "line": 9,
          "column": 2,
          "position": 57
        },
        "endLoc": {
          "line": 29,
          "column": 29,
          "position": 202
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "{\n  type?: string;\n  status?: string;\n  tableType?: string;\n  columnType?: string;\n  constraintType?: string;\n  isActive?: boolean;\n  hasBackup?: boolean;\n  hasMaintenance?: boolean;\n  minHealthScore?: number;\n  maxHealthScore?: number;\n  minPerformanceScore?: number;\n  maxPerformanceScore?: number;\n  minSecurityScore?: number;\n  maxSecurityScore?: number;\n  lastBackupFrom?: Date;\n  lastBackupTo?: Date;\n  lastMaintenanceFrom?: Date;\n  lastMaintenanceTo?: Date;\n}\n\nexport interface DatabaseSchemaStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\database-schema.repository.ts",
        "start": 30,
        "end": 51,
        "startLoc": {
          "line": 30,
          "column": 2,
          "position": 216
        },
        "endLoc": {
          "line": 51,
          "column": 20,
          "position": 369
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\database-schema.repository.ts",
        "start": 9,
        "end": 30,
        "startLoc": {
          "line": 9,
          "column": 2,
          "position": 57
        },
        "endLoc": {
          "line": 30,
          "column": 28,
          "position": 210
        }
      }
    },
    {
      "format": "typescript",
      "lines": 50,
      "fragment": "type?: string;\n  status?: string;\n  source?: string;\n  priority?: string;\n  assignedUserId?: string;\n  companyId?: string;\n  department?: string;\n  industry?: string;\n  profession?: string;\n  isActive?: boolean;\n  isVerified?: boolean;\n  isOptedIn?: boolean;\n  hasCompany?: boolean;\n  isAssigned?: boolean;\n  leadScoreMin?: number;\n  leadScoreMax?: number;\n  engagementScoreMin?: number;\n  engagementScoreMax?: number;\n  revenueMin?: number;\n  revenueMax?: number;\n  currency?: string;\n  salaryMin?: number;\n  salaryMax?: number;\n  experienceMin?: number;\n  experienceMax?: number;\n  ageMin?: number;\n  ageMax?: number;\n  lastContactAfter?: Date;\n  lastContactBefore?: Date;\n  nextFollowUpAfter?: Date;\n  nextFollowUpBefore?: Date;\n  lastEmailOpenAfter?: Date;\n  lastEmailOpenBefore?: Date;\n  lastEmailClickAfter?: Date;\n  lastEmailClickBefore?: Date;\n  lastWebsiteVisitAfter?: Date;\n  lastWebsiteVisitBefore?: Date;\n  lastSocialMediaInteractionAfter?: Date;\n  lastSocialMediaInteractionBefore?: Date;\n  createdAfter?: Date;\n  createdBefore?: Date;\n  updatedAfter?: Date;\n  updatedBefore?: Date;\n  birthdayAfter?: Date;\n  birthdayBefore?: Date;\n  anniversaryAfter?: Date;\n  anniversaryBefore?: Date;\n  tags?: string[];\n  customFields?: Record<string, any>;\n  sortBy",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\contact.repository.ts",
        "start": 274,
        "end": 323,
        "startLoc": {
          "line": 274,
          "column": 3,
          "position": 3097
        },
        "endLoc": {
          "line": 323,
          "column": 7,
          "position": 3497
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\contact.repository.ts",
        "start": 210,
        "end": 259,
        "startLoc": {
          "line": 210,
          "column": 3,
          "position": 2606
        },
        "endLoc": {
          "line": 259,
          "column": 2,
          "position": 3005
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "?: Date;\n  tags?: string[];\n  customFields?: Record<string, any>;\n}\n\nexport interface PaginatedResult<T> {\n  data: T[];\n  total: number;\n  page: number;\n  limit: number;\n  totalPages: number;\n  hasNext: boolean;\n  hasPrevious: boolean;\n}\n\nexport interface CompanySearchOptions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\company.repository.ts",
        "start": 170,
        "end": 185,
        "startLoc": {
          "line": 170,
          "column": 14,
          "position": 1761
        },
        "endLoc": {
          "line": 185,
          "column": 21,
          "position": 1863
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\contact.repository.ts",
        "start": 256,
        "end": 271,
        "startLoc": {
          "line": 256,
          "column": 18,
          "position": 2975
        },
        "endLoc": {
          "line": 271,
          "column": 21,
          "position": 3077
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": "type?: string;\n  status?: string;\n  size?: string;\n  industry?: string;\n  source?: string;\n  assignedUserId?: string;\n  parentCompanyId?: string;\n  isActive?: boolean;\n  hasParentCompany?: boolean;\n  isAssigned?: boolean;\n  leadScoreMin?: number;\n  leadScoreMax?: number;\n  revenueMin?: number;\n  revenueMax?: number;\n  currency?: string;\n  employeeCountMin?: number;\n  employeeCountMax?: number;\n  foundedYearMin?: number;\n  foundedYearMax?: number;\n  lastContactAfter?: Date;\n  lastContactBefore?: Date;\n  nextFollowUpAfter?: Date;\n  nextFollowUpBefore?: Date;\n  createdAfter?: Date;\n  createdBefore?: Date;\n  updatedAfter?: Date;\n  updatedBefore?: Date;\n  tags?: string[];\n  customFields?: Record<string, any>;\n  sortBy",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\company.repository.ts",
        "start": 188,
        "end": 217,
        "startLoc": {
          "line": 188,
          "column": 3,
          "position": 1883
        },
        "endLoc": {
          "line": 217,
          "column": 7,
          "position": 2123
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\company.repository.ts",
        "start": 144,
        "end": 173,
        "startLoc": {
          "line": 144,
          "column": 3,
          "position": 1552
        },
        "endLoc": {
          "line": 173,
          "column": 2,
          "position": 1791
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "{\n  type?: string;\n  status?: string;\n  layerType?: string;\n  componentType?: string;\n  isActive?: boolean;\n  hasMetrics?: boolean;\n  minQualityScore?: number;\n  maxQualityScore?: number;\n  lastAnalysisFrom?: Date;\n  lastAnalysisTo?: Date;\n}\n\nexport interface ArchitectureStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\repositories\\architecture.repository.ts",
        "start": 22,
        "end": 35,
        "startLoc": {
          "line": 22,
          "column": 2,
          "position": 152
        },
        "endLoc": {
          "line": 35,
          "column": 18,
          "position": 241
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\repositories\\architecture.repository.ts",
        "start": 9,
        "end": 22,
        "startLoc": {
          "line": 9,
          "column": 2,
          "position": 57
        },
        "endLoc": {
          "line": 22,
          "column": 26,
          "position": 146
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n      role: this.props.role.value,\n      status: this.props.status.value,\n      isEmailVerified: this.props.isEmailVerified,\n      mfaEnabled: this.props.mfaEnabled,\n      lastLoginAt: this.props.lastLoginAt,\n      createdAt: this.props.createdAt,\n      updatedAt: this.props.updatedAt\n    };\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\user.entity.ts",
        "start": 302,
        "end": 313,
        "startLoc": {
          "line": 302,
          "column": 9,
          "position": 2257
        },
        "endLoc": {
          "line": 313,
          "column": 76,
          "position": 2348
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\user.entity.ts",
        "start": 284,
        "end": 295,
        "startLoc": {
          "line": 284,
          "column": 9,
          "position": 2084
        },
        "endLoc": {
          "line": 295,
          "column": 6,
          "position": 2175
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ";\n    margin?: number;\n  };\n  shipping: {\n    weight?: number;\n    dimensions?: {\n      length: number;\n      width: number;\n      height: number;\n    };\n    requiresShipping: boolean;\n    freeShipping: boolean;\n  };\n  seo: {\n    metaTitle?: string;\n    metaDescription?: string;\n    slug: string;\n  };\n  customFields: Record<string, any>;\n  tags: string[];\n  notes: string;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\product.entity.ts",
        "start": 45,
        "end": 68,
        "startLoc": {
          "line": 45,
          "column": 6,
          "position": 252
        },
        "endLoc": {
          "line": 68,
          "column": 7,
          "position": 395
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\product\\create-product.use-case.ts",
        "start": 40,
        "end": 61,
        "startLoc": {
          "line": 40,
          "column": 2,
          "position": 291
        },
        "endLoc": {
          "line": 61,
          "column": 2,
          "position": 433
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "dataSource: string[];\n  features: string[];\n  targetVariable: string;\n  validationMethod: 'cross_validation' | 'holdout' | 'time_series_split';\n  hyperparameters: Record<string, any>;\n  customFields: Record<string, any>;\n  tags: string[];\n  notes: string;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\predictive-analytics.entity.ts",
        "start": 45,
        "end": 55,
        "startLoc": {
          "line": 45,
          "column": 3,
          "position": 339
        },
        "endLoc": {
          "line": 55,
          "column": 7,
          "position": 423
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\predictive-analytics\\create-predictive-analytics.use-case.ts",
        "start": 21,
        "end": 29,
        "startLoc": {
          "line": 21,
          "column": 5,
          "position": 200
        },
        "endLoc": {
          "line": 29,
          "column": 2,
          "position": 283
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ";\n  }\n\n  get isActive(): boolean {\n    return this.props.isActive;\n  }\n\n  get createdAt(): Date {\n    return this.props.createdAt;\n  }\n\n  get updatedAt(): Date {\n    return this.props.updatedAt;\n  }\n\n  // ========================================================================\n  // BUSINESS METHODS\n  // ========================================================================\n\n  updateName(name: string): void {\n    this",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\organization.entity.ts",
        "start": 174,
        "end": 194,
        "startLoc": {
          "line": 174,
          "column": 13,
          "position": 1182
        },
        "endLoc": {
          "line": 194,
          "column": 5,
          "position": 1291
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\product.entity.ts",
        "start": 148,
        "end": 158,
        "startLoc": {
          "line": 148,
          "column": 9,
          "position": 1276
        },
        "endLoc": {
          "line": 158,
          "column": 3,
          "position": 1375
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "}\n\n  activate(): void {\n    this.props.isActive = true;\n    this.props.updatedAt = new Date();\n  }\n\n  deactivate(): void {\n    this.props.isActive = false;\n    this.props.updatedAt = new Date();\n  }\n\n  // ========================================================================\n  // BUSINESS RULES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\organization.entity.ts",
        "start": 236,
        "end": 249,
        "startLoc": {
          "line": 236,
          "column": 3,
          "position": 1709
        },
        "endLoc": {
          "line": 249,
          "column": 18,
          "position": 1800
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\product.entity.ts",
        "start": 280,
        "end": 293,
        "startLoc": {
          "line": 280,
          "column": 3,
          "position": 2649
        },
        "endLoc": {
          "line": 293,
          "column": 22,
          "position": 2740
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "(): any {\n    return {\n      id: this.props.id.value,\n      name: this.props.name,\n      slug: this.props.slug.value,\n      description: this.props.description,\n      website: this.props.website,\n      logo: this.props.logo,\n      settings: this.props.settings,\n      subscriptionTier: this.props.subscriptionTier.value,\n      status: this.props.status.value,\n      trialEndsAt: this.props.trialEndsAt,\n      billingEmail: this.props.billingEmail,\n      isActive: this.props.isActive,\n      createdAt: this.props.createdAt,\n      updatedAt: this.props.updatedAt\n    };\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\organization.entity.ts",
        "start": 405,
        "end": 424,
        "startLoc": {
          "line": 405,
          "column": 6,
          "position": 2985
        },
        "endLoc": {
          "line": 424,
          "column": 76,
          "position": 3168
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\organization.entity.ts",
        "start": 386,
        "end": 405,
        "startLoc": {
          "line": 386,
          "column": 14,
          "position": 2801
        },
        "endLoc": {
          "line": 405,
          "column": 6,
          "position": 2984
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "{\n  trackInventory: boolean;\n  allowNegativeStock: boolean;\n  lowStockThreshold: number;\n  reorderPoint: number;\n  reorderQuantity: number;\n  costMethod: 'fifo' | 'lifo' | 'average' | 'standard';\n  valuationMethod: 'fifo' | 'lifo' | 'average' | 'standard';\n  autoReorder: boolean;\n  trackExpiration: boolean;\n  trackSerialNumbers: boolean;\n  trackBatchNumbers: boolean;\n  customFields: Record<string, any>;\n  tags: string[];\n  notes: string;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\inventory-kardex.entity.ts",
        "start": 49,
        "end": 66,
        "startLoc": {
          "line": 49,
          "column": 2,
          "position": 363
        },
        "endLoc": {
          "line": 66,
          "column": 7,
          "position": 498
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\inventory-kardex\\create-inventory-kardex.use-case.ts",
        "start": 19,
        "end": 34,
        "startLoc": {
          "line": 19,
          "column": 2,
          "position": 136
        },
        "endLoc": {
          "line": 34,
          "column": 2,
          "position": 270
        }
      }
    },
    {
      "format": "typescript",
      "lines": 29,
      "fragment": "export const InteractionTypeSchema = z.enum([\n  'EMAIL',\n  'PHONE',\n  'MEETING',\n  'NOTE',\n  'TASK',\n  'CALL',\n  'DEMO',\n  'PROPOSAL',\n  'FOLLOW_UP',\n  'OTHER'\n]);\n\nexport const InteractionStatusSchema = z.enum([\n  'SCHEDULED',\n  'IN_PROGRESS',\n  'COMPLETED',\n  'CANCELLED',\n  'RESCHEDULED'\n]);\n\nexport const InteractionPrioritySchema = z.enum([\n  'LOW',\n  'MEDIUM',\n  'HIGH',\n  'URGENT'\n]);\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\interaction.entity.ts",
        "start": 7,
        "end": 35,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 35,
          "column": 7,
          "position": 151
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\interaction.dto.ts",
        "start": 13,
        "end": 41,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 54
        },
        "endLoc": {
          "line": 41,
          "column": 76,
          "position": 184
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": "export const DealStageSchema = z.enum([\n  'LEAD',\n  'QUALIFIED',\n  'PROPOSAL',\n  'NEGOTIATION',\n  'CLOSED_WON',\n  'CLOSED_LOST',\n  'ON_HOLD',\n  'CANCELLED'\n]);\n\nexport const DealStatusSchema = z.enum([\n  'ACTIVE',\n  'WON',\n  'LOST',\n  'ON_HOLD',\n  'CANCELLED'\n]);\n\nexport const DealPrioritySchema = z.enum([\n  'LOW',\n  'MEDIUM',\n  'HIGH',\n  'URGENT'\n]);\n\nexport const DealSourceSchema = z.enum([\n  'WEBSITE',\n  'EMAIL',\n  'PHONE',\n  'REFERRAL',\n  'SOCIAL_MEDIA',\n  'ADVERTISING',\n  'TRADE_SHOW',\n  'PARTNER',\n  'OTHER'\n]);\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 7,
        "end": 45,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 21
        },
        "endLoc": {
          "line": 45,
          "column": 7,
          "position": 197
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\presentation\\dto\\deal.dto.ts",
        "start": 13,
        "end": 51,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 54
        },
        "endLoc": {
          "line": 51,
          "column": 76,
          "position": 230
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "?: Date;\n  nextStep?: string;\n  nextStepDate?: Date;\n  tags?: string[];\n  customFields?: Record<string, any>;\n  attachments?: string[];\n  notes?: string;\n  competitors?: string[];\n  decisionMakers?: string[];\n  budget?: number;\n  timeline?: string;\n  requirements?: string[];\n  objections?: string[];\n  createdAt",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 80,
        "end": 93,
        "startLoc": {
          "line": 80,
          "column": 16,
          "position": 460
        },
        "endLoc": {
          "line": 93,
          "column": 10,
          "position": 581
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\deal\\update-deal.use-case.ts",
        "start": 23,
        "end": 36,
        "startLoc": {
          "line": 23,
          "column": 18,
          "position": 185
        },
        "endLoc": {
          "line": 36,
          "column": 2,
          "position": 306
        }
      }
    },
    {
      "format": "typescript",
      "lines": 54,
      "fragment": "= date;\n    this.props.updatedAt = new Date();\n  }\n\n  addTag(tag: string): void {\n    if (!this.props.tags) {\n      this.props.tags = [];\n    }\n    if (!this.props.tags.includes(tag)) {\n      this.props.tags.push(tag);\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  removeTag(tag: string): void {\n    if (this.props.tags) {\n      this.props.tags = this.props.tags.filter(t => t !== tag);\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  setCustomField(key: string, value: any): void {\n    if (!this.props.customFields) {\n      this.props.customFields = {};\n    }\n    this.props.customFields[key] = value;\n    this.props.updatedAt = new Date();\n  }\n\n  removeCustomField(key: string): void {\n    if (this.props.customFields) {\n      delete this.props.customFields[key];\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  addAttachment(attachment: string): void {\n    if (!this.props.attachments) {\n      this.props.attachments = [];\n    }\n    if (!this.props.attachments.includes(attachment)) {\n      this.props.attachments.push(attachment);\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  removeAttachment(attachment: string): void {\n    if (this.props.attachments) {\n      this.props.attachments = this.props.attachments.filter(a => a !== attachment);\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  addCompetitor",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 204,
        "end": 257,
        "startLoc": {
          "line": 204,
          "column": 2,
          "position": 2042
        },
        "endLoc": {
          "line": 257,
          "column": 14,
          "position": 2572
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\interaction.entity.ts",
        "start": 148,
        "end": 201,
        "startLoc": {
          "line": 148,
          "column": 2,
          "position": 1386
        },
        "endLoc": {
          "line": 201,
          "column": 76,
          "position": 1916
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n      this.props.updatedAt = new Date();\n    }\n  }\n\n  // ========================================================================\n  // VALIDATION METHODS\n  // ========================================================================\n\n  validate(): boolean {\n    return (\n      this.props.id.length > 0 &&\n      this.props.organizationId.length > 0 &&\n      this.props.contactId.length > 0 &&\n      this.props.userId.length > 0 &&\n      this.props.name",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 320,
        "end": 335,
        "startLoc": {
          "line": 320,
          "column": 10,
          "position": 3257
        },
        "endLoc": {
          "line": 335,
          "column": 5,
          "position": 3373
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\interaction.entity.ts",
        "start": 196,
        "end": 211,
        "startLoc": {
          "line": 196,
          "column": 11,
          "position": 1889
        },
        "endLoc": {
          "line": 211,
          "column": 8,
          "position": 2005
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Deal {\n    return Deal.create({\n      organizationId,\n      contactId,\n      companyId,\n      userId,\n      name,\n      stage: 'QUALIFIED'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 398,
        "end": 414,
        "startLoc": {
          "line": 398,
          "column": 16,
          "position": 3849
        },
        "endLoc": {
          "line": 414,
          "column": 12,
          "position": 3956
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 372,
        "end": 388,
        "startLoc": {
          "line": 372,
          "column": 11,
          "position": 3694
        },
        "endLoc": {
          "line": 388,
          "column": 7,
          "position": 3801
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Deal {\n    return Deal.create({\n      organizationId,\n      contactId,\n      companyId,\n      userId,\n      name,\n      stage: 'PROPOSAL'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 424,
        "end": 440,
        "startLoc": {
          "line": 424,
          "column": 15,
          "position": 4004
        },
        "endLoc": {
          "line": 440,
          "column": 11,
          "position": 4111
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 372,
        "end": 388,
        "startLoc": {
          "line": 372,
          "column": 11,
          "position": 3694
        },
        "endLoc": {
          "line": 388,
          "column": 7,
          "position": 3801
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(\n    organizationId: OrganizationId,\n    contactId: ContactId,\n    userId: UserId,\n    name: string,\n    value: number,\n    currency: string = 'USD',\n    source: DealSource = 'WEBSITE',\n    companyId?: CompanyId\n  ): Deal {\n    return Deal.create({\n      organizationId,\n      contactId,\n      companyId,\n      userId,\n      name,\n      stage: 'NEGOTIATION'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 450,
        "end": 466,
        "startLoc": {
          "line": 450,
          "column": 18,
          "position": 4159
        },
        "endLoc": {
          "line": 466,
          "column": 14,
          "position": 4266
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\deal.entity.ts",
        "start": 372,
        "end": 388,
        "startLoc": {
          "line": 372,
          "column": 11,
          "position": 3694
        },
        "endLoc": {
          "line": 388,
          "column": 7,
          "position": 3801
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ";\n  columns: string[];\n  referencedTable?: string;\n  referencedColumns?: string[];\n  condition?: string;\n  description: string;\n  isDeferrable: boolean;\n  initiallyDeferred: boolean;\n  onDelete?: 'CASCADE' | 'SET NULL' | 'RESTRICT' | 'NO ACTION';\n  onUpdate?: 'CASCADE' | 'SET NULL' | 'RESTRICT' | 'NO ACTION';\n  createdAt",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 54,
        "end": 64,
        "startLoc": {
          "line": 54,
          "column": 15,
          "position": 433
        },
        "endLoc": {
          "line": 64,
          "column": 10,
          "position": 532
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 77,
        "end": 87,
        "startLoc": {
          "line": 77,
          "column": 8,
          "position": 648
        },
        "endLoc": {
          "line": 87,
          "column": 2,
          "position": 747
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "{\n  id: string;\n  name: string;\n  table: string;\n  columns: string[];\n  type: 'btree' | 'hash' | 'gin' | 'gist' | 'spgist' | 'brin';\n  unique: boolean;\n  partial: boolean;\n  condition?: string;\n  description: string;\n  isActive: boolean;\n  createdAt",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 85,
        "end": 96,
        "startLoc": {
          "line": 85,
          "column": 2,
          "position": 673
        },
        "endLoc": {
          "line": 96,
          "column": 10,
          "position": 769
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 109,
        "end": 120,
        "startLoc": {
          "line": 109,
          "column": 2,
          "position": 960
        },
        "endLoc": {
          "line": 120,
          "column": 2,
          "position": 1056
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "{\n  rowCount: number;\n  tableSize: number;\n  indexSize: number;\n  totalSize: number;\n  lastAnalyzed: Date;\n  lastVacuumed: Date;\n  lastAutoVacuumed: Date;\n  deadTuples: number;\n  liveTuples: number;\n  nDistinct: number;\n  correlation: number;\n  mostCommonValues: any[];\n  mostCommonFrequencies: number[];\n  histogramBounds: any[];\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 128,
        "end": 145,
        "startLoc": {
          "line": 128,
          "column": 2,
          "position": 1008
        },
        "endLoc": {
          "line": 145,
          "column": 7,
          "position": 1117
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 144,
        "end": 159,
        "startLoc": {
          "line": 144,
          "column": 2,
          "position": 1264
        },
        "endLoc": {
          "line": 159,
          "column": 2,
          "position": 1372
        }
      }
    },
    {
      "format": "typescript",
      "lines": 47,
      "fragment": "version: string;\n  encoding: string;\n  collation: string;\n  timezone: string;\n  connectionPool: {\n    min: number;\n    max: number;\n    idle: number;\n    acquire: number;\n    evict: number;\n  };\n  migrations: {\n    enabled: boolean;\n    directory: string;\n    table: string;\n    lockTable: string;\n  };\n  backup: {\n    enabled: boolean;\n    frequency: string;\n    retention: number;\n    compression: boolean;\n  };\n  monitoring: {\n    enabled: boolean;\n    slowQueryThreshold: number;\n    logLevel: string;\n    metrics: boolean;\n  };\n  security: {\n    ssl: boolean;\n    encryption: boolean;\n    auditLog: boolean;\n    rowLevelSecurity: boolean;\n  };\n  performance: {\n    queryOptimization: boolean;\n    indexOptimization: boolean;\n    connectionPooling: boolean;\n    caching: boolean;\n  };\n  customFields: Record<string, any>;\n  tags: string[];\n  notes: string;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 147,
        "end": 193,
        "startLoc": {
          "line": 147,
          "column": 3,
          "position": 1133
        },
        "endLoc": {
          "line": 193,
          "column": 7,
          "position": 1427
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\create-database-schema.use-case.ts",
        "start": 14,
        "end": 58,
        "startLoc": {
          "line": 14,
          "column": 5,
          "position": 114
        },
        "endLoc": {
          "line": 58,
          "column": 2,
          "position": 407
        }
      }
    },
    {
      "format": "typescript",
      "lines": 26,
      "fragment": "{\n  totalTables: number;\n  totalViews: number;\n  totalFunctions: number;\n  totalProcedures: number;\n  totalTriggers: number;\n  totalIndexes: number;\n  totalConstraints: number;\n  totalPolicies: number;\n  totalSize: number;\n  averageTableSize: number;\n  largestTable: string;\n  smallestTable: string;\n  mostIndexedTable: string;\n  leastIndexedTable: string;\n  lastBackupDate?: Date;\n  lastMaintenanceDate?: Date;\n  healthScore: number;\n  performanceScore: number;\n  securityScore: number;\n  maintainabilityScore: number;\n  lastAnalysisDate: Date;\n  analysisDuration: number;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 193,
        "end": 218,
        "startLoc": {
          "line": 193,
          "column": 2,
          "position": 1433
        },
        "endLoc": {
          "line": 218,
          "column": 7,
          "position": 1594
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\database-schema\\analyze-database-schema.use-case.ts",
        "start": 17,
        "end": 40,
        "startLoc": {
          "line": 17,
          "column": 2,
          "position": 112
        },
        "endLoc": {
          "line": 40,
          "column": 2,
          "position": 272
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "; }\n\n  // ========================================================================\n  // BUSINESS METHODS\n  // ========================================================================\n\n  updateName(name: string): void {\n    if (!name || name.trim().length === 0) {\n      throw new Error('Name cannot be empty');\n    }\n    this.props.name = name.trim();\n    this.updateTimestamp();\n  }\n\n  updateType(type: SchemaType",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 280,
        "end": 294,
        "startLoc": {
          "line": 280,
          "column": 20,
          "position": 2321
        },
        "endLoc": {
          "line": 294,
          "column": 11,
          "position": 2422
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\predictive-analytics.entity.ts",
        "start": 122,
        "end": 136,
        "startLoc": {
          "line": 122,
          "column": 16,
          "position": 1084
        },
        "endLoc": {
          "line": 136,
          "column": 14,
          "position": 1185
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ");\n  }\n\n  // ========================================================================\n  // VALIDATION METHODS\n  // ========================================================================\n\n  validate(): boolean {\n    if (!this.validateBase()) {\n      return false;\n    }\n\n    if (!this.props.name || this.props.name.trim().length === 0) {\n      return false;\n    }\n\n    if (!this.props.organizationId || this.props.organizationId.trim().length === 0) {\n      return false;\n    }\n\n    if (!",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\database-schema.entity.ts",
        "start": 582,
        "end": 602,
        "startLoc": {
          "line": 582,
          "column": 6,
          "position": 5169
        },
        "endLoc": {
          "line": 602,
          "column": 2,
          "position": 5308
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\predictive-analytics.entity.ts",
        "start": 288,
        "end": 308,
        "startLoc": {
          "line": 288,
          "column": 4,
          "position": 2521
        },
        "endLoc": {
          "line": 308,
          "column": 5,
          "position": 2660
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ";\n  }\n\n  get isActive(): boolean {\n    return this.props.isActive;\n  }\n\n  get createdAt(): Date {\n    return this.props.createdAt;\n  }\n\n  get updatedAt(): Date {\n    return this.props.updatedAt;\n  }\n\n  // ========================================================================\n  // BUSINESS METHODS\n  // ========================================================================\n\n  updateName(name: string): void {\n    this.props.name = name;\n    this.props.updatedAt = new Date();\n  }\n\n  updateLegalName",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\company.entity.ts",
        "start": 274,
        "end": 298,
        "startLoc": {
          "line": 274,
          "column": 10,
          "position": 2091
        },
        "endLoc": {
          "line": 298,
          "column": 16,
          "position": 2232
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\product.entity.ts",
        "start": 148,
        "end": 198,
        "startLoc": {
          "line": 148,
          "column": 9,
          "position": 1276
        },
        "endLoc": {
          "line": 198,
          "column": 18,
          "position": 1323
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": ";\n    this.props.updatedAt = new Date();\n  }\n\n  activate(): void {\n    this.props.isActive = true;\n    this.props.updatedAt = new Date();\n  }\n\n  deactivate(): void {\n    this.props.isActive = false;\n    this.props.updatedAt = new Date();\n  }\n\n  // ========================================================================\n  // BUSINESS RULES\n  // ========================================================================\n\n  isActive(): boolean {\n    return this.props.isActive && this.props.status.value === 'active';\n  }\n\n  isCustomer",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\company.entity.ts",
        "start": 403,
        "end": 425,
        "startLoc": {
          "line": 403,
          "column": 2,
          "position": 3353
        },
        "endLoc": {
          "line": 425,
          "column": 11,
          "position": 3508
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\organization.entity.ts",
        "start": 234,
        "end": 256,
        "startLoc": {
          "line": 234,
          "column": 6,
          "position": 1690
        },
        "endLoc": {
          "line": 256,
          "column": 8,
          "position": 1845
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": "(): any {\n    return {\n      id: this.props.id.value,\n      organizationId: this.props.organizationId.value,\n      name: this.props.name,\n      legalName: this.props.legalName,\n      type: this.props.type.value,\n      status: this.props.status.value,\n      size: this.props.size.value,\n      industry: this.props.industry.value,\n      source: this.props.source.value,\n      website: this.props.website,\n      email: this.props.email,\n      phone: this.props.phone,\n      address: this.props.address?.toJSON(),\n      billingAddress: this.props.billingAddress?.toJSON(),\n      shippingAddress: this.props.shippingAddress?.toJSON(),\n      taxId: this.props.taxId,\n      vatNumber: this.props.vatNumber,\n      registrationNumber: this.props.registrationNumber,\n      description: this.props.description,\n      settings: this.props.settings,\n      annualRevenue: this.props.annualRevenue?.toJSON(),\n      employeeCount: this.props.employeeCount,\n      foundedYear: this.props.foundedYear,\n      parentCompanyId: this.props.parentCompanyId?.value,\n      assignedUserId: this.props.assignedUserId,\n      lastContactDate: this.props.lastContactDate,\n      nextFollowUpDate: this.props.nextFollowUpDate,\n      leadScore: this.props.leadScore,\n      leadScoreLevel",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\company.entity.ts",
        "start": 569,
        "end": 599,
        "startLoc": {
          "line": 569,
          "column": 6,
          "position": 4877
        },
        "endLoc": {
          "line": 599,
          "column": 15,
          "position": 5236
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\company.entity.ts",
        "start": 533,
        "end": 563,
        "startLoc": {
          "line": 533,
          "column": 14,
          "position": 4477
        },
        "endLoc": {
          "line": 563,
          "column": 9,
          "position": 4836
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ";\n  patterns: string[];\n  principles: string[];\n  conventions: Record<string, any>;\n  tools: string[];\n  frameworks: string[];\n  libraries: string[];\n  customFields: Record<string, any>;\n  tags: string[];\n  notes: string;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\architecture.entity.ts",
        "start": 57,
        "end": 69,
        "startLoc": {
          "line": 57,
          "column": 2,
          "position": 402
        },
        "endLoc": {
          "line": 69,
          "column": 7,
          "position": 494
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\create-architecture.use-case.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 301
        },
        "endLoc": {
          "line": 43,
          "column": 2,
          "position": 392
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "{\n  totalComponents: number;\n  totalLayers: number;\n  complexity: number;\n  coupling: number;\n  cohesion: number;\n  maintainability: number;\n  testability: number;\n  scalability: number;\n  performance: number;\n  security: number;\n  lastAnalysisDate: Date;\n  analysisDuration: number;\n  qualityScore: number;\n}\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\architecture.entity.ts",
        "start": 69,
        "end": 85,
        "startLoc": {
          "line": 69,
          "column": 2,
          "position": 500
        },
        "endLoc": {
          "line": 85,
          "column": 7,
          "position": 596
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\use-cases\\architecture\\analyze-architecture.use-case.ts",
        "start": 17,
        "end": 31,
        "startLoc": {
          "line": 17,
          "column": 2,
          "position": 112
        },
        "endLoc": {
          "line": 31,
          "column": 2,
          "position": 207
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "; }\n\n  // ========================================================================\n  // BUSINESS METHODS\n  // ========================================================================\n\n  updateName(name: string): void {\n    if (!name || name.trim().length === 0) {\n      throw new Error('Name cannot be empty');\n    }\n    this.props.name = name.trim();\n    this.updateTimestamp();\n  }\n\n  updateType(type: ArchitectureType",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\architecture.entity.ts",
        "start": 135,
        "end": 149,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 1118
        },
        "endLoc": {
          "line": 149,
          "column": 17,
          "position": 1219
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\predictive-analytics.entity.ts",
        "start": 122,
        "end": 136,
        "startLoc": {
          "line": 122,
          "column": 16,
          "position": 1084
        },
        "endLoc": {
          "line": 136,
          "column": 14,
          "position": 1185
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ";\n  }\n\n  // ========================================================================\n  // VALIDATION METHODS\n  // ========================================================================\n\n  validate(): boolean {\n    if (!this.validateBase()) {\n      return false;\n    }\n\n    if (!this.props.name || this.props.name.trim().length === 0) {\n      return false;\n    }\n\n    if (!this.props.organizationId || this.props.organizationId.trim().length === 0) {\n      return false;\n    }\n\n    if (!this.props.settings.layers",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\domain\\entities\\architecture.entity.ts",
        "start": 343,
        "end": 363,
        "startLoc": {
          "line": 343,
          "column": 4,
          "position": 3223
        },
        "endLoc": {
          "line": 363,
          "column": 7,
          "position": 3368
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\domain\\entities\\predictive-analytics.entity.ts",
        "start": 288,
        "end": 602,
        "startLoc": {
          "line": 288,
          "column": 2,
          "position": 2522
        },
        "endLoc": {
          "line": 602,
          "column": 8,
          "position": 5315
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n        error: error instanceof Error ? error.message : String(error)\n      });\n    }\n  }\n\n  /**\n   * Detiene el servicio de monitoreo\n   */\n  public stop(): void {\n    if (this.monitoringInterval) {\n      clearInterval(this.monitoringInterval);\n      this.monitoringInterval = null;\n    }\n    this.isMonitoring = false;\n    structuredLogger.info('Index manager monitoring stopped'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\db\\indexes\\index-manager.service.ts",
        "start": 401,
        "end": 416,
        "startLoc": {
          "line": 401,
          "column": 26,
          "position": 3186
        },
        "endLoc": {
          "line": 416,
          "column": 35,
          "position": 3288
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\db\\partitions\\partition-manager.service.ts",
        "start": 497,
        "end": 512,
        "startLoc": {
          "line": 497,
          "column": 30,
          "position": 4414
        },
        "endLoc": {
          "line": 512,
          "column": 39,
          "position": 4516
        }
      }
    },
    {
      "format": "javascript",
      "lines": 16,
      "fragment": "// optional: OpenTelemetry bootstrap (install deps if used)\nif (process.env.APPLICATIONINSIGHTS_CONNECTION_STRING) {\n  try {\n    const { NodeSDK } = require('@opentelemetry/sdk-node');\n    const { getNodeAutoInstrumentations } = require('@opentelemetry/auto-instrumentations-node');\n    const { AzureMonitorTraceExporter } = require('@azure/monitor-opentelemetry-exporter');\n    const sdk = new NodeSDK({\n      traceExporter: new AzureMonitorTraceExporter({ connectionString: process.env.APPLICATIONINSIGHTS_CONNECTION_STRING }),\n      instrumentations: [getNodeAutoInstrumentations()]\n    });\n    sdk.start().catch(e => console.error('OTel start failed', e));\n    console.log('OpenTelemetry started');\n  } catch (e) {\n    console.log('OpenTelemetry not configured or failed to init', e.message);\n  }\n}",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\cockpit.api\\src\\app-otel-snippet.js",
        "start": 1,
        "end": 16,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 16,
          "column": 2,
          "position": 183
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\cockpit.api\\src\\app.js",
        "start": 5,
        "end": 20,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 37
        },
        "endLoc": {
          "line": 20,
          "column": 2,
          "position": 220
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "});\n        results.push(result);\n      }\n\n      const allSuccessful = results.every(result => result.success);\n\n      return {\n        success: allSuccessful,\n        results\n      };\n    } catch (error) {\n      return {\n        success: false,\n        results: [],\n        error: error instanceof Error ? error.message : 'Unknown error occurred'\n      };\n    }\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\application\\services\\user.application.service.ts",
        "start": 301,
        "end": 320,
        "startLoc": {
          "line": 301,
          "column": 9,
          "position": 2397
        },
        "endLoc": {
          "line": 320,
          "column": 76,
          "position": 2518
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\application\\services\\user.application.service.ts",
        "start": 261,
        "end": 280,
        "startLoc": {
          "line": 261,
          "column": 9,
          "position": 2090
        },
        "endLoc": {
          "line": 280,
          "column": 6,
          "position": 2211
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "): Promise<void> {\n    try {\n      const jobData = await this.redis.hgetall(`job:${jobId}`);\n      \n      if (!jobData || Object.keys(jobData).length === 0) {\n        throw new Error(`Job ${jobId} not found`);\n      }\n\n      const job: Job = {\n        id: jobData.id,\n        type: jobData.type as Job['type'],\n        payload: JSON.parse(jobData.payload || '{}'),\n        organizationId: jobData.organizationId,\n        priority: jobData.priority as Job['priority'],\n        status: 'failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\workers\\src\\queues\\job-queue.ts",
        "start": 231,
        "end": 245,
        "startLoc": {
          "line": 231,
          "column": 7,
          "position": 2156
        },
        "endLoc": {
          "line": 245,
          "column": 9,
          "position": 2324
        }
      },
      "secondFile": {
        "name": "apps\\workers\\src\\queues\\job-queue.ts",
        "start": 166,
        "end": 129,
        "startLoc": {
          "line": 166,
          "column": 4,
          "position": 1494
        },
        "endLoc": {
          "line": 129,
          "column": 13,
          "position": 1153
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": "(jobId: string): Promise<Job | null> {\n    try {\n      const jobData = await this.redis.hgetall(`job:${jobId}`);\n      if (!jobData || Object.keys(jobData).length === 0) {\n        return null;\n      }\n      return {\n        id: jobData.id,\n        type: jobData.type as Job['type'],\n        payload: JSON.parse(jobData.payload || '{}'),\n        organizationId: jobData.organizationId,\n        priority: jobData.priority as Job['priority'],\n        status: jobData.status as Job['status'],\n        createdAt: jobData.createdAt,\n        startedAt: jobData.startedAt,\n        completedAt: jobData.completedAt,\n        retryCount: parseInt(jobData.retryCount || '0'),\n        maxRetries: parseInt(jobData.maxRetries || '3'),\n        error: jobData.error,\n        metadata: jobData.metadata ? JSON.parse(jobData.metadata) : undefined\n      };\n    } catch (error) {\n      logger.error('Failed to get job status'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\workers\\src\\queues\\job-queue-methods.ts",
        "start": 49,
        "end": 71,
        "startLoc": {
          "line": 49,
          "column": 13,
          "position": 502
        },
        "endLoc": {
          "line": 71,
          "column": 27,
          "position": 783
        }
      },
      "secondFile": {
        "name": "apps\\workers\\src\\queues\\job-queue.ts",
        "start": 314,
        "end": 338,
        "startLoc": {
          "line": 314,
          "column": 7,
          "position": 2907
        },
        "endLoc": {
          "line": 338,
          "column": 20,
          "position": 3191
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": "import { Request, Response, NextFunction } from 'express';\n\ninterface FinOpsHeaders {\n  'X-Est-Cost-EUR'?: string;\n  'X-Budget-Pct'?: string;\n  'X-Latency-ms'?: string;\n  'X-Route'?: string;\n  'X-Correlation-Id'?: string;\n}\n\nexport interface FinOpsRequest extends Request {\n  startTime?: number;\n  correlationId?: string;\n  estimatedCost?: number;\n  budgetPct?: number;\n}\n\n/**\n * Initialize FinOps tracking\n */\nexport const initFinOps = (req: FinOpsRequest, res: Response, next: NextFunction) => {\n  req.startTime = Date.now();\n  req.correlationId = req.header('x-correlation-id') || `agent-",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api-agents-make\\src\\middleware\\finops.ts",
        "start": 5,
        "end": 27,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 27,
          "column": 8,
          "position": 182
        }
      },
      "secondFile": {
        "name": "apps\\api-neura-comet\\src\\middleware\\finops.ts",
        "start": 5,
        "end": 27,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 27,
          "column": 8,
          "position": 182
        }
      }
    },
    {
      "format": "typescript",
      "lines": 32,
      "fragment": "${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  req.estimatedCost = 0;\n  req.budgetPct = 0;\n  \n  next();\n};\n\n/**\n * Finalize FinOps headers\n */\nexport const finalizeFinOps = (req: FinOpsRequest, res: Response, next: NextFunction) => {\n  const latency = req.startTime ? Date.now() - req.startTime : 0;\n  \n  const headers: FinOpsHeaders = {\n    'X-Est-Cost-EUR': (req.estimatedCost || 0).toFixed(4),\n    'X-Budget-Pct': (req.budgetPct || 0).toFixed(2),\n    'X-Latency-ms': latency.toString(),\n    'X-Route': req.path,\n    'X-Correlation-Id': req.correlationId || 'unknown'\n  };\n  \n  // Set headers\n  Object.entries(headers).forEach(([key, value]) => {\n    if (value) res.setHeader(key, value);\n  });\n  \n  next();\n};\n\n/**\n * Calculate cost for Make.com webhook\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api-agents-make\\src\\middleware\\finops.ts",
        "start": 27,
        "end": 58,
        "startLoc": {
          "line": 27,
          "column": 8,
          "position": 183
        },
        "endLoc": {
          "line": 58,
          "column": 4,
          "position": 462
        }
      },
      "secondFile": {
        "name": "apps\\api-neura-comet\\src\\middleware\\finops.ts",
        "start": 27,
        "end": 58,
        "startLoc": {
          "line": 27,
          "column": 8,
          "position": 183
        },
        "endLoc": {
          "line": 58,
          "column": 4,
          "position": 462
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n};\n\n/**\n * Budget guard middleware\n */\nexport const budgetGuard = (req: FinOpsRequest, res: Response, next: NextFunction) => {\n  const budgetPct = req.budgetPct || 0;\n  \n  if (budgetPct >= 90) {\n    return res.status(402).json({\n      error: 'Budget limit exceeded',\n      budgetPct,\n      message: 'Agent execution blocked due to budget constraints'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api-agents-make\\src\\middleware\\finops.ts",
        "start": 63,
        "end": 76,
        "startLoc": {
          "line": 63,
          "column": 19,
          "position": 515
        },
        "endLoc": {
          "line": 76,
          "column": 52,
          "position": 614
        }
      },
      "secondFile": {
        "name": "apps\\api-neura-comet\\src\\middleware\\finops.ts",
        "start": 67,
        "end": 80,
        "startLoc": {
          "line": 67,
          "column": 11,
          "position": 571
        },
        "endLoc": {
          "line": 80,
          "column": 44,
          "position": 670
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n        'service.name': this.config.service.name,\n        'service.version': this.config.service.version,\n        ...options.attributes\n      }\n    });\n\n    // Registrar span activo\n    this.activeSpans.set(span.spanContext().spanId, span);\n    this.spanMetrics.totalSpans++;\n    this.spanMetrics.activeSpans++;\n\n    return span;\n  }\n\n  createBusinessSpan",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 363,
        "end": 378,
        "startLoc": {
          "line": 363,
          "column": 8,
          "position": 2718
        },
        "endLoc": {
          "line": 378,
          "column": 19,
          "position": 2814
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 339,
        "end": 354,
        "startLoc": {
          "line": 339,
          "column": 6,
          "position": 2503
        },
        "endLoc": {
          "line": 354,
          "column": 22,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n        'service.name': this.config.service.name,\n        'service.version': this.config.service.version,\n        ...options.attributes\n      }\n    });\n\n    // Registrar span activo\n    this.activeSpans.set(span.spanContext().spanId, span);\n    this.spanMetrics.totalSpans++;\n    this.spanMetrics.activeSpans++;\n\n    return span;\n  }\n\n  // ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 386,
        "end": 401,
        "startLoc": {
          "line": 386,
          "column": 15,
          "position": 2926
        },
        "endLoc": {
          "line": 401,
          "column": 76,
          "position": 3022
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 339,
        "end": 354,
        "startLoc": {
          "line": 339,
          "column": 6,
          "position": 2503
        },
        "endLoc": {
          "line": 354,
          "column": 22,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": "}\n\n  // ========================================================================\n  // CONTEXT PROPAGATION\n  // ========================================================================\n\n  getCurrentSpan(): Span | undefined {\n    return trace.getActiveSpan();\n  }\n\n  getCurrentTraceId(): string | undefined {\n    const span = this.getCurrentSpan();\n    return span?.spanContext().traceId;\n  }\n\n  getCurrentSpanId(): string | undefined {\n    const span = this.getCurrentSpan();\n    return span?.spanContext().spanId;\n  }\n\n  getTraceContext(): TraceContext | undefined {\n    const span = this.getCurrentSpan();\n    if (!span) return undefined;\n\n    const spanContext = span.spanContext();\n    return {\n      traceId: spanContext.traceId,\n      spanId: spanContext.spanId,\n      operation: span.name,\n      service: this",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 502,
        "end": 531,
        "startLoc": {
          "line": 502,
          "column": 3,
          "position": 3967
        },
        "endLoc": {
          "line": 531,
          "column": 5,
          "position": 4190
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 212,
        "end": 241,
        "startLoc": {
          "line": 212,
          "column": 3,
          "position": 1797
        },
        "endLoc": {
          "line": 241,
          "column": 15,
          "position": 2020
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ";\n        \n        span.setAttributes({\n          'http.status_code': res.statusCode,\n          'http.response_size': JSON.stringify(res.locals.responseBody || {}).length,\n          'performance.duration_ms': duration\n        });\n        \n        if (res.statusCode >= 400) {\n          span.setStatus({\n            code: SpanStatusCode.ERROR,\n            message: `HTTP ${res.statusCode}`\n          });\n        }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 724,
        "end": 737,
        "startLoc": {
          "line": 724,
          "column": 2,
          "position": 5827
        },
        "endLoc": {
          "line": 737,
          "column": 2,
          "position": 5932
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 465,
        "end": 478,
        "startLoc": {
          "line": 465,
          "column": 10,
          "position": 3623
        },
        "endLoc": {
          "line": 478,
          "column": 5,
          "position": 3728
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "});\n        \n        if (res.statusCode >= 400) {\n          span.setStatus({\n            code: SpanStatusCode.ERROR,\n            message: `HTTP ${res.statusCode}`\n          });\n        } else {\n          span.setStatus({ code: SpanStatusCode.OK });\n        }\n        \n        this",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 730,
        "end": 741,
        "startLoc": {
          "line": 730,
          "column": 9,
          "position": 5877
        },
        "endLoc": {
          "line": 741,
          "column": 5,
          "position": 5962
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 265,
        "end": 276,
        "startLoc": {
          "line": 265,
          "column": 9,
          "position": 2209
        },
        "endLoc": {
          "line": 276,
          "column": 5,
          "position": 2294
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "'service.name': this.config.service.name,\n        'service.version': this.config.service.version,\n        ...options.attributes\n      }\n    });\n\n    // Registrar span activo\n    this.activeSpans.set(span.spanContext().spanId, span);\n    this.spanMetrics.totalSpans++;\n    this.spanMetrics.activeSpans++;\n\n    return span;\n  }\n\n  traceError",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 759,
        "end": 773,
        "startLoc": {
          "line": 759,
          "column": 9,
          "position": 6111
        },
        "endLoc": {
          "line": 773,
          "column": 11,
          "position": 6204
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 340,
        "end": 354,
        "startLoc": {
          "line": 340,
          "column": 9,
          "position": 2506
        },
        "endLoc": {
          "line": 354,
          "column": 22,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "traceError(error: Error, context: Record<string, any> = {}): void {\n    const span = this.getCurrentSpan();\n    if (span) {\n      span.recordException(error);\n      span.setAttributes({\n        'error.name': error.name,\n        'error.message': error.message,\n        'error.stack': error.stack || '',\n        ...context\n      });\n      span.setStatus({\n        code: SpanStatusCode.ERROR,\n        message: error.message\n      });\n    }\n    \n    // Registrar error en mtricas",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 773,
        "end": 789,
        "startLoc": {
          "line": 773,
          "column": 3,
          "position": 6204
        },
        "endLoc": {
          "line": 789,
          "column": 31,
          "position": 6348
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 347,
        "end": 362,
        "startLoc": {
          "line": 347,
          "column": 3,
          "position": 2786
        },
        "endLoc": {
          "line": 362,
          "column": 2,
          "position": 2928
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "traceBusinessOperation(operation: string, organizationId: string, context: Record<string, any> = {}): Span {\n    const span = this.createBusinessSpan(operation, organizationId);\n    \n    span.setAttributes({\n      'business.operation': operation,\n      'organization.id': organizationId,\n      ...context\n    });\n    \n    return span;\n  }\n}\n\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\n\nexport const observabilityOTelService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\observability-otel.service.ts",
        "start": 795,
        "end": 812,
        "startLoc": {
          "line": 795,
          "column": 3,
          "position": 6416
        },
        "endLoc": {
          "line": 812,
          "column": 25,
          "position": 6527
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\tracing.service.ts",
        "start": 368,
        "end": 385,
        "startLoc": {
          "line": 368,
          "column": 3,
          "position": 2942
        },
        "endLoc": {
          "line": 385,
          "column": 8,
          "position": 3053
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n      };\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        throw new Error(`Validation error: ${error.errors.map(e => e.message).join(', ')}`);\n      }\n      throw error;\n    }\n  }\n\n  async getMemoryStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\memory.service.ts",
        "start": 43,
        "end": 53,
        "startLoc": {
          "line": 43,
          "column": 7,
          "position": 374
        },
        "endLoc": {
          "line": 53,
          "column": 15,
          "position": 456
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\memory.service.ts",
        "start": 21,
        "end": 31,
        "startLoc": {
          "line": 21,
          "column": 2,
          "position": 182
        },
        "endLoc": {
          "line": 31,
          "column": 12,
          "position": 264
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n      \n      const responseTime = Date.now() - startTime;\n      this.updateHealthCheck(providerId, 'healthy', responseTime);\n      \n      return data;\n    } catch (error) {\n      this.updateHealthCheck(providerId, 'down', 0, true);\n      throw error;\n    }\n  }\n\n  async getWeatherForecast",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\external-integrations.service.ts",
        "start": 356,
        "end": 368,
        "startLoc": {
          "line": 356,
          "column": 9,
          "position": 3220
        },
        "endLoc": {
          "line": 368,
          "column": 19,
          "position": 3311
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\external-integrations.service.ts",
        "start": 298,
        "end": 310,
        "startLoc": {
          "line": 298,
          "column": 7,
          "position": 2703
        },
        "endLoc": {
          "line": 310,
          "column": 19,
          "position": 2794
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n      \n      const responseTime = Date.now() - startTime;\n      this.updateHealthCheck(providerId, 'healthy', responseTime);\n      \n      return data;\n    } catch (error) {\n      this.updateHealthCheck(providerId, 'down', 0, true);\n      throw error;\n    }\n  }\n\n  // ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\external-integrations.service.ts",
        "start": 382,
        "end": 394,
        "startLoc": {
          "line": 382,
          "column": 5,
          "position": 3468
        },
        "endLoc": {
          "line": 394,
          "column": 80,
          "position": 3557
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\external-integrations.service.ts",
        "start": 298,
        "end": 310,
        "startLoc": {
          "line": 298,
          "column": 7,
          "position": 2703
        },
        "endLoc": {
          "line": 310,
          "column": 6,
          "position": 2792
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": Map<string, Set<string>> = new Map();\n  private searchCache: Map<string, any> = new Map();\n  private readonly CACHE_TTL = 5 * 60 * 1000; // 5 minutes\n\n  constructor() {\n    this.db = getDatabaseService();\n    this.initializeService();\n  }\n\n  private async initializeService(): Promise<void> {\n    try {\n      structuredLogger.info('Initializing Content Management Service'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 164,
        "end": 175,
        "startLoc": {
          "line": 164,
          "column": 13,
          "position": 1972
        },
        "endLoc": {
          "line": 175,
          "column": 42,
          "position": 2097
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 146,
        "end": 157,
        "startLoc": {
          "line": 146,
          "column": 14,
          "position": 1665
        },
        "endLoc": {
          "line": 157,
          "column": 43,
          "position": 1790
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "[];\n    total: number;\n    page: number;\n    limit: number;\n  }> {\n    try {\n      const cacheKey = `search:${organizationId}:${JSON.stringify(searchParams)}`;\n      const cached = this.searchCache.get(cacheKey);\n      \n      if (cached && Date.now() - cached.timestamp < this.CACHE_TTL) {\n        return cached.result;\n      }\n\n      let contents",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 555,
        "end": 568,
        "startLoc": {
          "line": 555,
          "column": 8,
          "position": 4521
        },
        "endLoc": {
          "line": 568,
          "column": 9,
          "position": 4643
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 486,
        "end": 499,
        "startLoc": {
          "line": 486,
          "column": 9,
          "position": 3827
        },
        "endLoc": {
          "line": 499,
          "column": 10,
          "position": 3949
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ".slice(startIndex, endIndex),\n        total,\n        page,\n        limit\n      };\n\n      // Cache result\n      this.searchCache.set(cacheKey, {\n        result,\n        timestamp: Date.now()\n      });\n\n      return result;\n    } catch (error) {\n      structuredLogger.error('Failed to search content'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 674,
        "end": 688,
        "startLoc": {
          "line": 674,
          "column": 9,
          "position": 5856
        },
        "endLoc": {
          "line": 688,
          "column": 27,
          "position": 5939
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 599,
        "end": 613,
        "startLoc": {
          "line": 599,
          "column": 10,
          "position": 5031
        },
        "endLoc": {
          "line": 613,
          "column": 29,
          "position": 5114
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "${request.prompt}`,\n      usage: {\n        promptTokens: Math.floor(Math.random() * 50) + 25,\n        completionTokens: Math.floor(Math.random() * 50) + 25,\n        totalTokens: 0\n      },\n      timestamp: new Date()\n    };\n  }\n\n  private generateDemoTTSResponse",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\azure-openai.service.ts",
        "start": 318,
        "end": 328,
        "startLoc": {
          "line": 318,
          "column": 8,
          "position": 2673
        },
        "endLoc": {
          "line": 328,
          "column": 24,
          "position": 2766
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\azure-openai.service.ts",
        "start": 257,
        "end": 267,
        "startLoc": {
          "line": 257,
          "column": 12,
          "position": 2081
        },
        "endLoc": {
          "line": 267,
          "column": 6,
          "position": 2174
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "{\n        id: row.id,\n        name: row.name,\n        description: row.description,\n        type: row.type,\n        rules: row.rules,\n        severity: row.severity,\n        isActive: row.is_active,\n        createdAt: row.created_at,\n        updatedAt: row.updated_at\n      }))",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 312,
        "end": 322,
        "startLoc": {
          "line": 312,
          "column": 2,
          "position": 2597
        },
        "endLoc": {
          "line": 322,
          "column": 2,
          "position": 2682
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 219,
        "end": 229,
        "startLoc": {
          "line": 219,
          "column": 2,
          "position": 1710
        },
        "endLoc": {
          "line": 229,
          "column": 2,
          "position": 1795
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ".size >= 0\n      };\n\n      const healthyServices = Object.values(services).filter(Boolean).length;\n      const totalServices = Object.keys(services).length;\n      \n      let status: 'healthy' | 'degraded' | 'unhealthy';\n      if (healthyServices === totalServices) {\n        status = 'healthy';\n      } else if (healthyServices >= totalServices * 0.5) {\n        status = 'degraded';\n      } else {\n        status = 'unhealthy';\n      }\n\n      return {\n        status,\n        services,\n        lastCheck: new Date()\n      };\n    } catch (error: any) {\n      logger.error('Health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        services: { database: false, monitoring",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-performance-optimization.service.ts",
        "start": 879,
        "end": 903,
        "startLoc": {
          "line": 879,
          "column": 12,
          "position": 7458
        },
        "endLoc": {
          "line": 903,
          "column": 11,
          "position": 7683
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 890,
        "end": 914,
        "startLoc": {
          "line": 890,
          "column": 16,
          "position": 7562
        },
        "endLoc": {
          "line": 914,
          "column": 9,
          "position": 7787
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ": false },\n        lastCheck: new Date()\n      };\n    }\n  }\n\n  private async checkDatabaseHealth(): Promise<boolean> {\n    try {\n      await this.db.query('SELECT 1');\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n\nexport const aiPerformanceOptimizationService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-performance-optimization.service.ts",
        "start": 903,
        "end": 919,
        "startLoc": {
          "line": 903,
          "column": 7,
          "position": 7690
        },
        "endLoc": {
          "line": 919,
          "column": 33,
          "position": 7785
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 914,
        "end": 930,
        "startLoc": {
          "line": 914,
          "column": 11,
          "position": 7794
        },
        "endLoc": {
          "line": 930,
          "column": 28,
          "position": 7889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "> = new Map();\n  private isInitialized: boolean = false;\n\n  constructor() {\n    this.db = getDatabaseService();\n    this.initializeService();\n  }\n\n  private async initializeService(): Promise<void> {\n    try {\n      structuredLogger.info('Initializing AI Model Management Service'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-model-management.service.ts",
        "start": 198,
        "end": 208,
        "startLoc": {
          "line": 198,
          "column": 12,
          "position": 1488
        },
        "endLoc": {
          "line": 208,
          "column": 43,
          "position": 1571
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-training.service.ts",
        "start": 127,
        "end": 137,
        "startLoc": {
          "line": 127,
          "column": 17,
          "position": 1006
        },
        "endLoc": {
          "line": 137,
          "column": 44,
          "position": 1089
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ");\n\n    return {\n      department: input.department,\n      timestamp: now,\n      agents,\n      kpis: {\n        totalCost: costMetrics.totalCost,\n        totalTokens: costMetrics.totalTokens,\n        averageLatency: costMetrics.averageLatency,\n        successRate: costMetrics.successRate,\n        activeAgents: agents.filter(a => a.status === 'active').length,\n        errorRate: costMetrics.errorRate,\n      },\n      timeline",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 281,
        "end": 295,
        "startLoc": {
          "line": 281,
          "column": 6,
          "position": 2325
        },
        "endLoc": {
          "line": 295,
          "column": 9,
          "position": 2434
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 249,
        "end": 263,
        "startLoc": {
          "line": 249,
          "column": 11,
          "position": 2051
        },
        "endLoc": {
          "line": 263,
          "column": 12,
          "position": 2160
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": "const costData = await db.select()\n        .from(aiCostOptimization)\n        .where(and(\n          eq(aiCostOptimization.department, department),\n          gte(aiCostOptimization.createdAt, since)\n        ))\n        .orderBy(desc(aiCostOptimization.createdAt))\n        .limit(100);\n\n      const totalCost = costData.reduce((sum, record) => sum + (record.costSavings || 0), 0);\n      const totalTokens = costData.reduce((sum, record) => sum + (record.tokensUsed || 0), 0);\n      const averageLatency = costData.reduce((sum, record) => sum + (record.latencyMs || 0), 0) / costData.length || 0;\n      const successRate = costData.filter(r => r.status === 'success').length / costData.length || 0;\n      const errorRate = costData.filter(r => r.status === 'error').length / costData.length || 0;\n\n      return {\n        totalCost,\n        totalTokens,\n        averageLatency,\n        successRate,\n        errorRate,\n      };\n    } catch (error) {\n      logger.error('Error getting cost metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 305,
        "end": 328,
        "startLoc": {
          "line": 305,
          "column": 7,
          "position": 2478
        },
        "endLoc": {
          "line": 328,
          "column": 29,
          "position": 2801
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 432,
        "end": 455,
        "startLoc": {
          "line": 432,
          "column": 7,
          "position": 3702
        },
        "endLoc": {
          "line": 455,
          "column": 26,
          "position": 4025
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\n      }\n\n      const latest = predictionData[0];\n      return {\n        costForecast: {\n          optimistic: latest.optimisticForecast || 0,\n          base: latest.baseForecast || 0,\n          pessimistic: latest.pessimisticForecast || 0,\n        },\n        usageForecast: {\n          tokens: latest.predictedTokens || 0,\n          calls: latest.predictedCalls || 0,\n        },\n        confidence: latest.confidenceScore || 0,\n      };\n    } catch (error) {\n      logger.error('Error getting prediction metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 351,
        "end": 368,
        "startLoc": {
          "line": 351,
          "column": 10,
          "position": 2966
        },
        "endLoc": {
          "line": 368,
          "column": 35,
          "position": 3108
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 482,
        "end": 499,
        "startLoc": {
          "line": 482,
          "column": 2,
          "position": 4246
        },
        "endLoc": {
          "line": 499,
          "column": 32,
          "position": 4388
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "(department: string) {\n    try {\n      const optimizationData = await db.select()\n        .from(aiCostOptimization)\n        .where(eq(aiCostOptimization.department, department))\n        .orderBy(desc(aiCostOptimization.createdAt))\n        .limit(10);\n\n      const activeRules = optimizationData.filter(r => r.status === 'active').length;\n      const savings = optimizationData.reduce((sum, r) => sum + (r.costSavings || 0), 0);\n      const recommendations = optimizationData\n        .filter(r => r.recommendations)\n        .map(r => r.recommendations)\n        .slice(0, 5);\n\n      return {\n        activeRules,\n        savings,\n        recommendations: recommendations as string[],\n      };\n    } catch (error) {\n      logger.error('Error getting optimization metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 376,
        "end": 397,
        "startLoc": {
          "line": 376,
          "column": 23,
          "position": 3144
        },
        "endLoc": {
          "line": 397,
          "column": 37,
          "position": 3375
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 511,
        "end": 532,
        "startLoc": {
          "line": 511,
          "column": 20,
          "position": 4480
        },
        "endLoc": {
          "line": 532,
          "column": 34,
          "position": 4711
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ";\n      }\n\n      const latest = securityData[0];\n      return {\n        complianceScore: latest.complianceScore || 0,\n        activePolicies: latest.activePolicies || 0,\n        incidents: latest.securityIncidents || 0,\n        lastAudit: latest.lastAuditDate || new Date(),\n      };\n    } catch (error) {\n      logger.error('Error getting security metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 414,
        "end": 425,
        "startLoc": {
          "line": 414,
          "column": 10,
          "position": 3502
        },
        "endLoc": {
          "line": 425,
          "column": 33,
          "position": 3602
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 558,
        "end": 569,
        "startLoc": {
          "line": 558,
          "column": 2,
          "position": 4898
        },
        "endLoc": {
          "line": 569,
          "column": 30,
          "position": 4998
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "}\n\n  /**\n   * Convierte timeframe a milisegundos\n   */\n  private getTimeframeMs(timeframe: string): number {\n    switch (timeframe) {\n      case '1h': return 60 * 60 * 1000;\n      case '24h': return 24 * 60 * 60 * 1000;\n      case '7d': return 7 * 24 * 60 * 60 * 1000;\n      case '30d': return 30 * 24 * 60 * 60 * 1000;\n      default: return 24 * 60 * 60 * 1000;\n    }\n  }\n\n  /**\n   * Notifica a conexiones WebSocket\n   */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 522,
        "end": 539,
        "startLoc": {
          "line": 522,
          "column": 3,
          "position": 4522
        },
        "endLoc": {
          "line": 539,
          "column": 6,
          "position": 4678
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 696,
        "end": 710,
        "startLoc": {
          "line": 696,
          "column": 3,
          "position": 5873
        },
        "endLoc": {
          "line": 710,
          "column": 2,
          "position": 6027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "{\n        id: row.id,\n        name: row.name,\n        description: row.description,\n        type: row.type,\n        algorithm: row.algorithm,\n        features: row.features,\n        hyperparameters: row.hyperparameters,\n        accuracy: parseFloat(row.accuracy),\n        mae: parseFloat(row.mae),\n        mse: parseFloat(row.mse),\n        rmse: parseFloat(row.rmse),\n        r2Score: parseFloat(row.r2_score),\n        isActive: row.is_active,\n        lastTrained: row.last_trained,\n        createdAt: row.created_at,\n        updatedAt: row.updated_at\n      }))",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-cost-prediction.service.ts",
        "start": 347,
        "end": 364,
        "startLoc": {
          "line": 347,
          "column": 2,
          "position": 2880
        },
        "endLoc": {
          "line": 364,
          "column": 2,
          "position": 3043
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-cost-prediction.service.ts",
        "start": 229,
        "end": 246,
        "startLoc": {
          "line": 229,
          "column": 2,
          "position": 1869
        },
        "endLoc": {
          "line": 246,
          "column": 2,
          "position": 2032
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": "};\n\n      const healthyServices = Object.values(services).filter(Boolean).length;\n      const totalServices = Object.keys(services).length;\n      \n      let status: 'healthy' | 'degraded' | 'unhealthy';\n      if (healthyServices === totalServices) {\n        status = 'healthy';\n      } else if (healthyServices >= totalServices * 0.5) {\n        status = 'degraded';\n      } else {\n        status = 'unhealthy';\n      }\n\n      return {\n        status,\n        services,\n        lastCheck: new Date()\n      };\n    } catch (error: any) {\n      logger.error('Health check failed', { error: error.message });\n      return {\n        status: 'unhealthy',\n        services: { database: false, models",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-cost-prediction.service.ts",
        "start": 944,
        "end": 967,
        "startLoc": {
          "line": 944,
          "column": 7,
          "position": 8583
        },
        "endLoc": {
          "line": 967,
          "column": 7,
          "position": 8800
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\basic-ai\\basic-ai.service.ts",
        "start": 485,
        "end": 914,
        "startLoc": {
          "line": 485,
          "column": 5,
          "position": 3709
        },
        "endLoc": {
          "line": 914,
          "column": 9,
          "position": 7787
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ": false },\n        lastCheck: new Date()\n      };\n    }\n  }\n\n  private async checkDatabaseHealth(): Promise<boolean> {\n    try {\n      await this.db.query('SELECT 1');\n      return true;\n    } catch {\n      return false;\n    }\n  }\n}\n\nexport const aiCostPredictionService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\services\\ai-cost-prediction.service.ts",
        "start": 967,
        "end": 983,
        "startLoc": {
          "line": 967,
          "column": 11,
          "position": 8813
        },
        "endLoc": {
          "line": 983,
          "column": 24,
          "position": 8908
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 914,
        "end": 930,
        "startLoc": {
          "line": 914,
          "column": 11,
          "position": 7794
        },
        "endLoc": {
          "line": 930,
          "column": 28,
          "position": 7889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", {\n        error: error instanceof Error ? error.message : String(error)\n      });\n    }\n  }\n\n  private cleanupExpiredSessions(): void {\n    const now = new Date();\n    const expiredSessions: string[] = [];\n\n    for (const [sessionId, session] of this.activeSessions.entries()) {\n      if",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\security\\mfa.service.ts",
        "start": 775,
        "end": 786,
        "startLoc": {
          "line": 775,
          "column": 24,
          "position": 5597
        },
        "endLoc": {
          "line": 786,
          "column": 3,
          "position": 5706
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\security\\security-manager.service.ts",
        "start": 778,
        "end": 789,
        "startLoc": {
          "line": 778,
          "column": 29,
          "position": 5828
        },
        "endLoc": {
          "line": 789,
          "column": 6,
          "position": 5937
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      body: req.body\n    });\n\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        timestamp: new Date().toISOString()\n      });\n    }\n  }\n});\n\n/**\n * Manage cron jobs\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 138,
        "end": 162,
        "startLoc": {
          "line": 138,
          "column": 53,
          "position": 1201
        },
        "endLoc": {
          "line": 162,
          "column": 4,
          "position": 1386
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 72,
        "end": 96,
        "startLoc": {
          "line": 72,
          "column": 47,
          "position": 646
        },
        "endLoc": {
          "line": 96,
          "column": 4,
          "position": 831
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n          result: result.result,\n          serviceId: result.serviceId,\n          responseTime: result.responseTime\n        },\n        timestamp: new Date().toISOString()\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: result.error,\n        jobId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 180,
        "end": 191,
        "startLoc": {
          "line": 180,
          "column": 7,
          "position": 1539
        },
        "endLoc": {
          "line": 191,
          "column": 6,
          "position": 1626
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 55,
        "end": 66,
        "startLoc": {
          "line": 55,
          "column": 10,
          "position": 511
        },
        "endLoc": {
          "line": 66,
          "column": 10,
          "position": 598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      body: req.body\n    });\n\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        timestamp: new Date().toISOString()\n      });\n    }\n  }\n});\n\n/**\n * Get workers health status\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 197,
        "end": 221,
        "startLoc": {
          "line": 197,
          "column": 49,
          "position": 1674
        },
        "endLoc": {
          "line": 221,
          "column": 4,
          "position": 1859
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 72,
        "end": 96,
        "startLoc": {
          "line": 72,
          "column": 47,
          "position": 646
        },
        "endLoc": {
          "line": 96,
          "column": 4,
          "position": 831
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error'\n    });\n\n    res.status(500).json({\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error',\n      timestamp: new Date().toISOString()\n    });\n  }\n});\n\n/**\n * Webhook endpoint for receiving events from workers\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 263,
        "end": 277,
        "startLoc": {
          "line": 263,
          "column": 39,
          "position": 2187
        },
        "endLoc": {
          "line": 277,
          "column": 4,
          "position": 2284
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\workers-integration.ts",
        "start": 237,
        "end": 251,
        "startLoc": {
          "line": 237,
          "column": 36,
          "position": 1990
        },
        "endLoc": {
          "line": 251,
          "column": 4,
          "position": 2087
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting supplier performance', { error });\n    res.status(400).json({\n      success: false,\n      error: 'Invalid request data',\n      details: error.errors\n    });\n  }\n});\n\n// Comparison Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 309,
        "end": 322,
        "startLoc": {
          "line": 309,
          "column": 12,
          "position": 3660
        },
        "endLoc": {
          "line": 322,
          "column": 25,
          "position": 3755
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 280,
        "end": 293,
        "startLoc": {
          "line": 280,
          "column": 2,
          "position": 3366
        },
        "endLoc": {
          "line": 293,
          "column": 24,
          "position": 3461
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\stripe-receipts.ts",
        "start": 73,
        "end": 83,
        "startLoc": {
          "line": 73,
          "column": 2,
          "position": 937
        },
        "endLoc": {
          "line": 83,
          "column": 10,
          "position": 1024
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 145,
        "startLoc": {
          "line": 135,
          "column": 2,
          "position": 2128
        },
        "endLoc": {
          "line": 145,
          "column": 6,
          "position": 2215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!receipt) {\n      return res.status(404).json({\n        success: false,\n        error: 'Receipt not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: receipt,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error reconciling Stripe receipt'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\stripe-receipts.ts",
        "start": 191,
        "end": 206,
        "startLoc": {
          "line": 191,
          "column": 5,
          "position": 1960
        },
        "endLoc": {
          "line": 206,
          "column": 35,
          "position": 2068
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\stripe-receipts.ts",
        "start": 114,
        "end": 129,
        "startLoc": {
          "line": 114,
          "column": 3,
          "position": 1311
        },
        "endLoc": {
          "line": 129,
          "column": 31,
          "position": 1419
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating reconciliation report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\stripe-receipts.ts",
        "start": 286,
        "end": 298,
        "startLoc": {
          "line": 286,
          "column": 15,
          "position": 2793
        },
        "endLoc": {
          "line": 298,
          "column": 41,
          "position": 2879
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 378,
        "end": 390,
        "startLoc": {
          "line": 378,
          "column": 11,
          "position": 4308
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update social account'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 296,
        "startLoc": {
          "line": 282,
          "column": 3,
          "position": 2862
        },
        "endLoc": {
          "line": 296,
          "column": 34,
          "position": 2964
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 173,
        "end": 187,
        "startLoc": {
          "line": 173,
          "column": 16,
          "position": 1995
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create social post'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 364,
        "end": 379,
        "startLoc": {
          "line": 364,
          "column": 39,
          "position": 3453
        },
        "endLoc": {
          "line": 379,
          "column": 31,
          "position": 3578
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to list social posts'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 408,
        "end": 423,
        "startLoc": {
          "line": 408,
          "column": 38,
          "position": 3837
        },
        "endLoc": {
          "line": 423,
          "column": 30,
          "position": 3962
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ": req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update social post'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 485,
        "end": 499,
        "startLoc": {
          "line": 485,
          "column": 7,
          "position": 4454
        },
        "endLoc": {
          "line": 499,
          "column": 31,
          "position": 4563
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 187,
        "startLoc": {
          "line": 282,
          "column": 10,
          "position": 2855
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "]),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// Transaction Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 87,
        "end": 99,
        "startLoc": {
          "line": 87,
          "column": 20,
          "position": 1334
        },
        "endLoc": {
          "line": 99,
          "column": 26,
          "position": 1425
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 85,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 2127
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating SEPA robust report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 265,
        "end": 279,
        "startLoc": {
          "line": 265,
          "column": 15,
          "position": 2871
        },
        "endLoc": {
          "line": 279,
          "column": 38,
          "position": 2969
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 376,
        "end": 390,
        "startLoc": {
          "line": 376,
          "column": 23,
          "position": 4296
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!document) {\n      return res.status(404).json({\n        success: false,\n        error: 'Document not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: document,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error updating document'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\semantic-search-crm.ts",
        "start": 187,
        "end": 202,
        "startLoc": {
          "line": 187,
          "column": 8,
          "position": 2485
        },
        "endLoc": {
          "line": 202,
          "column": 26,
          "position": 2593
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\semantic-search-crm.ts",
        "start": 159,
        "end": 174,
        "startLoc": {
          "line": 159,
          "column": 11,
          "position": 2218
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 2326
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message\n    });\n\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: (error as Error).message\n    });\n  }\n});\n\nexport default router;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rls-tenant-policies.ts",
        "start": 531,
        "end": 543,
        "startLoc": {
          "line": 531,
          "column": 22,
          "position": 4014
        },
        "endLoc": {
          "line": 543,
          "column": 2,
          "position": 4096
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\security-config.ts",
        "start": 516,
        "end": 528,
        "startLoc": {
          "line": 516,
          "column": 45,
          "position": 3846
        },
        "endLoc": {
          "line": 528,
          "column": 2,
          "position": 3928
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(filters.organizationId, filters);\n    \n    res.json({\n      success: true,\n      data: {\n        rules,\n        total: rules.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting RLS rules'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rls-generativa.ts",
        "start": 255,
        "end": 267,
        "startLoc": {
          "line": 255,
          "column": 12,
          "position": 2912
        },
        "endLoc": {
          "line": 267,
          "column": 26,
          "position": 2999
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 175,
        "end": 187,
        "startLoc": {
          "line": 175,
          "column": 9,
          "position": 2109
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2196
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!reporte) {\n      return res.status(404).json({\n        success: false,\n        error: 'Reporte not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: reporte,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error updating reporte'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\reportes-mensuales.ts",
        "start": 304,
        "end": 319,
        "startLoc": {
          "line": 304,
          "column": 8,
          "position": 3003
        },
        "endLoc": {
          "line": 319,
          "column": 25,
          "position": 3111
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\reportes-mensuales.ts",
        "start": 274,
        "end": 289,
        "startLoc": {
          "line": 274,
          "column": 3,
          "position": 2737
        },
        "endLoc": {
          "line": 289,
          "column": 24,
          "position": 2845
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const { key } = validation.data;\n\n    // Reset rate limit",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 145,
        "startLoc": {
          "line": 132,
          "column": 5,
          "position": 1132
        },
        "endLoc": {
          "line": 145,
          "column": 20,
          "position": 1242
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 65,
        "end": 78,
        "startLoc": {
          "line": 65,
          "column": 6,
          "position": 609
        },
        "endLoc": {
          "line": 78,
          "column": 30,
          "position": 719
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to reset rate limit'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 160,
        "end": 170,
        "startLoc": {
          "line": 160,
          "column": 2,
          "position": 1358
        },
        "endLoc": {
          "line": 170,
          "column": 29,
          "position": 1448
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to get rate limit stats'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 214,
        "end": 224,
        "startLoc": {
          "line": 214,
          "column": 7,
          "position": 1766
        },
        "endLoc": {
          "line": 224,
          "column": 33,
          "position": 1856
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to get rate limit rules'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 256,
        "end": 266,
        "startLoc": {
          "line": 256,
          "column": 2,
          "position": 2101
        },
        "endLoc": {
          "line": 266,
          "column": 33,
          "position": 2191
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const ruleData",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 288,
        "end": 299,
        "startLoc": {
          "line": 288,
          "column": 14,
          "position": 2372
        },
        "endLoc": {
          "line": 299,
          "column": 9,
          "position": 2473
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 2,
          "position": 704
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to add rate limit rule'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 328,
        "end": 338,
        "startLoc": {
          "line": 328,
          "column": 2,
          "position": 2688
        },
        "endLoc": {
          "line": 338,
          "column": 32,
          "position": 2778
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    // Check if rule exists",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 363,
        "end": 374,
        "startLoc": {
          "line": 363,
          "column": 17,
          "position": 2988
        },
        "endLoc": {
          "line": 374,
          "column": 24,
          "position": 3087
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 6,
          "position": 702
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to update rate limit rule'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 403,
        "end": 413,
        "startLoc": {
          "line": 403,
          "column": 2,
          "position": 3311
        },
        "endLoc": {
          "line": 413,
          "column": 35,
          "position": 3401
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "// Check if rule exists\n    const existingRule = globalRateLimiter.getRule(id);\n    if (!existingRule) {\n      res.status(404).json({\n        error: 'Rule not found',\n        message: `Rule with ID '${id}' not found`,\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    // Remove rule",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 438,
        "end": 450,
        "startLoc": {
          "line": 438,
          "column": 5,
          "position": 3612
        },
        "endLoc": {
          "line": 450,
          "column": 15,
          "position": 3701
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 374,
        "end": 386,
        "startLoc": {
          "line": 374,
          "column": 5,
          "position": 3087
        },
        "endLoc": {
          "line": 386,
          "column": 53,
          "position": 3176
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "},\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to remove rate limit rule'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 465,
        "end": 475,
        "startLoc": {
          "line": 465,
          "column": 2,
          "position": 3815
        },
        "endLoc": {
          "line": 475,
          "column": 35,
          "position": 3905
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 7,
          "position": 848
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n      requestId,\n      timestamp: new Date().toISOString(),\n      processingTime\n    });\n\n  } catch (error) {\n    const processingTime = Date.now() - startTime;\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n    structuredLogger.error('Failed to clear all rate limits'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 515,
        "end": 525,
        "startLoc": {
          "line": 515,
          "column": 39,
          "position": 4192
        },
        "endLoc": {
          "line": 525,
          "column": 34,
          "position": 4281
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 2,
          "position": 849
        },
        "endLoc": {
          "line": 106,
          "column": 34,
          "position": 938
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating health check'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 300,
        "end": 310,
        "startLoc": {
          "line": 300,
          "column": 5,
          "position": 2757
        },
        "endLoc": {
          "line": 310,
          "column": 30,
          "position": 2837
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error updating configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 457,
        "end": 467,
        "startLoc": {
          "line": 457,
          "column": 5,
          "position": 4063
        },
        "endLoc": {
          "line": 467,
          "column": 31,
          "position": 4143
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "attributes: attributes || {}\n    });\n\n    res.json({\n      success: true,\n      data: {\n        spanId: span.spanContext().spanId,\n        traceId: span.spanContext().traceId,\n        name: span.name,\n        attributes: span.attributes\n      },\n      message: 'Business span created successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 257,
        "end": 268,
        "startLoc": {
          "line": 257,
          "column": 7,
          "position": 1931
        },
        "endLoc": {
          "line": 268,
          "column": 37,
          "position": 2018
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 215,
        "end": 226,
        "startLoc": {
          "line": 215,
          "column": 7,
          "position": 1584
        },
        "endLoc": {
          "line": 226,
          "column": 28,
          "position": 1671
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      attributes: attributes || {}\n    });\n\n    res.json({\n      success: true,\n      data: {\n        spanId: span.spanContext().spanId,\n        traceId: span.spanContext().traceId,\n        name: span.name,\n        attributes: span.attributes\n      },\n      message: 'Database span created successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 298,
        "end": 310,
        "startLoc": {
          "line": 298,
          "column": 6,
          "position": 2273
        },
        "endLoc": {
          "line": 310,
          "column": 37,
          "position": 2365
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 256,
        "end": 226,
        "startLoc": {
          "line": 256,
          "column": 15,
          "position": 1926
        },
        "endLoc": {
          "line": 226,
          "column": 28,
          "position": 1671
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      attributes: attributes || {}\n    });\n\n    res.json({\n      success: true,\n      data: {\n        spanId: span.spanContext().spanId,\n        traceId: span.spanContext().traceId,\n        name: span.name,\n        attributes: span.attributes\n      },\n      message: 'External API span created successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 340,
        "end": 352,
        "startLoc": {
          "line": 340,
          "column": 9,
          "position": 2620
        },
        "endLoc": {
          "line": 352,
          "column": 41,
          "position": 2712
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 256,
        "end": 226,
        "startLoc": {
          "line": 256,
          "column": 15,
          "position": 1926
        },
        "endLoc": {
          "line": 226,
          "column": 28,
          "position": 1671
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message\n    });\n\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: (error as Error).message\n    });\n  }\n});\n\nexport default router;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\observability-otel.ts",
        "start": 598,
        "end": 610,
        "startLoc": {
          "line": 598,
          "column": 36,
          "position": 4557
        },
        "endLoc": {
          "line": 610,
          "column": 2,
          "position": 4639
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\security-config.ts",
        "start": 516,
        "end": 528,
        "startLoc": {
          "line": 516,
          "column": 45,
          "position": 3846
        },
        "endLoc": {
          "line": 528,
          "column": 2,
          "position": 3928
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "= z.object({\n  userId: z.string().uuid(),\n  orgId: z.string().uuid(),\n  type: z.enum(['info', 'success', 'warning', 'error', 'alert', 'reminder', 'update', 'announcement']),\n  priority: z.enum(['low', 'medium', 'high', 'urgent']),\n  title: z.string().min(1).max(200),\n  message: z.string().min(1).max(1000),\n  data: z.record(z.any()).optional(),\n  channels: z.array(z.enum(['email', 'sms', 'push', 'in_app', 'webhook'])),\n  templateId: z.string().optional(),\n  templateVariables",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 46,
        "end": 56,
        "startLoc": {
          "line": 46,
          "column": 2,
          "position": 563
        },
        "endLoc": {
          "line": 56,
          "column": 18,
          "position": 768
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 332
        },
        "endLoc": {
          "line": 43,
          "column": 12,
          "position": 537
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Delete template",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 211,
        "end": 222,
        "startLoc": {
          "line": 211,
          "column": 7,
          "position": 2092
        },
        "endLoc": {
          "line": 222,
          "column": 19,
          "position": 2169
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 115,
        "end": 126,
        "startLoc": {
          "line": 115,
          "column": 7,
          "position": 1345
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      templateId: req.params.id,\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 239,
        "end": 252,
        "startLoc": {
          "line": 239,
          "column": 28,
          "position": 2303
        },
        "endLoc": {
          "line": 252,
          "column": 80,
          "position": 2396
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 209,
        "end": 126,
        "startLoc": {
          "line": 209,
          "column": 28,
          "position": 2076
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Get notification",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 276,
        "end": 288,
        "startLoc": {
          "line": 276,
          "column": 32,
          "position": 2573
        },
        "endLoc": {
          "line": 288,
          "column": 20,
          "position": 2655
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ": req.params.id,\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error'\n    });\n  }\n});\n\n// List notifications",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 308,
        "end": 320,
        "startLoc": {
          "line": 308,
          "column": 15,
          "position": 2813
        },
        "endLoc": {
          "line": 320,
          "column": 22,
          "position": 2892
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 146,
        "end": 158,
        "startLoc": {
          "line": 146,
          "column": 11,
          "position": 1580
        },
        "endLoc": {
          "line": 158,
          "column": 18,
          "position": 1659
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ": req.params.id,\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Delete notification",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 376,
        "end": 388,
        "startLoc": {
          "line": 376,
          "column": 15,
          "position": 3376
        },
        "endLoc": {
          "line": 388,
          "column": 23,
          "position": 3463
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 210,
        "end": 126,
        "startLoc": {
          "line": 210,
          "column": 11,
          "position": 2082
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      notificationId: req.params.id,\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Mark as read",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 405,
        "end": 418,
        "startLoc": {
          "line": 405,
          "column": 32,
          "position": 3597
        },
        "endLoc": {
          "line": 418,
          "column": 16,
          "position": 3690
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 375,
        "end": 126,
        "startLoc": {
          "line": 375,
          "column": 32,
          "position": 3370
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      notificationId: req.params.id,\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Mark all as read",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 436,
        "end": 449,
        "startLoc": {
          "line": 436,
          "column": 38,
          "position": 3837
        },
        "endLoc": {
          "line": 449,
          "column": 20,
          "position": 3930
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 375,
        "end": 126,
        "startLoc": {
          "line": 375,
          "column": 32,
          "position": 3370
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Send bulk notifications",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 532,
        "end": 544,
        "startLoc": {
          "line": 532,
          "column": 30,
          "position": 4561
        },
        "endLoc": {
          "line": 544,
          "column": 27,
          "position": 4643
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Schedule notification",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 568,
        "end": 580,
        "startLoc": {
          "line": 568,
          "column": 36,
          "position": 4905
        },
        "endLoc": {
          "line": 580,
          "column": 25,
          "position": 4987
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// ============================================================================\n// PREFERENCES ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 616,
        "end": 629,
        "startLoc": {
          "line": 616,
          "column": 34,
          "position": 5289
        },
        "endLoc": {
          "line": 629,
          "column": 22,
          "position": 5373
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 253,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 253,
          "column": 23,
          "position": 2398
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const userId = req.user?.id || req.query.userId as string;\n    const orgId = req.user?.orgId || req.query.orgId as string;\n    \n    if (!userId || !orgId) {\n      return res.status(400).json({\n        success: false,\n        error: 'User ID and Organization ID are required'\n      });\n    }\n\n    const preferences",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 633,
        "end": 645,
        "startLoc": {
          "line": 633,
          "column": 15,
          "position": 5385
        },
        "endLoc": {
          "line": 645,
          "column": 12,
          "position": 5515
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 321,
        "end": 333,
        "startLoc": {
          "line": 321,
          "column": 17,
          "position": 2899
        },
        "endLoc": {
          "line": 333,
          "column": 8,
          "position": 3029
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const userId = req.user?.id || req.body.userId;\n    const orgId = req.user?.orgId || req.body.orgId;\n    \n    if (!userId || !orgId) {\n      return res.status(400).json({\n        success: false,\n        error: 'User ID and Organization ID are required'\n      });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 665,
        "end": 677,
        "startLoc": {
          "line": 665,
          "column": 15,
          "position": 5657
        },
        "endLoc": {
          "line": 677,
          "column": 6,
          "position": 5777
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 450,
        "end": 462,
        "startLoc": {
          "line": 450,
          "column": 26,
          "position": 3937
        },
        "endLoc": {
          "line": 462,
          "column": 6,
          "position": 4057
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// ============================================================================\n// STATISTICS ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 692,
        "end": 705,
        "startLoc": {
          "line": 692,
          "column": 31,
          "position": 5892
        },
        "endLoc": {
          "line": 705,
          "column": 21,
          "position": 5976
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 253,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 253,
          "column": 23,
          "position": 2398
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const orgId = req.user?.orgId || req.query.orgId as string;\n    \n    if (!orgId) {\n      return res.status(400).json({\n        success: false,\n        error: 'Organization ID is required'\n      });\n    }\n\n    const stats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 709,
        "end": 720,
        "startLoc": {
          "line": 709,
          "column": 14,
          "position": 5988
        },
        "endLoc": {
          "line": 720,
          "column": 6,
          "position": 6086
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 159,
        "end": 170,
        "startLoc": {
          "line": 159,
          "column": 13,
          "position": 1666
        },
        "endLoc": {
          "line": 170,
          "column": 10,
          "position": 1764
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const userId = req.user?.id || req.query.userId as string;\n    const orgId = req.user?.orgId || req.query.orgId as string;\n    \n    if (!userId || !orgId) {\n      return res.status(400).json({\n        success: false,\n        error: 'User ID and Organization ID are required'\n      });\n    }\n\n    const count",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 740,
        "end": 752,
        "startLoc": {
          "line": 740,
          "column": 16,
          "position": 6225
        },
        "endLoc": {
          "line": 752,
          "column": 6,
          "position": 6355
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 321,
        "end": 333,
        "startLoc": {
          "line": 321,
          "column": 17,
          "position": 2899
        },
        "endLoc": {
          "line": 333,
          "column": 8,
          "position": 3029
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Test SMS provider",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 789,
        "end": 801,
        "startLoc": {
          "line": 789,
          "column": 29,
          "position": 6632
        },
        "endLoc": {
          "line": 801,
          "column": 21,
          "position": 6714
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Test push provider",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 815,
        "end": 827,
        "startLoc": {
          "line": 815,
          "column": 27,
          "position": 6845
        },
        "endLoc": {
          "line": 827,
          "column": 22,
          "position": 6927
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// ============================================================================\n// TEMPLATE ENGINE ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 841,
        "end": 854,
        "startLoc": {
          "line": 841,
          "column": 28,
          "position": 7058
        },
        "endLoc": {
          "line": 854,
          "column": 26,
          "position": 7142
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 253,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 253,
          "column": 23,
          "position": 2398
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\n// Validate template",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 886,
        "end": 898,
        "startLoc": {
          "line": 886,
          "column": 25,
          "position": 7366
        },
        "endLoc": {
          "line": 898,
          "column": 21,
          "position": 7448
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "= req.body;\n    \n    const templateEngine = TemplateEngineFactory.create({\n      engine: 'handlebars',\n      defaultLanguage: 'es',\n      supportedLanguages: ['es', 'en'],\n      cacheEnabled: true,\n      cacheSize: 100,\n      strictMode: true,\n      escapeHtml: true\n    });\n\n    const result = await templateEngine.validateTemplate",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 901,
        "end": 913,
        "startLoc": {
          "line": 901,
          "column": 2,
          "position": 7480
        },
        "endLoc": {
          "line": 913,
          "column": 17,
          "position": 7572
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 860,
        "end": 872,
        "startLoc": {
          "line": 860,
          "column": 2,
          "position": 7195
        },
        "endLoc": {
          "line": 872,
          "column": 7,
          "position": 7287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      error: (error as Error).message,\n      userId: req.user?.id\n    });\n\n    res.status(400).json({\n      success: false,\n      error: (error as Error).message\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 921,
        "end": 933,
        "startLoc": {
          "line": 921,
          "column": 29,
          "position": 7629
        },
        "endLoc": {
          "line": 933,
          "column": 7,
          "position": 7711
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\notifications.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 28,
          "position": 1340
        },
        "endLoc": {
          "line": 126,
          "column": 16,
          "position": 1422
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", authMiddleware, async (req, res) => {\n  try {\n    const { sessionId, userId, organizationId, data, context, options } = req.body;\n    \n    if (!sessionId || !userId || !organizationId || !data) {\n      return res.status(400).json({\n        success: false,\n        error: 'Missing required fields: sessionId, userId, organizationId, data',\n      });\n    }\n\n    const request = {\n      sessionId,\n      userId,\n      organizationId,\n      requestType: 'prediction'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\next-ai-platform.ts",
        "start": 645,
        "end": 660,
        "startLoc": {
          "line": 645,
          "column": 11,
          "position": 1820
        },
        "endLoc": {
          "line": 660,
          "column": 13,
          "position": 1963
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\next-ai-platform.ts",
        "start": 563,
        "end": 578,
        "startLoc": {
          "line": 563,
          "column": 11,
          "position": 1520
        },
        "endLoc": {
          "line": 578,
          "column": 11,
          "position": 1663
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", {\n      traceId,\n      spanId,\n      analysis\n    });\n\n    res.json({\n      success: true,\n      data: {\n        metrics: status.metrics,\n        analysis,\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to get memory metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\memory-management.ts",
        "start": 143,
        "end": 160,
        "startLoc": {
          "line": 143,
          "column": 27,
          "position": 1493
        },
        "endLoc": {
          "line": 160,
          "column": 31,
          "position": 1590
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 135,
        "end": 152,
        "startLoc": {
          "line": 135,
          "column": 32,
          "position": 1444
        },
        "endLoc": {
          "line": 152,
          "column": 36,
          "position": 1541
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "router.post('/optimize', async (req, res) => {\n  const traceId = `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  const spanId = `span_${Math.random().toString(36).substr(2, 9)}`;\n\n  try {\n    const { type } = req.body;\n    \n    // Validar tipo de optimizacin\n    if (type && !OptimizationTypeSchema.safeParse(type).success) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid optimization type',\n        validTypes: ['gc'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\memory-management.ts",
        "start": 178,
        "end": 190,
        "startLoc": {
          "line": 178,
          "column": 1,
          "position": 1676
        },
        "endLoc": {
          "line": 190,
          "column": 5,
          "position": 1847
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 170,
        "end": 182,
        "startLoc": {
          "line": 170,
          "column": 1,
          "position": 1627
        },
        "endLoc": {
          "line": 182,
          "column": 9,
          "position": 1798
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ", {\n      traceId,\n      spanId,\n      newConfig: newStatus.config\n    });\n\n    res.json({\n      success: true,\n      data: {\n        config: newStatus.config,\n        message: 'Configuration updated successfully',\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid configuration data',\n        details: error.errors,\n        traceId\n      });\n    }\n\n    structuredLogger.error('Failed to update memory config'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\memory-management.ts",
        "start": 264,
        "end": 290,
        "startLoc": {
          "line": 264,
          "column": 24,
          "position": 2387
        },
        "endLoc": {
          "line": 290,
          "column": 33,
          "position": 2556
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 255,
        "end": 281,
        "startLoc": {
          "line": 255,
          "column": 29,
          "position": 2366
        },
        "endLoc": {
          "line": 281,
          "column": 38,
          "position": 2535
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ", {\n      traceId,\n      spanId,\n      healthStatus,\n      healthChecks\n    });\n\n    res.status(isHealthy ? 200 : 503).json({\n      success: true,\n      data: {\n        status: healthStatus,\n        checks: healthChecks,\n        metrics: status.metrics,\n        isOptimizing: status.isOptimizing,\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Memory health check failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\memory-management.ts",
        "start": 472,
        "end": 492,
        "startLoc": {
          "line": 472,
          "column": 22,
          "position": 4414
        },
        "endLoc": {
          "line": 492,
          "column": 29,
          "position": 4547
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 394,
        "end": 414,
        "startLoc": {
          "line": 394,
          "column": 27,
          "position": 3667
        },
        "endLoc": {
          "line": 414,
          "column": 34,
          "position": 3800
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", {\n      traceId,\n      spanId,\n      recommendationsCount: recommendations.length\n    });\n\n    res.json({\n      success: true,\n      data: {\n        recommendations,\n        count: recommendations.length,\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to get memory recommendations'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\memory-management.ts",
        "start": 574,
        "end": 591,
        "startLoc": {
          "line": 574,
          "column": 35,
          "position": 5182
        },
        "endLoc": {
          "line": 591,
          "column": 39,
          "position": 5284
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 485,
        "end": 502,
        "startLoc": {
          "line": 485,
          "column": 40,
          "position": 4347
        },
        "endLoc": {
          "line": 502,
          "column": 44,
          "position": 4449
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 383,
        "end": 393,
        "startLoc": {
          "line": 383,
          "column": 12,
          "position": 3280
        },
        "endLoc": {
          "line": 393,
          "column": 19,
          "position": 3394
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 291,
        "startLoc": {
          "line": 281,
          "column": 7,
          "position": 2392
        },
        "endLoc": {
          "line": 291,
          "column": 25,
          "position": 2506
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n        updatedAt: new Date().toISOString()\n      })\n      .where(eq(invoices.id, id))\n      .returning();\n\n    if (!updatedInvoice) {\n      return res.status(404).json({ \n        error: 'Invoice not found',\n        message: `Invoice with ID ${id} not found or access denied`\n      });\n    }\n\n    structuredLogger.info('Invoice sent'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 400,
        "end": 413,
        "startLoc": {
          "line": 400,
          "column": 2,
          "position": 3458
        },
        "endLoc": {
          "line": 413,
          "column": 15,
          "position": 3557
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 335,
        "end": 348,
        "startLoc": {
          "line": 335,
          "column": 11,
          "position": 2937
        },
        "endLoc": {
          "line": 348,
          "column": 18,
          "position": 3036
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [deletedInvoice",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 441,
        "end": 454,
        "startLoc": {
          "line": 441,
          "column": 7,
          "position": 3746
        },
        "endLoc": {
          "line": 454,
          "column": 15,
          "position": 3884
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 396,
        "startLoc": {
          "line": 281,
          "column": 4,
          "position": 2390
        },
        "endLoc": {
          "line": 396,
          "column": 15,
          "position": 3416
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "]),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// Product Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\inventory-kardex.ts",
        "start": 111,
        "end": 123,
        "startLoc": {
          "line": 111,
          "column": 22,
          "position": 1623
        },
        "endLoc": {
          "line": 123,
          "column": 22,
          "position": 1714
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 85,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 2127
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating inventory report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\inventory-kardex.ts",
        "start": 424,
        "end": 438,
        "startLoc": {
          "line": 424,
          "column": 24,
          "position": 4361
        },
        "endLoc": {
          "line": 438,
          "column": 36,
          "position": 4459
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 376,
        "end": 390,
        "startLoc": {
          "line": 376,
          "column": 23,
          "position": 4296
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n    \n    logger.error('Failed to get interactions'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 37,
        "end": 47,
        "startLoc": {
          "line": 37,
          "column": 5,
          "position": 365
        },
        "endLoc": {
          "line": 47,
          "column": 29,
          "position": 446
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n    \n    logger.error('Failed to create interaction'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 121,
        "end": 131,
        "startLoc": {
          "line": 121,
          "column": 5,
          "position": 1057
        },
        "endLoc": {
          "line": 131,
          "column": 31,
          "position": 1138
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ".json({\n      success: true,\n      data: interaction\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n    \n    logger.error('Failed to update interaction'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 169,
        "end": 182,
        "startLoc": {
          "line": 169,
          "column": 4,
          "position": 1467
        },
        "endLoc": {
          "line": 182,
          "column": 31,
          "position": 1567
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 118,
        "end": 146,
        "startLoc": {
          "line": 118,
          "column": 2,
          "position": 1038
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "]),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// Interaction Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions-sas-av.ts",
        "start": 158,
        "end": 170,
        "startLoc": {
          "line": 158,
          "column": 24,
          "position": 2495
        },
        "endLoc": {
          "line": 170,
          "column": 26,
          "position": 2586
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 85,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 2127
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(filters.organizationId, filters);\n    \n    res.json({\n      success: true,\n      data: {\n        insights,\n        total: insights.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting voice insights'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions-sas-av.ts",
        "start": 313,
        "end": 325,
        "startLoc": {
          "line": 313,
          "column": 17,
          "position": 3839
        },
        "endLoc": {
          "line": 325,
          "column": 31,
          "position": 3926
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\interactions-sas-av.ts",
        "start": 288,
        "end": 300,
        "startLoc": {
          "line": 288,
          "column": 21,
          "position": 3638
        },
        "endLoc": {
          "line": 300,
          "column": 35,
          "position": 3725
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating interaction report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\interactions-sas-av.ts",
        "start": 338,
        "end": 352,
        "startLoc": {
          "line": 338,
          "column": 26,
          "position": 4040
        },
        "endLoc": {
          "line": 352,
          "column": 38,
          "position": 4138
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 376,
        "end": 390,
        "startLoc": {
          "line": 376,
          "column": 23,
          "position": 4296
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ");\n\n    if (!task) {\n      res.status(404).json({\n        success: false,\n        error: 'Task not found',\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    res.json({\n      success: true,\n      data: task,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 196,
        "end": 213,
        "startLoc": {
          "line": 196,
          "column": 14,
          "position": 2072
        },
        "endLoc": {
          "line": 213,
          "column": 3,
          "position": 2191
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 123,
        "end": 140,
        "startLoc": {
          "line": 123,
          "column": 7,
          "position": 1454
        },
        "endLoc": {
          "line": 140,
          "column": 17,
          "position": 1573
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "res.json({\n      success: true,\n      data: task,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to update HITL task'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 207,
        "end": 223,
        "startLoc": {
          "line": 207,
          "column": 5,
          "position": 2140
        },
        "endLoc": {
          "line": 223,
          "column": 29,
          "position": 2272
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 161,
        "end": 177,
        "startLoc": {
          "line": 161,
          "column": 5,
          "position": 1757
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to add HITL comment'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 256,
        "end": 270,
        "startLoc": {
          "line": 256,
          "column": 8,
          "position": 2552
        },
        "endLoc": {
          "line": 270,
          "column": 29,
          "position": 2666
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to add HITL attachment'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 303,
        "end": 317,
        "startLoc": {
          "line": 303,
          "column": 11,
          "position": 2946
        },
        "endLoc": {
          "line": 317,
          "column": 32,
          "position": 3060
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": ",\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    res.json({\n      success: true,\n      data: task,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to advance HITL workflow'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 342,
        "end": 364,
        "startLoc": {
          "line": 342,
          "column": 34,
          "position": 3299
        },
        "endLoc": {
          "line": 364,
          "column": 34,
          "position": 3461
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 201,
        "end": 177,
        "startLoc": {
          "line": 201,
          "column": 17,
          "position": 2110
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to create HITL batch'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 387,
        "end": 401,
        "startLoc": {
          "line": 387,
          "column": 6,
          "position": 3659
        },
        "endLoc": {
          "line": 401,
          "column": 30,
          "position": 3773
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "res.json({\n      success: true,\n      data: batch,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to add tasks to HITL batch'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 431,
        "end": 447,
        "startLoc": {
          "line": 431,
          "column": 5,
          "position": 4026
        },
        "endLoc": {
          "line": 447,
          "column": 36,
          "position": 4158
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 385,
        "end": 177,
        "startLoc": {
          "line": 385,
          "column": 5,
          "position": 3641
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "]),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// Agent Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-ownership-sla.ts",
        "start": 230,
        "end": 242,
        "startLoc": {
          "line": 230,
          "column": 18,
          "position": 3592
        },
        "endLoc": {
          "line": 242,
          "column": 20,
          "position": 3683
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 85,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 2127
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", filters);\n    \n    res.json({\n      success: true,\n      data: {\n        tasks,\n        total: tasks.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting HITL tasks'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-ownership-sla.ts",
        "start": 408,
        "end": 420,
        "startLoc": {
          "line": 408,
          "column": 15,
          "position": 5133
        },
        "endLoc": {
          "line": 420,
          "column": 27,
          "position": 5216
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 93,
        "end": 105,
        "startLoc": {
          "line": 93,
          "column": 7,
          "position": 1209
        },
        "endLoc": {
          "line": 105,
          "column": 27,
          "position": 1291
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ".generateReport(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating HITL report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\hitl-ownership-sla.ts",
        "start": 562,
        "end": 576,
        "startLoc": {
          "line": 562,
          "column": 24,
          "position": 6414
        },
        "endLoc": {
          "line": 576,
          "column": 31,
          "position": 6514
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 265,
        "end": 390,
        "startLoc": {
          "line": 265,
          "column": 18,
          "position": 2869
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get users'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 75,
        "end": 89,
        "startLoc": {
          "line": 75,
          "column": 2,
          "position": 784
        },
        "endLoc": {
          "line": 89,
          "column": 22,
          "position": 898
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get user'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 123,
        "end": 137,
        "startLoc": {
          "line": 123,
          "column": 5,
          "position": 1169
        },
        "endLoc": {
          "line": 137,
          "column": 21,
          "position": 1283
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "},\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get messages'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 168,
        "end": 182,
        "startLoc": {
          "line": 168,
          "column": 7,
          "position": 1522
        },
        "endLoc": {
          "line": 182,
          "column": 25,
          "position": 1637
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 75,
        "end": 177,
        "startLoc": {
          "line": 75,
          "column": 7,
          "position": 783
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".length\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get calendar events'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 211,
        "end": 226,
        "startLoc": {
          "line": 211,
          "column": 7,
          "position": 1858
        },
        "endLoc": {
          "line": 226,
          "column": 32,
          "position": 1977
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 74,
        "end": 177,
        "startLoc": {
          "line": 74,
          "column": 6,
          "position": 779
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".length\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get drive items'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 254,
        "end": 269,
        "startLoc": {
          "line": 254,
          "column": 6,
          "position": 2192
        },
        "endLoc": {
          "line": 269,
          "column": 28,
          "position": 2311
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 74,
        "end": 177,
        "startLoc": {
          "line": 74,
          "column": 6,
          "position": 779
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".length\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get teams'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 293,
        "end": 308,
        "startLoc": {
          "line": 293,
          "column": 6,
          "position": 2510
        },
        "endLoc": {
          "line": 308,
          "column": 22,
          "position": 2629
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 74,
        "end": 177,
        "startLoc": {
          "line": 74,
          "column": 6,
          "position": 779
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".length\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get team channels'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 338,
        "end": 353,
        "startLoc": {
          "line": 338,
          "column": 9,
          "position": 2852
        },
        "endLoc": {
          "line": 353,
          "column": 30,
          "position": 2971
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 74,
        "end": 177,
        "startLoc": {
          "line": 74,
          "column": 6,
          "position": 779
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to add message to outbox'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 376,
        "end": 390,
        "startLoc": {
          "line": 376,
          "column": 8,
          "position": 3169
        },
        "endLoc": {
          "line": 390,
          "column": 34,
          "position": 3283
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\hitl-v2.ts",
        "start": 163,
        "end": 177,
        "startLoc": {
          "line": 163,
          "column": 5,
          "position": 1775
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "},\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Invalid request data',\n        details: error.errors,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    structuredLogger.error('Failed to get outbox messages'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 419,
        "end": 433,
        "startLoc": {
          "line": 419,
          "column": 7,
          "position": 3509
        },
        "endLoc": {
          "line": 433,
          "column": 32,
          "position": 3624
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 75,
        "end": 177,
        "startLoc": {
          "line": 75,
          "column": 7,
          "position": 783
        },
        "endLoc": {
          "line": 177,
          "column": 29,
          "position": 1889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    if (error instanceof Error && error.message.includes('not found')) {\n      res.status(404).json({\n        success: false,\n        error: 'Message not found',\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    if (error instanceof Error && error.message.includes('cannot be cancelled'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 501,
        "end": 514,
        "startLoc": {
          "line": 501,
          "column": 27,
          "position": 4217
        },
        "endLoc": {
          "line": 514,
          "column": 22,
          "position": 4344
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\graph-wrappers.ts",
        "start": 455,
        "end": 468,
        "startLoc": {
          "line": 455,
          "column": 25,
          "position": 3815
        },
        "endLoc": {
          "line": 468,
          "column": 24,
          "position": 3942
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(filters.organizationId, filters);\n    \n    res.json({\n      success: true,\n      data: {\n        transactions,\n        total: transactions.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting VAT transactions'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\fiscalidad-regional.ts",
        "start": 246,
        "end": 258,
        "startLoc": {
          "line": 246,
          "column": 19,
          "position": 2908
        },
        "endLoc": {
          "line": 258,
          "column": 33,
          "position": 2995
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 103,
        "end": 115,
        "startLoc": {
          "line": 103,
          "column": 16,
          "position": 1481
        },
        "endLoc": {
          "line": 115,
          "column": 41,
          "position": 1568
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!region) {\n      return res.status(404).json({\n        success: false,\n        error: 'Tax region not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: region,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to get tax region'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\fiscalidad-regional-ue.ts",
        "start": 150,
        "end": 165,
        "startLoc": {
          "line": 150,
          "column": 2,
          "position": 1338
        },
        "endLoc": {
          "line": 165,
          "column": 27,
          "position": 1446
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\fiscalidad-regional.ts",
        "start": 198,
        "end": 213,
        "startLoc": {
          "line": 198,
          "column": 3,
          "position": 2506
        },
        "endLoc": {
          "line": 213,
          "column": 27,
          "position": 2614
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", error as Error, {\n      org_id: req.params.orgId,\n      requested_by: req.ip\n    });\n    \n    res.status(400).json({\n      success: false,\n      error: 'INVALID_REQUEST',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * GET /v1/finops-admin/kill-switch/:orgId/status\n * Check kill switch status for an organization\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\finops-admin.ts",
        "start": 154,
        "end": 170,
        "startLoc": {
          "line": 154,
          "column": 30,
          "position": 1200
        },
        "endLoc": {
          "line": 170,
          "column": 4,
          "position": 1296
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\finops-admin.ts",
        "start": 73,
        "end": 89,
        "startLoc": {
          "line": 73,
          "column": 30,
          "position": 575
        },
        "endLoc": {
          "line": 89,
          "column": 4,
          "position": 671
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", error as Error, {\n      org_id: req.params.orgId,\n      requested_by: req.ip\n    });\n    \n    res.status(400).json({\n      success: false,\n      error: 'INVALID_REQUEST',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * POST /v1/finops-admin/test-budget-exceeded\n * Test endpoint to trigger budget exceeded scenario\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\finops-admin.ts",
        "start": 190,
        "end": 206,
        "startLoc": {
          "line": 190,
          "column": 36,
          "position": 1489
        },
        "endLoc": {
          "line": 206,
          "column": 4,
          "position": 1585
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\finops-admin.ts",
        "start": 73,
        "end": 89,
        "startLoc": {
          "line": 73,
          "column": 30,
          "position": 575
        },
        "endLoc": {
          "line": 89,
          "column": 4,
          "position": 671
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", error as Error, {\n      traceId,\n      spanId\n    });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: (error as Error).message,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  }\n})",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 171,
        "end": 183,
        "startLoc": {
          "line": 171,
          "column": 27,
          "position": 1503
        },
        "endLoc": {
          "line": 183,
          "column": 2,
          "position": 1594
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 136,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 136,
          "column": 2,
          "position": 1228
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n        traceId,\n        spanId,\n        errors: error.errors\n      });\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    } else {\n      structuredLogger.error('Payment processing failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 227,
        "end": 240,
        "startLoc": {
          "line": 227,
          "column": 28,
          "position": 1914
        },
        "endLoc": {
          "line": 240,
          "column": 28,
          "position": 2009
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 35,
          "position": 1039
        },
        "endLoc": {
          "line": 123,
          "column": 24,
          "position": 1134
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ", error as Error, {\n        traceId,\n        spanId\n      });\n      res.status(500).json({\n        success: false,\n        error: 'Internal server error',\n        message: (error as Error).message,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    }\n  }\n});\n\n/**\n * POST /v1/integrations/payment/refund\n * Refund payment\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 240,
        "end": 258,
        "startLoc": {
          "line": 240,
          "column": 28,
          "position": 2010
        },
        "endLoc": {
          "line": 258,
          "column": 4,
          "position": 2108
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 141,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 141,
          "column": 4,
          "position": 1233
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n\n    res.json({\n      success: true,\n      data: result,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      structuredLogger.warn('Refund validation failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 279,
        "end": 289,
        "startLoc": {
          "line": 279,
          "column": 5,
          "position": 2309
        },
        "endLoc": {
          "line": 289,
          "column": 27,
          "position": 2389
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 217,
        "end": 227,
        "startLoc": {
          "line": 217,
          "column": 5,
          "position": 1833
        },
        "endLoc": {
          "line": 227,
          "column": 28,
          "position": 1913
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n        traceId,\n        spanId,\n        errors: error.errors\n      });\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    } else {\n      structuredLogger.error('Payment refund failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 289,
        "end": 302,
        "startLoc": {
          "line": 289,
          "column": 27,
          "position": 2390
        },
        "endLoc": {
          "line": 302,
          "column": 24,
          "position": 2485
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 35,
          "position": 1039
        },
        "endLoc": {
          "line": 123,
          "column": 24,
          "position": 1134
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", error as Error, {\n        traceId,\n        spanId\n      });\n      res.status(500).json({\n        success: false,\n        error: 'Internal server error',\n        message: (error as Error).message,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    }\n  }\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 302,
        "end": 317,
        "startLoc": {
          "line": 302,
          "column": 24,
          "position": 2486
        },
        "endLoc": {
          "line": 317,
          "column": 80,
          "position": 2584
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 141,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 141,
          "column": 4,
          "position": 1233
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", error as Error, {\n      traceId,\n      spanId\n    });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: (error as Error).message,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  }\n});\n\n/**\n * POST /v1/integrations/market-data/batch\n * Get market data for multiple symbols\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 355,
        "end": 372,
        "startLoc": {
          "line": 355,
          "column": 29,
          "position": 2867
        },
        "endLoc": {
          "line": 372,
          "column": 4,
          "position": 2962
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 185,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 185,
          "column": 80,
          "position": 1598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n        traceId,\n        spanId,\n        errors: error.errors\n      });\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    } else {\n      structuredLogger.error('Market data batch request failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 401,
        "end": 414,
        "startLoc": {
          "line": 401,
          "column": 38,
          "position": 3230
        },
        "endLoc": {
          "line": 414,
          "column": 35,
          "position": 3325
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 35,
          "position": 1039
        },
        "endLoc": {
          "line": 123,
          "column": 24,
          "position": 1134
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", error as Error, {\n        traceId,\n        spanId\n      });\n      res.status(500).json({\n        success: false,\n        error: 'Internal server error',\n        message: (error as Error).message,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    }\n  }\n});\n\n// ============================================================================\n// WEATHER ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 414,
        "end": 430,
        "startLoc": {
          "line": 414,
          "column": 35,
          "position": 3326
        },
        "endLoc": {
          "line": 430,
          "column": 18,
          "position": 3426
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 318,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 318,
          "column": 22,
          "position": 2586
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", error as Error, {\n      traceId,\n      spanId\n    });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: (error as Error).message,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  }\n});\n\n/**\n * GET /v1/integrations/weather/forecast/:providerId/:location\n * Get weather forecast for location\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 467,
        "end": 484,
        "startLoc": {
          "line": 467,
          "column": 30,
          "position": 3707
        },
        "endLoc": {
          "line": 484,
          "column": 4,
          "position": 3802
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 185,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 185,
          "column": 80,
          "position": 1598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", {\n        traceId,\n        spanId,\n        errors: error.errors\n      });\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    } else {\n      structuredLogger.error('Weather forecast request failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 518,
        "end": 531,
        "startLoc": {
          "line": 518,
          "column": 37,
          "position": 4129
        },
        "endLoc": {
          "line": 531,
          "column": 34,
          "position": 4224
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 110,
        "end": 123,
        "startLoc": {
          "line": 110,
          "column": 35,
          "position": 1039
        },
        "endLoc": {
          "line": 123,
          "column": 24,
          "position": 1134
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", error as Error, {\n        traceId,\n        spanId\n      });\n      res.status(500).json({\n        success: false,\n        error: 'Internal server error',\n        message: (error as Error).message,\n        timestamp: new Date().toISOString(),\n        traceId\n      });\n    }\n  }\n});\n\n// ============================================================================\n// HEALTH AND STATUS ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 531,
        "end": 547,
        "startLoc": {
          "line": 531,
          "column": 34,
          "position": 4225
        },
        "endLoc": {
          "line": 547,
          "column": 28,
          "position": 4325
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 318,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 318,
          "column": 22,
          "position": 2586
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", error as Error, {\n      traceId,\n      spanId\n    });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: (error as Error).message,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  }\n});\n\n/**\n * GET /v1/integrations/health/:providerId\n * Get health status of specific provider\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 582,
        "end": 599,
        "startLoc": {
          "line": 582,
          "column": 36,
          "position": 4635
        },
        "endLoc": {
          "line": 599,
          "column": 4,
          "position": 4730
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 185,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 185,
          "column": 80,
          "position": 1598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", error as Error, {\n      traceId,\n      spanId\n    });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: (error as Error).message,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 630,
        "end": 644,
        "startLoc": {
          "line": 630,
          "column": 33,
          "position": 5017
        },
        "endLoc": {
          "line": 644,
          "column": 7,
          "position": 5112
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\external-integrations.ts",
        "start": 123,
        "end": 185,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 1135
        },
        "endLoc": {
          "line": 185,
          "column": 80,
          "position": 1598
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": "),\n  abTest: z.object({\n    enabled: z.boolean().default(false),\n    variants: z.array(z.object({\n      id: z.string(),\n      subject: z.string(),\n      htmlContent: z.string(),\n      percentage: z.number().min(0).max(100)\n    })).default([]),\n    winner: z.string().optional(),\n    testDuration: z.number().optional()\n  }).optional(),\n  automation: z.object({\n    enabled: z.boolean().default(false),\n    triggers: z.array(z.object({\n      type: z.string(),\n      conditions: z.record(z.any()),\n      delay: z.number().optional()\n    })).default([]),\n    actions: z.array(z.object({\n      type: z.string(),\n      config: z.record(z.any())\n    })).default([])\n  }).optional()\n});\n\nconst CreateSubscriberSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 103,
        "end": 129,
        "startLoc": {
          "line": 103,
          "column": 2,
          "position": 1115
        },
        "endLoc": {
          "line": 129,
          "column": 23,
          "position": 1420
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 62,
        "end": 88,
        "startLoc": {
          "line": 62,
          "column": 5,
          "position": 461
        },
        "endLoc": {
          "line": 88,
          "column": 21,
          "position": 766
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "]),\n    direction: z.enum(['asc', 'desc'])\n  }).optional(),\n  pagination: z.object({\n    page: z.number().min(1).default(1),\n    limit: z.number().min(1).max(100).default(20)\n  }).optional()\n});\n\n// ============================================================================\n// CAMPAIGN ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 179,
        "end": 189,
        "startLoc": {
          "line": 179,
          "column": 12,
          "position": 2260
        },
        "endLoc": {
          "line": 189,
          "column": 19,
          "position": 2360
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 122,
        "end": 138,
        "startLoc": {
          "line": 122,
          "column": 7,
          "position": 1384
        },
        "endLoc": {
          "line": 138,
          "column": 18,
          "position": 1728
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create email campaign'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 225,
        "end": 240,
        "startLoc": {
          "line": 225,
          "column": 42,
          "position": 2627
        },
        "endLoc": {
          "line": 240,
          "column": 34,
          "position": 2752
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ".parse(req.query);\n\n    // Convert date strings to Date objects\n    if (searchParams.filters?.dateRange) {\n      if (searchParams.filters.dateRange.from) {\n        searchParams.filters.dateRange.from = new Date(searchParams.filters.dateRange.from);\n      }\n      if (searchParams.filters.dateRange.to) {\n        searchParams.filters.dateRange.to = new Date(searchParams.filters.dateRange.to);\n      }\n    }\n\n    const result = await emailMarketingService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 249,
        "end": 261,
        "startLoc": {
          "line": 249,
          "column": 22,
          "position": 2824
        },
        "endLoc": {
          "line": 261,
          "column": 22,
          "position": 2950
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 388,
        "end": 400,
        "startLoc": {
          "line": 388,
          "column": 18,
          "position": 3650
        },
        "endLoc": {
          "line": 400,
          "column": 29,
          "position": 3776
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to list email campaigns'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 269,
        "end": 284,
        "startLoc": {
          "line": 269,
          "column": 41,
          "position": 3011
        },
        "endLoc": {
          "line": 284,
          "column": 33,
          "position": 3136
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ": req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update email campaign'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 365,
        "end": 379,
        "startLoc": {
          "line": 365,
          "column": 11,
          "position": 3754
        },
        "endLoc": {
          "line": 379,
          "column": 34,
          "position": 3863
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 187,
        "startLoc": {
          "line": 282,
          "column": 10,
          "position": 2855
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create email subscriber'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 496,
        "end": 511,
        "startLoc": {
          "line": 496,
          "column": 44,
          "position": 4721
        },
        "endLoc": {
          "line": 511,
          "column": 36,
          "position": 4846
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ": req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update email subscriber'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\email-marketing.ts",
        "start": 600,
        "end": 614,
        "startLoc": {
          "line": 600,
          "column": 13,
          "position": 5559
        },
        "endLoc": {
          "line": 614,
          "column": 36,
          "position": 5668
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 187,
        "startLoc": {
          "line": 282,
          "column": 10,
          "position": 2855
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ".getStats();\n    \n    res.json({\n      success: true,\n      data: stats,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to get dunning stats', {\n      error: error instanceof Error ? error.message : String(error),\n      requestId: req.headers['x-request-id'] as string || ''\n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to get dunning stats',\n      message: error instanceof Error ? error.message : String(error)\n    });\n  }\n});\n\n/**\n * POST /dunning-3-toques/process\n * Inicia el procesamiento de campaas de dunning\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\dunning-3-toques.ts",
        "start": 51,
        "end": 75,
        "startLoc": {
          "line": 51,
          "column": 22,
          "position": 516
        },
        "endLoc": {
          "line": 75,
          "column": 4,
          "position": 697
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dunning-solid.ts",
        "start": 106,
        "end": 130,
        "startLoc": {
          "line": 106,
          "column": 20,
          "position": 1378
        },
        "endLoc": {
          "line": 130,
          "column": 4,
          "position": 1559
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": ".updateConfig(validatedData);\n    \n    structuredLogger.info('Dunning configuration updated', {\n      config: validatedData,\n      requestId: req.headers['x-request-id'] as string || ''\n    });\n    \n    res.json({\n      success: true,\n      message: 'Dunning configuration updated successfully',\n      data: validatedData,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to update dunning config', {\n      error: error instanceof Error ? error.message : String(error),\n      requestId: req.headers['x-request-id'] as string || ''\n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to update dunning configuration',\n      message: error instanceof Error ? error.message : String(error)\n    });\n  }\n});\n\n/**\n * GET /dunning-3-toques/config\n * Obtiene la configuracin actual del servicio de dunning\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\dunning-3-toques.ts",
        "start": 312,
        "end": 342,
        "startLoc": {
          "line": 312,
          "column": 22,
          "position": 2592
        },
        "endLoc": {
          "line": 342,
          "column": 4,
          "position": 2824
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dunning-solid.ts",
        "start": 481,
        "end": 511,
        "startLoc": {
          "line": 481,
          "column": 20,
          "position": 4472
        },
        "endLoc": {
          "line": 511,
          "column": 4,
          "position": 4704
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ",\n      notificationEnabled: true\n    };\n    \n    res.json({\n      success: true,\n      data: config,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to get dunning config', {\n      error: error instanceof Error ? error.message : String(error),\n      requestId: req.headers['x-request-id'] as string || ''\n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to get dunning configuration',\n      message: error instanceof Error ? error.message : String(error)\n    });\n  }\n});\n\n/**\n * POST /dunning-3-toques/campaigns/:campaignId/cancel\n * Cancela una campaa de dunning\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\dunning-3-toques.ts",
        "start": 358,
        "end": 384,
        "startLoc": {
          "line": 358,
          "column": 3,
          "position": 2948
        },
        "endLoc": {
          "line": 384,
          "column": 4,
          "position": 3135
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dunning-solid.ts",
        "start": 526,
        "end": 552,
        "startLoc": {
          "line": 526,
          "column": 2,
          "position": 4827
        },
        "endLoc": {
          "line": 552,
          "column": 4,
          "position": 5014
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "),\n  size: z.number().positive(),\n  mimeType: z.string(),\n  checksum: z.string(),\n  isPublic: z.boolean().default(false),\n  isEncrypted: z.boolean().default(false),\n  retentionPolicy: z.object({\n    retentionDays: z.number().positive().optional(),\n    autoDelete: z.boolean().default(false),\n    legalHold: z.boolean().default(false)\n  }).optional()\n}",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 59,
        "end": 70,
        "startLoc": {
          "line": 59,
          "column": 8,
          "position": 465
        },
        "endLoc": {
          "line": 70,
          "column": 2,
          "position": 605
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 87,
        "end": 97,
        "startLoc": {
          "line": 87,
          "column": 2,
          "position": 925
        },
        "endLoc": {
          "line": 97,
          "column": 2,
          "position": 1064
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "().optional()\n    }).optional(),\n    sizeRange: z.object({\n      min: z.number().optional(),\n      max: z.number().optional()\n    }).optional()\n  }).optional(),\n  sort: z.object({\n    field: z.enum(['name', 'createdAt', 'updatedAt', 'size', 'type']),\n    direction: z.enum(['asc', 'desc'])\n  }).optional(),\n  pagination: z.object({\n    page: z.number().min(1).default(1),\n    limit: z.number().min(1).max(100).default(20)\n  }).optional()\n});\n\n// ============================================================================\n// DOCUMENT ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 117,
        "end": 135,
        "startLoc": {
          "line": 117,
          "column": 9,
          "position": 1308
        },
        "endLoc": {
          "line": 135,
          "column": 19,
          "position": 1512
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\document-management.service.ts",
        "start": 114,
        "end": 138,
        "startLoc": {
          "line": 114,
          "column": 5,
          "position": 1280
        },
        "endLoc": {
          "line": 138,
          "column": 18,
          "position": 1728
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create document'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 165,
        "end": 180,
        "startLoc": {
          "line": 165,
          "column": 36,
          "position": 1734
        },
        "endLoc": {
          "line": 180,
          "column": 28,
          "position": 1859
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to list documents'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 199,
        "end": 214,
        "startLoc": {
          "line": 199,
          "column": 35,
          "position": 2011
        },
        "endLoc": {
          "line": 214,
          "column": 27,
          "position": 2136
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ": req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update document'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 289,
        "end": 303,
        "startLoc": {
          "line": 289,
          "column": 11,
          "position": 2709
        },
        "endLoc": {
          "line": 303,
          "column": 28,
          "position": 2818
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 187,
        "startLoc": {
          "line": 282,
          "column": 10,
          "position": 2855
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      documentId: req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create document version'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 382,
        "end": 398,
        "startLoc": {
          "line": 382,
          "column": 44,
          "position": 3381
        },
        "endLoc": {
          "line": 398,
          "column": 36,
          "position": 3517
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 287,
        "end": 187,
        "startLoc": {
          "line": 287,
          "column": 36,
          "position": 2682
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", async (req: AuthenticatedRequest, res) => {\n  try {\n    const { id } = req.params;\n    const organizationId = req.user?.organizationId || 'demo-org';\n\n    const document = await documentManagementService.getDocument(id, organizationId);\n\n    if (!document) {\n      return res.status(404).json({\n        success: false,\n        error: 'Document not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: document.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 404,
        "end": 420,
        "startLoc": {
          "line": 404,
          "column": 16,
          "position": 3539
        },
        "endLoc": {
          "line": 420,
          "column": 2,
          "position": 3684
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 220,
        "end": 236,
        "startLoc": {
          "line": 220,
          "column": 7,
          "position": 2158
        },
        "endLoc": {
          "line": 236,
          "column": 2,
          "position": 2303
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      documentId: req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to grant document permission'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 477,
        "end": 493,
        "startLoc": {
          "line": 477,
          "column": 46,
          "position": 4091
        },
        "endLoc": {
          "line": 493,
          "column": 38,
          "position": 4227
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 287,
        "end": 187,
        "startLoc": {
          "line": 287,
          "column": 36,
          "position": 2682
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", async (req: AuthenticatedRequest, res) => {\n  try {\n    const organizationId = req.user?.organizationId || 'demo-org';\n    const searchParams = SearchDocumentsSchema.parse(req.query);\n\n    const result = await documentManagementService.searchDocuments(organizationId, searchParams);\n\n    res.json({\n      success: true,\n      data: result,\n      message: 'Document search completed successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 503,
        "end": 513,
        "startLoc": {
          "line": 503,
          "column": 10,
          "position": 4256
        },
        "endLoc": {
          "line": 513,
          "column": 41,
          "position": 4362
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 186,
        "end": 196,
        "startLoc": {
          "line": 186,
          "column": 4,
          "position": 1881
        },
        "endLoc": {
          "line": 196,
          "column": 35,
          "position": 1987
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to search documents'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\document-management.ts",
        "start": 516,
        "end": 531,
        "startLoc": {
          "line": 516,
          "column": 37,
          "position": 4386
        },
        "endLoc": {
          "line": 531,
          "column": 29,
          "position": 4511
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "]),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// DLQ Message Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\dlg-grooming.ts",
        "start": 114,
        "end": 126,
        "startLoc": {
          "line": 114,
          "column": 9,
          "position": 1747
        },
        "endLoc": {
          "line": 126,
          "column": 26,
          "position": 1838
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 135,
        "end": 85,
        "startLoc": {
          "line": 135,
          "column": 17,
          "position": 2127
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ".generateReport(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating DLQ report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\dlg-grooming.ts",
        "start": 327,
        "end": 341,
        "startLoc": {
          "line": 327,
          "column": 19,
          "position": 3644
        },
        "endLoc": {
          "line": 341,
          "column": 30,
          "position": 3744
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\sepa-robust.ts",
        "start": 265,
        "end": 390,
        "startLoc": {
          "line": 265,
          "column": 18,
          "position": 2869
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "));\n    }\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    // Apply pagination\n    const offset = (pagination.page - 1) * pagination.limit;\n    query = query.limit(pagination.limit).offset(offset);\n\n    const result = await query;\n\n    // Get total count for pagination\n    const totalQuery = db.select({ count: count() }).from(deals",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 68,
        "end": 82,
        "startLoc": {
          "line": 68,
          "column": 10,
          "position": 606
        },
        "endLoc": {
          "line": 82,
          "column": 6,
          "position": 739
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 75,
        "end": 90,
        "startLoc": {
          "line": 75,
          "column": 9,
          "position": 665
        },
        "endLoc": {
          "line": 90,
          "column": 9,
          "position": 800
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "router.get('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [deal",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 120,
        "end": 132,
        "startLoc": {
          "line": 120,
          "column": 1,
          "position": 1012
        },
        "endLoc": {
          "line": 132,
          "column": 5,
          "position": 1134
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 142,
        "end": 154,
        "startLoc": {
          "line": 142,
          "column": 1,
          "position": 1186
        },
        "endLoc": {
          "line": 154,
          "column": 8,
          "position": 1308
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "router.post('/', async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const dealData",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 166,
        "end": 176,
        "startLoc": {
          "line": 166,
          "column": 1,
          "position": 1387
        },
        "endLoc": {
          "line": 176,
          "column": 9,
          "position": 1495
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 188,
        "end": 198,
        "startLoc": {
          "line": 188,
          "column": 1,
          "position": 1561
        },
        "endLoc": {
          "line": 198,
          "column": 12,
          "position": 1669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.put('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const updateData = UpdateDealSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 229,
        "end": 240,
        "startLoc": {
          "line": 229,
          "column": 1,
          "position": 1876
        },
        "endLoc": {
          "line": 240,
          "column": 17,
          "position": 2004
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 292,
        "startLoc": {
          "line": 281,
          "column": 1,
          "position": 2387
        },
        "endLoc": {
          "line": 292,
          "column": 20,
          "position": 2515
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const {",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 296,
        "end": 307,
        "startLoc": {
          "line": 296,
          "column": 18,
          "position": 2406
        },
        "endLoc": {
          "line": 307,
          "column": 2,
          "position": 2525
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 198,
        "startLoc": {
          "line": 281,
          "column": 7,
          "position": 2392
        },
        "endLoc": {
          "line": 198,
          "column": 12,
          "position": 1669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ")\n      .where(eq(deals.id, id))\n      .returning();\n\n    if (!updatedDeal) {\n      return res.status(404).json({ \n        error: 'Deal not found',\n        message: `Deal with ID ${id} not found or access denied`\n      });\n    }\n\n    structuredLogger.info('Deal stage moved'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 332,
        "end": 343,
        "startLoc": {
          "line": 332,
          "column": 11,
          "position": 2744
        },
        "endLoc": {
          "line": 343,
          "column": 19,
          "position": 2825
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 250,
        "end": 261,
        "startLoc": {
          "line": 250,
          "column": 2,
          "position": 2081
        },
        "endLoc": {
          "line": 261,
          "column": 15,
          "position": 2162
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "});\n\n    res.json({\n      success: true,\n      data: updatedDeal\n    });\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    structuredLogger.error('Failed to move deal stage'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 350,
        "end": 365,
        "startLoc": {
          "line": 350,
          "column": 5,
          "position": 2865
        },
        "endLoc": {
          "line": 365,
          "column": 28,
          "position": 2965
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 266,
        "end": 281,
        "startLoc": {
          "line": 266,
          "column": 5,
          "position": 2189
        },
        "endLoc": {
          "line": 281,
          "column": 24,
          "position": 2289
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "router.delete('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [deletedDeal",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 380,
        "end": 393,
        "startLoc": {
          "line": 380,
          "column": 1,
          "position": 3077
        },
        "endLoc": {
          "line": 393,
          "column": 12,
          "position": 3218
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 441,
        "end": 396,
        "startLoc": {
          "line": 441,
          "column": 1,
          "position": 3743
        },
        "endLoc": {
          "line": 396,
          "column": 15,
          "position": 3416
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ";\n\n    res.set({\n      'X-Est-Cost-EUR': '0.0020',\n      'X-Budget-Pct': '0.2',\n      'X-Latency-ms': '40',\n      'X-Route': 'local',\n      'X-Correlation-Id': `req_${Date.now()}`\n    });\n\n    res.json({\n      success: true,\n      data: summary\n    });\n\n  } catch (error) {\n    structuredLogger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 475,
        "end": 491,
        "startLoc": {
          "line": 475,
          "column": 2,
          "position": 4034
        },
        "endLoc": {
          "line": 491,
          "column": 17,
          "position": 4130
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 243,
        "end": 258,
        "startLoc": {
          "line": 243,
          "column": 2,
          "position": 2083
        },
        "endLoc": {
          "line": 258,
          "column": 7,
          "position": 2180
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    // Get analytics data",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 503,
        "end": 514,
        "startLoc": {
          "line": 503,
          "column": 13,
          "position": 4219
        },
        "endLoc": {
          "line": 514,
          "column": 22,
          "position": 4317
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 433,
        "end": 444,
        "startLoc": {
          "line": 433,
          "column": 11,
          "position": 3524
        },
        "endLoc": {
          "line": 444,
          "column": 20,
          "position": 3622
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ";\n\n    res.set({\n      'X-Est-Cost-EUR': '0.0030',\n      'X-Budget-Pct': '0.3',\n      'X-Latency-ms': '60',\n      'X-Route': 'local',\n      'X-Correlation-Id': `req_${Date.now()}`\n    });\n\n    res.json({\n      success: true,\n      data: analytics\n    });\n\n  } catch (error) {\n    structuredLogger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 559,
        "end": 575,
        "startLoc": {
          "line": 559,
          "column": 2,
          "position": 4951
        },
        "endLoc": {
          "line": 575,
          "column": 17,
          "position": 5047
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\interactions.ts",
        "start": 275,
        "end": 290,
        "startLoc": {
          "line": 275,
          "column": 2,
          "position": 2330
        },
        "endLoc": {
          "line": 290,
          "column": 7,
          "position": 2427
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const { organizationId, limit = 100, offset = 0 } = req.query;\n    \n    if (!organizationId) {\n      return res.status(400).json({\n        success: false,\n        error: 'organizationId is required'\n      });\n    }\n\n    // En un sistema real, esto vendra de la base de datos\n    const recommendations",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals-nba.ts",
        "start": 208,
        "end": 220,
        "startLoc": {
          "line": 208,
          "column": 19,
          "position": 1716
        },
        "endLoc": {
          "line": 220,
          "column": 16,
          "position": 1820
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dunning-3-toques.ts",
        "start": 264,
        "end": 276,
        "startLoc": {
          "line": 264,
          "column": 20,
          "position": 2208
        },
        "endLoc": {
          "line": 276,
          "column": 16,
          "position": 2312
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "error: error instanceof Error ? error.message : String(error),\n      requestId: req.headers['x-request-id'] as string || ''\n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to get NBA recommendations',\n      message: error instanceof Error ? error.message : String(error)\n    });\n  }\n});\n\n/**\n * GET /deals-nba/explanation/:recommendationId\n * Obtiene la explicacin detallada de una recomendacin\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\deals-nba.ts",
        "start": 236,
        "end": 251,
        "startLoc": {
          "line": 236,
          "column": 7,
          "position": 1938
        },
        "endLoc": {
          "line": 251,
          "column": 4,
          "position": 2049
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals-nba.ts",
        "start": 143,
        "end": 158,
        "startLoc": {
          "line": 143,
          "column": 7,
          "position": 1210
        },
        "endLoc": {
          "line": 158,
          "column": 4,
          "position": 1321
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "senderId: z.string().uuid(),\n  senderType: z.enum(['customer', 'agent', 'bot']),\n  message: z.string().min(1),\n  messageType: z.enum(['text', 'image', 'file', 'system']).default('text'),\n  attachments: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    url: z.string().url(),\n    size: z.number(),\n    type: z.string()\n  })).default([])\n});\n\nconst CreateArticleSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 60,
        "end": 73,
        "startLoc": {
          "line": 60,
          "column": 3,
          "position": 580
        },
        "endLoc": {
          "line": 73,
          "column": 20,
          "position": 748
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\customer-support.service.ts",
        "start": 61,
        "end": 49,
        "startLoc": {
          "line": 61,
          "column": 3,
          "position": 593
        },
        "endLoc": {
          "line": 49,
          "column": 19,
          "position": 379
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "),\n  skills: z.array(z.string()).default([]),\n  languages: z.array(z.string()).default(['en']),\n  workingHours: z.object({\n    timezone: z.string().default('UTC'),\n    schedule: z.record(z.object({\n      start: z.string(),\n      end: z.string(),\n      isWorking: z.boolean().default(true)\n    }))\n  }).optional()\n}",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 87,
        "end": 98,
        "startLoc": {
          "line": 87,
          "column": 3,
          "position": 965
        },
        "endLoc": {
          "line": 98,
          "column": 2,
          "position": 1103
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\customer-support.service.ts",
        "start": 101,
        "end": 111,
        "startLoc": {
          "line": 101,
          "column": 2,
          "position": 1160
        },
        "endLoc": {
          "line": 111,
          "column": 2,
          "position": 1297
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "});\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create support ticket'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 130,
        "end": 142,
        "startLoc": {
          "line": 130,
          "column": 5,
          "position": 1323
        },
        "endLoc": {
          "line": 142,
          "column": 34,
          "position": 1411
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 175,
        "end": 187,
        "startLoc": {
          "line": 175,
          "column": 5,
          "position": 2009
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "});\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update support ticket'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 238,
        "end": 250,
        "startLoc": {
          "line": 238,
          "column": 5,
          "position": 2231
        },
        "endLoc": {
          "line": 250,
          "column": 34,
          "position": 2319
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 175,
        "end": 187,
        "startLoc": {
          "line": 175,
          "column": 5,
          "position": 2009
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      ticketId: req.params.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to send message'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 325,
        "end": 340,
        "startLoc": {
          "line": 325,
          "column": 33,
          "position": 2833
        },
        "endLoc": {
          "line": 340,
          "column": 25,
          "position": 2957
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 235,
        "end": 187,
        "startLoc": {
          "line": 235,
          "column": 42,
          "position": 2195
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error'\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create knowledge base article'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 401,
        "end": 415,
        "startLoc": {
          "line": 401,
          "column": 50,
          "position": 3365
        },
        "endLoc": {
          "line": 415,
          "column": 42,
          "position": 3478
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 128,
        "end": 187,
        "startLoc": {
          "line": 128,
          "column": 42,
          "position": 1298
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error'\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create support agent'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 480,
        "end": 494,
        "startLoc": {
          "line": 480,
          "column": 41,
          "position": 3915
        },
        "endLoc": {
          "line": 494,
          "column": 33,
          "position": 4028
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 128,
        "end": 187,
        "startLoc": {
          "line": 128,
          "column": 42,
          "position": 1298
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 32,
      "fragment": "z.object({\n    title: z.string().min(1).max(255),\n    description: z.string().optional(),\n    excerpt: z.string().optional(),\n    tags: z.array(z.string()).default([]),\n    categories: z.array(z.string()).default([]),\n    author: z.string().min(1),\n    language: z.string().default('es'),\n    keywords: z.array(z.string()).default([]),\n    customFields: z.record(z.any()).default({}),\n    seo: z.object({\n      metaTitle: z.string().optional(),\n      metaDescription: z.string().optional(),\n      metaKeywords: z.array(z.string()).default([]),\n      canonicalUrl: z.string().optional(),\n      ogTitle: z.string().optional(),\n      ogDescription: z.string().optional(),\n      ogImage: z.string().optional(),\n      twitterCard: z.string().optional(),\n      structuredData: z.record(z.any()).optional()\n    }).optional(),\n    analytics: z.object({\n      views: z.number().default(0),\n      uniqueViews: z.number().default(0),\n      shares: z.number().default(0),\n      comments: z.number().default(0),\n      likes: z.number().default(0),\n      engagement: z.number().default(0),\n      bounceRate: z.number().default(0),\n      timeOnPage: z.number().default(0)\n    }).optional()\n  }),",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 51,
        "end": 82,
        "startLoc": {
          "line": 51,
          "column": 2,
          "position": 298
        },
        "endLoc": {
          "line": 82,
          "column": 2,
          "position": 788
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 34,
        "end": 65,
        "startLoc": {
          "line": 34,
          "column": 2,
          "position": 179
        },
        "endLoc": {
          "line": 65,
          "column": 2,
          "position": 668
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "().optional(),\n  isPublic: z.boolean().default(false),\n  isFeatured: z.boolean().default(false),\n  isSticky: z.boolean().default(false),\n  allowComments: z.boolean().default(true),\n  allowSharing: z.boolean().default(true),\n  workflow: z.object({\n    currentStep: z.string(),\n    steps: z.array(z.object({\n      step: z.string(),\n      status: z.enum(['pending', 'in_progress', 'completed', 'rejected']),\n      assignedTo: z.string().uuid().optional(),\n      completedAt: z.string",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 91,
        "end": 103,
        "startLoc": {
          "line": 91,
          "column": 9,
          "position": 944
        },
        "endLoc": {
          "line": 103,
          "column": 7,
          "position": 1126
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 99,
        "end": 111,
        "startLoc": {
          "line": 99,
          "column": 5,
          "position": 1108
        },
        "endLoc": {
          "line": 111,
          "column": 5,
          "position": 1290
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "),\n  workflow: z.object({\n    currentStep: z.string(),\n    steps: z.array(z.object({\n      step: z.string(),\n      status: z.enum(['pending', 'in_progress', 'completed', 'rejected']),\n      assignedTo: z.string().uuid().optional(),\n      completedAt: z.string().datetime().optional(),\n      comments: z.string().optional()\n    })).default([]),\n    approvedBy: z.string().uuid().optional(),\n    approvedAt: z.string().datetime().optional()\n  }).optional()\n});\n\nconst CreateVersionSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 161,
        "end": 176,
        "startLoc": {
          "line": 161,
          "column": 2,
          "position": 2066
        },
        "endLoc": {
          "line": 176,
          "column": 20,
          "position": 2254
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 104,
        "end": 111,
        "startLoc": {
          "line": 104,
          "column": 5,
          "position": 1193
        },
        "endLoc": {
          "line": 111,
          "column": 20,
          "position": 1217
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "().optional()\n    }).optional(),\n    isPublic: z.boolean().optional(),\n    isFeatured: z.boolean().optional()\n  }).optional(),\n  sort: z.object({\n    field: z.enum(['title', 'createdAt', 'updatedAt', 'publishedAt', 'views', 'engagement']),\n    direction: z.enum(['asc', 'desc'])\n  }).optional(),\n  pagination: z.object({\n    page: z.number().min(1).default(1),\n    limit: z.number().min(1).max(100).default(20)\n  }).optional()\n});\n\n// ============================================================================\n// CONTENT ROUTES",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 195,
        "end": 211,
        "startLoc": {
          "line": 195,
          "column": 9,
          "position": 2601
        },
        "endLoc": {
          "line": 211,
          "column": 18,
          "position": 2790
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\content-management.service.ts",
        "start": 134,
        "end": 138,
        "startLoc": {
          "line": 134,
          "column": 5,
          "position": 1602
        },
        "endLoc": {
          "line": 138,
          "column": 18,
          "position": 1728
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create content'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 257,
        "end": 272,
        "startLoc": {
          "line": 257,
          "column": 35,
          "position": 3212
        },
        "endLoc": {
          "line": 272,
          "column": 27,
          "position": 3337
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ".parse(req.query);\n\n    // Convert date strings to Date objects\n    if (searchParams.filters?.dateRange) {\n      if (searchParams.filters.dateRange.from) {\n        searchParams.filters.dateRange.from = new Date(searchParams.filters.dateRange.from);\n      }\n      if (searchParams.filters.dateRange.to) {\n        searchParams.filters.dateRange.to = new Date(searchParams.filters.dateRange.to);\n      }\n    }\n\n    const result = await contentManagementService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 281,
        "end": 293,
        "startLoc": {
          "line": 281,
          "column": 20,
          "position": 3409
        },
        "endLoc": {
          "line": 293,
          "column": 25,
          "position": 3535
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 388,
        "end": 400,
        "startLoc": {
          "line": 388,
          "column": 18,
          "position": 3650
        },
        "endLoc": {
          "line": 400,
          "column": 29,
          "position": 3776
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to list content'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 301,
        "end": 316,
        "startLoc": {
          "line": 301,
          "column": 33,
          "position": 3596
        },
        "endLoc": {
          "line": 316,
          "column": 25,
          "position": 3721
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", organizationId);\n\n    if (!content) {\n      return res.status(404).json({\n        success: false,\n        error: 'Content not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: content,\n      message: 'Content retrieved successfully'\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to get content by slug via API'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 361,
        "end": 376,
        "startLoc": {
          "line": 361,
          "column": 5,
          "position": 4089
        },
        "endLoc": {
          "line": 376,
          "column": 40,
          "position": 4190
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 327,
        "end": 342,
        "startLoc": {
          "line": 327,
          "column": 3,
          "position": 3816
        },
        "endLoc": {
          "line": 342,
          "column": 32,
          "position": 3917
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "= {\n      ...validatedData,\n      publishedAt: validatedData.publishedAt ? new Date(validatedData.publishedAt) : undefined,\n      scheduledAt: validatedData.scheduledAt ? new Date(validatedData.scheduledAt) : undefined,\n      expiresAt: validatedData.expiresAt ? new Date(validatedData.expiresAt) : undefined,\n      workflow: validatedData.workflow ? {\n        ...validatedData.workflow,\n        steps: validatedData.workflow.steps.map(step => ({\n          ...step,\n          completedAt: step.completedAt ? new Date(step.completedAt) : undefined\n        })),\n        approvedAt: validatedData.workflow.approvedAt ? new Date(validatedData.workflow.approvedAt) : undefined\n      } : undefined\n    };\n\n    const content = await contentManagementService.updateContent",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 399,
        "end": 414,
        "startLoc": {
          "line": 399,
          "column": 2,
          "position": 4393
        },
        "endLoc": {
          "line": 414,
          "column": 14,
          "position": 4596
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 223,
        "end": 238,
        "startLoc": {
          "line": 223,
          "column": 2,
          "position": 2890
        },
        "endLoc": {
          "line": 238,
          "column": 14,
          "position": 3093
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ": req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update content'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 441,
        "end": 455,
        "startLoc": {
          "line": 441,
          "column": 10,
          "position": 4767
        },
        "endLoc": {
          "line": 455,
          "column": 27,
          "position": 4876
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 282,
        "end": 187,
        "startLoc": {
          "line": 282,
          "column": 10,
          "position": 2855
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      contentId: req.params.id,\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create content version'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 534,
        "end": 550,
        "startLoc": {
          "line": 534,
          "column": 43,
          "position": 5439
        },
        "endLoc": {
          "line": 550,
          "column": 35,
          "position": 5575
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 439,
        "end": 187,
        "startLoc": {
          "line": 439,
          "column": 35,
          "position": 4740
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", async (req: AuthenticatedRequest, res) => {\n  try {\n    const { id } = req.params;\n    const organizationId = req.user?.organizationId || 'demo-org';\n\n    const content = await contentManagementService.getContent(id, organizationId);\n\n    if (!content) {\n      return res.status(404).json({\n        success: false,\n        error: 'Content not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: content.",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 556,
        "end": 572,
        "startLoc": {
          "line": 556,
          "column": 16,
          "position": 5597
        },
        "endLoc": {
          "line": 572,
          "column": 2,
          "position": 5742
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 322,
        "end": 338,
        "startLoc": {
          "line": 322,
          "column": 7,
          "position": 3743
        },
        "endLoc": {
          "line": 338,
          "column": 2,
          "position": 3888
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ", async (req: AuthenticatedRequest, res) => {\n  try {\n    const organizationId = req.user?.organizationId || 'demo-org';\n    const searchParams = SearchContentSchema.parse(req.query);\n\n    // Convert date strings to Date objects\n    if (searchParams.filters?.dateRange) {\n      if (searchParams.filters.dateRange.from) {\n        searchParams.filters.dateRange.from = new Date(searchParams.filters.dateRange.from);\n      }\n      if (searchParams.filters.dateRange.to) {\n        searchParams.filters.dateRange.to = new Date(searchParams.filters.dateRange.to);\n      }\n    }\n\n    const result = await contentManagementService.searchContent(organizationId, searchParams);\n\n    res.json({\n      success: true,\n      data: result,\n      message: 'Content search completed successfully'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 678,
        "end": 698,
        "startLoc": {
          "line": 678,
          "column": 10,
          "position": 6522
        },
        "endLoc": {
          "line": 698,
          "column": 40,
          "position": 6735
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 278,
        "end": 298,
        "startLoc": {
          "line": 278,
          "column": 4,
          "position": 3359
        },
        "endLoc": {
          "line": 298,
          "column": 33,
          "position": 3572
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", {\n      error: error instanceof Error ? error.message : 'Unknown error',\n      organizationId: req.user?.organizationId\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Failed to search content'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\content-management.ts",
        "start": 701,
        "end": 716,
        "startLoc": {
          "line": 701,
          "column": 35,
          "position": 6759
        },
        "endLoc": {
          "line": 716,
          "column": 27,
          "position": 6884
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 172,
        "end": 187,
        "startLoc": {
          "line": 172,
          "column": 42,
          "position": 1972
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "));\n    }\n\n    if (conditions.length > 0) {\n      query = query.where(and(...conditions));\n    }\n\n    // Apply pagination\n    const offset = (pagination.page - 1) * pagination.limit;\n    query = query.limit(pagination.limit).offset(offset);\n\n    const result = await query;\n\n    // Get total count for pagination\n    const totalQuery = db.select({ count: count() }).from(contacts",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 60,
        "end": 74,
        "startLoc": {
          "line": 60,
          "column": 11,
          "position": 541
        },
        "endLoc": {
          "line": 74,
          "column": 9,
          "position": 674
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 75,
        "end": 90,
        "startLoc": {
          "line": 75,
          "column": 9,
          "position": 665
        },
        "endLoc": {
          "line": 90,
          "column": 9,
          "position": 800
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", {\n      orgId,\n      count: result.length,\n      total,\n      filters\n    });\n\n    res.json({\n      success: true,\n      data: result,\n      pagination: {\n        page: pagination.page,\n        limit: pagination.limit,\n        total,\n        totalPages: Math.ceil(total / pagination.limit)\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve contacts'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 80,
        "end": 99,
        "startLoc": {
          "line": 80,
          "column": 21,
          "position": 737
        },
        "endLoc": {
          "line": 99,
          "column": 30,
          "position": 858
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 88,
        "end": 107,
        "startLoc": {
          "line": 88,
          "column": 18,
          "position": 802
        },
        "endLoc": {
          "line": 107,
          "column": 27,
          "position": 923
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "router.get('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [contact",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 112,
        "end": 124,
        "startLoc": {
          "line": 112,
          "column": 1,
          "position": 947
        },
        "endLoc": {
          "line": 124,
          "column": 8,
          "position": 1069
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 142,
        "end": 154,
        "startLoc": {
          "line": 142,
          "column": 1,
          "position": 1186
        },
        "endLoc": {
          "line": 154,
          "column": 8,
          "position": 1308
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "router.post('/', async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const contactData",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 158,
        "end": 168,
        "startLoc": {
          "line": 158,
          "column": 1,
          "position": 1322
        },
        "endLoc": {
          "line": 168,
          "column": 12,
          "position": 1430
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 188,
        "end": 198,
        "startLoc": {
          "line": 188,
          "column": 1,
          "position": 1561
        },
        "endLoc": {
          "line": 198,
          "column": 12,
          "position": 1669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.put('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const updateData = UpdateContactSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 220,
        "end": 231,
        "startLoc": {
          "line": 220,
          "column": 1,
          "position": 1812
        },
        "endLoc": {
          "line": 231,
          "column": 20,
          "position": 1940
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 292,
        "startLoc": {
          "line": 281,
          "column": 1,
          "position": 2387
        },
        "endLoc": {
          "line": 292,
          "column": 20,
          "position": 2515
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "router.delete('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [deletedContact",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 287,
        "end": 300,
        "startLoc": {
          "line": 287,
          "column": 1,
          "position": 2337
        },
        "endLoc": {
          "line": 300,
          "column": 15,
          "position": 2478
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 441,
        "end": 396,
        "startLoc": {
          "line": 441,
          "column": 1,
          "position": 3743
        },
        "endLoc": {
          "line": 396,
          "column": 15,
          "position": 3416
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "});\n    \n    res.status(500).json({ \n      error: 'Failed to retrieve contacts',\n      message: (error as Error).message \n    });\n  }\n});\n\n// GET /v1/contacts/:id - Get single contact\nrouter.get('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string ||",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts-simple.ts",
        "start": 75,
        "end": 88,
        "startLoc": {
          "line": 75,
          "column": 5,
          "position": 616
        },
        "endLoc": {
          "line": 88,
          "column": 3,
          "position": 731
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 102,
        "end": 115,
        "startLoc": {
          "line": 102,
          "column": 5,
          "position": 891
        },
        "endLoc": {
          "line": 115,
          "column": 2,
          "position": 1005
        }
      }
    },
    {
      "format": "typescript",
      "lines": 28,
      "fragment": ") {\n      return res.status(404).json({ \n        error: 'Contact not found',\n        message: `Contact with ID ${id} not found or access denied`\n      });\n    }\n\n    structuredLogger.info('Contact retrieved', { orgId, contactId: id });\n\n    res.json({\n      success: true,\n      data: contact\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve contact', error as Error, {\n      orgId: req.headers['x-org-id'],\n      contactId: req.params.id\n    });\n    \n    res.status(500).json({ \n      error: 'Failed to retrieve contact',\n      message: (error as Error).message \n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\contacts-simple.ts",
        "start": 92,
        "end": 119,
        "startLoc": {
          "line": 92,
          "column": 10,
          "position": 776
        },
        "endLoc": {
          "line": 119,
          "column": 7,
          "position": 975
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\contacts.ts",
        "start": 130,
        "end": 157,
        "startLoc": {
          "line": 130,
          "column": 8,
          "position": 1121
        },
        "endLoc": {
          "line": 157,
          "column": 38,
          "position": 1320
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid configuration data',\n        details: error.errors,\n        poolName",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\connection-pool.ts",
        "start": 311,
        "end": 323,
        "startLoc": {
          "line": 311,
          "column": 42,
          "position": 2795
        },
        "endLoc": {
          "line": 323,
          "column": 9,
          "position": 2888
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\performance-v2.ts",
        "start": 265,
        "end": 277,
        "startLoc": {
          "line": 265,
          "column": 37,
          "position": 2426
        },
        "endLoc": {
          "line": 277,
          "column": 8,
          "position": 2519
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", async (req, res) => {\n  const traceId = `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  const spanId = `span_${Math.random().toString(36).substr(2, 9)}`;\n  const { poolName } = req.params;\n\n  try {\n    const poolStats = connectionPoolService.getPoolStats(poolName);\n    \n    if (!poolStats) {\n      return res.status(404).json({\n        success: false,\n        error: 'Pool not found',\n        poolName,\n        traceId\n      });\n    }\n\n    // Evaluar salud del pool",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\connection-pool.ts",
        "start": 593,
        "end": 610,
        "startLoc": {
          "line": 593,
          "column": 20,
          "position": 5034
        },
        "endLoc": {
          "line": 610,
          "column": 26,
          "position": 5213
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\warmup.ts",
        "start": 32,
        "end": 124,
        "startLoc": {
          "line": 32,
          "column": 10,
          "position": 245
        },
        "endLoc": {
          "line": 124,
          "column": 31,
          "position": 1294
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", {\n      orgId,\n      count: result.length,\n      total,\n      filters\n    });\n\n    res.json({\n      success: true,\n      data: result,\n      pagination: {\n        page: pagination.page,\n        limit: pagination.limit,\n        total,\n        totalPages: Math.ceil(total / pagination.limit)\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve companies'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 61,
        "end": 80,
        "startLoc": {
          "line": 61,
          "column": 22,
          "position": 520
        },
        "endLoc": {
          "line": 80,
          "column": 31,
          "position": 641
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 88,
        "end": 107,
        "startLoc": {
          "line": 88,
          "column": 18,
          "position": 802
        },
        "endLoc": {
          "line": 107,
          "column": 27,
          "position": 923
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "router.get('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [company",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 93,
        "end": 105,
        "startLoc": {
          "line": 93,
          "column": 1,
          "position": 730
        },
        "endLoc": {
          "line": 105,
          "column": 8,
          "position": 852
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 142,
        "end": 154,
        "startLoc": {
          "line": 142,
          "column": 1,
          "position": 1186
        },
        "endLoc": {
          "line": 154,
          "column": 8,
          "position": 1308
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "router.post('/', async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const companyData",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 139,
        "end": 149,
        "startLoc": {
          "line": 139,
          "column": 1,
          "position": 1105
        },
        "endLoc": {
          "line": 149,
          "column": 12,
          "position": 1213
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 188,
        "end": 198,
        "startLoc": {
          "line": 188,
          "column": 1,
          "position": 1561
        },
        "endLoc": {
          "line": 198,
          "column": 12,
          "position": 1669
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.put('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Validate request body\n    const updateData = UpdateCompanySchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 200,
        "end": 211,
        "startLoc": {
          "line": 200,
          "column": 1,
          "position": 1576
        },
        "endLoc": {
          "line": 211,
          "column": 20,
          "position": 1704
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 281,
        "end": 292,
        "startLoc": {
          "line": 281,
          "column": 1,
          "position": 2387
        },
        "endLoc": {
          "line": 292,
          "column": 20,
          "position": 2515
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "router.delete('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string;\n    const userId = req.headers['x-user-id'] as string;\n    \n    if (!orgId) {\n      return res.status(400).json({ error: 'Missing x-org-id header' });\n    }\n\n    // Set RLS context\n    await db.execute(`SET LOCAL app.org_id = '${orgId}'`);\n\n    const [deletedCompany",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 267,
        "end": 280,
        "startLoc": {
          "line": 267,
          "column": 1,
          "position": 2101
        },
        "endLoc": {
          "line": 280,
          "column": 15,
          "position": 2242
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\invoices.ts",
        "start": 441,
        "end": 396,
        "startLoc": {
          "line": 441,
          "column": 1,
          "position": 3743
        },
        "endLoc": {
          "line": 396,
          "column": 15,
          "position": 3416
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ", {\n      orgId,\n      count: paginatedResults.length,\n      total\n    });\n\n    res.json({\n      success: true,\n      data: paginatedResults,\n      pagination: {\n        page,\n        limit,\n        total,\n        totalPages: Math.ceil(total / limit)\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve companies'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies-simple.ts",
        "start": 51,
        "end": 69,
        "startLoc": {
          "line": 51,
          "column": 22,
          "position": 459
        },
        "endLoc": {
          "line": 69,
          "column": 31,
          "position": 564
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\contacts-simple.ts",
        "start": 55,
        "end": 73,
        "startLoc": {
          "line": 55,
          "column": 21,
          "position": 487
        },
        "endLoc": {
          "line": 73,
          "column": 30,
          "position": 592
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "limit)\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve companies', error as Error, {\n      orgId: req.headers['x-org-id'],\n      query: req.query\n    });\n    \n    res.status(500).json({ \n      error: 'Failed to retrieve companies',\n      message: (error as Error).message \n    });\n  }\n});\n\n// GET /v1/companies/:id - Get single company\nrouter.get('/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const orgId = req.headers['x-org-id'] as string ||",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies-simple.ts",
        "start": 64,
        "end": 85,
        "startLoc": {
          "line": 64,
          "column": 2,
          "position": 536
        },
        "endLoc": {
          "line": 85,
          "column": 3,
          "position": 712
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 75,
        "end": 96,
        "startLoc": {
          "line": 75,
          "column": 2,
          "position": 613
        },
        "endLoc": {
          "line": 96,
          "column": 2,
          "position": 788
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": ") {\n      return res.status(404).json({ \n        error: 'Company not found',\n        message: `Company with ID ${id} not found or access denied`\n      });\n    }\n\n    structuredLogger.info('Company retrieved', { orgId, companyId: id });\n\n    res.json({\n      success: true,\n      data: company\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to retrieve company', error as Error, {\n      orgId: req.headers['x-org-id'],\n      companyId: req.params.id\n    });\n    \n    res.status(500).json({ \n      error: 'Failed to retrieve company',\n      message: (error as Error).message \n    });\n  }\n});\n\n// POST /v1/companies - Create company\nrouter.post('/', async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string ||",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies-simple.ts",
        "start": 89,
        "end": 119,
        "startLoc": {
          "line": 89,
          "column": 10,
          "position": 757
        },
        "endLoc": {
          "line": 119,
          "column": 3,
          "position": 1001
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 111,
        "end": 141,
        "startLoc": {
          "line": 111,
          "column": 8,
          "position": 904
        },
        "endLoc": {
          "line": 141,
          "column": 2,
          "position": 1147
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "structuredLogger.error('Failed to create company', error as Error, {\n      orgId: req.headers['x-org-id'],\n      userId: req.headers['x-user-id'],\n      body: req.body\n    });\n    \n    res.status(500).json({ \n      error: 'Failed to create company',\n      message: (error as Error).message \n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\companies-simple.ts",
        "start": 148,
        "end": 161,
        "startLoc": {
          "line": 148,
          "column": 5,
          "position": 1213
        },
        "endLoc": {
          "line": 161,
          "column": 7,
          "position": 1316
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\companies.ts",
        "start": 186,
        "end": 199,
        "startLoc": {
          "line": 186,
          "column": 5,
          "position": 1471
        },
        "endLoc": {
          "line": 199,
          "column": 42,
          "position": 1574
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "= z.object({\n  department: z.enum(['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo']),\n  message: z.string().min(1).max(1000),\n  context: z.object({\n    agentId: z.string().optional(),\n    previousMessages: z.array(z.string()).optional(),\n    includeMetrics: z.boolean().default(true),\n  }).optional(),\n});\n\n/**\n * POST /v1/cockpit-integration/agent-action\n * Ejecuta una accin en un agente del cockpit\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 29,
        "end": 42,
        "startLoc": {
          "line": 29,
          "column": 2,
          "position": 331
        },
        "endLoc": {
          "line": 42,
          "column": 4,
          "position": 476
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\cockpit-integration.service.ts",
        "start": 26,
        "end": 36,
        "startLoc": {
          "line": 26,
          "column": 2,
          "position": 307
        },
        "endLoc": {
          "line": 36,
          "column": 7,
          "position": 452
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const department = req.params.department as any;\n    \n    if (!['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo'].includes(department)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid department',\n      });\n    }\n\n    const agentId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 189,
        "end": 200,
        "startLoc": {
          "line": 189,
          "column": 28,
          "position": 1664
        },
        "endLoc": {
          "line": 200,
          "column": 8,
          "position": 1788
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 75,
        "end": 86,
        "startLoc": {
          "line": 75,
          "column": 23,
          "position": 737
        },
        "endLoc": {
          "line": 86,
          "column": 15,
          "position": 861
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { error, department: req.params.department });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * GET /v1/cockpit-integration/departments\n * Obtiene informacin de todos los departamentos\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 221,
        "end": 233,
        "startLoc": {
          "line": 221,
          "column": 29,
          "position": 1943
        },
        "endLoc": {
          "line": 233,
          "column": 4,
          "position": 2023
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 32,
          "position": 1042
        },
        "endLoc": {
          "line": 119,
          "column": 4,
          "position": 1122
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const department = req.params.department as any;\n    \n    if (!['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo'].includes(department)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid department',\n      });\n    }\n\n    logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 273,
        "end": 284,
        "startLoc": {
          "line": 273,
          "column": 22,
          "position": 2470
        },
        "endLoc": {
          "line": 284,
          "column": 7,
          "position": 2592
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 75,
        "end": 86,
        "startLoc": {
          "line": 75,
          "column": 23,
          "position": 737
        },
        "endLoc": {
          "line": 86,
          "column": 6,
          "position": 859
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { error, department: req.params.department });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * GET /v1/cockpit-integration/health\n * Health check del servicio\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 308,
        "end": 320,
        "startLoc": {
          "line": 308,
          "column": 34,
          "position": 2774
        },
        "endLoc": {
          "line": 320,
          "column": 4,
          "position": 2854
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 32,
          "position": 1042
        },
        "endLoc": {
          "line": 119,
          "column": 4,
          "position": 1122
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", error as Error, {\n      orgId: req.headers['x-org-id'],\n      userId: Array.isArray(req.headers['x-user-id']) ? req.headers['x-user-id'][0] : req.headers['x-user-id']\n    });\n\n    res.status(500).json({\n      error: 'Failed to establish SSE connection',\n      message: (error as Error).message\n    });\n  }\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 80,
        "end": 92,
        "startLoc": {
          "line": 80,
          "column": 45,
          "position": 649
        },
        "endLoc": {
          "line": 92,
          "column": 80,
          "position": 761
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\events.ts",
        "start": 51,
        "end": 63,
        "startLoc": {
          "line": 51,
          "column": 37,
          "position": 422
        },
        "endLoc": {
          "line": 63,
          "column": 76,
          "position": 534
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", error as Error, {\n      department: req.params.department\n    });\n\n    res.status(400).json({\n      success: false,\n      error: 'INVALID_REQUEST',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 161,
        "end": 173,
        "startLoc": {
          "line": 161,
          "column": 40,
          "position": 1277
        },
        "endLoc": {
          "line": 173,
          "column": 80,
          "position": 1363
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 124,
        "end": 139,
        "startLoc": {
          "line": 124,
          "column": 32,
          "position": 994
        },
        "endLoc": {
          "line": 139,
          "column": 4,
          "position": 1080
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", error as Error, {\n      department: req.params.department\n    });\n\n    res.status(400).json({\n      success: false,\n      error: 'INVALID_REQUEST',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// EVENT ENDPOINTS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 241,
        "end": 254,
        "startLoc": {
          "line": 241,
          "column": 34,
          "position": 1857
        },
        "endLoc": {
          "line": 254,
          "column": 19,
          "position": 1945
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 124,
        "end": 174,
        "startLoc": {
          "line": 124,
          "column": 32,
          "position": 994
        },
        "endLoc": {
          "line": 174,
          "column": 26,
          "position": 1365
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", error as Error, {\n      department: req.params.department\n    });\n\n    res.status(400).json({\n      success: false,\n      error: 'INVALID_REQUEST',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// WEBSOCKET ENDPOINTS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 296,
        "end": 309,
        "startLoc": {
          "line": 296,
          "column": 30,
          "position": 2258
        },
        "endLoc": {
          "line": 309,
          "column": 23,
          "position": 2346
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-bff-live.ts",
        "start": 124,
        "end": 174,
        "startLoc": {
          "line": 124,
          "column": 32,
          "position": 994
        },
        "endLoc": {
          "line": 174,
          "column": 26,
          "position": 1365
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error writing log entry'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 142,
        "end": 152,
        "startLoc": {
          "line": 142,
          "column": 5,
          "position": 1739
        },
        "endLoc": {
          "line": 152,
          "column": 26,
          "position": 1819
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error searching logs'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 181,
        "end": 191,
        "startLoc": {
          "line": 181,
          "column": 5,
          "position": 2158
        },
        "endLoc": {
          "line": 191,
          "column": 23,
          "position": 2238
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error aggregating logs'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 217,
        "end": 227,
        "startLoc": {
          "line": 217,
          "column": 5,
          "position": 2467
        },
        "endLoc": {
          "line": 227,
          "column": 25,
          "position": 2547
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating alert rule'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 307,
        "end": 317,
        "startLoc": {
          "line": 307,
          "column": 5,
          "position": 3213
        },
        "endLoc": {
          "line": 317,
          "column": 28,
          "position": 3293
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating retention policy'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 453,
        "end": 463,
        "startLoc": {
          "line": 453,
          "column": 5,
          "position": 4421
        },
        "endLoc": {
          "line": 463,
          "column": 34,
          "position": 4501
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ".getConfig();\n\n    res.json({\n      success: true,\n      data: config\n    });\n  } catch (error) {\n    logger.error('Error getting configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// PUT /api/centralized-logging/config",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 603,
        "end": 619,
        "startLoc": {
          "line": 603,
          "column": 15,
          "position": 5687
        },
        "endLoc": {
          "line": 619,
          "column": 39,
          "position": 5805
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 430,
        "end": 446,
        "startLoc": {
          "line": 430,
          "column": 25,
          "position": 3848
        },
        "endLoc": {
          "line": 446,
          "column": 49,
          "position": 3966
        }
      }
    },
    {
      "format": "typescript",
      "lines": 28,
      "fragment": ".updateConfig(validatedData);\n\n    res.json({\n      success: true,\n      data: updatedConfig,\n      message: 'Configuration updated successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error updating configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ===== HEALTH CHECK =====\n\n// GET /api/centralized-logging/health",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 624,
        "end": 651,
        "startLoc": {
          "line": 624,
          "column": 15,
          "position": 5866
        },
        "endLoc": {
          "line": 651,
          "column": 39,
          "position": 6055
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 451,
        "end": 478,
        "startLoc": {
          "line": 451,
          "column": 25,
          "position": 4027
        },
        "endLoc": {
          "line": 478,
          "column": 49,
          "position": 4216
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "}\n    };\n\n    res.json({\n      success: true,\n      data: health\n    });\n  } catch (error) {\n    logger.error('Error checking health', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ===== UTILIDADES =====\n\n// POST /api/centralized-logging/logs/bulk",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 674,
        "end": 693,
        "startLoc": {
          "line": 674,
          "column": 7,
          "position": 6314
        },
        "endLoc": {
          "line": 693,
          "column": 43,
          "position": 6435
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 500,
        "end": 519,
        "startLoc": {
          "line": 500,
          "column": 7,
          "position": 4450
        },
        "endLoc": {
          "line": 519,
          "column": 51,
          "position": 4571
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!environment) {\n      return res.status(404).json({\n        success: false,\n        error: 'Environment not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: environment,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error updating environment metrics'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\blue-green-deployment.ts",
        "start": 130,
        "end": 145,
        "startLoc": {
          "line": 130,
          "column": 8,
          "position": 1611
        },
        "endLoc": {
          "line": 145,
          "column": 37,
          "position": 1719
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\blue-green-deployment.ts",
        "start": 94,
        "end": 109,
        "startLoc": {
          "line": 94,
          "column": 14,
          "position": 1185
        },
        "endLoc": {
          "line": 109,
          "column": 28,
          "position": 1293
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to create backup configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 186,
        "end": 196,
        "startLoc": {
          "line": 186,
          "column": 5,
          "position": 2106
        },
        "endLoc": {
          "line": 196,
          "column": 40,
          "position": 2186
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to update backup configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 235,
        "end": 245,
        "startLoc": {
          "line": 235,
          "column": 5,
          "position": 2478
        },
        "endLoc": {
          "line": 245,
          "column": 40,
          "position": 2558
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const config = await backupRecoveryService.getBackupConfig(id);\n\n    if (!config) {\n      return res.status(404).json({\n        success: false,\n        error: 'Backup configuration not found'\n      });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 299,
        "end": 311,
        "startLoc": {
          "line": 299,
          "column": 24,
          "position": 2976
        },
        "endLoc": {
          "line": 311,
          "column": 6,
          "position": 3077
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 136,
        "end": 148,
        "startLoc": {
          "line": 136,
          "column": 15,
          "position": 1698
        },
        "endLoc": {
          "line": 148,
          "column": 7,
          "position": 1799
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to execute backup'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 357,
        "end": 367,
        "startLoc": {
          "line": 357,
          "column": 5,
          "position": 3453
        },
        "endLoc": {
          "line": 367,
          "column": 27,
          "position": 3533
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to execute recovery'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 508,
        "end": 518,
        "startLoc": {
          "line": 508,
          "column": 5,
          "position": 4677
        },
        "endLoc": {
          "line": 518,
          "column": 29,
          "position": 4757
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ".id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 88,
        "end": 101,
        "startLoc": {
          "line": 88,
          "column": 2,
          "position": 871
        },
        "endLoc": {
          "line": 101,
          "column": 24,
          "position": 963
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\customer-support.ts",
        "start": 237,
        "end": 187,
        "startLoc": {
          "line": 237,
          "column": 7,
          "position": 2227
        },
        "endLoc": {
          "line": 187,
          "column": 34,
          "position": 2097
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// TEXT TO SPEECH ENDPOINTS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 139,
        "end": 160,
        "startLoc": {
          "line": 139,
          "column": 26,
          "position": 1220
        },
        "endLoc": {
          "line": 160,
          "column": 28,
          "position": 1369
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 108,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 108,
          "column": 30,
          "position": 1001
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// HEALTH AND STATUS ENDPOINTS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 188,
        "end": 209,
        "startLoc": {
          "line": 188,
          "column": 26,
          "position": 1571
        },
        "endLoc": {
          "line": 209,
          "column": 31,
          "position": 1720
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 108,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 108,
          "column": 30,
          "position": 1001
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating test suite'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 134,
        "end": 144,
        "startLoc": {
          "line": 134,
          "column": 5,
          "position": 1320
        },
        "endLoc": {
          "line": 144,
          "column": 28,
          "position": 1400
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating secret rotation'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 297,
        "end": 307,
        "startLoc": {
          "line": 297,
          "column": 5,
          "position": 2751
        },
        "endLoc": {
          "line": 307,
          "column": 33,
          "position": 2831
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating security checklist'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 426,
        "end": 436,
        "startLoc": {
          "line": 426,
          "column": 5,
          "position": 3876
        },
        "endLoc": {
          "line": 436,
          "column": 36,
          "position": 3956
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "});\n  } catch (error) {\n    logger.error('Error getting configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// PUT /api/automated-testing/config",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 544,
        "end": 555,
        "startLoc": {
          "line": 544,
          "column": 5,
          "position": 4881
        },
        "endLoc": {
          "line": 555,
          "column": 37,
          "position": 4971
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 435,
        "end": 446,
        "startLoc": {
          "line": 435,
          "column": 5,
          "position": 3876
        },
        "endLoc": {
          "line": 446,
          "column": 49,
          "position": 3966
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ",\n      message: 'Configuration updated successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error updating configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ===== HEALTH CHECK =====\n\n// GET /api/automated-testing/health",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 565,
        "end": 588,
        "startLoc": {
          "line": 565,
          "column": 14,
          "position": 5059
        },
        "endLoc": {
          "line": 588,
          "column": 37,
          "position": 5221
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 455,
        "end": 478,
        "startLoc": {
          "line": 455,
          "column": 14,
          "position": 4054
        },
        "endLoc": {
          "line": 478,
          "column": 49,
          "position": 4216
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "}\n    };\n\n    res.json({\n      success: true,\n      data: health\n    });\n  } catch (error) {\n    logger.error('Error checking health', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 605,
        "end": 622,
        "startLoc": {
          "line": 605,
          "column": 7,
          "position": 5380
        },
        "endLoc": {
          "line": 622,
          "column": 7,
          "position": 5498
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 500,
        "end": 517,
        "startLoc": {
          "line": 500,
          "column": 7,
          "position": 4450
        },
        "endLoc": {
          "line": 517,
          "column": 26,
          "position": 4568
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating documentation'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 137,
        "end": 147,
        "startLoc": {
          "line": 137,
          "column": 5,
          "position": 1377
        },
        "endLoc": {
          "line": 147,
          "column": 31,
          "position": 1457
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating runbook'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 383,
        "end": 393,
        "startLoc": {
          "line": 383,
          "column": 5,
          "position": 3416
        },
        "endLoc": {
          "line": 393,
          "column": 25,
          "position": 3496
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.get('/reports/:period', async (req: Request, res: Response) => {\n  try {\n    const { period } = req.params;\n    \n    if (!['daily', 'weekly', 'monthly'].includes(period)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid period. Must be: daily, weekly, or monthly'\n      });\n    }\n\n    const report = await documentationService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 481,
        "end": 492,
        "startLoc": {
          "line": 481,
          "column": 1,
          "position": 4207
        },
        "endLoc": {
          "line": 492,
          "column": 21,
          "position": 4324
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 398,
        "end": 409,
        "startLoc": {
          "line": 398,
          "column": 1,
          "position": 3544
        },
        "endLoc": {
          "line": 409,
          "column": 25,
          "position": 3660
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "router.get('/config', async (req: Request, res: Response) => {\n  try {\n    res.json({\n      success: true,\n      data: defaultConfig\n    });\n  } catch (error) {\n    logger.error('Error getting configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// PUT /api/automated-documentation/config",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 511,
        "end": 527,
        "startLoc": {
          "line": 511,
          "column": 1,
          "position": 4472
        },
        "endLoc": {
          "line": 527,
          "column": 43,
          "position": 4614
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 539,
        "end": 446,
        "startLoc": {
          "line": 539,
          "column": 1,
          "position": 4829
        },
        "endLoc": {
          "line": 446,
          "column": 49,
          "position": 3966
        }
      }
    },
    {
      "format": "typescript",
      "lines": 33,
      "fragment": "router.put('/config', async (req: Request, res: Response) => {\n  try {\n    const validatedData = UpdateConfigSchema.parse(req.body);\n    \n    // Actualizar configuracin (en una implementacin real, esto se persistira)\n    Object.assign(defaultConfig, validatedData);\n    \n    res.json({\n      success: true,\n      data: defaultConfig,\n      message: 'Configuration updated successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error updating configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ===== HEALTH CHECK =====\n\n// GET /api/automated-documentation/health",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 528,
        "end": 560,
        "startLoc": {
          "line": 528,
          "column": 1,
          "position": 4616
        },
        "endLoc": {
          "line": 560,
          "column": 43,
          "position": 4864
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 556,
        "end": 478,
        "startLoc": {
          "line": 556,
          "column": 1,
          "position": 4973
        },
        "endLoc": {
          "line": 478,
          "column": 49,
          "position": 4216
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "}\n    };\n\n    res.json({\n      success: true,\n      data: health\n    });\n  } catch (error) {\n    logger.error('Error checking health', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport default router;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\automated-documentation.ts",
        "start": 580,
        "end": 597,
        "startLoc": {
          "line": 580,
          "column": 7,
          "position": 5090
        },
        "endLoc": {
          "line": 597,
          "column": 2,
          "position": 5213
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 500,
        "end": 622,
        "startLoc": {
          "line": 500,
          "column": 7,
          "position": 4450
        },
        "endLoc": {
          "line": 622,
          "column": 2,
          "position": 5503
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const loginData",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 60,
        "end": 71,
        "startLoc": {
          "line": 60,
          "column": 12,
          "position": 601
        },
        "endLoc": {
          "line": 71,
          "column": 10,
          "position": 702
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 2,
          "position": 704
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const { refreshToken",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 126,
        "end": 137,
        "startLoc": {
          "line": 126,
          "column": 19,
          "position": 1152
        },
        "endLoc": {
          "line": 137,
          "column": 13,
          "position": 1255
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 4,
          "position": 706
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const { sessionId",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 180,
        "end": 191,
        "startLoc": {
          "line": 180,
          "column": 13,
          "position": 1607
        },
        "endLoc": {
          "line": 191,
          "column": 10,
          "position": 1710
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 4,
          "position": 706
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const { permissions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 312,
        "end": 323,
        "startLoc": {
          "line": 312,
          "column": 19,
          "position": 2660
        },
        "endLoc": {
          "line": 323,
          "column": 12,
          "position": 2763
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 4,
          "position": 706
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", authenticateToken, async (req: Request, res: Response): Promise<void> => {\n  const startTime = Date.now();\n  const requestId = req.headers['x-request-id'] as string || `req_${Date.now()}`;\n\n  try {\n    if (!req.user?.id || !req.user?.organizationId) {\n      res.status(400).json({\n        error: 'User context required',\n        message: 'User ID and organization ID are required',\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    // Get user permissions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 421,
        "end": 436,
        "startLoc": {
          "line": 421,
          "column": 15,
          "position": 3515
        },
        "endLoc": {
          "line": 436,
          "column": 24,
          "position": 3679
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 59,
        "end": 311,
        "startLoc": {
          "line": 59,
          "column": 10,
          "position": 511
        },
        "endLoc": {
          "line": 311,
          "column": 20,
          "position": 2650
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".safeParse(req.body);\n    if (!validation.success) {\n      res.status(400).json({\n        error: 'Validation error',\n        message: validation.error.errors.map(e => e.message).join(', '),\n        requestId,\n        timestamp: new Date().toISOString()\n      });\n      return;\n    }\n\n    const { currentPassword",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\auth.ts",
        "start": 495,
        "end": 506,
        "startLoc": {
          "line": 495,
          "column": 21,
          "position": 4161
        },
        "endLoc": {
          "line": 506,
          "column": 16,
          "position": 4264
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\rate-limiting.ts",
        "start": 132,
        "end": 76,
        "startLoc": {
          "line": 132,
          "column": 17,
          "position": 1126
        },
        "endLoc": {
          "line": 76,
          "column": 4,
          "position": 706
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ").optional(),\n  userId: z.string().uuid().optional(),\n  startDate: z.string().datetime().optional(),\n  endDate: z.string().datetime().optional(),\n  limit: z.number().min(1).max(100).default(50),\n  offset: z.number().min(0).default(0)\n});\n\nconst updateConfigSchema = z.object({\n  enabled: z.boolean().optional(),\n  retentionDays",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\audit-trail-crm-undo.ts",
        "start": 49,
        "end": 59,
        "startLoc": {
          "line": 49,
          "column": 2,
          "position": 590
        },
        "endLoc": {
          "line": 59,
          "column": 14,
          "position": 733
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\audit-trail-crm-undo.ts",
        "start": 40,
        "end": 87,
        "startLoc": {
          "line": 40,
          "column": 2,
          "position": 446
        },
        "endLoc": {
          "line": 87,
          "column": 11,
          "position": 1110
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-training/datasets\n * @desc List all training datasets\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 106,
        "end": 130,
        "startLoc": {
          "line": 106,
          "column": 26,
          "position": 1009
        },
        "endLoc": {
          "line": 130,
          "column": 4,
          "position": 1156
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 107,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-training/jobs\n * @desc List all training jobs\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 275,
        "end": 299,
        "startLoc": {
          "line": 275,
          "column": 31,
          "position": 2190
        },
        "endLoc": {
          "line": 299,
          "column": 4,
          "position": 2337
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 107,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ",\n        timestamp: new Date().toISOString()\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Health check failed', error as Error);\n\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-training/status\n * @desc Get service status and statistics\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 498,
        "end": 518,
        "startLoc": {
          "line": 498,
          "column": 23,
          "position": 3664
        },
        "endLoc": {
          "line": 518,
          "column": 4,
          "position": 3776
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 235,
        "end": 255,
        "startLoc": {
          "line": 235,
          "column": 2,
          "position": 1924
        },
        "endLoc": {
          "line": 255,
          "column": 4,
          "position": 2036
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ",\n        timestamp: new Date().toISOString()\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Status check failed', error as Error);\n\n    res.status(500).json({\n      success: false,\n      error: 'Status check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// CONFIGURATION ENDPOINTS\n// ============================================================================\n\n/**\n * @route POST /v1/ai-training/configure\n * @desc Configure training parameters\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 555,
        "end": 579,
        "startLoc": {
          "line": 555,
          "column": 2,
          "position": 3988
        },
        "endLoc": {
          "line": 579,
          "column": 4,
          "position": 4107
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 266,
        "end": 290,
        "startLoc": {
          "line": 266,
          "column": 7,
          "position": 2147
        },
        "endLoc": {
          "line": 290,
          "column": 4,
          "position": 2266
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ");\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 602,
        "end": 620,
        "startLoc": {
          "line": 602,
          "column": 6,
          "position": 4289
        },
        "endLoc": {
          "line": 620,
          "column": 7,
          "position": 4412
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\social-media-management.ts",
        "start": 175,
        "end": 107,
        "startLoc": {
          "line": 175,
          "column": 2,
          "position": 2010
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "name: z.string().min(1).max(100),\n  description: z.string().min(1).max(500),\n  type: z.enum(['data_protection', 'access_control', 'content_filter', 'audit', 'compliance']),\n  rules: z.array(z.object({\n    field: z.string(),\n    operator: z.enum(['equals', 'contains', 'regex', 'range', 'exists']),\n    value: z.any(),\n    action: z.enum(['allow', 'deny', 'log', 'encrypt', 'anonymize'])\n  })),\n  severity: z.enum(['low', 'medium', 'high', 'critical']),\n  isActive: z.boolean().",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 14,
        "end": 24,
        "startLoc": {
          "line": 14,
          "column": 3,
          "position": 120
        },
        "endLoc": {
          "line": 24,
          "column": 2,
          "position": 312
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-security-compliance.service.ts",
        "start": 9,
        "end": 19,
        "startLoc": {
          "line": 9,
          "column": 3,
          "position": 71
        },
        "endLoc": {
          "line": 19,
          "column": 2,
          "position": 263
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "),\n  period: z.object({\n    start: z.string().datetime(),\n    end: z.string().datetime()\n  })\n});\n\n// Middleware de autenticacin y rate limiting\nrouter.use(authenticateToken);\nrouter.use(rateLimiter);\n\n// ===== GESTIN DE MTRICAS DE PERFORMANCE =====",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-performance-optimization.ts",
        "start": 49,
        "end": 60,
        "startLoc": {
          "line": 49,
          "column": 2,
          "position": 624
        },
        "endLoc": {
          "line": 60,
          "column": 50,
          "position": 694
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 59,
        "end": 70,
        "startLoc": {
          "line": 59,
          "column": 3,
          "position": 776
        },
        "endLoc": {
          "line": 70,
          "column": 49,
          "position": 846
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ".getHealthStatus();\n    \n    const statusCode = health.status === 'healthy' ? 200 : \n                      health.status === 'degraded' ? 200 : 503;\n    \n    res.status(statusCode).json({\n      success: true,\n      data: health,\n      message: `Service is ${health.status}`\n    });\n  } catch (error: any) {\n    logger.error('Health check failed', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(503).json({\n      success: false,\n      error: 'Health check failed',\n      message: error.message\n    });\n  }\n});\n\n// ===== ESTADSTICAS =====\n\n// GET /v1/ai-performance-optimization/stats - Estadsticas del servicio",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-performance-optimization.ts",
        "start": 528,
        "end": 554,
        "startLoc": {
          "line": 528,
          "column": 33,
          "position": 4200
        },
        "endLoc": {
          "line": 554,
          "column": 73,
          "position": 4397
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 423,
        "end": 449,
        "startLoc": {
          "line": 423,
          "column": 28,
          "position": 3447
        },
        "endLoc": {
          "line": 449,
          "column": 68,
          "position": 3644
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ", { \n      userId: req.user?.id \n    });\n    \n    res.json({\n      success: true,\n      data: stats,\n      message: 'Statistics retrieved successfully'\n    });\n  } catch (error: any) {\n    logger.error('Failed to get statistics', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to retrieve statistics',\n      message: error.message\n    });\n  }\n});\n\nexport { router as aiPerformanceOptimizationRoutes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-performance-optimization.ts",
        "start": 602,
        "end": 625,
        "startLoc": {
          "line": 602,
          "column": 43,
          "position": 4703
        },
        "endLoc": {
          "line": 625,
          "column": 32,
          "position": 4868
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 488,
        "end": 511,
        "startLoc": {
          "line": 488,
          "column": 38,
          "position": 3892
        },
        "endLoc": {
          "line": 511,
          "column": 27,
          "position": 4057
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-model-management/models\n * @desc List all AI models\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 169,
        "end": 193,
        "startLoc": {
          "line": 169,
          "column": 27,
          "position": 1825
        },
        "endLoc": {
          "line": 193,
          "column": 4,
          "position": 1972
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 107,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", error as Error);\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// DEPLOYMENT ENDPOINTS",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 329,
        "end": 348,
        "startLoc": {
          "line": 329,
          "column": 37,
          "position": 2990
        },
        "endLoc": {
          "line": 348,
          "column": 24,
          "position": 3122
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 602,
        "end": 108,
        "startLoc": {
          "line": 602,
          "column": 32,
          "position": 4282
        },
        "endLoc": {
          "line": 108,
          "column": 30,
          "position": 1001
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-model-management/deployments\n * @desc List all model deployments\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 379,
        "end": 403,
        "startLoc": {
          "line": 379,
          "column": 26,
          "position": 3337
        },
        "endLoc": {
          "line": 403,
          "column": 4,
          "position": 3484
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 107,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route POST /v1/ai-model-management/ab-tests/:id/start\n * @desc Start an A/B test\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 505,
        "end": 529,
        "startLoc": {
          "line": 505,
          "column": 27,
          "position": 4211
        },
        "endLoc": {
          "line": 529,
          "column": 4,
          "position": 4358
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 107,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 107,
          "column": 80,
          "position": 999
        }
      }
    },
    {
      "format": "typescript",
      "lines": 29,
      "fragment": ", error as Error, {\n      userId: req.user?.id\n    });\n\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ============================================================================\n// HEALTH AND STATUS ENDPOINTS\n// ============================================================================\n\n/**\n * @route GET /v1/ai-model-management/health\n * @desc Check health status of AI Model Management\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 602,
        "end": 630,
        "startLoc": {
          "line": 602,
          "column": 24,
          "position": 4862
        },
        "endLoc": {
          "line": 630,
          "column": 4,
          "position": 5016
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 87,
        "end": 216,
        "startLoc": {
          "line": 87,
          "column": 25,
          "position": 852
        },
        "endLoc": {
          "line": 216,
          "column": 4,
          "position": 1725
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ",\n        timestamp: new Date().toISOString()\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Health check failed', error as Error);\n\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n/**\n * @route GET /v1/ai-model-management/status\n * @desc Get service status and statistics\n * @access Private\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 639,
        "end": 659,
        "startLoc": {
          "line": 639,
          "column": 22,
          "position": 5093
        },
        "endLoc": {
          "line": 659,
          "column": 4,
          "position": 5205
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\azure-integration.ts",
        "start": 235,
        "end": 255,
        "startLoc": {
          "line": 235,
          "column": 2,
          "position": 1924
        },
        "endLoc": {
          "line": 255,
          "column": 4,
          "position": 2036
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "],\n        timestamp: new Date().toISOString()\n      }\n    });\n\n  } catch (error) {\n    structuredLogger.error('Status check failed', error as Error);\n\n    res.status(500).json({\n      success: false,\n      error: 'Status check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-model-management.ts",
        "start": 693,
        "end": 709,
        "startLoc": {
          "line": 693,
          "column": 9,
          "position": 5404
        },
        "endLoc": {
          "line": 709,
          "column": 7,
          "position": 5517
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-training.ts",
        "start": 555,
        "end": 282,
        "startLoc": {
          "line": 555,
          "column": 9,
          "position": 3987
        },
        "endLoc": {
          "line": 282,
          "column": 80,
          "position": 2259
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": ";\n\n// Schemas de validacin\nconst DashboardMetricsSchema = z.object({\n  department: z.enum(['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo']),\n  timeframe: z.enum(['1h', '24h', '7d', '30d']).default('24h'),\n  includePredictions: z.boolean().default(true),\n  includeOptimizations: z.boolean().default(true),\n  includeSecurity: z.boolean().default(true),\n});\n\nconst RealTimeMetricsSchema = z.object({\n  department: z.enum(['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo']),\n  agentId: z.string().optional(),\n});\n\nconst AgentStatusSchema = z.object({\n  agentId: z.string(),\n  department: z.enum(['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo']),\n  status: z.enum(['active', 'paused', 'error', 'maintenance']),\n  lastActivity: z.string",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 13,
        "end": 33,
        "startLoc": {
          "line": 13,
          "column": 2,
          "position": 108
        },
        "endLoc": {
          "line": 33,
          "column": 7,
          "position": 413
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-dashboard-consolidation.service.ts",
        "start": 11,
        "end": 31,
        "startLoc": {
          "line": 11,
          "column": 19,
          "position": 88
        },
        "endLoc": {
          "line": 31,
          "column": 5,
          "position": 393
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.get('/agents/:department', async (req, res) => {\n  try {\n    const department = req.params.department as any;\n    \n    if (!['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo'].includes(department)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid department',\n      });\n    }\n\n    logger.info('Getting agents for department'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 152,
        "end": 163,
        "startLoc": {
          "line": 152,
          "column": 1,
          "position": 1345
        },
        "endLoc": {
          "line": 163,
          "column": 32,
          "position": 1476
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 273,
        "end": 284,
        "startLoc": {
          "line": 273,
          "column": 1,
          "position": 2465
        },
        "endLoc": {
          "line": 284,
          "column": 28,
          "position": 2596
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { error, department: req.params.department });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * GET /v1/ai-dashboard-consolidation/kpis/:department\n * Obtiene KPIs especficos de un departamento\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 183,
        "end": 195,
        "startLoc": {
          "line": 183,
          "column": 23,
          "position": 1639
        },
        "endLoc": {
          "line": 195,
          "column": 4,
          "position": 1719
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 32,
          "position": 1042
        },
        "endLoc": {
          "line": 119,
          "column": 4,
          "position": 1122
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const department = req.params.department as any;\n    \n    if (!['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo'].includes(department)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid department',\n      });\n    }\n\n    const timeframe",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 196,
        "end": 207,
        "startLoc": {
          "line": 196,
          "column": 20,
          "position": 1726
        },
        "endLoc": {
          "line": 207,
          "column": 10,
          "position": 1850
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 75,
        "end": 86,
        "startLoc": {
          "line": 75,
          "column": 23,
          "position": 737
        },
        "endLoc": {
          "line": 86,
          "column": 15,
          "position": 861
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { error, department: req.params.department });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * GET /v1/ai-dashboard-consolidation/timeline/:department\n * Obtiene timeline de eventos de un departamento\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 234,
        "end": 246,
        "startLoc": {
          "line": 234,
          "column": 21,
          "position": 2052
        },
        "endLoc": {
          "line": 246,
          "column": 4,
          "position": 2132
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 32,
          "position": 1042
        },
        "endLoc": {
          "line": 119,
          "column": 4,
          "position": 1122
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", async (req, res) => {\n  try {\n    const department = req.params.department as any;\n    \n    if (!['ceo', 'ia', 'cso', 'cto', 'ciso', 'coo', 'chro', 'cgo', 'cfo', 'cdo'].includes(department)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid department',\n      });\n    }\n\n    const timeframe = (req.query.timeframe as string) || '24h';\n\n    logger.info('Getting timeline for department'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 247,
        "end": 260,
        "startLoc": {
          "line": 247,
          "column": 24,
          "position": 2139
        },
        "endLoc": {
          "line": 260,
          "column": 34,
          "position": 2290
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 75,
        "end": 209,
        "startLoc": {
          "line": 75,
          "column": 23,
          "position": 737
        },
        "endLoc": {
          "line": 209,
          "column": 30,
          "position": 1877
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", {\n      department,\n      timeframe,\n      userId: req.user?.id,\n    });\n\n    const metrics = await aiDashboardConsolidationService.getDashboardMetrics({\n      department,\n      timeframe: timeframe as any,\n      includePredictions: false,\n      includeOptimizations: false,\n      includeSecurity: false,\n    });\n\n    res.json({\n      success: true,\n      data: {\n        department,\n        timeframe,\n        timeline",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 260,
        "end": 279,
        "startLoc": {
          "line": 260,
          "column": 34,
          "position": 2291
        },
        "endLoc": {
          "line": 279,
          "column": 9,
          "position": 2407
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 209,
        "end": 228,
        "startLoc": {
          "line": 209,
          "column": 30,
          "position": 1878
        },
        "endLoc": {
          "line": 228,
          "column": 5,
          "position": 1994
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { error, department: req.params.department });\n    res.status(500).json({\n      success: false,\n      error: 'Internal server error',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * GET /v1/ai-dashboard-consolidation/health\n * Health check del servicio\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 285,
        "end": 297,
        "startLoc": {
          "line": 285,
          "column": 25,
          "position": 2467
        },
        "endLoc": {
          "line": 297,
          "column": 4,
          "position": 2547
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 32,
          "position": 1042
        },
        "endLoc": {
          "line": 119,
          "column": 4,
          "position": 1122
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ",\n    };\n\n    logger.info('Health check requested', { userId: req.user?.id });\n\n    res.json({\n      success: true,\n      data: health,\n    });\n  } catch (error) {\n    logger.error('Error in health check', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      details: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\nexport { router as aiDashboardConsolidationRoutes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-dashboard-consolidation.ts",
        "start": 306,
        "end": 325,
        "startLoc": {
          "line": 306,
          "column": 2,
          "position": 2639
        },
        "endLoc": {
          "line": 325,
          "column": 31,
          "position": 2792
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\cockpit-integration.ts",
        "start": 335,
        "end": 354,
        "startLoc": {
          "line": 335,
          "column": 2,
          "position": 2984
        },
        "endLoc": {
          "line": 354,
          "column": 25,
          "position": 3137
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", async (req, res) => {\n  try {\n    const { organizationId, limit = 10 } = req.query;\n    \n    if (!organizationId) {\n      return res.status(400).json({\n        success: false,\n        error: 'Organization ID is required'\n      });\n    }\n    \n    // Implementar obtencin de pronsticos",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-prediction.ts",
        "start": 300,
        "end": 311,
        "startLoc": {
          "line": 300,
          "column": 13,
          "position": 2508
        },
        "endLoc": {
          "line": 311,
          "column": 40,
          "position": 2601
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-prediction.ts",
        "start": 222,
        "end": 233,
        "startLoc": {
          "line": 222,
          "column": 15,
          "position": 1930
        },
        "endLoc": {
          "line": 233,
          "column": 41,
          "position": 2023
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ".getHealthStatus();\n    \n    const statusCode = health.status === 'healthy' ? 200 : \n                      health.status === 'degraded' ? 200 : 503;\n    \n    res.status(statusCode).json({\n      success: true,\n      data: health,\n      message: `Service is ${health.status}`\n    });\n  } catch (error: any) {\n    logger.error('Health check failed', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(503).json({\n      success: false,\n      error: 'Health check failed',\n      message: error.message\n    });\n  }\n});\n\n// ===== ESTADSTICAS =====\n\n// GET /v1/ai-cost-prediction/stats - Estadsticas del servicio",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-prediction.ts",
        "start": 668,
        "end": 694,
        "startLoc": {
          "line": 668,
          "column": 24,
          "position": 5032
        },
        "endLoc": {
          "line": 694,
          "column": 64,
          "position": 5229
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 423,
        "end": 449,
        "startLoc": {
          "line": 423,
          "column": 28,
          "position": 3447
        },
        "endLoc": {
          "line": 449,
          "column": 68,
          "position": 3644
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ", { \n      userId: req.user?.id \n    });\n    \n    res.json({\n      success: true,\n      data: stats,\n      message: 'Statistics retrieved successfully'\n    });\n  } catch (error: any) {\n    logger.error('Failed to get statistics', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to retrieve statistics',\n      message: error.message\n    });\n  }\n});\n\nexport { router as aiCostPredictionRoutes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-prediction.ts",
        "start": 746,
        "end": 769,
        "startLoc": {
          "line": 746,
          "column": 34,
          "position": 5558
        },
        "endLoc": {
          "line": 769,
          "column": 23,
          "position": 5723
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 488,
        "end": 511,
        "startLoc": {
          "line": 488,
          "column": 38,
          "position": 3892
        },
        "endLoc": {
          "line": 511,
          "column": 27,
          "position": 4057
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ": z.enum(['daily', 'weekly', 'monthly', 'custom']),\n  period: z.object({\n    start: z.string().datetime(),\n    end: z.string().datetime()\n  })\n});\n\n// Middleware de autenticacin y rate limiting\nrouter.use(authenticateToken);\nrouter.use(rateLimiter);\n\n// ===== GESTIN DE REGLAS DE OPTIMIZACIN =====",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-optimization.ts",
        "start": 51,
        "end": 62,
        "startLoc": {
          "line": 51,
          "column": 13,
          "position": 608
        },
        "endLoc": {
          "line": 62,
          "column": 49,
          "position": 696
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-performance-optimization.ts",
        "start": 49,
        "end": 70,
        "startLoc": {
          "line": 49,
          "column": 11,
          "position": 606
        },
        "endLoc": {
          "line": 70,
          "column": 49,
          "position": 846
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", { \n      userId: req.user?.id, \n      count: rules.length \n    });\n    \n    res.json({\n      success: true,\n      data: rules,\n      count: rules.length\n    });\n  } catch (error: any) {\n    logger.error('Failed to get cost optimization rules'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-optimization.ts",
        "start": 69,
        "end": 80,
        "startLoc": {
          "line": 69,
          "column": 36,
          "position": 750
        },
        "endLoc": {
          "line": 80,
          "column": 40,
          "position": 837
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-performance-optimization.ts",
        "start": 139,
        "end": 150,
        "startLoc": {
          "line": 139,
          "column": 31,
          "position": 1293
        },
        "endLoc": {
          "line": 150,
          "column": 35,
          "position": 1380
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.get('/recommendations', async (req, res) => {\n  try {\n    const { organizationId } = req.query;\n    \n    if (!organizationId) {\n      return res.status(400).json({\n        success: false,\n        error: 'Organization ID is required'\n      });\n    }\n    \n    // Generar anlisis para obtener recomendaciones",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-optimization.ts",
        "start": 429,
        "end": 440,
        "startLoc": {
          "line": 429,
          "column": 1,
          "position": 3515
        },
        "endLoc": {
          "line": 440,
          "column": 49,
          "position": 3606
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-prediction.ts",
        "start": 569,
        "end": 580,
        "startLoc": {
          "line": 569,
          "column": 1,
          "position": 4374
        },
        "endLoc": {
          "line": 580,
          "column": 45,
          "position": 4465
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": ".getHealthStatus();\n    \n    const statusCode = health.status === 'healthy' ? 200 : \n                      health.status === 'degraded' ? 200 : 503;\n    \n    res.status(statusCode).json({\n      success: true,\n      data: health,\n      message: `Service is ${health.status}`\n    });\n  } catch (error: any) {\n    logger.error('Health check failed', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(503).json({\n      success: false,\n      error: 'Health check failed',\n      message: error.message\n    });\n  }\n});\n\n// ===== ESTADSTICAS =====\n\n// GET /v1/ai-cost-optimization/stats - Estadsticas del servicio",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-optimization.ts",
        "start": 574,
        "end": 600,
        "startLoc": {
          "line": 574,
          "column": 26,
          "position": 4705
        },
        "endLoc": {
          "line": 600,
          "column": 66,
          "position": 4902
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 423,
        "end": 449,
        "startLoc": {
          "line": 423,
          "column": 28,
          "position": 3447
        },
        "endLoc": {
          "line": 449,
          "column": 68,
          "position": 3644
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ", { \n      userId: req.user?.id \n    });\n    \n    res.json({\n      success: true,\n      data: stats,\n      message: 'Statistics retrieved successfully'\n    });\n  } catch (error: any) {\n    logger.error('Failed to get statistics', { \n      error: error.message, \n      userId: req.user?.id \n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to retrieve statistics',\n      message: error.message\n    });\n  }\n});\n\nexport { router as aiCostOptimizationRoutes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-cost-optimization.ts",
        "start": 651,
        "end": 674,
        "startLoc": {
          "line": 651,
          "column": 36,
          "position": 5224
        },
        "endLoc": {
          "line": 674,
          "column": 25,
          "position": 5389
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-security-compliance.ts",
        "start": 488,
        "end": 511,
        "startLoc": {
          "line": 488,
          "column": 38,
          "position": 3892
        },
        "endLoc": {
          "line": 511,
          "column": 27,
          "position": 4057
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "),\n  context: z.object({\n    domain: z.string().optional(),\n    intent: z.string().optional(),\n    entities: z.record(z.any()).optional(),\n    preferences: z.record(z.any()).optional(),\n    sessionData: z.record(z.any()).optional()\n  }).optional()\n});\n\nconst GetConversationsSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 33,
        "end": 43,
        "startLoc": {
          "line": 33,
          "column": 2,
          "position": 367
        },
        "endLoc": {
          "line": 43,
          "column": 23,
          "position": 484
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 19,
        "end": 29,
        "startLoc": {
          "line": 19,
          "column": 2,
          "position": 169
        },
        "endLoc": {
          "line": 29,
          "column": 25,
          "position": 286
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!conversation) {\n      return res.status(404).json({\n        success: false,\n        error: 'Conversation not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: conversation,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error updating conversation'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 207,
        "end": 222,
        "startLoc": {
          "line": 207,
          "column": 8,
          "position": 2318
        },
        "endLoc": {
          "line": 222,
          "column": 30,
          "position": 2426
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 177,
        "end": 192,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 2047
        },
        "endLoc": {
          "line": 192,
          "column": 29,
          "position": 2155
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "id);\n    \n    if (!message) {\n      return res.status(404).json({\n        success: false,\n        error: 'Message not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: message,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting message'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 321,
        "end": 336,
        "startLoc": {
          "line": 321,
          "column": 2,
          "position": 3296
        },
        "endLoc": {
          "line": 336,
          "column": 24,
          "position": 3405
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dlg-grooming.ts",
        "start": 155,
        "end": 170,
        "startLoc": {
          "line": 155,
          "column": 2,
          "position": 2154
        },
        "endLoc": {
          "line": 170,
          "column": 28,
          "position": 2263
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ");\n    \n    if (!session) {\n      return res.status(404).json({\n        success: false,\n        error: 'Session not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: session,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error updating session'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 459,
        "end": 474,
        "startLoc": {
          "line": 459,
          "column": 8,
          "position": 4456
        },
        "endLoc": {
          "line": 474,
          "column": 25,
          "position": 4564
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-chat-advanced.ts",
        "start": 429,
        "end": 444,
        "startLoc": {
          "line": 429,
          "column": 3,
          "position": 4185
        },
        "endLoc": {
          "line": 444,
          "column": 24,
          "position": 4293
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", async (req: Request, res: Response) => {\n  try {\n    const { organizationId } = req.params;\n    const { reason } = req.body;\n\n    if (!reason || typeof reason !== 'string') {\n      res.status(400).json({\n        success: false,\n        error: 'Reason is required',\n        code: 'REASON_REQUIRED'\n      });\n      return;\n    }\n\n    await aiBudgetUXService.deactivateReadOnlyMode",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-budget-ux.ts",
        "start": 373,
        "end": 387,
        "startLoc": {
          "line": 373,
          "column": 40,
          "position": 3029
        },
        "endLoc": {
          "line": 387,
          "column": 23,
          "position": 3158
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\ai-budget-ux.ts",
        "start": 334,
        "end": 348,
        "startLoc": {
          "line": 334,
          "column": 38,
          "position": 2735
        },
        "endLoc": {
          "line": 348,
          "column": 21,
          "position": 2864
        }
      }
    },
    {
      "format": "typescript",
      "lines": 74,
      "fragment": ",\n    });\n  } catch (error) {\n    console.error('Error getting insights:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get insights',\n      message: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\n/**\n * @swagger\n * /v1/ai-analytics/trends:\n *   get:\n *     summary: Get AI trends\n *     description: Get trend data for an organization\n *     tags: [AI Analytics]\n *     security:\n *       - bearerAuth: []\n *     parameters:\n *       - in: query\n *         name: organizationId\n *         required: true\n *         schema:\n *           type: string\n *           format: uuid\n *         description: Organization ID\n *       - in: query\n *         name: trendType\n *         schema:\n *           type: string\n *         description: Filter by trend type\n *       - in: query\n *         name: period\n *         schema:\n *           type: string\n *           enum: [daily, weekly, monthly]\n *         description: Filter by trend period\n *     responses:\n *       200:\n *         description: Trends retrieved successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                 data:\n *                   type: array\n *                   items:\n *                     type: object\n *                     properties:\n *                       id:\n *                         type: string\n *                       name:\n *                         type: string\n *                       type:\n *                         type: string\n *                       data:\n *                         type: object\n *                       period:\n *                         type: string\n *                       createdAt:\n *                         type: string\n *       400:\n *         description: Invalid request parameters\n *       401:\n *         description: Unauthorized\n *       500:\n *         description: Internal server error\n */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-analytics.ts",
        "start": 429,
        "end": 502,
        "startLoc": {
          "line": 429,
          "column": 9,
          "position": 1405
        },
        "endLoc": {
          "line": 502,
          "column": 4,
          "position": 1495
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\next-ai-platform.ts",
        "start": 423,
        "end": 480,
        "startLoc": {
          "line": 423,
          "column": 17,
          "position": 1120
        },
        "endLoc": {
          "line": 480,
          "column": 4,
          "position": 1210
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ".getHealthStatus();\n    \n    res.status(200).json({\n      success: true,\n      data: healthStatus,\n    });\n  } catch (error) {\n    console.error('Error getting health status:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get health status',\n      message: error instanceof Error ? error.message : 'Unknown error',\n    });\n  }\n});\n\nexport { router as aiAnalyticsRoutes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\ai-analytics.ts",
        "start": 736,
        "end": 752,
        "startLoc": {
          "line": 736,
          "column": 19,
          "position": 2547
        },
        "endLoc": {
          "line": 752,
          "column": 18,
          "position": 2677
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\next-ai-platform.ts",
        "start": 796,
        "end": 812,
        "startLoc": {
          "line": 796,
          "column": 22,
          "position": 2453
        },
        "endLoc": {
          "line": 812,
          "column": 21,
          "position": 2583
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ", {\n      traceId,\n      filters,\n      count: rules.length\n    });\n\n    res.json({\n      success: true,\n      data: {\n        rules,\n        count: rules.length,\n        filters\n      },\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n\n  } catch (error) {\n    structuredLogger.error('Failed to get threat detection rules'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-security.ts",
        "start": 287,
        "end": 305,
        "startLoc": {
          "line": 287,
          "column": 35,
          "position": 2458
        },
        "endLoc": {
          "line": 305,
          "column": 39,
          "position": 2564
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-security.ts",
        "start": 190,
        "end": 208,
        "startLoc": {
          "line": 190,
          "column": 29,
          "position": 1718
        },
        "endLoc": {
          "line": 208,
          "column": 33,
          "position": 1824
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "});\n\n    res.status(201).json({\n      success: true,\n      data: rule,\n      timestamp: new Date().toISOString(),\n      traceId\n    });\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid rule data',\n        details: error.errors,\n        traceId\n      });\n    }\n\n    structuredLogger.error('Failed to create threat detection rule'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-security.ts",
        "start": 334,
        "end": 353,
        "startLoc": {
          "line": 334,
          "column": 5,
          "position": 2789
        },
        "endLoc": {
          "line": 353,
          "column": 41,
          "position": 2924
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-security.ts",
        "start": 237,
        "end": 256,
        "startLoc": {
          "line": 237,
          "column": 5,
          "position": 2049
        },
        "endLoc": {
          "line": 256,
          "column": 35,
          "position": 2184
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: 'Failed to update report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 215,
        "end": 228,
        "startLoc": {
          "line": 215,
          "column": 9,
          "position": 1760
        },
        "endLoc": {
          "line": 228,
          "column": 26,
          "position": 1861
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 16,
          "position": 861
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n      reportId: req.params.reportId,\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: error",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 306,
        "end": 320,
        "startLoc": {
          "line": 306,
          "column": 18,
          "position": 2374
        },
        "endLoc": {
          "line": 320,
          "column": 6,
          "position": 2486
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 214,
        "end": 108,
        "startLoc": {
          "line": 214,
          "column": 16,
          "position": 1749
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ");\n    \n    if (!dashboard) {\n      return res.status(404).json({\n        success: false,\n        error: 'Dashboard not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: dashboard\n    });\n  } catch (error) {\n    logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-performance-monitoring.ts",
        "start": 243,
        "end": 257,
        "startLoc": {
          "line": 243,
          "column": 8,
          "position": 2310
        },
        "endLoc": {
          "line": 257,
          "column": 7,
          "position": 2399
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\data-analytics-dashboard.ts",
        "start": 76,
        "end": 90,
        "startLoc": {
          "line": 76,
          "column": 12,
          "position": 842
        },
        "endLoc": {
          "line": 90,
          "column": 17,
          "position": 929
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ".parse(req.query);\n    \n    // Convertir strings de fecha a objetos Date\n    if (filters.startTime) {\n      filters.startTime = new Date(filters.startTime as string);\n    }\n    if (filters.endTime) {\n      filters.endTime = new Date(filters.endTime as string);\n    }\n    \n    const traces",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-observability.ts",
        "start": 298,
        "end": 308,
        "startLoc": {
          "line": 298,
          "column": 19,
          "position": 2677
        },
        "endLoc": {
          "line": 308,
          "column": 7,
          "position": 2766
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-observability.ts",
        "start": 202,
        "end": 212,
        "startLoc": {
          "line": 202,
          "column": 17,
          "position": 1939
        },
        "endLoc": {
          "line": 212,
          "column": 5,
          "position": 2028
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ".listAlertRules();\n    \n    res.json({\n      success: true,\n      data: rules,\n      count: rules.length\n    });\n  } catch (error) {\n    logger.error('Error listing alert rules', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to list alert rules',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// GET /api/advanced-metrics-alerts/alert-rules/:id",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 173,
        "end": 190,
        "startLoc": {
          "line": 173,
          "column": 21,
          "position": 1764
        },
        "endLoc": {
          "line": 190,
          "column": 52,
          "position": 1892
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 241,
        "end": 258,
        "startLoc": {
          "line": 241,
          "column": 15,
          "position": 2663
        },
        "endLoc": {
          "line": 258,
          "column": 48,
          "position": 2790
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".getAlertRule(id);\n    \n    if (!rule) {\n      return res.status(404).json({\n        success: false,\n        error: 'Alert rule not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: rule\n    });\n  } catch (error) {\n    logger.error('Error getting alert rule', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get alert rule',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// POST /api/advanced-metrics-alerts/alert-rules",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 194,
        "end": 217,
        "startLoc": {
          "line": 194,
          "column": 21,
          "position": 1951
        },
        "endLoc": {
          "line": 217,
          "column": 49,
          "position": 2117
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 262,
        "end": 285,
        "startLoc": {
          "line": 262,
          "column": 15,
          "position": 2849
        },
        "endLoc": {
          "line": 285,
          "column": 45,
          "position": 3014
        }
      }
    },
    {
      "format": "typescript",
      "lines": 28,
      "fragment": ",\n      actions: validatedData.actions\n    });\n\n    res.status(201).json({\n      success: true,\n      data: rule,\n      message: 'Alert rule created successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating alert rule', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create alert rule',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// PUT /api/advanced-metrics-alerts/alert-rules/:id",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 230,
        "end": 257,
        "startLoc": {
          "line": 230,
          "column": 7,
          "position": 2266
        },
        "endLoc": {
          "line": 257,
          "column": 52,
          "position": 2465
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 299,
        "end": 326,
        "startLoc": {
          "line": 299,
          "column": 5,
          "position": 3164
        },
        "endLoc": {
          "line": 326,
          "column": 48,
          "position": 3363
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ".updateAlertRule(id, updates);\n    \n    if (!updatedRule) {\n      return res.status(404).json({\n        success: false,\n        error: 'Alert rule not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: updatedRule,\n      message: 'Alert rule updated successfully'\n    });\n  } catch (error) {\n    logger.error('Error updating alert rule', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update alert rule',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// DELETE /api/advanced-metrics-alerts/alert-rules/:id",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 263,
        "end": 287,
        "startLoc": {
          "line": 263,
          "column": 21,
          "position": 2538
        },
        "endLoc": {
          "line": 287,
          "column": 55,
          "position": 2714
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 332,
        "end": 356,
        "startLoc": {
          "line": 332,
          "column": 15,
          "position": 3435
        },
        "endLoc": {
          "line": 356,
          "column": 51,
          "position": 3610
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ".deleteAlertRule(id);\n    \n    if (!deleted) {\n      return res.status(404).json({\n        success: false,\n        error: 'Alert rule not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      message: 'Alert rule deleted successfully'\n    });\n  } catch (error) {\n    logger.error('Error deleting alert rule', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to delete alert rule',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// POST /api/advanced-metrics-alerts/alert-rules/evaluate",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 291,
        "end": 314,
        "startLoc": {
          "line": 291,
          "column": 21,
          "position": 2773
        },
        "endLoc": {
          "line": 314,
          "column": 58,
          "position": 2939
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 360,
        "end": 383,
        "startLoc": {
          "line": 360,
          "column": 15,
          "position": 3669
        },
        "endLoc": {
          "line": 383,
          "column": 49,
          "position": 3834
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ");\n    \n    if (!alert) {\n      return res.status(404).json({\n        success: false,\n        error: 'Alert not found'\n      });\n    }\n\n    res.json({\n      success: true,\n      data: alert\n    });\n  } catch (error) {\n    logger.error('Error getting alert'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 369,
        "end": 383,
        "startLoc": {
          "line": 369,
          "column": 3,
          "position": 3478
        },
        "endLoc": {
          "line": 383,
          "column": 22,
          "position": 3570
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-performance-monitoring.ts",
        "start": 154,
        "end": 168,
        "startLoc": {
          "line": 154,
          "column": 8,
          "position": 1601
        },
        "endLoc": {
          "line": 168,
          "column": 24,
          "position": 1694
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error creating SLA'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 526,
        "end": 536,
        "startLoc": {
          "line": 526,
          "column": 5,
          "position": 4752
        },
        "endLoc": {
          "line": 536,
          "column": 21,
          "position": 4832
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "router.get('/reports/:period', async (req: Request, res: Response) => {\n  try {\n    const { period } = req.params;\n    \n    if (!['hourly', 'daily', 'weekly', 'monthly'].includes(period)) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid period. Must be: hourly, daily, weekly, or monthly'\n      });\n    }\n\n    const report = await metricsAlertsService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 594,
        "end": 605,
        "startLoc": {
          "line": 594,
          "column": 1,
          "position": 5329
        },
        "endLoc": {
          "line": 605,
          "column": 21,
          "position": 5449
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 571,
        "end": 582,
        "startLoc": {
          "line": 571,
          "column": 1,
          "position": 5376
        },
        "endLoc": {
          "line": 582,
          "column": 15,
          "position": 5495
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "router.get('/config', async (req: Request, res: Response) => {\n  try {\n    res.json({\n      success: true,\n      data: defaultConfig\n    });\n  } catch (error) {\n    logger.error('Error getting configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// PUT /api/advanced-metrics-alerts/config",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 624,
        "end": 640,
        "startLoc": {
          "line": 624,
          "column": 1,
          "position": 5601
        },
        "endLoc": {
          "line": 640,
          "column": 43,
          "position": 5743
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 539,
        "end": 446,
        "startLoc": {
          "line": 539,
          "column": 1,
          "position": 4829
        },
        "endLoc": {
          "line": 446,
          "column": 49,
          "position": 3966
        }
      }
    },
    {
      "format": "typescript",
      "lines": 33,
      "fragment": "router.put('/config', async (req: Request, res: Response) => {\n  try {\n    const validatedData = UpdateConfigSchema.parse(req.body);\n    \n    // Actualizar configuracin (en una implementacin real, esto se persistira)\n    Object.assign(defaultConfig, validatedData);\n    \n    res.json({\n      success: true,\n      data: defaultConfig,\n      message: 'Configuration updated successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Error updating configuration', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Failed to update configuration',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\n// ===== HEALTH CHECK =====\n\n// GET /api/advanced-metrics-alerts/health",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 641,
        "end": 673,
        "startLoc": {
          "line": 641,
          "column": 1,
          "position": 5745
        },
        "endLoc": {
          "line": 673,
          "column": 43,
          "position": 5993
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\automated-testing.ts",
        "start": 556,
        "end": 478,
        "startLoc": {
          "line": 556,
          "column": 1,
          "position": 4973
        },
        "endLoc": {
          "line": 478,
          "column": 49,
          "position": 4216
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "}\n    };\n\n    res.json({\n      success: true,\n      data: health\n    });\n  } catch (error) {\n    logger.error('Error checking health', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed',\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nexport default router;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-metrics-alerts.ts",
        "start": 692,
        "end": 709,
        "startLoc": {
          "line": 692,
          "column": 7,
          "position": 6198
        },
        "endLoc": {
          "line": 709,
          "column": 2,
          "position": 6321
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 500,
        "end": 622,
        "startLoc": {
          "line": 500,
          "column": 7,
          "position": 4450
        },
        "endLoc": {
          "line": 622,
          "column": 2,
          "position": 5503
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/ai/analyze-seasonality'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 104,
        "end": 114,
        "startLoc": {
          "line": 104,
          "column": 18,
          "position": 1259
        },
        "endLoc": {
          "line": 114,
          "column": 26,
          "position": 1365
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/ai/generate-recommendations'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 117,
        "end": 127,
        "startLoc": {
          "line": 117,
          "column": 19,
          "position": 1409
        },
        "endLoc": {
          "line": 127,
          "column": 31,
          "position": 1515
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\n// PR-13: Metrics routes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 130,
        "end": 140,
        "startLoc": {
          "line": 130,
          "column": 24,
          "position": 1559
        },
        "endLoc": {
          "line": 140,
          "column": 25,
          "position": 1661
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 7,
          "position": 1211
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\n// PR-14: AutoML routes",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 168,
        "end": 178,
        "startLoc": {
          "line": 168,
          "column": 13,
          "position": 1948
        },
        "endLoc": {
          "line": 178,
          "column": 24,
          "position": 2050
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 7,
          "position": 1211
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/ml/predict'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 182,
        "end": 192,
        "startLoc": {
          "line": 182,
          "column": 11,
          "position": 2100
        },
        "endLoc": {
          "line": 192,
          "column": 14,
          "position": 2206
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/ml/evaluate'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 195,
        "end": 205,
        "startLoc": {
          "line": 195,
          "column": 8,
          "position": 2250
        },
        "endLoc": {
          "line": 205,
          "column": 15,
          "position": 2356
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.get",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 215,
        "end": 225,
        "startLoc": {
          "line": 215,
          "column": 14,
          "position": 2493
        },
        "endLoc": {
          "line": 225,
          "column": 4,
          "position": 2597
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 5,
          "position": 1213
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/sentiment/batch'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 237,
        "end": 247,
        "startLoc": {
          "line": 237,
          "column": 17,
          "position": 2724
        },
        "endLoc": {
          "line": 247,
          "column": 19,
          "position": 2830
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.get('/sentiment/trends'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 250,
        "end": 260,
        "startLoc": {
          "line": 250,
          "column": 22,
          "position": 2874
        },
        "endLoc": {
          "line": 260,
          "column": 20,
          "position": 2980
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 225,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 225,
          "column": 13,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/azure/generate-image'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 272,
        "end": 282,
        "startLoc": {
          "line": 272,
          "column": 5,
          "position": 3105
        },
        "endLoc": {
          "line": 282,
          "column": 24,
          "position": 3211
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/azure/text-to-speech'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 285,
        "end": 295,
        "startLoc": {
          "line": 285,
          "column": 14,
          "position": 3255
        },
        "endLoc": {
          "line": 295,
          "column": 24,
          "position": 3361
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.get('/azure/usage-stats'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 298,
        "end": 308,
        "startLoc": {
          "line": 298,
          "column": 13,
          "position": 3405
        },
        "endLoc": {
          "line": 308,
          "column": 21,
          "position": 3511
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 225,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 225,
          "column": 13,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.post('/search/news'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 320,
        "end": 330,
        "startLoc": {
          "line": 320,
          "column": 7,
          "position": 3636
        },
        "endLoc": {
          "line": 330,
          "column": 15,
          "position": 3742
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 101,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 101,
          "column": 25,
          "position": 1215
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "(req, res);\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      res.status(400).json({ error: 'Validation error', details: error.errors });\n    } else {\n      res.status(500).json({ error: 'Internal server error' });\n    }\n  }\n});\n\nrouter.get('/search/trending'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 333,
        "end": 343,
        "startLoc": {
          "line": 333,
          "column": 11,
          "position": 3786
        },
        "endLoc": {
          "line": 343,
          "column": 19,
          "position": 3892
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-features.ts",
        "start": 91,
        "end": 225,
        "startLoc": {
          "line": 91,
          "column": 14,
          "position": 1109
        },
        "endLoc": {
          "line": 225,
          "column": 13,
          "position": 2599
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "= z.object({\n  organizationId: z.string().min(1),\n  reportType: z.enum(['daily', 'weekly', 'monthly', 'ad_hoc']),\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime(),\n  generatedBy: z.string().min(1),\n});\n\nconst GetStatsSchema = z.object({\n  organizationId: z.string().min(1),\n});\n\n// Routes\n\n// Error Management",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-error-management.ts",
        "start": 186,
        "end": 200,
        "startLoc": {
          "line": 186,
          "column": 2,
          "position": 2911
        },
        "endLoc": {
          "line": 200,
          "column": 20,
          "position": 3045
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dlg-grooming.ts",
        "start": 112,
        "end": 85,
        "startLoc": {
          "line": 112,
          "column": 2,
          "position": 1704
        },
        "endLoc": {
          "line": 85,
          "column": 55,
          "position": 1027
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ".getPatterns(filters.organizationId, filters);\n    \n    res.json({\n      success: true,\n      data: {\n        patterns,\n        total: patterns.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting patterns'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-error-management.ts",
        "start": 277,
        "end": 289,
        "startLoc": {
          "line": 277,
          "column": 31,
          "position": 3762
        },
        "endLoc": {
          "line": 289,
          "column": 25,
          "position": 3851
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\dlg-grooming.ts",
        "start": 203,
        "end": 215,
        "startLoc": {
          "line": 203,
          "column": 19,
          "position": 2555
        },
        "endLoc": {
          "line": 215,
          "column": 29,
          "position": 2644
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ".getAlerts(filters.organizationId, filters);\n    \n    res.json({\n      success: true,\n      data: {\n        alerts,\n        total: alerts.length,\n        filters\n      },\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error getting alerts', { error });\n    res.status(400).json({\n      success: false,\n      error: 'Invalid request data',\n      details: error.errors\n    });\n  }\n});\n\nadvancedErrorManagementRouter",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-error-management.ts",
        "start": 367,
        "end": 388,
        "startLoc": {
          "line": 367,
          "column": 31,
          "position": 4524
        },
        "endLoc": {
          "line": 388,
          "column": 30,
          "position": 4671
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\inventory-kardex.ts",
        "start": 296,
        "end": 317,
        "startLoc": {
          "line": 296,
          "column": 23,
          "position": 3225
        },
        "endLoc": {
          "line": 317,
          "column": 22,
          "position": 3372
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "(\n      reportData.organizationId,\n      reportData.reportType,\n      reportData.startDate,\n      reportData.endDate,\n      reportData.generatedBy\n    );\n    \n    res.status(201).json({\n      success: true,\n      data: report,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error generating error report'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-error-management.ts",
        "start": 488,
        "end": 502,
        "startLoc": {
          "line": 488,
          "column": 20,
          "position": 5537
        },
        "endLoc": {
          "line": 502,
          "column": 32,
          "position": 5635
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\supplier-scorecard.ts",
        "start": 376,
        "end": 390,
        "startLoc": {
          "line": 376,
          "column": 23,
          "position": 4296
        },
        "endLoc": {
          "line": 390,
          "column": 35,
          "position": 4394
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "},\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    structuredLogger.error('Error checking health', { error });\n    res.status(500).json({\n      success: false,\n      error: 'Health check failed'\n    });\n  }\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-error-management.ts",
        "start": 547,
        "end": 559,
        "startLoc": {
          "line": 547,
          "column": 7,
          "position": 6007
        },
        "endLoc": {
          "line": 559,
          "column": 7,
          "position": 6094
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\reportes-mensuales.ts",
        "start": 258,
        "end": 270,
        "startLoc": {
          "line": 258,
          "column": 7,
          "position": 2572
        },
        "endLoc": {
          "line": 270,
          "column": 30,
          "position": 2659
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ");\n    \n    if (!environment) {\n      return res.status(404).json({\n        success: false,\n        error: 'Environment not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: environment\n    });\n  } catch (error) {\n    logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-deployment-automation.ts",
        "start": 232,
        "end": 246,
        "startLoc": {
          "line": 232,
          "column": 8,
          "position": 2344
        },
        "endLoc": {
          "line": 246,
          "column": 7,
          "position": 2433
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\configuration.ts",
        "start": 228,
        "end": 242,
        "startLoc": {
          "line": 228,
          "column": 5,
          "position": 1817
        },
        "endLoc": {
          "line": 242,
          "column": 4,
          "position": 1906
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ");\n    \n    if (!job) {\n      return res.status(404).json({\n        success: false,\n        error: 'Job not found'\n      });\n    }\n    \n    res.json({\n      success: true,\n      data: job\n    });\n  } catch (error) {\n    logger.error('Error updating job status:'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-deployment-automation.ts",
        "start": 375,
        "end": 389,
        "startLoc": {
          "line": 375,
          "column": 9,
          "position": 3534
        },
        "endLoc": {
          "line": 389,
          "column": 29,
          "position": 3627
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-deployment-automation.ts",
        "start": 348,
        "end": 362,
        "startLoc": {
          "line": 348,
          "column": 3,
          "position": 3314
        },
        "endLoc": {
          "line": 362,
          "column": 21,
          "position": 3407
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ".getStatistics();\n    \n    res.json({\n      success: true,\n      data: statistics\n    });\n  } catch (error) {\n    logger.error('Error getting statistics:', error);\n    res.status(500).json({\n      success: false,\n      error: 'Failed to retrieve statistics'\n    });\n  }\n});\n\n// Health check endpoint\nrouter.get('/health', async (req, res) => {\n  try {\n    const statistics = await advancedDeploymentAutomationService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-deployment-automation.ts",
        "start": 641,
        "end": 659,
        "startLoc": {
          "line": 641,
          "column": 36,
          "position": 5618
        },
        "endLoc": {
          "line": 659,
          "column": 36,
          "position": 5748
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-performance-monitoring.ts",
        "start": 411,
        "end": 429,
        "startLoc": {
          "line": 411,
          "column": 37,
          "position": 3700
        },
        "endLoc": {
          "line": 429,
          "column": 37,
          "position": 3830
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "}\n    });\n  } catch (error) {\n    logger.error('Error checking health:', error);\n    res.status(500).json({\n      success: false,\n      status: 'unhealthy',\n      error: 'Health check failed'\n    });\n  }\n});\n\nexport default router;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-deployment-automation.ts",
        "start": 670,
        "end": 682,
        "startLoc": {
          "line": 670,
          "column": 7,
          "position": 5835
        },
        "endLoc": {
          "line": 682,
          "column": 2,
          "position": 5915
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-performance-monitoring.ts",
        "start": 439,
        "end": 451,
        "startLoc": {
          "line": 439,
          "column": 7,
          "position": 3908
        },
        "endLoc": {
          "line": 451,
          "column": 2,
          "position": 3988
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to create configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 236,
        "end": 246,
        "startLoc": {
          "line": 236,
          "column": 5,
          "position": 2600
        },
        "endLoc": {
          "line": 246,
          "column": 33,
          "position": 2680
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n      message: 'Configuration updated successfully'\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to update configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 285,
        "end": 297,
        "startLoc": {
          "line": 285,
          "column": 7,
          "position": 2988
        },
        "endLoc": {
          "line": 297,
          "column": 33,
          "position": 3077
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 455,
        "end": 146,
        "startLoc": {
          "line": 455,
          "column": 14,
          "position": 4054
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n      message: error instanceof Error ? error.message : 'Unknown error'\n    });\n  }\n});\n\nrouter.delete('/configs/:id', async (req, res) => {\n  try {\n    const { id } = req.params;\n    const { userId } = req.body;\n\n    const success = await advancedConfigurationManagementService",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 304,
        "end": 315,
        "startLoc": {
          "line": 304,
          "column": 33,
          "position": 3143
        },
        "endLoc": {
          "line": 315,
          "column": 39,
          "position": 3245
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 252,
        "end": 263,
        "startLoc": {
          "line": 252,
          "column": 40,
          "position": 2624
        },
        "endLoc": {
          "line": 263,
          "column": 22,
          "position": 2726
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async (req, res) => {\n  try {\n    const { id } = req.params;\n    const config = await advancedConfigurationManagementService.getConfig(id);\n\n    if (!config) {\n      return res.status(404).json({\n        success: false,\n        error: 'Configuration not found'\n      });\n    }\n\n    const",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 351,
        "end": 363,
        "startLoc": {
          "line": 351,
          "column": 24,
          "position": 3495
        },
        "endLoc": {
          "line": 363,
          "column": 6,
          "position": 3596
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 144,
        "end": 156,
        "startLoc": {
          "line": 144,
          "column": 15,
          "position": 1871
        },
        "endLoc": {
          "line": 156,
          "column": 7,
          "position": 1972
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n      configId: id,\n      isValid: validation.isValid,\n      errorsCount: validation.errors.length,\n      warningsCount: validation.warnings.length\n    });\n\n    res.json({\n      success: true,\n      data: validation\n    });\n  } catch (error) {\n    logger.error('Failed to validate configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 365,
        "end": 377,
        "startLoc": {
          "line": 365,
          "column": 26,
          "position": 3619
        },
        "endLoc": {
          "line": 377,
          "column": 35,
          "position": 3707
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 313,
        "end": 325,
        "startLoc": {
          "line": 313,
          "column": 33,
          "position": 3100
        },
        "endLoc": {
          "line": 325,
          "column": 42,
          "position": 3188
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to create template'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 467,
        "end": 477,
        "startLoc": {
          "line": 467,
          "column": 5,
          "position": 4429
        },
        "endLoc": {
          "line": 477,
          "column": 28,
          "position": 4509
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to generate configurations from template'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 509,
        "end": 519,
        "startLoc": {
          "line": 509,
          "column": 5,
          "position": 4757
        },
        "endLoc": {
          "line": 519,
          "column": 50,
          "position": 4837
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to create deployment'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 548,
        "end": 558,
        "startLoc": {
          "line": 548,
          "column": 5,
          "position": 5075
        },
        "endLoc": {
          "line": 558,
          "column": 30,
          "position": 5155
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".length\n    });\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to export configurations'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 747,
        "end": 758,
        "startLoc": {
          "line": 747,
          "column": 2,
          "position": 6709
        },
        "endLoc": {
          "line": 758,
          "column": 34,
          "position": 6793
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 180,
        "end": 146,
        "startLoc": {
          "line": 180,
          "column": 5,
          "position": 2154
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "});\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    }\n\n    logger.error('Failed to import configurations'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 793,
        "end": 803,
        "startLoc": {
          "line": 793,
          "column": 5,
          "position": 7066
        },
        "endLoc": {
          "line": 803,
          "column": 34,
          "position": 7146
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\project-completion-deployment.ts",
        "start": 136,
        "end": 146,
        "startLoc": {
          "line": 136,
          "column": 5,
          "position": 1392
        },
        "endLoc": {
          "line": 146,
          "column": 28,
          "position": 1472
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: 'Failed to create deployment'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-cicd.ts",
        "start": 108,
        "end": 121,
        "startLoc": {
          "line": 108,
          "column": 24,
          "position": 1044
        },
        "endLoc": {
          "line": 121,
          "column": 30,
          "position": 1145
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 16,
          "position": 861
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: 'Failed to create artifact'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-cicd.ts",
        "start": 321,
        "end": 334,
        "startLoc": {
          "line": 321,
          "column": 22,
          "position": 2656
        },
        "endLoc": {
          "line": 334,
          "column": 28,
          "position": 2757
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 16,
          "position": 861
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: 'Failed to record test result'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-cicd.ts",
        "start": 417,
        "end": 430,
        "startLoc": {
          "line": 417,
          "column": 25,
          "position": 3359
        },
        "endLoc": {
          "line": 430,
          "column": 31,
          "position": 3460
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 16,
          "position": 861
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n      body: req.body\n    });\n    \n    if (error instanceof z.ZodError) {\n      res.status(400).json({\n        success: false,\n        error: 'Validation error',\n        details: error.errors\n      });\n    } else {\n      res.status(500).json({\n        success: false,\n        error: 'Failed to update configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-cicd.ts",
        "start": 514,
        "end": 527,
        "startLoc": {
          "line": 514,
          "column": 12,
          "position": 4111
        },
        "endLoc": {
          "line": 527,
          "column": 33,
          "position": 4212
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 95,
        "end": 108,
        "startLoc": {
          "line": 95,
          "column": 16,
          "position": 861
        },
        "endLoc": {
          "line": 108,
          "column": 26,
          "position": 962
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ".getServiceStats();\n    \n    res.json({\n      success: true,\n      data: stats\n    });\n  } catch (error) {\n    structuredLogger.error('Failed to get service stats', error as Error, {\n      operation: 'stats_get'\n    });\n    \n    res.status(500).json({\n      success: false,\n      error: 'Failed to get service stats'\n    });\n  }\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-cicd.ts",
        "start": 570,
        "end": 588,
        "startLoc": {
          "line": 570,
          "column": 12,
          "position": 4467
        },
        "endLoc": {
          "line": 588,
          "column": 80,
          "position": 4579
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-reporting.ts",
        "start": 454,
        "end": 472,
        "startLoc": {
          "line": 454,
          "column": 17,
          "position": 3366
        },
        "endLoc": {
          "line": 472,
          "column": 7,
          "position": 3478
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ",\n        total: result.total,\n        filters,\n        timestamp: new Date().toISOString(),\n        traceId\n      }\n    });\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return res.status(400).json({\n        success: false,\n        error: 'Invalid filter parameters',\n        details: error.errors,\n        traceId\n      });\n    }\n\n    structuredLogger.error('Failed to get compliance violations'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\routes\\advanced-audit-compliance.ts",
        "start": 354,
        "end": 372,
        "startLoc": {
          "line": 354,
          "column": 11,
          "position": 3069
        },
        "endLoc": {
          "line": 372,
          "column": 38,
          "position": 3191
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-audit-compliance.ts",
        "start": 190,
        "end": 208,
        "startLoc": {
          "line": 190,
          "column": 7,
          "position": 1879
        },
        "endLoc": {
          "line": 208,
          "column": 29,
          "position": 2001
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n            content: {\n              'application/json': {\n                schema: {\n                  type: 'object',\n                  properties: {\n                    success: { type: 'boolean', example: true },\n                    data: {\n                      type: 'array',\n                      items: {\n                        type: 'object',\n                        properties: {\n                          id: { type: 'string',",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\openapi\\spec.ts",
        "start": 434,
        "end": 446,
        "startLoc": {
          "line": 434,
          "column": 33,
          "position": 3155
        },
        "endLoc": {
          "line": 446,
          "column": 2,
          "position": 3250
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\openapi\\spec.ts",
        "start": 226,
        "end": 238,
        "startLoc": {
          "line": 226,
          "column": 32,
          "position": 1518
        },
        "endLoc": {
          "line": 238,
          "column": 2,
          "position": 1614
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "}\n\n  if (errors.length > 0) {\n    const problemDetails: ProblemDetails = {\n      type: 'https://econeura.com/errors/validation-failed',\n      title: 'Validation Failed',\n      status: 400,\n      detail: 'Request validation failed',\n      instance: req.url,\n      timestamp: new Date().toISOString(),\n      errors: errors\n    };\n\n    res.status(400).json(problemDetails);\n    return;\n  }\n\n  next();\n};",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\validation.middleware.ts",
        "start": 131,
        "end": 149,
        "startLoc": {
          "line": 131,
          "column": 3,
          "position": 1343
        },
        "endLoc": {
          "line": 149,
          "column": 2,
          "position": 1465
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\middleware\\validation.middleware.ts",
        "start": 67,
        "end": 85,
        "startLoc": {
          "line": 67,
          "column": 3,
          "position": 726
        },
        "endLoc": {
          "line": 85,
          "column": 2,
          "position": 848
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "= (req: Request, res: Response, next: NextFunction): void => {\n  // Sanitizar body\n  if (req.body && typeof req.body === 'object') {\n    req.body = sanitizeObject(req.body);\n  }\n\n  // Sanitizar query parameters\n  if (req.query && typeof req.query === 'object') {\n    req.query = sanitizeObject(req.query);\n  }\n\n  // Sanitizar params\n  if (req.params && typeof req.params === 'object') {\n    req.params = sanitizeObject(req.params);\n  }\n\n  next();\n};\n\n// ========================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\security.middleware.ts",
        "start": 86,
        "end": 105,
        "startLoc": {
          "line": 86,
          "column": 2,
          "position": 569
        },
        "endLoc": {
          "line": 105,
          "column": 76,
          "position": 742
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\middleware\\security.ts",
        "start": 108,
        "end": 127,
        "startLoc": {
          "line": 108,
          "column": 2,
          "position": 887
        },
        "endLoc": {
          "line": 127,
          "column": 31,
          "position": 1063
        }
      }
    },
    {
      "format": "typescript",
      "lines": 41,
      "fragment": ": ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS', 'HEAD'],\n  allowedHeaders: [\n    'Content-Type',\n    'Authorization',\n    'X-Requested-With',\n    'X-Org-ID',\n    'X-User-ID',\n    'X-Correlation-ID',\n    'X-Tenant-ID',\n    'X-User-Role',\n    'X-Permissions',\n    'X-Session-ID',\n    'X-Request-ID',\n    'X-CSRF-Token',\n    'X-API-Key',\n    'X-Client-Version',\n    'X-Client-Platform',\n    'Accept',\n    'Accept-Language',\n    'Accept-Encoding',\n    'Cache-Control',\n    'Pragma'\n  ],\n  exposedHeaders: [\n    'X-System-Mode',\n    'X-Est-Cost-EUR',\n    'X-Budget-Pct',\n    'X-Latency-ms',\n    'X-Route',\n    'X-RLS-Policies-Applied',\n    'X-RLS-Rules-Evaluated',\n    'X-RLS-Execution-Time',\n    'X-RLS-Tenant-Isolation',\n    'X-RateLimit-Limit',\n    'X-RateLimit-Remaining',\n    'X-RateLimit-Reset',\n    'X-Cache-Status',\n    'X-Response-Time',\n    'X-Request-ID'\n  ],\n  maxAge",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\security-enhanced.middleware.ts",
        "start": 49,
        "end": 89,
        "startLoc": {
          "line": 49,
          "column": 8,
          "position": 289
        },
        "endLoc": {
          "line": 89,
          "column": 7,
          "position": 473
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\security-config.service.ts",
        "start": 77,
        "end": 117,
        "startLoc": {
          "line": 77,
          "column": 15,
          "position": 449
        },
        "endLoc": {
          "line": 117,
          "column": 12,
          "position": 633
        }
      }
    },
    {
      "format": "typescript",
      "lines": 40,
      "fragment": "\"https://cdn.jsdelivr.net\",\n        \"https://unpkg.com\"\n      ],\n      styleSrc: [\n        \"'self'\",\n        \"'unsafe-inline'\",\n        \"https://fonts.googleapis.com\",\n        \"https://cdn.jsdelivr.net\"\n      ],\n      fontSrc: [\n        \"'self'\",\n        \"https://fonts.gstatic.com\",\n        \"data:\"\n      ],\n      imgSrc: [\n        \"'self'\",\n        \"data:\",\n        \"https:\",\n        \"blob:\"\n      ],\n      connectSrc: [\n        \"'self'\",\n        \"https:\",\n        \"wss:\",\n        \"ws:\"\n      ],\n      mediaSrc: [\n        \"'self'\",\n        \"data:\",\n        \"blob:\"\n      ],\n      objectSrc: [\"'none'\"],\n      baseUri: [\"'self'\"],\n      formAction: [\"'self'\"],\n      frameAncestors: [\"'none'\"],\n      upgradeInsecureRequests: []\n    },\n    reportOnly: false\n  },\n  crossOriginEmbedderPolicy",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\security-enhanced.middleware.ts",
        "start": 103,
        "end": 142,
        "startLoc": {
          "line": 103,
          "column": 9,
          "position": 550
        },
        "endLoc": {
          "line": 142,
          "column": 26,
          "position": 735
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\security-config.service.ts",
        "start": 128,
        "end": 167,
        "startLoc": {
          "line": 128,
          "column": 15,
          "position": 695
        },
        "endLoc": {
          "line": 167,
          "column": 5,
          "position": 880
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ";\n    \n    const userId = req.headers['x-user-id'] as string || \n                   req.headers['x-subject'] as string;\n    \n    const role = req.headers['x-user-role'] as string || \n                 req.headers['x-role'] as string || \n                 'user';\n    \n    const permissions = req.headers['x-permissions'] as string ? \n                       (req.headers['x-permissions'] as string).split(',') : \n                       [",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\rls-tenant.middleware.ts",
        "start": 35,
        "end": 46,
        "startLoc": {
          "line": 35,
          "column": 15,
          "position": 245
        },
        "endLoc": {
          "line": 46,
          "column": 2,
          "position": 371
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\middleware\\rls.ts",
        "start": 20,
        "end": 31,
        "startLoc": {
          "line": 20,
          "column": 10,
          "position": 190
        },
        "endLoc": {
          "line": 31,
          "column": 10,
          "position": 316
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "if (req.gatewayInfo?.serviceId) {\n          apiGateway.recordRequest(req.gatewayInfo.serviceId, responseTime, success);\n        }\n\n        // Decrementar contador de conexiones activas\n        if (req.gatewayInfo?.serviceId) {\n          const service = apiGateway.getService(req.gatewayInfo.serviceId);\n          if (service) {\n            service.currentConnections = Math.max(0, service.currentConnections - 1);\n          }\n        }\n\n        logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\middleware\\gateway.ts",
        "start": 204,
        "end": 216,
        "startLoc": {
          "line": 204,
          "column": 9,
          "position": 1740
        },
        "endLoc": {
          "line": 216,
          "column": 7,
          "position": 1853
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\middleware\\gateway.ts",
        "start": 156,
        "end": 168,
        "startLoc": {
          "line": 156,
          "column": 9,
          "position": 1323
        },
        "endLoc": {
          "line": 168,
          "column": 22,
          "position": 1436
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n      instance.status = 'completed';\n      instance.completedAt = new Date();\n      instance.updatedAt = new Date();\n      instance.history.push({\n        timestamp: new Date(),\n        action: 'workflow_completed',\n        message: 'Workflow completed successfully',\n      });\n      return;\n    }\n\n    // Encontrar transiciones disponibles",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\workflows.ts",
        "start": 758,
        "end": 770,
        "startLoc": {
          "line": 758,
          "column": 8,
          "position": 7337
        },
        "endLoc": {
          "line": 770,
          "column": 38,
          "position": 7427
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\workflows.ts",
        "start": 703,
        "end": 715,
        "startLoc": {
          "line": 703,
          "column": 11,
          "position": 6856
        },
        "endLoc": {
          "line": 715,
          "column": 32,
          "position": 6946
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "): Promise<Workflow[]> {\n    let workflows = Array.from(this.workflows.values());\n    \n    if (filters?.type) {\n      workflows = workflows.filter(w => w.type === filters.type);\n    }\n    \n    if (filters?.status) {\n      workflows = workflows.filter(w => w.status === filters.status);\n    }\n    \n    return",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\workflows.service.ts",
        "start": 231,
        "end": 242,
        "startLoc": {
          "line": 231,
          "column": 2,
          "position": 2640
        },
        "endLoc": {
          "line": 242,
          "column": 7,
          "position": 2760
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\workflows.ts",
        "start": 284,
        "end": 295,
        "startLoc": {
          "line": 284,
          "column": 16,
          "position": 2751
        },
        "endLoc": {
          "line": 295,
          "column": 3,
          "position": 2868
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('Cache warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 203,
        "end": 215,
        "startLoc": {
          "line": 203,
          "column": 25,
          "position": 1528
        },
        "endLoc": {
          "line": 215,
          "column": 22,
          "position": 1656
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('AI Router warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 244,
        "end": 256,
        "startLoc": {
          "line": 244,
          "column": 29,
          "position": 1882
        },
        "endLoc": {
          "line": 256,
          "column": 26,
          "position": 2010
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('Analytics warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 285,
        "end": 297,
        "startLoc": {
          "line": 285,
          "column": 29,
          "position": 2231
        },
        "endLoc": {
          "line": 297,
          "column": 26,
          "position": 2359
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('Security warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 326,
        "end": 338,
        "startLoc": {
          "line": 326,
          "column": 28,
          "position": 2580
        },
        "endLoc": {
          "line": 338,
          "column": 25,
          "position": 2708
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('FinOps warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 367,
        "end": 379,
        "startLoc": {
          "line": 367,
          "column": 26,
          "position": 2929
        },
        "endLoc": {
          "line": 379,
          "column": 23,
          "position": 3057
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('Health Monitor warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 408,
        "end": 420,
        "startLoc": {
          "line": 408,
          "column": 34,
          "position": 3278
        },
        "endLoc": {
          "line": 420,
          "column": 31,
          "position": 3406
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", { service, duration });\n      metrics.warmupServiceDuration.observe({ service, status: 'success' }, duration);\n\n    } catch (error) {\n      const duration = Date.now() - startTime;\n      this.results.set(service, {\n        service,\n        status: 'error',\n        duration,\n        error: error instanceof Error ? error.message : String(error)\n      });\n\n      structuredLogger.error('Endpoints warmup failed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 449,
        "end": 461,
        "startLoc": {
          "line": 449,
          "column": 29,
          "position": 3633
        },
        "endLoc": {
          "line": 461,
          "column": 26,
          "position": 3761
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\warmup-system.service.ts",
        "start": 162,
        "end": 174,
        "startLoc": {
          "line": 162,
          "column": 28,
          "position": 1179
        },
        "endLoc": {
          "line": 174,
          "column": 25,
          "position": 1307
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "= {\n      id: `report_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n      organizationId,\n      reportType: reportType as any,\n      period: { startDate, endDate },\n      summary,\n      data,\n      generatedBy,\n      createdAt: new Date().toISOString()\n    };\n\n    structuredLogger.info('SEPA robust report generated'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\sepa-robust.service.ts",
        "start": 730,
        "end": 741,
        "startLoc": {
          "line": 730,
          "column": 2,
          "position": 6643
        },
        "endLoc": {
          "line": 741,
          "column": 31,
          "position": 6748
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\supplier-scorecard.service.ts",
        "start": 796,
        "end": 807,
        "startLoc": {
          "line": 796,
          "column": 2,
          "position": 7290
        },
        "endLoc": {
          "line": 807,
          "column": 28,
          "position": 7395
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n        transactionsCount: transactions.length,\n        processedCount: transactions.length - errors.length,\n        errorsCount: errors.length,\n        status: errors.length === 0 ? 'success' : errors.length < transactions.length ? 'partial' : 'failed',\n        errors,\n        createdAt: new Date()\n      };\n    } catch (error) {\n      return {\n        fileId: `mt940_error_",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\sepa-parser.service.ts",
        "start": 100,
        "end": 110,
        "startLoc": {
          "line": 100,
          "column": 17,
          "position": 869
        },
        "endLoc": {
          "line": 110,
          "column": 14,
          "position": 979
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\sepa-parser.service.ts",
        "start": 35,
        "end": 45,
        "startLoc": {
          "line": 35,
          "column": 16,
          "position": 313
        },
        "endLoc": {
          "line": 45,
          "column": 13,
          "position": 423
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ";\n  category: string;\n  subcategory?: string;\n  tags: string[];\n  metadata: Record<string, any>;\n  ipAddress?: string;\n  userAgent?: string;\n  sessionId?: string;\n  resource?: string;\n  action?: string;\n  result?: SecurityEvent",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\security-types.ts",
        "start": 515,
        "end": 525,
        "startLoc": {
          "line": 515,
          "column": 2,
          "position": 4193
        },
        "endLoc": {
          "line": 525,
          "column": 14,
          "position": 4277
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\security-types.ts",
        "start": 22,
        "end": 32,
        "startLoc": {
          "line": 22,
          "column": 12,
          "position": 145
        },
        "endLoc": {
          "line": 32,
          "column": 10,
          "position": 229
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": ",\n        variables: [\n          {\n            id: 'policy_name',\n            name: 'policy_name',\n            type: 'string',\n            required: true,\n            description: 'Name of the policy'\n          },\n          {\n            id: 'schema_name',\n            name: 'schema_name',\n            type: 'string',\n            required: true,\n            description: 'Database schema name'\n          },\n          {\n            id: 'table_name',\n            name: 'table_name',\n            type: 'string',\n            required: true,\n            description: 'Database table name'\n          },\n          {\n            id: 'policy_type',\n            name: 'policy_type',\n            type: 'string',\n            required: true,\n            defaultValue: 'SELECT',\n            description: 'Type of policy'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 103,
        "end": 132,
        "startLoc": {
          "line": 103,
          "column": 34,
          "position": 600
        },
        "endLoc": {
          "line": 132,
          "column": 17,
          "position": 773
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 33,
        "end": 62,
        "startLoc": {
          "line": 33,
          "column": 38,
          "position": 213
        },
        "endLoc": {
          "line": 62,
          "column": 55,
          "position": 386
        }
      }
    },
    {
      "format": "typescript",
      "lines": 39,
      "fragment": ",\n        variables: [\n          {\n            id: 'policy_name',\n            name: 'policy_name',\n            type: 'string',\n            required: true,\n            description: 'Name of the policy'\n          },\n          {\n            id: 'schema_name',\n            name: 'schema_name',\n            type: 'string',\n            required: true,\n            description: 'Database schema name'\n          },\n          {\n            id: 'table_name',\n            name: 'table_name',\n            type: 'string',\n            required: true,\n            description: 'Database table name'\n          },\n          {\n            id: 'policy_type',\n            name: 'policy_type',\n            type: 'string',\n            required: true,\n            defaultValue: 'SELECT',\n            description: 'Type of policy'\n          },\n          {\n            id: 'roles',\n            name: 'roles',\n            type: 'array',\n            required: true,\n            description: 'Roles that can access this policy'\n          }\n        ]",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 181,
        "end": 219,
        "startLoc": {
          "line": 181,
          "column": 59,
          "position": 1035
        },
        "endLoc": {
          "line": 219,
          "column": 2,
          "position": 1255
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 33,
        "end": 140,
        "startLoc": {
          "line": 33,
          "column": 38,
          "position": 213
        },
        "endLoc": {
          "line": 140,
          "column": 2,
          "position": 818
        }
      }
    },
    {
      "format": "typescript",
      "lines": 42,
      "fragment": ",\n        variables: [\n          {\n            id: 'policy_name',\n            name: 'policy_name',\n            type: 'string',\n            required: true,\n            description: 'Name of the policy'\n          },\n          {\n            id: 'schema_name',\n            name: 'schema_name',\n            type: 'string',\n            required: true,\n            description: 'Database schema name'\n          },\n          {\n            id: 'table_name',\n            name: 'table_name',\n            type: 'string',\n            required: true,\n            description: 'Database table name'\n          },\n          {\n            id: 'policy_type',\n            name: 'policy_type',\n            type: 'string',\n            required: true,\n            defaultValue: 'SELECT',\n            description: 'Type of policy'\n          },\n          {\n            id: 'roles',\n            name: 'roles',\n            type: 'array',\n            required: true,\n            description: 'Roles that can access this policy'\n          }\n        ],\n        examples: [\n          {\n            id: 'sensitivity_policy_example'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 251,
        "end": 292,
        "startLoc": {
          "line": 251,
          "column": 67,
          "position": 1422
        },
        "endLoc": {
          "line": 292,
          "column": 29,
          "position": 1658
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rls-policy-generator.service.ts",
        "start": 33,
        "end": 222,
        "startLoc": {
          "line": 33,
          "column": 38,
          "position": 213
        },
        "endLoc": {
          "line": 222,
          "column": 21,
          "position": 1271
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "} = data;\n\n    if (!this.rooms.has(roomId)) {\n      this.sendToConnection(connectionId, {\n        type: 'error',\n        message: 'Room not found',\n        roomId\n      });\n      return;\n    }\n\n    const room = this.rooms.get(roomId)!;\n    this",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\real-time-collaboration.ts",
        "start": 419,
        "end": 431,
        "startLoc": {
          "line": 419,
          "column": 2,
          "position": 3751
        },
        "endLoc": {
          "line": 431,
          "column": 5,
          "position": 3835
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\real-time-collaboration.ts",
        "start": 247,
        "end": 260,
        "startLoc": {
          "line": 247,
          "column": 2,
          "position": 2392
        },
        "endLoc": {
          "line": 260,
          "column": 26,
          "position": 2477
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n  }\n\n  // Create permission\n  async createPermission(permission: Omit<Permission, 'id'>): Promise<string> {\n    const id = `perm_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newPermission: Permission = {\n      ...permission,\n      id\n    };\n\n    this.permissions.set(id, newPermission);\n    \n    structuredLogger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-granular.ts",
        "start": 117,
        "end": 130,
        "startLoc": {
          "line": 117,
          "column": 10,
          "position": 941
        },
        "endLoc": {
          "line": 130,
          "column": 17,
          "position": 1057
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 73,
        "end": 81,
        "startLoc": {
          "line": 73,
          "column": 10,
          "position": 725
        },
        "endLoc": {
          "line": 81,
          "column": 7,
          "position": 835
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n  }\n\n  // Get all permissions\n  async getAllPermissions(): Promise<Permission[]> {\n    return Array.from(this.permissions.values());\n  }\n\n  // Get all roles\n  async getAllRoles(): Promise<Role[]> {\n    return Array.from(this.roles.values());\n  }\n\n  // Get user roles",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-granular.ts",
        "start": 212,
        "end": 225,
        "startLoc": {
          "line": 212,
          "column": 2,
          "position": 1716
        },
        "endLoc": {
          "line": 225,
          "column": 18,
          "position": 1806
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 98,
        "end": 111,
        "startLoc": {
          "line": 98,
          "column": 14,
          "position": 1073
        },
        "endLoc": {
          "line": 111,
          "column": 26,
          "position": 1163
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ";\n  }\n\n  // Private helper methods\n  // Removed duplicate getUserRoles method (already defined above)\n\n  private getUserPermissionsFromRoles(userRoles: UserRole[]): Permission[] {\n    const permissions: Permission[] = [];\n    \n    for (const userRole of userRoles) {\n      const role = this.roles.get(userRole.roleId);\n      if (role) {\n        for (const permissionId of role.permissions) {\n          const permission = this.permissions.get(permissionId);\n          if (permission) {\n            permissions.push(permission);\n          }\n        }\n      }\n    }\n    \n    return permissions;\n  }\n\n  private evaluateConditions",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-granular.ts",
        "start": 251,
        "end": 275,
        "startLoc": {
          "line": 251,
          "column": 2,
          "position": 2130
        },
        "endLoc": {
          "line": 275,
          "column": 19,
          "position": 2303
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 108,
        "end": 132,
        "startLoc": {
          "line": 108,
          "column": 2,
          "position": 1156
        },
        "endLoc": {
          "line": 132,
          "column": 22,
          "position": 1329
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "getStats(): any {\n    return {\n      totalPermissions: this.permissions.size,\n      totalRoles: this.roles.size,\n      totalUserRoles: Array.from(this.userRoles.values()).flat().length,\n      lastUpdated: new Date().toISOString()\n    };\n  }\n}\n\nexport const granularRBAC",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-granular.ts",
        "start": 370,
        "end": 380,
        "startLoc": {
          "line": 370,
          "column": 3,
          "position": 3221
        },
        "endLoc": {
          "line": 380,
          "column": 13,
          "position": 3309
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 177,
        "end": 187,
        "startLoc": {
          "line": 177,
          "column": 3,
          "position": 1709
        },
        "endLoc": {
          "line": 187,
          "column": 11,
          "position": 1797
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "import { structuredLogger } from './structured-logger.js';\n\nexport interface Permission {\n  id: string;\n  name: string;\n  resource: string;\n  action: string;\n}\n\nexport interface Role {\n  id: string;\n  name: string;\n  description: string;\n  permissions: string[];\n}\n\nexport class",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-basic.ts",
        "start": 1,
        "end": 17,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 17,
          "column": 6,
          "position": 96
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 1,
        "end": 17,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 17,
          "column": 10,
          "position": 96
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "=> \n        permission.resource === resource && permission.action === action\n      );\n    } catch (error) {\n      structuredLogger.error('Error checking permission', error as Error);\n      return false;\n    }\n  }\n\n  // Check if user has role\n  async hasRole(userId: string, orgId: string, roleName: string): Promise<boolean> {\n    // For demo purposes, return true for admin users",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-basic.ts",
        "start": 41,
        "end": 52,
        "startLoc": {
          "line": 41,
          "column": 2,
          "position": 296
        },
        "endLoc": {
          "line": 52,
          "column": 50,
          "position": 397
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 44,
        "end": 55,
        "startLoc": {
          "line": 44,
          "column": 2,
          "position": 346
        },
        "endLoc": {
          "line": 55,
          "column": 6,
          "position": 447
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ");\n  }\n\n  // Create permission\n  async createPermission(permission: Omit<Permission, 'id'>): Promise<string> {\n    const id = `perm_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newPermission: Permission = { ...permission, id };\n    this.permissions.set(id, newPermission);\n    return id;\n  }\n\n  // Create role\n  async createRole(role: Omit<Role, 'id'>): Promise<string> {\n    const id = `role_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const newRole: Role = { ...role, id };\n    this.roles.set(id, newRole);\n    return id;\n  }\n\n  // Assign role to user\n  async assignRole(userId: string, roleId: string, orgId: string): Promise<void> {\n    // Simplified implementation - just log the assignment",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-basic.ts",
        "start": 81,
        "end": 102,
        "startLoc": {
          "line": 81,
          "column": 7,
          "position": 684
        },
        "endLoc": {
          "line": 102,
          "column": 55,
          "position": 950
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 73,
        "end": 94,
        "startLoc": {
          "line": 73,
          "column": 10,
          "position": 725
        },
        "endLoc": {
          "line": 94,
          "column": 6,
          "position": 991
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", { userId, roleId, orgId });\n  }\n\n  // Get all permissions\n  async getAllPermissions(): Promise<Permission[]> {\n    return Array.from(this.permissions.values());\n  }\n\n  // Get all roles\n  async getAllRoles(): Promise<Role[]> {\n    return Array.from(this.roles.values());\n  }\n\n  private",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-basic.ts",
        "start": 103,
        "end": 116,
        "startLoc": {
          "line": 103,
          "column": 16,
          "position": 958
        },
        "endLoc": {
          "line": 116,
          "column": 8,
          "position": 1061
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-granular.ts",
        "start": 208,
        "end": 111,
        "startLoc": {
          "line": 208,
          "column": 25,
          "position": 1699
        },
        "endLoc": {
          "line": 111,
          "column": 26,
          "position": 1163
        }
      }
    },
    {
      "format": "typescript",
      "lines": 41,
      "fragment": ";\n  }\n\n  private initializeDefaultData(): void {\n    // Create default permissions\n    const defaultPermissions = [\n      { name: 'analytics:read', resource: 'analytics', action: 'read' },\n      { name: 'analytics:write', resource: 'analytics', action: 'write' },\n      { name: 'security:read', resource: 'security', action: 'read' },\n      { name: 'security:write', resource: 'security', action: 'write' },\n      { name: 'finops:read', resource: 'finops', action: 'read' },\n      { name: 'finops:write', resource: 'finops', action: 'write' },\n      { name: 'admin:all', resource: '*', action: '*' }\n    ];\n\n    defaultPermissions.forEach(permission => {\n      this.createPermission(permission);\n    });\n\n    // Create default roles\n    const defaultRoles = [\n      {\n        name: 'admin',\n        description: 'System administrator',\n        permissions: ['admin:all']\n      },\n      {\n        name: 'analyst',\n        description: 'Data analyst',\n        permissions: ['analytics:read']\n      },\n      {\n        name: 'security_officer',\n        description: 'Security officer',\n        permissions: ['security:read', 'security:write']\n      },\n      {\n        name: 'finance_manager',\n        description: 'Finance manager',\n        permissions: ['finops:read', 'finops:write']\n      },",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\rbac-basic.ts",
        "start": 113,
        "end": 153,
        "startLoc": {
          "line": 113,
          "column": 2,
          "position": 1054
        },
        "endLoc": {
          "line": 153,
          "column": 2,
          "position": 1407
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rbac-simple.ts",
        "start": 129,
        "end": 170,
        "startLoc": {
          "line": 129,
          "column": 12,
          "position": 1320
        },
        "endLoc": {
          "line": 170,
          "column": 2,
          "position": 1675
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "public async optimizeQuery(\n    query: string,\n    params: any[] = []\n  ): Promise<QueryOptimization> {\n    const startTime = Date.now();\n    \n    try {\n      // Verificar cach de consultas\n      const cacheKey = this.generateQueryCacheKey(query, params);\n      const cachedResult = this.queryCache.get(cacheKey);\n      \n      if (cachedResult && this.isQueryCacheValid(cachedResult)) {\n        return {",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\performance-optimizer.service.ts",
        "start": 192,
        "end": 204,
        "startLoc": {
          "line": 192,
          "column": 3,
          "position": 1304
        },
        "endLoc": {
          "line": 204,
          "column": 2,
          "position": 1424
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\db\\optimization\\database-optimizer.service.ts",
        "start": 408,
        "end": 417,
        "startLoc": {
          "line": 408,
          "column": 3,
          "position": 2579
        },
        "endLoc": {
          "line": 417,
          "column": 13,
          "position": 2694
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "time: executionTime,\n      timestamp: Date.now()\n    });\n\n    // Mantener solo las ltimas 100 consultas lentas\n    if (this.slowQueries.length > 100) {\n      this.slowQueries = this.slowQueries.slice(-100);\n    }\n\n    structuredLogger.warn('Slow query detected', {\n      query: query.substring(0, 200),\n      executionTime,\n      threshold: this.config.queryOptimization",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\performance-optimizer.service.ts",
        "start": 402,
        "end": 414,
        "startLoc": {
          "line": 402,
          "column": 7,
          "position": 2907
        },
        "endLoc": {
          "line": 414,
          "column": 18,
          "position": 3008
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\db\\optimization\\database-optimizer.service.ts",
        "start": 716,
        "end": 728,
        "startLoc": {
          "line": 716,
          "column": 7,
          "position": 5221
        },
        "endLoc": {
          "line": 728,
          "column": 19,
          "position": 5322
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "let cleanedCount = 0;\n\n    for (const [key, value] of this.queryCache.entries()) {\n      if (!this.isQueryCacheValid(value)) {\n        this.queryCache.delete(key);\n        cleanedCount++;\n      }\n    }\n\n    if (cleanedCount > 0) {\n      structuredLogger.debug('Cache cleanup completed'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\performance-optimizer.service.ts",
        "start": 490,
        "end": 500,
        "startLoc": {
          "line": 490,
          "column": 5,
          "position": 3483
        },
        "endLoc": {
          "line": 500,
          "column": 26,
          "position": 3575
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\db\\optimization\\database-optimizer.service.ts",
        "start": 770,
        "end": 780,
        "startLoc": {
          "line": 770,
          "column": 5,
          "position": 5623
        },
        "endLoc": {
          "line": 780,
          "column": 32,
          "position": 5715
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "private analyzeSlowQueries(): void {\n    if (this.slowQueries.length === 0) return;\n\n    const recentSlowQueries = this.slowQueries.filter(\n      q => (Date.now() - q.timestamp) < 3600000 // ltima hora\n    );\n\n    if (recentSlowQueries.length > 10) {\n      structuredLogger.warn('High number of slow queries detected', {\n        count: recentSlowQueries.length,\n        threshold: 10\n      });\n    }\n  }\n\n  /**\n   * Optimiza uso de memoria\n   */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\performance-optimizer.service.ts",
        "start": 507,
        "end": 524,
        "startLoc": {
          "line": 507,
          "column": 3,
          "position": 3597
        },
        "endLoc": {
          "line": 524,
          "column": 6,
          "position": 3724
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\db\\optimization\\database-optimizer.service.ts",
        "start": 784,
        "end": 801,
        "startLoc": {
          "line": 784,
          "column": 3,
          "position": 5734
        },
        "endLoc": {
          "line": 801,
          "column": 6,
          "position": 5861
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "],\n        availability: [\n          { dayOfWeek: 0, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 1, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 2, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 3, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 4, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 5, startTime: '00:00', endTime: '23:59', timezone: 'UTC' },\n          { dayOfWeek: 6, startTime: '00:00', endTime: '23:59', timezone: 'UTC' }\n        ]\n      }\n    ]",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\oncall.service.ts",
        "start": 334,
        "end": 345,
        "startLoc": {
          "line": 334,
          "column": 26,
          "position": 2727
        },
        "endLoc": {
          "line": 345,
          "column": 2,
          "position": 2945
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\oncall.service.ts",
        "start": 317,
        "end": 327,
        "startLoc": {
          "line": 317,
          "column": 24,
          "position": 2462
        },
        "endLoc": {
          "line": 327,
          "column": 2,
          "position": 2678
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n      if (!rule.enabled) continue;\n\n      try {\n        const shouldTrigger = await this.evaluateRule(rule);\n        \n        if (shouldTrigger) {\n          await this.triggerAlert(rule);\n        } else {\n          await this.resolveAlert(ruleId);\n        }\n      } catch (error) {\n        structuredLogger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\monitoring-alerts.service.ts",
        "start": 337,
        "end": 349,
        "startLoc": {
          "line": 337,
          "column": 2,
          "position": 2486
        },
        "endLoc": {
          "line": 349,
          "column": 17,
          "position": 2581
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\infrastructure\\observability\\alerting.service.ts",
        "start": 319,
        "end": 331,
        "startLoc": {
          "line": 319,
          "column": 11,
          "position": 2515
        },
        "endLoc": {
          "line": 331,
          "column": 5,
          "position": 2610
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "): boolean {\n    switch (condition.operator) {\n      case 'gt':\n        return value > condition.threshold;\n      case 'lt':\n        return value < condition.threshold;\n      case 'eq':\n        return value === condition.threshold;\n      case 'gte':\n        return value >= condition.threshold;\n      case 'lte':\n        return value <= condition.threshold;\n      case",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\monitoring-alerts.service.ts",
        "start": 396,
        "end": 408,
        "startLoc": {
          "line": 396,
          "column": 15,
          "position": 3070
        },
        "endLoc": {
          "line": 408,
          "column": 5,
          "position": 3179
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\services\\ai-performance-optimization.service.ts",
        "start": 543,
        "end": 550,
        "startLoc": {
          "line": 543,
          "column": 7,
          "position": 4430
        },
        "endLoc": {
          "line": 550,
          "column": 8,
          "position": 4534
        }
      }
    },
    {
      "format": "typescript",
      "lines": 44,
      "fragment": "private metricsInitialized: boolean = false;\n\n  constructor() {\n    this.initializeMetrics();\n  }\n\n  private initializeMetrics(): void {\n    if (this.metricsInitialized) return;\n\n    // Initialize default metrics\n    collectDefaultMetrics({ register });\n\n    // Health check metrics\n    this.healthCheckCounter = new Counter({\n      name: 'health_check_total',\n      help: 'Total number of health checks',\n      labelNames: ['type', 'status'],\n      registers: [register]\n    });\n\n    this.healthCheckDuration = new Histogram({\n      name: 'health_check_duration_seconds',\n      help: 'Health check duration in seconds',\n      labelNames: ['type', 'status'],\n      buckets: [0.1, 0.5, 1, 2, 5],\n      registers: [register]\n    });\n\n    this.metricsInitialized = true;\n  }\n\n  incrementHealthCheck(type: string, status: string = 'success'): void {\n    this.healthCheckCounter.labels(type, status).inc();\n  }\n\n  recordHealthCheckDuration(type: string, durationMs: number, status: string = 'success'): void {\n    this.healthCheckDuration.labels(type, status).observe(durationMs / 1000);\n  }\n\n  async getMetrics(): Promise<string> {\n    return register.metrics();\n  }\n\n  async",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\metrics.new.ts",
        "start": 6,
        "end": 49,
        "startLoc": {
          "line": 6,
          "column": 3,
          "position": 52
        },
        "endLoc": {
          "line": 49,
          "column": 6,
          "position": 401
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\metrics.ts",
        "start": 8,
        "end": 51,
        "startLoc": {
          "line": 8,
          "column": 3,
          "position": 58
        },
        "endLoc": {
          "line": 51,
          "column": 63,
          "position": 407
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "{\n      total: this.config.maxMemoryMB,\n      used: Math.round(memUsage.rss / 1024 / 1024),\n      free: this.config.maxMemoryMB - Math.round(memUsage.rss / 1024 / 1024),\n      heap: {\n        total: Math.round(memUsage.heapTotal / 1024 / 1024),\n        used: Math.round(memUsage.heapUsed / 1024 / 1024),\n        free: Math.round((memUsage.heapTotal - memUsage.heapUsed) / 1024 / 1024),\n        external: Math.round(memUsage.external / 1024 / 1024),\n        arrayBuffers: Math.round(memUsage.arrayBuffers / 1024 / 1024)\n      },\n      rss: Math.round(memUsage.rss / 1024 / 1024),\n      external: Math.round(memUsage.external / 1024 / 1024),\n      arrayBuffers: Math.round(memUsage.arrayBuffers / 1024 / 1024),\n      gc: {\n        major: this",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\memory-manager.service.ts",
        "start": 235,
        "end": 250,
        "startLoc": {
          "line": 235,
          "column": 2,
          "position": 1772
        },
        "endLoc": {
          "line": 250,
          "column": 5,
          "position": 2040
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\memory-manager.service.ts",
        "start": 130,
        "end": 145,
        "startLoc": {
          "line": 130,
          "column": 2,
          "position": 892
        },
        "endLoc": {
          "line": 145,
          "column": 2,
          "position": 1160
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ";\n  }\n\n  deleteRule(ruleId: string): boolean {\n    const ruleIndex = this.rules.findIndex(rule => rule.id === ruleId);\n    if (ruleIndex === -1) return false;\n\n    this.rules.splice(ruleIndex, 1);\n    return true;\n  }\n\n  getRules",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\matching-engine.service.ts",
        "start": 199,
        "end": 210,
        "startLoc": {
          "line": 199,
          "column": 5,
          "position": 1782
        },
        "endLoc": {
          "line": 210,
          "column": 9,
          "position": 1872
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\rule-engine.service.ts",
        "start": 156,
        "end": 167,
        "startLoc": {
          "line": 156,
          "column": 2,
          "position": 1124
        },
        "endLoc": {
          "line": 167,
          "column": 8,
          "position": 1214
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "= {\n      id: `report_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n      organizationId,\n      reportType: reportType as any,\n      period: { startDate, endDate },\n      summary,\n      data,\n      generatedBy,\n      createdAt: new Date().toISOString()\n    };\n\n    structuredLogger.info('Inventory report generated'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\inventory-kardex.service.ts",
        "start": 878,
        "end": 889,
        "startLoc": {
          "line": 878,
          "column": 2,
          "position": 8072
        },
        "endLoc": {
          "line": 889,
          "column": 29,
          "position": 8177
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\supplier-scorecard.service.ts",
        "start": 796,
        "end": 807,
        "startLoc": {
          "line": 796,
          "column": 2,
          "position": 7290
        },
        "endLoc": {
          "line": 807,
          "column": 28,
          "position": 7395
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ".isActive === filters.isActive);\n    }\n\n    if (filters.limit) {\n      insights = insights.slice(0, filters.limit);\n    }\n\n    return insights.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n  }\n\n  // Reports",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\interactions-sas-av.service.ts",
        "start": 868,
        "end": 878,
        "startLoc": {
          "line": 868,
          "column": 3,
          "position": 7865
        },
        "endLoc": {
          "line": 878,
          "column": 11,
          "position": 7964
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\interactions-sas-av.service.ts",
        "start": 840,
        "end": 850,
        "startLoc": {
          "line": 840,
          "column": 3,
          "position": 7552
        },
        "endLoc": {
          "line": 850,
          "column": 6,
          "position": 7651
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "= {\n      id: `report_${Date.now()}_${Math.random().toString(36).substring(2, 9)}`,\n      organizationId,\n      reportType: reportType as any,\n      period: { startDate, endDate },\n      summary,\n      data,\n      generatedBy,\n      createdAt: new Date().toISOString()\n    };\n\n    structuredLogger.info('Interaction report generated'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\interactions-sas-av.service.ts",
        "start": 939,
        "end": 950,
        "startLoc": {
          "line": 939,
          "column": 2,
          "position": 8683
        },
        "endLoc": {
          "line": 950,
          "column": 31,
          "position": 8788
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\supplier-scorecard.service.ts",
        "start": 796,
        "end": 807,
        "startLoc": {
          "line": 796,
          "column": 2,
          "position": 7290
        },
        "endLoc": {
          "line": 807,
          "column": 28,
          "position": 7395
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n          period: 'monthly',\n          trend: 'increasing',\n          changePercentage: Math.random() * 20 - 10,\n          confidence: 0.8 + Math.random() * 0.2,\n          forecast: [],\n          seasonality: {\n            hasSeasonality: false,\n            period: 0,\n            strength: 0,\n            pattern: []\n          },\n          anomalies: [],\n          organizationId: 'sample'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\intelligent-reporting.service.ts",
        "start": 533,
        "end": 546,
        "startLoc": {
          "line": 533,
          "column": 3,
          "position": 4753
        },
        "endLoc": {
          "line": 546,
          "column": 9,
          "position": 4865
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\intelligent-reporting.service.ts",
        "start": 202,
        "end": 215,
        "startLoc": {
          "line": 202,
          "column": 9,
          "position": 1672
        },
        "endLoc": {
          "line": 215,
          "column": 7,
          "position": 1784
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ") {\n            updated++;\n          } else {\n            failed++;\n            errors.push(`Deal ${update.id} not found or access denied`);\n          }\n        } catch (error) {\n          failed++;\n          errors.push(`Failed to update deal ${update.id}: ${(error as Error).message}`);\n        }\n      }\n\n      logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\deals.service.ts",
        "start": 647,
        "end": 659,
        "startLoc": {
          "line": 647,
          "column": 7,
          "position": 6475
        },
        "endLoc": {
          "line": 659,
          "column": 7,
          "position": 6563
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals.ts",
        "start": 625,
        "end": 637,
        "startLoc": {
          "line": 625,
          "column": 12,
          "position": 5486
        },
        "endLoc": {
          "line": 637,
          "column": 4,
          "position": 5574
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "${update.id}: ${(error as Error).message}`);\n        }\n      }\n\n      logger.info('Bulk update completed', {\n        orgId,\n        userId,\n        updated,\n        failed,\n        total: updates.length\n      });\n\n      return { updated, failed, errors };\n    } catch (error) {\n      logger.error('Failed to bulk update deals'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\deals.service.ts",
        "start": 655,
        "end": 669,
        "startLoc": {
          "line": 655,
          "column": 24,
          "position": 6536
        },
        "endLoc": {
          "line": 669,
          "column": 30,
          "position": 6634
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\interactions.service.ts",
        "start": 606,
        "end": 620,
        "startLoc": {
          "line": 606,
          "column": 31,
          "position": 6173
        },
        "endLoc": {
          "line": 620,
          "column": 37,
          "position": 6271
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": "config = {\n      enabled: true,\n      modelVersion: 'v1.0',\n      confidenceThreshold: 0.7,\n      maxRecommendations: 5,\n      expirationHours: 24,\n      factors: {\n        dealValue: 0.15,\n        stage: 0.20,\n        timeInStage: 0.10,\n        ownerExperience: 0.12,\n        companySize: 0.08,\n        industry: 0.10,\n        seasonality: 0.05,\n        competitorActivity: 0.08,\n        lastActivity: 0.07,\n        marketConditions: 0.05\n      },\n      actions: {\n        call: { enabled: true, weight: 0.25 },\n        email: { enabled: true, weight: 0.20 },\n        meeting: { enabled: true, weight: 0.20 },\n        proposal: { enabled: true, weight: 0.15 },\n        follow_up: { enabled: true, weight: 0.10 },\n        negotiation: { enabled: true, weight: 0.05 },\n        close: { enabled: true, weight: 0.05 }\n      },",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\deals-nba.service.ts",
        "start": 112,
        "end": 138,
        "startLoc": {
          "line": 112,
          "column": 2,
          "position": 897
        },
        "endLoc": {
          "line": 138,
          "column": 2,
          "position": 1164
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\deals-nba.ts",
        "start": 328,
        "end": 355,
        "startLoc": {
          "line": 328,
          "column": 2,
          "position": 2655
        },
        "endLoc": {
          "line": 355,
          "column": 2,
          "position": 2924
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": "const CreateDashboardSchema = z.object({\n  name: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  layout: z.object({\n    columns: z.number().min(1).max(12).default(4),\n    rows: z.number().min(1).max(20).default(10),\n    responsive: z.boolean().default(true),\n    theme: z.enum(['light', 'dark', 'auto']).default('auto')\n  }),\n  filters: z.array(z.object({\n    field: z.string(),\n    label: z.string(),\n    type: z.enum(['select', 'multiselect', 'date', 'daterange', 'number', 'text']),\n    options: z.array(z.string()).optional(),\n    defaultValue: z.any().optional(),\n    isRequired: z.boolean().default(false),\n    validation: z.object({\n      min: z.number().optional(),\n      max: z.number().optional(),\n      pattern: z.string().optional()\n    }).optional()\n  })).default([]),\n  permissions: z.object({\n    isPublic: z.boolean().default(false),\n    allowedUsers: z.array(z.string()).default([]),\n    allowedRoles: z.array(z.string()).default([])\n  }),\n  tags: z.array(z.string()).default([])\n});\n\nconst CreateWidgetSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\data-analytics-dashboard.service.ts",
        "start": 190,
        "end": 220,
        "startLoc": {
          "line": 190,
          "column": 1,
          "position": 1344
        },
        "endLoc": {
          "line": 220,
          "column": 19,
          "position": 1796
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\data-analytics-dashboard.ts",
        "start": 17,
        "end": 47,
        "startLoc": {
          "line": 17,
          "column": 5,
          "position": 124
        },
        "endLoc": {
          "line": 47,
          "column": 14,
          "position": 578
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": ";\n\nconst CreateWidgetSchema = z.object({\n  type: z.enum(['chart', 'metric', 'table', 'gauge', 'map', 'heatmap', 'trend']),\n  title: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  dataSource: z.string(),\n  configuration: z.object({\n    chartType: z.enum(['line', 'bar', 'pie', 'area', 'scatter', 'doughnut']).optional(),\n    metrics: z.array(z.string()),\n    dimensions: z.array(z.string()).optional(),\n    filters: z.record(z.any()).optional(),\n    timeRange: z.string().optional(),\n    refreshInterval: z.number().optional(),\n    colors: z.array(z.string()).optional(),\n    showLegend: z.boolean().optional(),\n    showDataLabels: z.boolean().optional(),\n    yAxisLabel: z.string().optional(),\n    xAxisLabel: z.string().optional()\n  }),\n  position: z.object({\n    x: z.number().min(0),\n    y: z.number().min(0),\n    width: z.number().min(1).max(12),\n    height: z.number().min(1).max(20)\n  }),\n  isVisible: z.boolean().default(true),\n  isEditable: z.boolean().default(true)\n});\n\nconst CreateAlertSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\data-analytics-dashboard.service.ts",
        "start": 218,
        "end": 248,
        "startLoc": {
          "line": 218,
          "column": 2,
          "position": 1791
        },
        "endLoc": {
          "line": 248,
          "column": 18,
          "position": 2229
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\data-analytics-dashboard.ts",
        "start": 201,
        "end": 230,
        "startLoc": {
          "line": 201,
          "column": 3,
          "position": 1843
        },
        "endLoc": {
          "line": 230,
          "column": 11,
          "position": 2283
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ";\n\nconst CreateAlertSchema = z.object({\n  name: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  metric: z.string(),\n  condition: z.object({\n    operator: z.enum(['greater_than', 'less_than', 'equals', 'not_equals', 'contains']),\n    value: z.union([z.number(), z.string()]),\n    threshold: z.number()\n  }),\n  severity: z.enum(['low', 'medium', 'high', 'critical']),\n  recipients: z.array(z.string())\n});\n\n// ============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\data-analytics-dashboard.service.ts",
        "start": 246,
        "end": 261,
        "startLoc": {
          "line": 246,
          "column": 2,
          "position": 2224
        },
        "endLoc": {
          "line": 261,
          "column": 80,
          "position": 2410
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\data-analytics-dashboard.ts",
        "start": 508,
        "end": 522,
        "startLoc": {
          "line": 508,
          "column": 11,
          "position": 4564
        },
        "endLoc": {
          "line": 522,
          "column": 6,
          "position": 4752
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "= z.object({\n  'csp-report': z.object({\n    'document-uri': z.string(),\n    'referrer': z.string().optional(),\n    'violated-directive': z.string(),\n    'effective-directive': z.string().optional(),\n    'original-policy': z.string(),\n    'disposition': z.enum(['enforce', 'report']),\n    'blocked-uri': z.string().optional(),\n    'line-number': z.number().optional(),\n    'column-number': z.number().optional(),\n    'source-file': z.string().optional(),\n    'status-code': z.number().optional(),\n    'script-sample': z.string().optional(),\n  })\n});\n\nconst",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\csp-sri-banking.service.ts",
        "start": 6,
        "end": 23,
        "startLoc": {
          "line": 6,
          "column": 2,
          "position": 34
        },
        "endLoc": {
          "line": 23,
          "column": 6,
          "position": 231
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\csp-sri-banking.ts",
        "start": 10,
        "end": 27,
        "startLoc": {
          "line": 10,
          "column": 2,
          "position": 78
        },
        "endLoc": {
          "line": 27,
          "column": 42,
          "position": 275
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "= z.object({\n  'sri-report': z.object({\n    'document-uri': z.string(),\n    'referrer': z.string().optional(),\n    'blocked-uri': z.string(),\n    'violation-type': z.enum(['integrity-mismatch', 'missing-integrity', 'invalid-integrity']),\n    'expected-hash': z.string().optional(),\n    'actual-hash': z.string().optional(),\n    'algorithm': z.enum(['sha256', 'sha384', 'sha512']).optional(),\n  })\n});\n\nexport",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\csp-sri-banking.service.ts",
        "start": 23,
        "end": 35,
        "startLoc": {
          "line": 23,
          "column": 2,
          "position": 235
        },
        "endLoc": {
          "line": 35,
          "column": 7,
          "position": 373
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\csp-sri-banking.ts",
        "start": 28,
        "end": 40,
        "startLoc": {
          "line": 28,
          "column": 2,
          "position": 281
        },
        "endLoc": {
          "line": 40,
          "column": 35,
          "position": 419
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ") {\n      if (contacts.length > 1) {\n        for (let i = 0; i < contacts.length; i++) {\n          for (let j = i + 1; j < contacts.length; j++) {\n            const contact1 = contacts[i];\n            const contact2 = contacts[j];\n\n            duplicates.push({\n              contactId: contact1.id,\n              duplicateId: contact2.id,\n              confidence: 0.9",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\contacts-dedupe.service.ts",
        "start": 249,
        "end": 259,
        "startLoc": {
          "line": 249,
          "column": 9,
          "position": 1980
        },
        "endLoc": {
          "line": 259,
          "column": 4,
          "position": 2115
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\contacts-dedupe.service.ts",
        "start": 210,
        "end": 220,
        "startLoc": {
          "line": 210,
          "column": 9,
          "position": 1602
        },
        "endLoc": {
          "line": 220,
          "column": 5,
          "position": 1737
        }
      }
    },
    {
      "format": "typescript",
      "lines": 27,
      "fragment": "),\n  context: z.record(z.any()).optional(),\n  metadata: z.record(z.any()).optional(),\n  userId: z.string().optional(),\n  organizationId: z.string().optional(),\n  requestId: z.string().optional(),\n  sessionId: z.string().optional(),\n  correlationId: z.string().optional(),\n  tags: z.array(z.string()).optional(),\n  source: z.string().optional(),\n  hostname: z.string().optional(),\n  pid: z.number().optional(),\n  version: z.string().optional()\n});\n\nconst LogQuerySchema = z.object({\n  level: z.enum(['DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL']).optional(),\n  service: z.string().optional(),\n  environment: z.string().optional(),\n  userId: z.string().optional(),\n  organizationId: z.string().optional(),\n  requestId: z.string().optional(),\n  sessionId: z.string().optional(),\n  correlationId: z.string().optional(),\n  tags: z.array(z.string()).optional(),\n  source: z.string().optional(),\n  startTime: z.coerce",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 39,
        "end": 65,
        "startLoc": {
          "line": 39,
          "column": 2,
          "position": 417
        },
        "endLoc": {
          "line": 65,
          "column": 7,
          "position": 807
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 39,
        "end": 65,
        "startLoc": {
          "line": 39,
          "column": 2,
          "position": 319
        },
        "endLoc": {
          "line": 65,
          "column": 7,
          "position": 709
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "().optional(),\n  message: z.string().optional(),\n  limit: z.number().min(1).max(10000).optional(),\n  offset: z.number().min(0).optional(),\n  sort: z.enum(['timestamp', 'level', 'service']).optional(),\n  order: z.enum(['asc', 'desc']).optional()\n});\n\nconst LogAggregationSchema = z.object({\n  groupBy: z.array(z.enum(['level', 'service', 'environment', 'userId', 'organizationId', 'source', 'tags'])),\n  timeRange: z.object({\n    start: z.coerce",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 66,
        "end": 77,
        "startLoc": {
          "line": 66,
          "column": 5,
          "position": 827
        },
        "endLoc": {
          "line": 77,
          "column": 7,
          "position": 1009
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\centralized-logging.ts",
        "start": 66,
        "end": 77,
        "startLoc": {
          "line": 66,
          "column": 7,
          "position": 725
        },
        "endLoc": {
          "line": 77,
          "column": 7,
          "position": 907
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n          properties: {\n            service: logEntry.service,\n            environment: logEntry.environment,\n            userId: logEntry.userId,\n            organizationId: logEntry.organizationId,\n            requestId: logEntry.requestId,\n            correlationId: logEntry.correlationId,\n            ...logEntry.context,\n            ...logEntry.metadata\n          }\n        });\n      }\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 603,
        "end": 616,
        "startLoc": {
          "line": 603,
          "column": 6,
          "position": 6276
        },
        "endLoc": {
          "line": 616,
          "column": 2,
          "position": 6363
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 588,
        "end": 600,
        "startLoc": {
          "line": 588,
          "column": 2,
          "position": 6163
        },
        "endLoc": {
          "line": 600,
          "column": 5,
          "position": 6249
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "{\n        '@timestamp': logEntry.timestamp.toISOString(),\n        level: logEntry.level,\n        message: logEntry.message,\n        service: logEntry.service,\n        environment: logEntry.environment,\n        context: logEntry.context,\n        metadata: logEntry.metadata,\n        userId: logEntry.userId,\n        organizationId: logEntry.organizationId,\n        requestId: logEntry.requestId,\n        sessionId: logEntry.sessionId,\n        correlationId: logEntry.correlationId,\n        tags: logEntry.tags,\n        source: logEntry.source,\n        hostname: logEntry.hostname,\n        pid: logEntry.pid,\n        version: logEntry.version\n      })",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 659,
        "end": 677,
        "startLoc": {
          "line": 659,
          "column": 2,
          "position": 6791
        },
        "endLoc": {
          "line": 677,
          "column": 2,
          "position": 6951
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 625,
        "end": 644,
        "startLoc": {
          "line": 625,
          "column": 2,
          "position": 6468
        },
        "endLoc": {
          "line": 644,
          "column": 2,
          "position": 6630
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ".reduce((acc, log) => {\n        const existing = acc.find(item => item.message === log.message);\n        if (existing) {\n          existing.count++;\n        } else {\n          acc.push({ message: log.message, count: 1 });\n        }\n        return acc;\n      }, [] as Array<{ message: string; count: number }>)\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10);\n\n    const serviceBreakdown",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 801,
        "end": 813,
        "startLoc": {
          "line": 801,
          "column": 7,
          "position": 8434
        },
        "endLoc": {
          "line": 813,
          "column": 17,
          "position": 8598
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\centralized-logging.service.ts",
        "start": 743,
        "end": 755,
        "startLoc": {
          "line": 743,
          "column": 10,
          "position": 7688
        },
        "endLoc": {
          "line": 755,
          "column": 10,
          "position": 7852
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ";\n    let oldestTime = Date.now();\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (entry.lastAccessed < oldestTime) {\n        oldestTime = entry.lastAccessed;\n        oldestKey = key;\n      }\n    }\n\n    if (oldestKey) {\n      this.cache.delete(oldestKey);\n      logger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\cache.service.ts",
        "start": 296,
        "end": 308,
        "startLoc": {
          "line": 296,
          "column": 3,
          "position": 2307
        },
        "endLoc": {
          "line": 308,
          "column": 7,
          "position": 2411
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\cache.ts",
        "start": 244,
        "end": 256,
        "startLoc": {
          "line": 244,
          "column": 5,
          "position": 1861
        },
        "endLoc": {
          "line": 256,
          "column": 5,
          "position": 1965
        }
      }
    },
    {
      "format": "typescript",
      "lines": 35,
      "fragment": "name: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  type: z.enum(['database', 'files', 'configuration', 'full', 'incremental']),\n  source: z.object({\n    type: z.enum(['database', 'filesystem', 'api', 'config']),\n    path: z.string().optional(),\n    connectionString: z.string().optional(),\n    tables: z.array(z.string()).optional(),\n    includeData: z.boolean().default(true),\n    includeSchema: z.boolean().default(true)\n  }),\n  destination: z.object({\n    type: z.enum(['local', 'azure_blob', 's3', 'ftp', 'sftp']),\n    path: z.string(),\n    credentials: z.record(z.string(), z.string()).optional(),\n    compression: z.boolean().default(true),\n    encryption: z.boolean().default(true)\n  }),\n  schedule: z.object({\n    enabled: z.boolean().default(false),\n    cron: z.string().optional(),\n    timezone: z.string().default('UTC'),\n    retention: z.object({\n      days: z.number().min(1).max(365).default(30),\n      maxBackups: z.number().min(1).max(1000).default(100)\n    })\n  }),\n  filters: z.object({\n    include: z.array(z.string()).default([]),\n    exclude: z.array(z.string()).default([]),\n    maxFileSize: z.number().optional(),\n    fileTypes: z.array(z.string()).optional()\n  }).optional(),\n  isActive: z.boolean().default(true),\n  createdAt",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 12,
        "end": 46,
        "startLoc": {
          "line": 12,
          "column": 3,
          "position": 96
        },
        "endLoc": {
          "line": 46,
          "column": 10,
          "position": 632
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 11,
        "end": 45,
        "startLoc": {
          "line": 11,
          "column": 3,
          "position": 81
        },
        "endLoc": {
          "line": 45,
          "column": 10,
          "position": 617
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ": z.string(),\n  target: z.object({\n    type: z.enum(['database', 'filesystem', 'api']),\n    path: z.string().optional(),\n    connectionString: z.string().optional(),\n    tables: z.array(z.string()).optional()\n  }),\n  options: z.object({\n    overwrite: z.boolean().default(false),\n    verify: z.boolean().default(true),\n    restoreSchema: z.boolean().default(true),\n    restoreData: z.boolean().default(true)\n  }),\n  status",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 70,
        "end": 83,
        "startLoc": {
          "line": 70,
          "column": 9,
          "position": 971
        },
        "endLoc": {
          "line": 83,
          "column": 7,
          "position": 1143
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\backup-recovery.ts",
        "start": 93,
        "end": 106,
        "startLoc": {
          "line": 93,
          "column": 12,
          "position": 1299
        },
        "endLoc": {
          "line": 106,
          "column": 7,
          "position": 1471
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ";\n\n    let data = mockData;\n    \n    // Aplicar compresin si est habilitada\n    if (config.destination.compression) {\n      data = this.compressData(data);\n    }\n\n    // Aplicar encriptacin si est habilitada\n    if (config.destination.encryption) {\n      data = this.encryptData(data);\n    }\n\n    await fs.writeFile(backupPath, data);\n\n    return {\n      size: Buffer.byteLength(data),\n      filesCount,",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 588,
        "end": 606,
        "startLoc": {
          "line": 588,
          "column": 8,
          "position": 5393
        },
        "endLoc": {
          "line": 606,
          "column": 2,
          "position": 5508
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 532,
        "end": 550,
        "startLoc": {
          "line": 532,
          "column": 51,
          "position": 4960
        },
        "endLoc": {
          "line": 550,
          "column": 2,
          "position": 5075
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ";\n    \n    // Aplicar compresin si est habilitada\n    if (config.destination.compression) {\n      data = this.compressData(data);\n    }\n\n    // Aplicar encriptacin si est habilitada\n    if (config.destination.encryption) {\n      data = this.encryptData(data);\n    }\n\n    await fs.writeFile(backupPath, data);\n\n    return {\n      size: Buffer.byteLength(data),\n      filesCount: 1,\n      metadata: {\n        backupPath,\n        environment",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 642,
        "end": 661,
        "startLoc": {
          "line": 642,
          "column": 2,
          "position": 5839
        },
        "endLoc": {
          "line": 661,
          "column": 12,
          "position": 5959
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\backup-recovery.service.ts",
        "start": 534,
        "end": 553,
        "startLoc": {
          "line": 534,
          "column": 9,
          "position": 4971
        },
        "endLoc": {
          "line": 553,
          "column": 7,
          "position": 5091
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "config = {\n      enabled: true,\n      retentionDays: 90,\n      undoWindowHours: 24,\n      maxUndoOperations: 1000,\n      autoExpire: true,\n      trackFields: ['name', 'email', 'phone', 'status', 'value', 'stage', 'priority', 'description'],\n      sensitiveFields: ['password', 'token', 'secret', 'key'],\n      excludeActions: ['view', 'list', 'search'],\n      includeMetadata: true,\n      compressionEnabled: true,",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\audit-trail-crm-undo.service.ts",
        "start": 96,
        "end": 106,
        "startLoc": {
          "line": 96,
          "column": 2,
          "position": 754
        },
        "endLoc": {
          "line": 106,
          "column": 2,
          "position": 870
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\audit-trail-crm-undo.ts",
        "start": 336,
        "end": 347,
        "startLoc": {
          "line": 336,
          "column": 2,
          "position": 3049
        },
        "endLoc": {
          "line": 347,
          "column": 2,
          "position": 3167
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", // 100MB\n      allowedExtensions: ['.txt', '.pdf', '.doc', '.docx', '.xls', '.xlsx', '.jpg', '.png', '.gif'],\n      blockedExtensions: ['.exe', '.bat', '.cmd', '.scr', '.pif', '.com', '.vbs', '.js'],\n      quarantineRetentionDays: 30,\n      modules: {\n        file: true,\n        email: true,\n        api: true,\n        database: true,\n        cache: true,\n        queue: true\n      },\n      threatDatabase: {\n        enabled: true,\n        updateInterval: 24, // 24 horas",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\antivirus-global.service.ts",
        "start": 110,
        "end": 124,
        "startLoc": {
          "line": 110,
          "column": 5,
          "position": 892
        },
        "endLoc": {
          "line": 124,
          "column": 12,
          "position": 1037
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\antivirus-global.ts",
        "start": 441,
        "end": 456,
        "startLoc": {
          "line": 441,
          "column": 10,
          "position": 3749
        },
        "endLoc": {
          "line": 456,
          "column": 8,
          "position": 3895
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "};\n\n    const response = await fetch(config.url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...config.headers\n      },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`Webhook request failed with status ${response.status}`);\n    }\n  }\n\n  /**\n   * Send email alert\n   */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\alerting-system.ts",
        "start": 339,
        "end": 357,
        "startLoc": {
          "line": 339,
          "column": 5,
          "position": 2573
        },
        "endLoc": {
          "line": 357,
          "column": 6,
          "position": 2679
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\alerting-system.ts",
        "start": 308,
        "end": 326,
        "startLoc": {
          "line": 308,
          "column": 5,
          "position": 2335
        },
        "endLoc": {
          "line": 326,
          "column": 6,
          "position": 2441
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "}]\n    };\n\n    const response = await fetch(config.webhookUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload)\n    });\n\n    if (!response.ok) {\n      throw new Error(`Slack request failed with status ${response.status}`);\n    }\n  }\n\n  /**\n   * Get severity color for Slack\n   */",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\alerting-system.ts",
        "start": 448,
        "end": 466,
        "startLoc": {
          "line": 448,
          "column": 7,
          "position": 3406
        },
        "endLoc": {
          "line": 466,
          "column": 6,
          "position": 3509
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\alerting-system.ts",
        "start": 406,
        "end": 424,
        "startLoc": {
          "line": 406,
          "column": 7,
          "position": 3082
        },
        "endLoc": {
          "line": 424,
          "column": 6,
          "position": 3185
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "{\n        id: dbTask.id,\n        agentId: dbTask.agentId,\n        inputs: JSON.parse(dbTask.inputs),\n        context: JSON.parse(dbTask.context),\n        status: dbTask.status as any,\n        priority: dbTask.priority as any,\n        retryCount: dbTask.retryCount,\n        maxRetries: dbTask.maxRetries,\n        timeoutMs: dbTask.timeoutMs,\n        dependencies: dbTask.dependencies ? JSON.parse(dbTask.dependencies) : undefined,\n        outputs: dbTask.outputs ? JSON.parse(dbTask.outputs) : undefined,\n        error: dbTask.error || undefined,\n        costEur: dbTask.costEur || undefined,\n        executionTimeMs: dbTask.executionTimeMs || undefined,\n        createdAt: dbTask.createdAt,\n        updatedAt: dbTask.updatedAt\n      };\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\agent-runtime.service.ts",
        "start": 704,
        "end": 722,
        "startLoc": {
          "line": 704,
          "column": 2,
          "position": 5842
        },
        "endLoc": {
          "line": 722,
          "column": 2,
          "position": 6052
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\agent-runtime.service.ts",
        "start": 604,
        "end": 623,
        "startLoc": {
          "line": 604,
          "column": 2,
          "position": 4914
        },
        "endLoc": {
          "line": 623,
          "column": 5,
          "position": 5125
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", {\n        error: (error as Error).message\n      });\n    }\n  }\n\n  private async getCPUUsage(): Promise<number> {\n    const startUsage = process.cpuUsage();\n    await new Promise(resolve => setTimeout(resolve, 100));\n    const endUsage = process.cpuUsage(startUsage);\n    \n    const totalUsage = (endUsage.user + endUsage.system) / 1000000;\n    return",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-monitoring-alerts.service.ts",
        "start": 402,
        "end": 414,
        "startLoc": {
          "line": 402,
          "column": 28,
          "position": 3101
        },
        "endLoc": {
          "line": 414,
          "column": 7,
          "position": 3225
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\performance-optimizer-v3.service.ts",
        "start": 194,
        "end": 205,
        "startLoc": {
          "line": 194,
          "column": 40,
          "position": 1431
        },
        "endLoc": {
          "line": 205,
          "column": 22,
          "position": 1554
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "operator) {\n      case 'gt': return value > threshold;\n      case 'lt': return value < threshold;\n      case 'gte': return value >= threshold;\n      case 'lte': return value <= threshold;\n      case 'eq': return value === threshold;\n      case 'ne': return value !== threshold;\n      default: return false;\n    }\n  }\n\n  // ===== GESTIN DE ALERTAS =====",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-metrics-alerts.service.ts",
        "start": 485,
        "end": 496,
        "startLoc": {
          "line": 485,
          "column": 2,
          "position": 5326
        },
        "endLoc": {
          "line": 496,
          "column": 34,
          "position": 5438
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\alerts.ts",
        "start": 248,
        "end": 259,
        "startLoc": {
          "line": 248,
          "column": 2,
          "position": 2025
        },
        "endLoc": {
          "line": 259,
          "column": 8,
          "position": 2137
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "name: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  category: z.enum(['system', 'feature', 'integration', 'security', 'performance', 'monitoring']),\n  type: z.enum(['string', 'number', 'boolean', 'object', 'array', 'json']),\n  value: z.any(),\n  defaultValue: z.any(),\n  environment: z.enum(['development', 'staging', 'production', 'all']),\n  isSecret: z.boolean().default(false),\n  isRequired: z.boolean().default(false),\n  validation: z.object({\n    min: z.number().optional(),\n    max: z.number().optional(),\n    pattern: z.string().optional(),\n    enum: z.array(z.any()).optional(),\n    custom: z.string().optional()\n  }).optional(),\n  dependencies: z.array(z.string()).default([]),\n  tags: z.array(z.string()).default([]),\n  version: z.string().default('1.0.0'),\n  isActive: z.boolean().default(true),\n  createdAt",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-configuration-management.service.ts",
        "start": 8,
        "end": 28,
        "startLoc": {
          "line": 8,
          "column": 3,
          "position": 64
        },
        "endLoc": {
          "line": 28,
          "column": 10,
          "position": 414
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 11,
        "end": 31,
        "startLoc": {
          "line": 11,
          "column": 3,
          "position": 81
        },
        "endLoc": {
          "line": 31,
          "column": 10,
          "position": 431
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "= z.object({\n  id: z.string().uuid().optional(),\n  name: z.string().min(1).max(100),\n  description: z.string().max(500).optional(),\n  category: z.enum(['system', 'feature', 'integration', 'security', 'performance', 'monitoring']),\n  template: z.record(z.string(), z.any()),\n  variables: z.array(z.object({\n    name: z.string(),\n    type: z.enum(['string', 'number', 'boolean', 'object', 'array']),\n    required: z.boolean().default(false),\n    defaultValue: z.any().optional(),\n    description: z.string().optional()\n  })).default([]),\n  isActive: z.boolean().default(true),",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-configuration-management.service.ts",
        "start": 34,
        "end": 47,
        "startLoc": {
          "line": 34,
          "column": 2,
          "position": 483
        },
        "endLoc": {
          "line": 47,
          "column": 2,
          "position": 725
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\configuration.service.ts",
        "start": 4,
        "end": 73,
        "startLoc": {
          "line": 4,
          "column": 2,
          "position": 22
        },
        "endLoc": {
          "line": 73,
          "column": 2,
          "position": 1104
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "deploymentStrategy: z.enum(['immediate', 'gradual', 'canary', 'blue_green']),\n  rolloutPercentage: z.number().min(0).max(100).default(100),\n  schedule: z.object({\n    enabled: z.boolean().default(false),\n    cron: z.string().optional(),\n    timezone: z.string().default('UTC')\n  }).optional(),\n  rollbackConfig: z.object({\n    enabled: z.boolean().default(true),\n    autoRollback: z.boolean().default(false),\n    rollbackConditions: z.array(z.string()).default([])\n  }).optional(),",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-configuration-management.service.ts",
        "start": 58,
        "end": 69,
        "startLoc": {
          "line": 58,
          "column": 3,
          "position": 874
        },
        "endLoc": {
          "line": 69,
          "column": 2,
          "position": 1057
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\routes\\advanced-configuration-management.ts",
        "start": 80,
        "end": 92,
        "startLoc": {
          "line": 80,
          "column": 3,
          "position": 1199
        },
        "endLoc": {
          "line": 92,
          "column": 2,
          "position": 1383
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "[]): Array<{ action: string; count: number }> {\n    const actionCounts = events.reduce((acc, event) => {\n      acc[event.action] = (acc[event.action] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n    \n    return Object.entries(actionCounts)\n      .map(([action, count]) => ({ action, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 10);\n  }\n\n  private getTopEntities",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\lib\\advanced-analytics.ts",
        "start": 251,
        "end": 263,
        "startLoc": {
          "line": 251,
          "column": 15,
          "position": 2422
        },
        "endLoc": {
          "line": 263,
          "column": 15,
          "position": 2603
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\lib\\advanced-audit-compliance.service.ts",
        "start": 566,
        "end": 578,
        "startLoc": {
          "line": 566,
          "column": 11,
          "position": 5116
        },
        "endLoc": {
          "line": 578,
          "column": 16,
          "position": 5296
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "export const MemoryPutRequestSchema = z.object({\n  tenantId: z.string(),\n  userId: z.string().optional(),\n  agentId: z.string().optional(),\n  namespace: z.string(),\n  vector: z.array(z.number()).optional(),\n  text: z.string().optional(),\n  ttlSec: z.number().optional(),\n  meta: z.record(z.any()).optional(),\n});\n\nexport const MemoryQueryRequestSchema",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\db\\memory.repo.ts",
        "start": 19,
        "end": 30,
        "startLoc": {
          "line": 19,
          "column": 1,
          "position": 205
        },
        "endLoc": {
          "line": 30,
          "column": 25,
          "position": 350
        }
      },
      "secondFile": {
        "name": "packages\\sdk\\src\\client.ts",
        "start": 14,
        "end": 25,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 87
        },
        "endLoc": {
          "line": 25,
          "column": 24,
          "position": 232
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "(),\n});\n\nexport const MemoryQueryRequestSchema = z.object({\n  tenantId: z.string(),\n  userId: z.string().optional(),\n  agentId: z.string().optional(),\n  namespace: z.string(),\n  query: z.string(),\n  topK: z.number().optional().default(10),\n});\n\nexport type",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\db\\memory.repo.ts",
        "start": 27,
        "end": 39,
        "startLoc": {
          "line": 27,
          "column": 9,
          "position": 337
        },
        "endLoc": {
          "line": 39,
          "column": 5,
          "position": 450
        }
      },
      "secondFile": {
        "name": "packages\\sdk\\src\\client.ts",
        "start": 28,
        "end": 40,
        "startLoc": {
          "line": 28,
          "column": 7,
          "position": 271
        },
        "endLoc": {
          "line": 40,
          "column": 6,
          "position": 384
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ", error);\n      \n      if (error instanceof Error && error.message.includes('Validation error')) {\n        res.status(400).json({\n          type: 'https://econeura/errors/validation-error',\n          title: 'Validation Error',\n          status: 400,\n          detail: error.message,\n          instance: req.path,\n        });\n        return;\n      }\n\n      res.status(500).json({\n        type: 'https://econeura/errors/internal-error',\n        title: 'Internal Server Error',\n        status: 500,\n        detail: 'An unexpected error occurred',\n        instance: req.path,\n      });\n    }\n  }\n\n  async getMemoryStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\controllers\\memory.controller.ts",
        "start": 47,
        "end": 70,
        "startLoc": {
          "line": 47,
          "column": 24,
          "position": 412
        },
        "endLoc": {
          "line": 70,
          "column": 15,
          "position": 572
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\controllers\\memory.controller.ts",
        "start": 16,
        "end": 39,
        "startLoc": {
          "line": 16,
          "column": 22,
          "position": 166
        },
        "endLoc": {
          "line": 39,
          "column": 12,
          "position": 326
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ";\nimport { initFinOps, finalizeFinOps } from './middleware/finops.js';\nimport { telemetryMiddleware } from './middleware/telemetry.js';\n\nconst app = express();\napp.use(bodyParser.json());\n\n// CORS configuration with strict allowlist\nconst allow = (process.env.ALLOWED_ORIGINS || \"https://www.econeura.com\")\n  .split(\",\")\n  .map(s => s.trim());\n\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\"]",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api-agents-make\\src\\server.ts",
        "start": 6,
        "end": 25,
        "startLoc": {
          "line": 6,
          "column": 21,
          "position": 52
        },
        "endLoc": {
          "line": 25,
          "column": 2,
          "position": 223
        }
      },
      "secondFile": {
        "name": "apps\\api-neura-comet\\src\\server.ts",
        "start": 5,
        "end": 24,
        "startLoc": {
          "line": 5,
          "column": 14,
          "position": 43
        },
        "endLoc": {
          "line": 24,
          "column": 2,
          "position": 214
        }
      }
    },
    {
      "format": "typescript",
      "lines": 33,
      "fragment": "],\n      frameSrc: [\"'none'\"],\n      objectSrc: [\"'none'\"],\n      baseUri: [\"'self'\"],\n      formAction: [\"'self'\"]\n    }\n  },\n  crossOriginEmbedderPolicy: false,\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\napp.use(cors({\n  origin: (origin, callback) => {\n    // Allow requests with no origin (mobile apps, curl, etc.)\n    if (!origin) return callback(null, true);\n    \n    if (allow.includes(origin)) {\n      callback(null, true);\n    } else {\n      callback(new Error('Not allowed by CORS'));\n    }\n  },\n  credentials: true\n}));\n\n// Health check\napp.get(\"/health\", (_, res) => {\n  res.json({ \n    ok: true, \n    service: \"agents-make\"",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api-agents-make\\src\\server.ts",
        "start": 25,
        "end": 57,
        "startLoc": {
          "line": 25,
          "column": 9,
          "position": 223
        },
        "endLoc": {
          "line": 57,
          "column": 14,
          "position": 458
        }
      },
      "secondFile": {
        "name": "apps\\api-neura-comet\\src\\server.ts",
        "start": 24,
        "end": 57,
        "startLoc": {
          "line": 24,
          "column": 28,
          "position": 217
        },
        "endLoc": {
          "line": 57,
          "column": 14,
          "position": 453
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "const maxRequests = 100;\n  \n  if (!rateLimitStore.has(ip)) {\n    rateLimitStore.set(ip, { count: 1, resetTime: now + windowMs });\n    return next();\n  }\n  \n  const record = rateLimitStore.get(ip);\n  if (now > record.resetTime) {\n    record.count = 1;\n    record.resetTime = now + windowMs;\n    return next();\n  }\n  \n  if (record.count >= maxRequests) {\n    return res.status(429).json({\n      error: 'Too Many Requests',\n      message: 'Rate limit exceeded',\n      retryAfter",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 82,
        "end": 100,
        "startLoc": {
          "line": 82,
          "column": 3,
          "position": 689
        },
        "endLoc": {
          "line": 100,
          "column": 11,
          "position": 868
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 61,
        "end": 78,
        "startLoc": {
          "line": 61,
          "column": 3,
          "position": 585
        },
        "endLoc": {
          "line": 78,
          "column": 2,
          "position": 762
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "app.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 150,
        "end": 167,
        "startLoc": {
          "line": 150,
          "column": 1,
          "position": 1294
        },
        "endLoc": {
          "line": 167,
          "column": 4,
          "position": 1481
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 116,
        "end": 132,
        "startLoc": {
          "line": 116,
          "column": 1,
          "position": 1069
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "app.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// =============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 167,
        "end": 184,
        "startLoc": {
          "line": 167,
          "column": 1,
          "position": 1481
        },
        "endLoc": {
          "line": 184,
          "column": 81,
          "position": 1668
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 133,
        "end": 132,
        "startLoc": {
          "line": 133,
          "column": 1,
          "position": 1257
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "res.set('Content-Type', 'text/plain');\n    res.send(metrics.trim());\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\napp",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 224,
        "end": 234,
        "startLoc": {
          "line": 224,
          "column": 5,
          "position": 1880
        },
        "endLoc": {
          "line": 234,
          "column": 4,
          "position": 1961
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 179,
        "end": 188,
        "startLoc": {
          "line": 179,
          "column": 5,
          "position": 1600
        },
        "endLoc": {
          "line": 188,
          "column": 2,
          "position": 1680
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get cache stats',\n      message: (error as Error).message\n    });\n  }\n});\n\n// =============================================================================",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 252,
        "end": 264,
        "startLoc": {
          "line": 252,
          "column": 2,
          "position": 2244
        },
        "endLoc": {
          "line": 264,
          "column": 81,
          "position": 2329
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 195,
        "end": 206,
        "startLoc": {
          "line": 195,
          "column": 6,
          "position": 1740
        },
        "endLoc": {
          "line": 206,
          "column": 2,
          "position": 1824
        }
      }
    },
    {
      "format": "typescript",
      "lines": 40,
      "fragment": "();\n\n// Security middleware (PR-28)\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Apply rate limiting middleware (PR-29)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 34,
        "end": 73,
        "startLoc": {
          "line": 34,
          "column": 13,
          "position": 301
        },
        "endLoc": {
          "line": 73,
          "column": 42,
          "position": 593
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 37,
        "end": 76,
        "startLoc": {
          "line": 37,
          "column": 18,
          "position": 305
        },
        "endLoc": {
          "line": 76,
          "column": 36,
          "position": 597
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "app.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 87,
        "end": 100,
        "startLoc": {
          "line": 87,
          "column": 1,
          "position": 675
        },
        "endLoc": {
          "line": 100,
          "column": 43,
          "position": 798
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 102,
        "end": 114,
        "startLoc": {
          "line": 102,
          "column": 1,
          "position": 943
        },
        "endLoc": {
          "line": 114,
          "column": 2,
          "position": 1065
        }
      }
    },
    {
      "format": "typescript",
      "lines": 35,
      "fragment": "app.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 101,
        "end": 135,
        "startLoc": {
          "line": 101,
          "column": 1,
          "position": 800
        },
        "endLoc": {
          "line": 135,
          "column": 27,
          "position": 1174
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 116,
        "end": 132,
        "startLoc": {
          "line": 116,
          "column": 1,
          "position": 1069
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 257,
        "end": 274,
        "startLoc": {
          "line": 257,
          "column": 1,
          "position": 1926
        },
        "endLoc": {
          "line": 274,
          "column": 2,
          "position": 2059
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\basic.ts",
        "start": 120,
        "end": 326,
        "startLoc": {
          "line": 120,
          "column": 1,
          "position": 1134
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", error as Error);\n      process.exit(1);\n    }\n  };\n\n  process.on('SIGTERM', () => shutdownHandler('SIGTERM'));\n  process.on('SIGINT', () => shutdownHandler('SIGINT'));\n  \n  // Handle uncaught exceptions\n  process.on('uncaughtException', (error) => {\n    apiLogger",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\src\\bootstrap.example.ts",
        "start": 123,
        "end": 133,
        "startLoc": {
          "line": 123,
          "column": 24,
          "position": 778
        },
        "endLoc": {
          "line": 133,
          "column": 10,
          "position": 867
        }
      },
      "secondFile": {
        "name": "apps\\workers\\src\\bootstrap.example.ts",
        "start": 143,
        "end": 153,
        "startLoc": {
          "line": 143,
          "column": 31,
          "position": 1087
        },
        "endLoc": {
          "line": 153,
          "column": 13,
          "position": 1176
        }
      }
    },
    {
      "format": "typescript",
      "lines": 34,
      "fragment": "{\n  openapi: '3.1.0',\n  info: {\n    title: 'ECONEURA API',\n    version: '1.0.0',\n    description: 'Production-ready ERP+CRM API with AI capabilities',\n    contact: {\n      name: 'ECONEURA Team',\n      email: 'api@econeura.dev',\n      url: 'https://econeura.dev'\n    },\n    license: {\n      name: 'Proprietary',\n      url: 'https://econeura.dev/license'\n    }\n  },\n  servers: [\n    {\n      url: process.env.API_URL || 'http://localhost:4000',\n      description: 'Development server',\n    },\n    {\n      url: 'https://api.econeura.dev',\n      description: 'Production server',\n    },\n  ],\n  tags: [\n    { name: 'Authentication', description: 'User authentication and session management' },\n    { name: 'CRM - Companies', description: 'Company management' },\n    { name: 'CRM - Contacts', description: 'Contact management' },  \n    { name: 'CRM - Deals', description: 'Deal pipeline management' },\n    { name: 'ERP - Products', description: 'Product catalog management' },\n    { name: 'ERP - Inventory', description: 'Inventory tracking and adjustments' },\n    { name: 'Finance - Invoices'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 6,
        "end": 39,
        "startLoc": {
          "line": 6,
          "column": 2,
          "position": 46
        },
        "endLoc": {
          "line": 39,
          "column": 21,
          "position": 313
        }
      },
      "secondFile": {
        "name": "apps\\api\\scripts\\openapi.ts",
        "start": 565,
        "end": 598,
        "startLoc": {
          "line": 565,
          "column": 2,
          "position": 3588
        },
        "endLoc": {
          "line": 598,
          "column": 18,
          "position": 3854
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "name: { type: 'string', minLength: 2, maxLength: 120 },\n          industry: { type: 'string', maxLength: 80 },\n          website: { type: 'string', format: 'uri' },\n          employees: { type: 'integer', minimum: 0, default: 0 },\n          status: { type: 'string', enum: ['active', 'inactive', 'prospect'], default: 'prospect' },\n          taxId: { type: 'string', maxLength: 50 },\n          email: { type: 'string', format: 'email' },\n          phone: { type: 'string', maxLength: 50 },\n          address: { type: 'string', maxLength: 500 },\n          city: { type: 'string', maxLength: 100 },\n          country: { type: 'string', maxLength: 100 },\n          tags: { type: 'array', items: { type: 'string' }, default: [] },\n        }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 130,
        "end": 142,
        "startLoc": {
          "line": 130,
          "column": 11,
          "position": 1317
        },
        "endLoc": {
          "line": 142,
          "column": 2,
          "position": 1597
        }
      },
      "secondFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 109,
        "end": 121,
        "startLoc": {
          "line": 109,
          "column": 11,
          "position": 921
        },
        "endLoc": {
          "line": 121,
          "column": 10,
          "position": 1201
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n        tags: ['CRM - Companies'],\n        security: [{ bearerAuth: [] }],\n        parameters: [\n          {\n            name: 'id',\n            in: 'path',\n            required: true,\n            schema: { type: 'string', format: 'uuid' }\n          }\n        ],\n        responses: {\n          '204'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 523,
        "end": 535,
        "startLoc": {
          "line": 523,
          "column": 17,
          "position": 4695
        },
        "endLoc": {
          "line": 535,
          "column": 6,
          "position": 4786
        }
      },
      "secondFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 461,
        "end": 473,
        "startLoc": {
          "line": 461,
          "column": 20,
          "position": 4289
        },
        "endLoc": {
          "line": 473,
          "column": 6,
          "position": 4380
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "],\n        security: [{ bearerAuth: [] }],\n        parameters: [\n          {\n            name: 'id',\n            in: 'path',\n            required: true,\n            schema: { type: 'string', format: 'uuid' }\n          }\n        ],\n        responses: {\n          '204': {\n            description: 'Company deleted'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 524,
        "end": 536,
        "startLoc": {
          "line": 524,
          "column": 18,
          "position": 4703
        },
        "endLoc": {
          "line": 536,
          "column": 18,
          "position": 4795
        }
      },
      "secondFile": {
        "name": "apps\\api\\scripts\\generate-openapi.ts",
        "start": 373,
        "end": 385,
        "startLoc": {
          "line": 373,
          "column": 17,
          "position": 3573
        },
        "endLoc": {
          "line": 385,
          "column": 18,
          "position": 3665
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "import express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\n\nimport { structuredLogger } from './lib/structured-logger.js';\nimport { ErrorHandler } from './lib/error-handler.js';\n\n// Import health modes (PR-22)\nimport { healthModeManager } from './lib/health-modes.js';\nimport { cacheManager } from './lib/advanced-cache.js';\n\n// Import FinOps services (PR-45)\nimport { BudgetManagerService } from './lib/budget-manager.service.js';\nimport { CostTrackerService } from './lib/cost-tracker.service.js';\nimport { CostOptimizerService } from './lib/cost-optimizer.service.js';\n\n// Import SEPA services (PR-42)\nimport { SEPAParserService } from './lib/sepa-parser.service.js';\n\n// Quiet Hours services (PR-46) - Using simplified endpoints",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 1,
        "end": 20,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 20,
          "column": 61,
          "position": 142
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 1,
        "end": 20,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 20,
          "column": 44,
          "position": 142
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "import { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Initialize services\nconst errorHandler = new ErrorHandler();\nconst budgetManager = new BudgetManagerService();\nconst costTracker = new CostTrackerService();\nconst costOptimizer = new CostOptimizerService();\nconst sepaParser = new SEPAParserService();\n// Quiet Hours services (PR-46) - Simplified implementation",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 29,
        "end": 42,
        "startLoc": {
          "line": 29,
          "column": 1,
          "position": 179
        },
        "endLoc": {
          "line": 42,
          "column": 60,
          "position": 315
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 25,
        "end": 39,
        "startLoc": {
          "line": 25,
          "column": 1,
          "position": 173
        },
        "endLoc": {
          "line": 39,
          "column": 31,
          "position": 310
        }
      }
    },
    {
      "format": "typescript",
      "lines": 38,
      "fragment": "// Security middleware (PR-28)\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Simple rate limiting (PR-29)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 45,
        "end": 82,
        "startLoc": {
          "line": 45,
          "column": 1,
          "position": 320
        },
        "endLoc": {
          "line": 82,
          "column": 32,
          "position": 607
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 39,
        "end": 76,
        "startLoc": {
          "line": 39,
          "column": 1,
          "position": 310
        },
        "endLoc": {
          "line": 76,
          "column": 36,
          "position": 597
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "const rateLimitStore = new Map();\napp.use((req, res, next) => {\n  const ip = req.ip || req.connection.remoteAddress || 'unknown';\n  const now = Date.now();\n  const windowMs = 15 * 60 * 1000; // 15 minutes\n  const maxRequests = 100;\n  \n  if (!rateLimitStore.has(ip)) {\n    rateLimitStore.set(ip, { count: 1, resetTime: now + windowMs });\n    return next();\n  }\n  \n  const record = rateLimitStore.get(ip);\n  if (now > record.resetTime) {\n    record.count = 1;\n    record.resetTime = now + windowMs;\n    return next();\n  }\n  \n  if (record.count >= maxRequests) {\n    return res.status(429).json({\n      error: 'Too Many Requests',\n      message: 'Rate limit exceeded',\n      retryAfter: Math.ceil((record.resetTime - now) / 1000)\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 83,
        "end": 107,
        "startLoc": {
          "line": 83,
          "column": 1,
          "position": 609
        },
        "endLoc": {
          "line": 107,
          "column": 2,
          "position": 901
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 77,
        "end": 100,
        "startLoc": {
          "line": 77,
          "column": 1,
          "position": 599
        },
        "endLoc": {
          "line": 100,
          "column": 2,
          "position": 889
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "app.use((req, res, next) => {\n  if (req.headers['content-type'] && req.headers['content-type'].includes('application/json')) {\n    if (req.body && typeof req.body !== 'object') {\n      return res.status(400).json({\n        error: 'Invalid JSON',\n        message: 'Request body must be valid JSON'\n      });\n    }\n  }\n  next();\n});\n\n// Basic health check endpoint (< 200ms, no external dependencies)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 115,
        "end": 127,
        "startLoc": {
          "line": 115,
          "column": 1,
          "position": 930
        },
        "endLoc": {
          "line": 127,
          "column": 67,
          "position": 1048
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 119,
        "end": 100,
        "startLoc": {
          "line": 119,
          "column": 1,
          "position": 1020
        },
        "endLoc": {
          "line": 100,
          "column": 2,
          "position": 939
        }
      }
    },
    {
      "format": "typescript",
      "lines": 52,
      "fragment": ");\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// FinOps endpoints (PR-45)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 125,
        "end": 176,
        "startLoc": {
          "line": 125,
          "column": 2,
          "position": 1044
        },
        "endLoc": {
          "line": 176,
          "column": 28,
          "position": 1549
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 84,
        "end": 132,
        "startLoc": {
          "line": 84,
          "column": 2,
          "position": 669
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "app.get(\"/v1/finops/budgets\", async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string || 'demo-org';\n    const budgets = budgetManager.getBudgets(orgId);\n    \n    res.set({\n      'X-Est-Cost-EUR': '0.0020',\n      'X-Budget-Pct': '0.3',\n      'X-Latency-ms': '45',\n      'X-Route': 'local'\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 177,
        "end": 187,
        "startLoc": {
          "line": 177,
          "column": 1,
          "position": 1551
        },
        "endLoc": {
          "line": 187,
          "column": 2,
          "position": 1651
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 268,
        "end": 277,
        "startLoc": {
          "line": 268,
          "column": 1,
          "position": 2336
        },
        "endLoc": {
          "line": 277,
          "column": 2,
          "position": 2434
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "});\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get budgets',\n      message: (error as Error).message\n    });\n  }\n});\n\napp.post(\"/v1/finops/budgets\", async (req, res) => {\n  try {\n    const budget = await budgetManager.createBudget(req.body);\n    \n    res.set({\n      'X-Est-Cost-EUR': '0.0050',\n      'X-Budget-Pct': '0.8',\n      'X-Latency-ms': '120',\n      'X-Route': 'local'\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 193,
        "end": 212,
        "startLoc": {
          "line": 193,
          "column": 5,
          "position": 1687
        },
        "endLoc": {
          "line": 212,
          "column": 2,
          "position": 1836
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 290,
        "end": 308,
        "startLoc": {
          "line": 290,
          "column": 5,
          "position": 2555
        },
        "endLoc": {
          "line": 308,
          "column": 2,
          "position": 2702
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "});\n    \n    res.status(201).json({\n      success: true,\n      data: budget,\n      message: 'Budget created successfully'\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create budget',\n      message: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/v1/finops/costs\", async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string || 'demo-org';\n    const costs = costTracker.getCostsByService(orgId);\n    \n    res",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 212,
        "end": 233,
        "startLoc": {
          "line": 212,
          "column": 5,
          "position": 1836
        },
        "endLoc": {
          "line": 233,
          "column": 4,
          "position": 2009
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 310,
        "end": 330,
        "startLoc": {
          "line": 310,
          "column": 5,
          "position": 2719
        },
        "endLoc": {
          "line": 330,
          "column": 6,
          "position": 2890
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "app.get(\"/v1/quiet-hours\", async (req, res) => {\n  const orgId = req.headers['x-org-id'] as string || 'demo-org';\n  const quietHoursConfig = {\n    orgId,\n    enabled: true,\n    timezone: 'Europe/Madrid',\n    weekdayHours: { start: '22:00', end: '08:00' },\n    weekendHours: { start: '20:00', end: '10:00' },\n    notifications: {\n      email: false,\n      sms: false,\n      teams: false\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 329,
        "end": 341,
        "startLoc": {
          "line": 329,
          "column": 1,
          "position": 2713
        },
        "endLoc": {
          "line": 341,
          "column": 2,
          "position": 2850
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 514,
        "end": 525,
        "startLoc": {
          "line": 514,
          "column": 1,
          "position": 4483
        },
        "endLoc": {
          "line": 525,
          "column": 2,
          "position": 4618
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n    lastUpdated: new Date().toISOString()\n  };\n  \n  res.json({\n    success: true,\n    data: quietHoursConfig\n  });\n});\n\napp.post(\"/v1/quiet-hours\", async (req, res) => {\n  const orgId = req.headers['x-org-id'] as string || 'demo-org';\n  const config = {\n    ...req.body,\n    orgId,\n    lastUpdated: new Date().toISOString()\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 341,
        "end": 357,
        "startLoc": {
          "line": 341,
          "column": 2,
          "position": 2851
        },
        "endLoc": {
          "line": 357,
          "column": 2,
          "position": 2981
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 534,
        "end": 549,
        "startLoc": {
          "line": 534,
          "column": 2,
          "position": 4664
        },
        "endLoc": {
          "line": 549,
          "column": 2,
          "position": 4792
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "}\n`;\n    \n    res.set('Content-Type', 'text/plain');\n    res.send(metrics.trim());\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\n// Cache statistics endpoint",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 441,
        "end": 454,
        "startLoc": {
          "line": 441,
          "column": 2,
          "position": 3705
        },
        "endLoc": {
          "line": 454,
          "column": 29,
          "position": 3793
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 221,
        "end": 188,
        "startLoc": {
          "line": 221,
          "column": 5,
          "position": 1873
        },
        "endLoc": {
          "line": 188,
          "column": 2,
          "position": 1680
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".getAllStats();\n    res.json({\n      success: true,\n      data: stats,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get cache stats',\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 457,
        "end": 472,
        "startLoc": {
          "line": 457,
          "column": 13,
          "position": 3826
        },
        "endLoc": {
          "line": 472,
          "column": 53,
          "position": 3936
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 192,
        "end": 206,
        "startLoc": {
          "line": 192,
          "column": 21,
          "position": 1715
        },
        "endLoc": {
          "line": 206,
          "column": 2,
          "position": 1824
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ",\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list\napp.get(\"/\", (req, res) => {\n  res.json({\n    name: \"ECONEURA API\",\n    version: process.env.npm_package_version || \"1.0.0\",\n    status: \"running\",\n    timestamp: new Date().toISOString(),\n    features: [\n      \"PR-22: Health modes (live/ready/degraded)\",\n      \"PR-23: Observability coherente (logs + mtricas + traces)\",\n      \"PR-24: Analytics events with Zod validation\", \n      \"PR-27: Validacin bsica en requests\"",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 466,
        "end": 483,
        "startLoc": {
          "line": 466,
          "column": 28,
          "position": 3907
        },
        "endLoc": {
          "line": 483,
          "column": 39,
          "position": 4027
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 143,
        "end": 160,
        "startLoc": {
          "line": 143,
          "column": 24,
          "position": 1266
        },
        "endLoc": {
          "line": 160,
          "column": 44,
          "position": 1386
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n    path: req.path,\n    method: req.method,\n    headers: req.headers\n  });\n\n  res.status(500).json({\n    error: 'Internal server error',\n    message: 'An unexpected error occurred',\n    errorId,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 540,
        "end": 554,
        "startLoc": {
          "line": 540,
          "column": 8,
          "position": 4335
        },
        "endLoc": {
          "line": 554,
          "column": 15,
          "position": 4423
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 261,
        "end": 274,
        "startLoc": {
          "line": 261,
          "column": 6,
          "position": 2195
        },
        "endLoc": {
          "line": 274,
          "column": 2,
          "position": 2282
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "]\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-23: Observability coherente (logs + mtricas + traces)',\n      'PR-24: Analytics events with Zod validation', \n      'PR-27: Validacin bsica en requests'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 566,
        "end": 580,
        "startLoc": {
          "line": 566,
          "column": 5,
          "position": 4553
        },
        "endLoc": {
          "line": 580,
          "column": 39,
          "position": 4658
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 231,
        "end": 245,
        "startLoc": {
          "line": 231,
          "column": 5,
          "position": 1778
        },
        "endLoc": {
          "line": 245,
          "column": 44,
          "position": 1883
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 604,
        "end": 621,
        "startLoc": {
          "line": 604,
          "column": 1,
          "position": 4750
        },
        "endLoc": {
          "line": 621,
          "column": 2,
          "position": 4888
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 309,
        "end": 326,
        "startLoc": {
          "line": 309,
          "column": 1,
          "position": 2543
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 52,
      "fragment": "));\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// Basic API info endpoint",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 27,
        "end": 78,
        "startLoc": {
          "line": 27,
          "column": 2,
          "position": 234
        },
        "endLoc": {
          "line": 78,
          "column": 27,
          "position": 740
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 84,
        "end": 132,
        "startLoc": {
          "line": 84,
          "column": 2,
          "position": 668
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "// Basic error handler\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  structuredLogger.error('Unhandled error', error, {\n    path: req.path,\n    method: req.method,\n    headers: req.headers\n  });\n\n  res.status(500).json({\n    error: 'Internal server error',\n    message: 'An unexpected error occurred',\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 111,
        "end": 126,
        "startLoc": {
          "line": 111,
          "column": 1,
          "position": 920
        },
        "endLoc": {
          "line": 126,
          "column": 15,
          "position": 1056
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\basic.ts",
        "start": 87,
        "end": 101,
        "startLoc": {
          "line": 87,
          "column": 1,
          "position": 823
        },
        "endLoc": {
          "line": 101,
          "column": 2,
          "position": 958
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Start server",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 121,
        "end": 135,
        "startLoc": {
          "line": 121,
          "column": 31,
          "position": 1030
        },
        "endLoc": {
          "line": 135,
          "column": 16,
          "position": 1145
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 549,
        "end": 110,
        "startLoc": {
          "line": 549,
          "column": 8,
          "position": 4397
        },
        "endLoc": {
          "line": 110,
          "column": 2,
          "position": 1048
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "});\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-24: Analytics events with Zod validation'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 132,
        "end": 143,
        "startLoc": {
          "line": 132,
          "column": 3,
          "position": 1136
        },
        "endLoc": {
          "line": 143,
          "column": 46,
          "position": 1229
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 232,
        "end": 243,
        "startLoc": {
          "line": 232,
          "column": 3,
          "position": 1781
        },
        "endLoc": {
          "line": 243,
          "column": 60,
          "position": 1874
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "]\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 146,
        "end": 167,
        "startLoc": {
          "line": 146,
          "column": 5,
          "position": 1241
        },
        "endLoc": {
          "line": 167,
          "column": 2,
          "position": 1386
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 253,
        "end": 326,
        "startLoc": {
          "line": 253,
          "column": 5,
          "position": 1914
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 72,
      "fragment": "import { healthModeManager } from './lib/health-modes.js';\n\n// Import routers for working PRs\nimport { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// CORS configuration\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID']\n}));\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// Mount Analytics routes (PR-24)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.minimal.ts",
        "start": 7,
        "end": 78,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 35
        },
        "endLoc": {
          "line": 78,
          "column": 34,
          "position": 740
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 7,
        "end": 132,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 35
        },
        "endLoc": {
          "line": 132,
          "column": 2,
          "position": 1255
        }
      }
    },
    {
      "format": "typescript",
      "lines": 42,
      "fragment": "});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Basic error handler\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  structuredLogger.error('Unhandled error', error, {\n    path: req.path,\n    method: req.method,\n    headers: req.headers\n  });\n\n  res.status(500).json({\n    error: 'Internal server error',\n    message: 'An unexpected error occurred',\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0'\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.minimal.ts",
        "start": 76,
        "end": 117,
        "startLoc": {
          "line": 76,
          "column": 1,
          "position": 735
        },
        "endLoc": {
          "line": 117,
          "column": 2,
          "position": 1080
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 100,
        "end": 240,
        "startLoc": {
          "line": 100,
          "column": 1,
          "position": 873
        },
        "endLoc": {
          "line": 240,
          "column": 2,
          "position": 1861
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "});\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.minimal.ts",
        "start": 117,
        "end": 137,
        "startLoc": {
          "line": 117,
          "column": 3,
          "position": 1080
        },
        "endLoc": {
          "line": 137,
          "column": 2,
          "position": 1222
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 254,
        "end": 326,
        "startLoc": {
          "line": 254,
          "column": 3,
          "position": 1917
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "import express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\n\nimport { structuredLogger } from './lib/structured-logger.js';\nimport { ErrorHandler } from './lib/error-handler.js';\n\n// Import health modes (PR-22)\nimport { healthModeManager } from './lib/health-modes.js';\nimport { cacheManager } from './lib/advanced-cache.js';\n\n// Import FinOps services (PR-45)\nimport { BudgetManagerService } from './lib/budget-manager.service.js';\nimport { CostTrackerService } from './lib/cost-tracker.service.js';\nimport { CostOptimizerService } from './lib/cost-optimizer.service.js';\n\n// Import SEPA services (PR-42)\nimport { SEPAParserService } from './lib/sepa-parser.service.js';\n\n// Import GDPR services (PR-43)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 1,
        "end": 20,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 20,
          "column": 32,
          "position": 142
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 1,
        "end": 20,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 20,
          "column": 44,
          "position": 142
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "// Import middlewares (PR-27, PR-28, PR-29)\nimport { observabilityMiddleware } from './middleware/observability.js';\nimport { finOpsMiddleware } from './middleware/finops.js';\n\n// Import routers for working PRs\nimport { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Initialize services\nconst errorHandler = new ErrorHandler();\nconst budgetManager = new BudgetManagerService();\nconst costTracker = new CostTrackerService();\nconst costOptimizer = new CostOptimizerService();\nconst sepaParser = new SEPAParserService();\nconst",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 25,
        "end": 43,
        "startLoc": {
          "line": 25,
          "column": 1,
          "position": 184
        },
        "endLoc": {
          "line": 43,
          "column": 6,
          "position": 351
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 24,
        "end": 39,
        "startLoc": {
          "line": 24,
          "column": 1,
          "position": 148
        },
        "endLoc": {
          "line": 39,
          "column": 31,
          "position": 310
        }
      }
    },
    {
      "format": "typescript",
      "lines": 138,
      "fragment": "();\n\n// Security middleware (PR-28)\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Simple rate limiting (PR-29)\nconst rateLimitStore = new Map();\napp.use((req, res, next) => {\n  const ip = req.ip || req.connection.remoteAddress || 'unknown';\n  const now = Date.now();\n  const windowMs = 15 * 60 * 1000; // 15 minutes\n  const maxRequests = 100;\n  \n  if (!rateLimitStore.has(ip)) {\n    rateLimitStore.set(ip, { count: 1, resetTime: now + windowMs });\n    return next();\n  }\n  \n  const record = rateLimitStore.get(ip);\n  if (now > record.resetTime) {\n    record.count = 1;\n    record.resetTime = now + windowMs;\n    return next();\n  }\n  \n  if (record.count >= maxRequests) {\n    return res.status(429).json({\n      error: 'Too Many Requests',\n      message: 'Rate limit exceeded',\n      retryAfter: Math.ceil((record.resetTime - now) / 1000)\n    });\n  }\n  \n  record.count++;\n  next();\n});\n\n// Basic validation middleware (PR-27)\napp.use((req, res, next) => {\n  if (req.headers['content-type'] && req.headers['content-type'].includes('application/json')) {\n    if (req.body && typeof req.body !== 'object') {\n      return res.status(400).json({\n        error: 'Invalid JSON',\n        message: 'Request body must be valid JSON'\n      });\n    }\n  }\n  next();\n});\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// FinOps endpoints (PR-45)\napp.get(\"/v1/finops/budgets\", async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string || 'demo-org';\n    const budgets = await",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 45,
        "end": 182,
        "startLoc": {
          "line": 45,
          "column": 17,
          "position": 386
        },
        "endLoc": {
          "line": 182,
          "column": 6,
          "position": 1677
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 37,
        "end": 180,
        "startLoc": {
          "line": 37,
          "column": 18,
          "position": 305
        },
        "endLoc": {
          "line": 180,
          "column": 14,
          "position": 1606
        }
      }
    },
    {
      "format": "typescript",
      "lines": 52,
      "fragment": "(orgId);\n    \n    res.set({\n      'X-Est-Cost-EUR': '0.0020',\n      'X-Budget-Pct': '0.3',\n      'X-Latency-ms': '45',\n      'X-Route': 'local'\n    });\n    \n    res.json({\n      success: true,\n      data: budgets,\n      count: budgets.length\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get budgets',\n      message: (error as Error).message\n    });\n  }\n});\n\napp.post(\"/v1/finops/budgets\", async (req, res) => {\n  try {\n    const budget = await budgetManager.createBudget(req.body);\n    \n    res.set({\n      'X-Est-Cost-EUR': '0.0050',\n      'X-Budget-Pct': '0.8',\n      'X-Latency-ms': '120',\n      'X-Route': 'local'\n    });\n    \n    res.status(201).json({\n      success: true,\n      data: budget,\n      message: 'Budget created successfully'\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to create budget',\n      message: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/v1/finops/costs\", async (req, res) => {\n  try {\n    const orgId = req.headers['x-org-id'] as string || 'demo-org';\n    const costs = await",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 182,
        "end": 233,
        "startLoc": {
          "line": 182,
          "column": 25,
          "position": 1682
        },
        "endLoc": {
          "line": 233,
          "column": 6,
          "position": 2071
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 180,
        "end": 329,
        "startLoc": {
          "line": 180,
          "column": 11,
          "position": 1609
        },
        "endLoc": {
          "line": 329,
          "column": 12,
          "position": 2881
        }
      }
    },
    {
      "format": "typescript",
      "lines": 23,
      "fragment": "(orgId);\n    \n    res.set({\n      'X-Est-Cost-EUR': '0.0030',\n      'X-Budget-Pct': '0.5',\n      'X-Latency-ms': '85',\n      'X-Route': 'local'\n    });\n    \n    res.json({\n      success: true,\n      data: costs\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get costs',\n      message: (error as Error).message\n    });\n  }\n});\n\n// GDPR endpoints (PR-43)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 233,
        "end": 255,
        "startLoc": {
          "line": 233,
          "column": 23,
          "position": 2076
        },
        "endLoc": {
          "line": 255,
          "column": 26,
          "position": 2213
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 231,
        "end": 253,
        "startLoc": {
          "line": 231,
          "column": 18,
          "position": 2001
        },
        "endLoc": {
          "line": 253,
          "column": 47,
          "position": 2138
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": "(xmlData);\n    \n    res.json({\n      success: true,\n      data: parsedData,\n      message: 'SEPA data parsed successfully'\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to parse SEPA data',\n      message: (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 315,
        "end": 331,
        "startLoc": {
          "line": 315,
          "column": 9,
          "position": 2723
        },
        "endLoc": {
          "line": 331,
          "column": 27,
          "position": 2826
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 312,
        "end": 328,
        "startLoc": {
          "line": 312,
          "column": 10,
          "position": 2608
        },
        "endLoc": {
          "line": 328,
          "column": 46,
          "position": 2711
        }
      }
    },
    {
      "format": "typescript",
      "lines": 76,
      "fragment": "});\n\n// System metrics endpoint\napp.get(\"/metrics\", async (req, res) => {\n  try {\n    const cacheStats = cacheManager.getAllStats();\n    const memoryUsage = process.memoryUsage();\n    \n    // Generate Prometheus-style metrics\n    const metrics = `\n# HELP econeura_cache_hits_total Total number of cache hits\n# TYPE econeura_cache_hits_total counter\neconeura_cache_hits_total{cache=\"all\"} ${Object.values(cacheStats).reduce((sum: number, stats: any) => sum + (stats?.hits || 0), 0)}\n\n# HELP econeura_cache_misses_total Total number of cache misses  \n# TYPE econeura_cache_misses_total counter\neconeura_cache_misses_total{cache=\"all\"} ${Object.values(cacheStats).reduce((sum: number, stats: any) => sum + (stats?.misses || 0), 0)}\n\n# HELP econeura_system_memory_heap_used_bytes Memory heap used in bytes\n# TYPE econeura_system_memory_heap_used_bytes gauge\neconeura_system_memory_heap_used_bytes ${memoryUsage.heapUsed}\n\n# HELP econeura_system_memory_heap_total_bytes Memory heap total in bytes\n# TYPE econeura_system_memory_heap_total_bytes gauge\neconeura_system_memory_heap_total_bytes ${memoryUsage.heapTotal}\n\n# HELP econeura_system_uptime_seconds System uptime in seconds\n# TYPE econeura_system_uptime_seconds counter\neconeura_system_uptime_seconds ${process.uptime()}\n`;\n    \n    res.set('Content-Type', 'text/plain');\n    res.send(metrics.trim());\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\n// Cache statistics endpoint\napp.get(\"/cache/stats\", (req, res) => {\n  try {\n    const stats = cacheManager.getAllStats();\n    res.json({\n      success: true,\n      data: stats,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get cache stats',\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list\napp.get(\"/\", (req, res) => {\n  res.json({\n    name: \"ECONEURA API\",\n    version: process.env.npm_package_version || \"1.0.0\",\n    status: \"running\",\n    timestamp: new Date().toISOString(),\n    features: [\n      \"PR-22: Health modes (live/ready/degraded)\",\n      \"PR-23: Observability coherente (logs + mtricas + traces)\",\n      \"PR-24: Analytics events with Zod validation\", \n      \"PR-27: Validacin bsica en requests\",\n      \"PR-28: Security headers completos + CORS + Helmet\",\n      \"PR-29: Rate limiting + Budget guard\",\n      \"PR-42: SEPA Ingest + Parsing\",\n      \"PR-43: GDPR Export/Erase + Audit\",\n      \"PR-45: FinOps Panel completo\"",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 329,
        "end": 404,
        "startLoc": {
          "line": 329,
          "column": 1,
          "position": 2821
        },
        "endLoc": {
          "line": 404,
          "column": 31,
          "position": 3332
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 413,
        "end": 488,
        "startLoc": {
          "line": 413,
          "column": 1,
          "position": 3536
        },
        "endLoc": {
          "line": 488,
          "column": 42,
          "position": 4047
        }
      }
    },
    {
      "format": "typescript",
      "lines": 31,
      "fragment": ",\n      \"PR-45: FinOps Panel completo\",\n      \"SSE: Real-time events and notifications\",\n      \"Cockpit: Operational dashboard endpoints\",\n      \"Cache: Advanced caching with statistics\",\n      \"Metrics: Prometheus-compatible metrics endpoint\"\n    ],\n    endpoints: [\n      \"GET /health - Basic health check\",\n      \"GET /health/live - Liveness probe (PR-22)\", \n      \"GET /health/ready - Readiness probe (PR-22)\",\n      \"GET /metrics - Prometheus metrics (PR-23)\",\n      \"GET /cache/stats - Cache statistics\",\n      \"POST /v1/analytics/events - Track analytics events (PR-24)\",\n      \"GET /v1/analytics/events - Query analytics events (PR-24)\",\n      \"GET /v1/analytics/metrics - Get aggregated metrics (PR-24)\",\n      \"GET /v1/events - Server-Sent Events for real-time updates\",\n      \"POST /v1/events/broadcast - Broadcast events to organization\",\n      \"GET /v1/events/stats - SSE connection statistics\",\n      \"GET /v1/cockpit/overview - Operational overview dashboard\",\n      \"GET /v1/cockpit/agents - Agent execution details\",\n      \"GET /v1/cockpit/costs - Cost breakdown by org/playbook\",\n      \"GET /v1/cockpit/system - System metrics and health\",\n      \"GET /v1/finops/budgets - List budgets (PR-45)\",\n      \"POST /v1/finops/budgets - Create budget (PR-45)\",\n      \"GET /v1/finops/costs - Cost tracking (PR-45)\",\n      \"POST /v1/gdpr/export - Export user data (PR-43)\",\n      \"DELETE /v1/gdpr/erase/:userId - Erase user data (PR-43)\",\n      \"GET /v1/gdpr/audit - GDPR audit logs (PR-43)\",\n      \"POST /v1/sepa/parse - Parse SEPA XML data (PR-42)\"\n    ]",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 403,
        "end": 433,
        "startLoc": {
          "line": 403,
          "column": 35,
          "position": 3329
        },
        "endLoc": {
          "line": 433,
          "column": 2,
          "position": 3449
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 488,
        "end": 517,
        "startLoc": {
          "line": 488,
          "column": 42,
          "position": 4048
        },
        "endLoc": {
          "line": 517,
          "column": 2,
          "position": 4166
        }
      }
    },
    {
      "format": "typescript",
      "lines": 64,
      "fragment": "]\n  });\n});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Basic error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  const errorId = `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  \n  structuredLogger.error('Unhandled error', error, {\n    errorId,\n    path: req.path,\n    method: req.method,\n    headers: req.headers\n  });\n\n  res.status(500).json({\n    error: 'Internal server error',\n    message: 'An unexpected error occurred',\n    errorId,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString(),\n    availableEndpoints: [\n      'GET /health', 'GET /health/live', 'GET /health/ready', 'GET /metrics',\n      'GET /v1/analytics/*', 'GET /v1/events/*', 'GET /v1/cockpit/*',\n      'GET /v1/finops/*', 'POST /v1/finops/*',\n      'POST /v1/gdpr/*', 'DELETE /v1/gdpr/*', 'GET /v1/gdpr/*',\n      'POST /v1/sepa/*'\n    ]\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-23: Observability coherente (logs + mtricas + traces)',\n      'PR-24: Analytics events with Zod validation', \n      'PR-27: Validacin bsica en requests',\n      'PR-28: Security headers completos + CORS + Helmet',\n      'PR-29: Rate limiting + Budget guard',\n      'PR-42: SEPA Ingest + Parsing',\n      'PR-43: GDPR Export/Erase + Audit',\n      'PR-45: FinOps Panel completo'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 433,
        "end": 496,
        "startLoc": {
          "line": 433,
          "column": 5,
          "position": 3449
        },
        "endLoc": {
          "line": 496,
          "column": 31,
          "position": 3943
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 522,
        "end": 585,
        "startLoc": {
          "line": 522,
          "column": 5,
          "position": 4184
        },
        "endLoc": {
          "line": 585,
          "column": 42,
          "position": 4678
        }
      }
    },
    {
      "format": "typescript",
      "lines": 37,
      "fragment": ",\n      'PR-45: FinOps Panel completo',\n      'SSE: Real-time events and notifications',\n      'Cockpit: Operational dashboard endpoints',\n      'Cache: Advanced caching with statistics',\n      'Metrics: Prometheus-compatible metrics endpoint'\n    ],\n    services: [\n      'FinOps System: Budget management, cost tracking, optimization',\n      'GDPR Services: Export, erase, audit compliance',\n      'SEPA Parser: XML parsing and transaction matching',\n      'Analytics: Event tracking and metrics',\n      'Cache Manager: Multi-layer caching system',\n      'Health Monitor: System health and degradation detection',\n      'SSE Manager: Real-time event streaming'\n    ]\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 495,
        "end": 531,
        "startLoc": {
          "line": 495,
          "column": 35,
          "position": 3940
        },
        "endLoc": {
          "line": 531,
          "column": 2,
          "position": 4149
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 585,
        "end": 326,
        "startLoc": {
          "line": 585,
          "column": 42,
          "position": 4679
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ";\n\n// Import middlewares (PR-27, PR-28, PR-29)\nimport { observabilityMiddleware } from './middleware/observability.js';\nimport { finOpsMiddleware } from './middleware/finops.js';\n\n// Import routers for working PRs\nimport { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Initialize error handler",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 9,
        "end": 23,
        "startLoc": {
          "line": 9,
          "column": 26,
          "position": 72
        },
        "endLoc": {
          "line": 23,
          "column": 28,
          "position": 175
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 23,
        "end": 36,
        "startLoc": {
          "line": 23,
          "column": 30,
          "position": 181
        },
        "endLoc": {
          "line": 36,
          "column": 23,
          "position": 248
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "// Basic security headers\napp.use((req, res, next) => {\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  res.setHeader('X-Frame-Options', 'DENY');\n  res.setHeader('X-XSS-Protection', '1; mode=block');\n  res.setHeader('Referrer-Policy', 'strict-origin-when-cross-origin');\n  res.setHeader('Permissions-Policy', 'camera=(), microphone=(), geolocation=()');\n  next();\n});\n\n// CORS configuration (PR-28)",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 26,
        "end": 36,
        "startLoc": {
          "line": 26,
          "column": 1,
          "position": 191
        },
        "endLoc": {
          "line": 36,
          "column": 30,
          "position": 282
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 26,
        "end": 35,
        "startLoc": {
          "line": 26,
          "column": 1,
          "position": 232
        },
        "endLoc": {
          "line": 35,
          "column": 2,
          "position": 322
        }
      }
    },
    {
      "format": "typescript",
      "lines": 56,
      "fragment": ");\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Simple rate limiting (PR-29)\nconst rateLimitStore = new Map();\napp.use((req, res, next) => {\n  const ip = req.ip || req.connection.remoteAddress || 'unknown';\n  const now = Date.now();\n  const windowMs = 15 * 60 * 1000; // 15 minutes\n  const maxRequests = 100;\n  \n  if (!rateLimitStore.has(ip)) {\n    rateLimitStore.set(ip, { count: 1, resetTime: now + windowMs });\n    return next();\n  }\n  \n  const record = rateLimitStore.get(ip);\n  if (now > record.resetTime) {\n    record.count = 1;\n    record.resetTime = now + windowMs;\n    return next();\n  }\n  \n  if (record.count >= maxRequests) {\n    return res.status(429).json({\n      error: 'Too Many Requests',\n      message: 'Rate limit exceeded',\n      retryAfter: Math.ceil((record.resetTime - now) / 1000)\n    });\n  }\n  \n  record.count++;\n  next();\n});\n\n// Basic validation middleware (PR-27)\napp.use((req, res, next) => {\n  // Basic request validation",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 34,
        "end": 89,
        "startLoc": {
          "line": 34,
          "column": 2,
          "position": 278
        },
        "endLoc": {
          "line": 89,
          "column": 28,
          "position": 786
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.final.ts",
        "start": 55,
        "end": 116,
        "startLoc": {
          "line": 55,
          "column": 2,
          "position": 431
        },
        "endLoc": {
          "line": 116,
          "column": 3,
          "position": 949
        }
      }
    },
    {
      "format": "typescript",
      "lines": 64,
      "fragment": "if (req.headers['content-type'] && req.headers['content-type'].includes('application/json')) {\n    if (req.body && typeof req.body !== 'object') {\n      return res.status(400).json({\n        error: 'Invalid JSON',\n        message: 'Request body must be valid JSON'\n      });\n    }\n  }\n  next();\n});\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint\napp.get(\"/metrics\", async (req, res) => {\n  try {\n    const cacheStats",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 90,
        "end": 153,
        "startLoc": {
          "line": 90,
          "column": 3,
          "position": 789
        },
        "endLoc": {
          "line": 153,
          "column": 11,
          "position": 1419
        }
      },
      "secondFile": {
        "name": "packages\\shared\\src\\backup\\intermediate.ts",
        "start": 90,
        "end": 138,
        "startLoc": {
          "line": 90,
          "column": 3,
          "position": 841
        },
        "endLoc": {
          "line": 138,
          "column": 8,
          "position": 1204
        }
      }
    },
    {
      "format": "typescript",
      "lines": 75,
      "fragment": ": (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint\napp.get(\"/metrics\", async (req, res) => {\n  try {\n    const cacheStats = cacheManager.getAllStats();\n    const memoryUsage = process.memoryUsage();\n    \n    // Generate Prometheus-style metrics\n    const metrics = `\n# HELP econeura_cache_hits_total Total number of cache hits\n# TYPE econeura_cache_hits_total counter\neconeura_cache_hits_total{cache=\"all\"} ${Object.values(cacheStats).reduce((sum: number, stats: any) => sum + (stats?.hits || 0), 0)}\n\n# HELP econeura_cache_misses_total Total number of cache misses  \n# TYPE econeura_cache_misses_total counter\neconeura_cache_misses_total{cache=\"all\"} ${Object.values(cacheStats).reduce((sum: number, stats: any) => sum + (stats?.misses || 0), 0)}\n\n# HELP econeura_system_memory_heap_used_bytes Memory heap used in bytes\n# TYPE econeura_system_memory_heap_used_bytes gauge\neconeura_system_memory_heap_used_bytes ${memoryUsage.heapUsed}\n\n# HELP econeura_system_memory_heap_total_bytes Memory heap total in bytes\n# TYPE econeura_system_memory_heap_total_bytes gauge\neconeura_system_memory_heap_total_bytes ${memoryUsage.heapTotal}\n\n# HELP econeura_system_uptime_seconds System uptime in seconds\n# TYPE econeura_system_uptime_seconds counter\neconeura_system_uptime_seconds ${process.uptime()}\n`;\n    \n    res.set('Content-Type', 'text/plain');\n    res.send(metrics.trim());\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\n// Cache statistics endpoint\napp.get(\"/cache/stats\", (req, res) => {\n  try {\n    const stats = cacheManager.getAllStats();\n    res.json({\n      success: true,\n      data: stats,\n      timestamp: new Date().toISOString()\n    });\n  } catch (error) {\n    res.status(500).json({\n      success: false,\n      error: 'Failed to get cache stats',\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list\napp.get(\"/\", (req, res) => {\n  res.json({\n    name: \"ECONEURA API\",\n    version: process.env.npm_package_version || \"1.0.0\",\n    status: \"running\",\n    timestamp: new Date().toISOString(),\n    features: [\n      \"PR-22: Health modes (live/ready/degraded)\",\n      \"PR-23: Observability coherente (logs + mtricas + traces)\",\n      \"PR-24: Analytics events with Zod validation\", \n      \"PR-27: Validacin bsica en requests\",\n      \"PR-28: Security headers bsicos + CORS\"",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 145,
        "end": 219,
        "startLoc": {
          "line": 145,
          "column": 6,
          "position": 1364
        },
        "endLoc": {
          "line": 219,
          "column": 41,
          "position": 1879
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.mega.ts",
        "start": 326,
        "end": 484,
        "startLoc": {
          "line": 326,
          "column": 8,
          "position": 2801
        },
        "endLoc": {
          "line": 484,
          "column": 52,
          "position": 4031
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ",\n      \"POST /v1/analytics/events - Track analytics events (PR-24)\",\n      \"GET /v1/analytics/events - Query analytics events (PR-24)\",\n      \"GET /v1/analytics/metrics - Get aggregated metrics (PR-24)\",\n      \"GET /v1/events - Server-Sent Events for real-time updates\",\n      \"POST /v1/events/broadcast - Broadcast events to organization\",\n      \"GET /v1/cockpit/overview - Operational overview dashboard\",\n      \"GET /v1/cockpit/agents - Agent execution details\",\n      \"GET /v1/cockpit/costs - Cost breakdown by org/playbook\",\n      \"GET /v1/cockpit/system - System metrics and health\"\n    ]\n  });\n});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Basic error handling middleware",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 231,
        "end": 254,
        "startLoc": {
          "line": 231,
          "column": 38,
          "position": 1930
        },
        "endLoc": {
          "line": 254,
          "column": 35,
          "position": 2022
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.restored.backup.ts",
        "start": 88,
        "end": 111,
        "startLoc": {
          "line": 88,
          "column": 46,
          "position": 828
        },
        "endLoc": {
          "line": 111,
          "column": 23,
          "position": 920
        }
      }
    },
    {
      "format": "typescript",
      "lines": 41,
      "fragment": "]\n  });\n});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Basic error handling middleware\napp.use((error: Error, req: express.Request, res: express.Response, next: express.NextFunction) => {\n  const errorId = `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  \n  structuredLogger.error('Unhandled error', error, {\n    errorId,\n    path: req.path,\n    method: req.method,\n    headers: req.headers\n  });\n\n  res.status(500).json({\n    error: 'Internal server error',\n    message: 'An unexpected error occurred',\n    errorId,\n    timestamp: new Date().toISOString()\n  });\n});\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString(),\n    availableEndpoints: [\n      'GET /health', 'GET /health/live', 'GET /health/ready', 'GET /metrics',\n      'GET /v1/analytics/*', 'GET /v1/events'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 241,
        "end": 281,
        "startLoc": {
          "line": 241,
          "column": 5,
          "position": 1968
        },
        "endLoc": {
          "line": 281,
          "column": 17,
          "position": 2310
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 522,
        "end": 562,
        "startLoc": {
          "line": 522,
          "column": 5,
          "position": 4184
        },
        "endLoc": {
          "line": 562,
          "column": 19,
          "position": 4526
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "]\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-23: Observability coherente (logs + mtricas + traces)',\n      'PR-24: Analytics events with Zod validation', \n      'PR-27: Validacin bsica en requests',\n      'PR-28: Security headers bsicos + CORS'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 282,
        "end": 297,
        "startLoc": {
          "line": 282,
          "column": 5,
          "position": 2316
        },
        "endLoc": {
          "line": 297,
          "column": 41,
          "position": 2425
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 231,
        "end": 581,
        "startLoc": {
          "line": 231,
          "column": 5,
          "position": 1778
        },
        "endLoc": {
          "line": 581,
          "column": 52,
          "position": 4662
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "]\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.intermediate.backup.ts",
        "start": 303,
        "end": 324,
        "startLoc": {
          "line": 303,
          "column": 5,
          "position": 2448
        },
        "endLoc": {
          "line": 324,
          "column": 2,
          "position": 2598
        }
      },
      "secondFile": {
        "name": "apps\\api\\backup\\index.working.backup.ts",
        "start": 600,
        "end": 326,
        "startLoc": {
          "line": 600,
          "column": 5,
          "position": 4738
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 274,
      "fragment": "import express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\n\nimport { structuredLogger } from './lib/structured-logger.js';\nimport { ErrorHandler } from './lib/error-handler.js';\n\n// Import health modes (PR-22)\nimport { healthModeManager } from './lib/health-modes.js';\nimport { healthMonitor } from './lib/health-monitor.js';\n\n// Import middlewares (PR-27, PR-28, PR-29)\nimport { ValidationMiddleware } from './middleware/validation.js';\nimport { SecurityMiddleware } from './middleware/security.js';\nimport { RateLimitMiddleware } from './middleware/rate-limiter.js';\nimport { observabilityMiddleware } from './middleware/observability.js';\nimport { finOpsMiddleware } from './middleware/finops.js';\n\n// Import routers for working PRs\nimport { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n// Import CRM routers\nimport { companiesRouter } from './routes/companies.js';\nimport { contactsRouter } from './routes/contacts.js';\nimport { dealsRouter } from './routes/deals.js';\nimport { invoicesRouter } from './routes/invoices.js';\nimport { agentsRouter } from './routes/agents.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Initialize error handler\nconst errorHandler = new ErrorHandler();\n\n// Security middleware (PR-28)\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Apply rate limiting middleware (PR-29)\napp.use(RateLimitMiddleware.createMiddleware({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // limit each IP to 100 requests per windowMs\n  keyGenerator: 'ip'\n}));\n\n// Apply validation middleware (PR-27)\napp.use(ValidationMiddleware.createMiddleware());\n\n// Apply security middleware (PR-28)\napp.use(SecurityMiddleware.createMiddleware());\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint\napp.get(\"/metrics\", async (req, res) => {\n  try {\n    const metrics = await healthMonitor.getSystemMetrics();\n    res.set('Content-Type', 'text/plain');\n    res.send(metrics);\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list\napp.get(\"/\", (req, res) => {\n  res.json({\n    name: \"ECONEURA API\",\n    version: process.env.npm_package_version || \"1.0.0\",\n    status: \"running\",\n    timestamp: new Date().toISOString(),\n    features: [\n      \"PR-22: Health modes (live/ready/degraded)\",\n      \"PR-23: Observability coherente (logs + mtricas + traces)\",\n      \"PR-24: Analytics events with Zod validation\", \n      \"PR-27: Validacin Zod integral en routers\",\n      \"PR-28: Security middlewares (Helmet + CORS + CSP)\",\n      \"PR-29: Rate limiting + Budget guard\",\n      \"SSE: Real-time events and notifications\",\n      \"Cockpit: Operational dashboard endpoints\",\n      \"CRM: Companies, Contacts, Deals management\",\n      \"ERP: Invoice processing and management\",\n      \"AI: Agents orchestration and execution\"\n    ],\n    endpoints: [\n      \"GET /health - Basic health check\",\n      \"GET /health/live - Liveness probe (PR-22)\", \n      \"GET /health/ready - Readiness probe (PR-22)\",\n      \"GET /metrics - Prometheus metrics (PR-23)\",\n      \"POST /v1/analytics/events - Track analytics events (PR-24)\",\n      \"GET /v1/analytics/events - Query analytics events (PR-24)\",\n      \"GET /v1/analytics/metrics - Get aggregated metrics (PR-24)\",\n      \"GET /v1/events - Server-Sent Events for real-time updates\",\n      \"POST /v1/events/broadcast - Broadcast events to organization\",\n      \"GET /v1/cockpit/overview - Operational overview dashboard\",\n      \"GET /v1/cockpit/agents - Agent execution details\",\n      \"GET /v1/cockpit/costs - Cost breakdown by org/playbook\",\n      \"GET /v1/cockpit/system - System metrics and health\",\n      \"GET /v1/companies - List companies (CRM)\",\n      \"POST /v1/companies - Create company (CRM)\",\n      \"GET /v1/contacts - List contacts (CRM)\",\n      \"POST /v1/contacts - Create contact (CRM)\",\n      \"GET /v1/deals - List deals (CRM)\",\n      \"POST /v1/deals - Create deal (CRM)\",\n      \"GET /v1/invoices - List invoices (ERP)\",\n      \"POST /v1/invoices - Create invoice (ERP)\",\n      \"GET /v1/agents - List AI agents\",\n      \"POST /v1/agents/run - Execute AI agent\"\n    ]\n  });\n});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Mount CRM routes\napp.use('/v1/companies', companiesRouter);\napp.use('/v1/contacts', contactsRouter);\napp.use('/v1/deals', dealsRouter);\n\n// Mount ERP routes\napp.use('/v1/invoices', invoicesRouter);\n\n// Mount AI routes\napp.use('/v1/agents', agentsRouter);\n\n// Error handling middleware\napp.use(errorHandler.handleError.bind(errorHandler));\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString(),\n    availableEndpoints: [\n      'GET /health', 'GET /health/live', 'GET /health/ready',\n      'GET /v1/analytics/*', 'GET /v1/events', 'GET /v1/cockpit/*',\n      'GET /v1/companies', 'GET /v1/contacts', 'GET /v1/deals',\n      'GET /v1/invoices', 'GET /v1/agents'\n    ]\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-23: Observability coherente (logs + mtricas + traces)',\n      'PR-24: Analytics events with Zod validation', \n      'PR-27: Validacin Zod integral en routers',\n      'PR-28: Security middlewares (Helmet + CORS + CSP)',\n      'PR-29: Rate limiting + Budget guard',\n      'SSE: Real-time events and notifications',\n      'Cockpit: Operational dashboard endpoints',\n      'CRM: Companies, Contacts, Deals management',\n      'ERP: Invoice processing and management',\n      'AI: Agents orchestration and execution'\n    ]\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.expanded.ts",
        "start": 1,
        "end": 274,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 274,
          "column": 2,
          "position": 2059
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 1,
        "end": 326,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "typescript",
      "lines": 274,
      "fragment": "import express from \"express\";\nimport cors from \"cors\";\nimport helmet from \"helmet\";\n\nimport { structuredLogger } from './lib/structured-logger.js';\nimport { ErrorHandler } from './lib/error-handler.js';\n\n// Import health modes (PR-22)\nimport { healthModeManager } from './lib/health-modes.js';\nimport { healthMonitor } from './lib/health-monitor.js';\n\n// Import middlewares (PR-27, PR-28, PR-29)\nimport { ValidationMiddleware } from './middleware/validation.js';\nimport { SecurityMiddleware } from './middleware/security.js';\nimport { RateLimitMiddleware } from './middleware/rate-limiter.js';\nimport { observabilityMiddleware } from './middleware/observability.js';\nimport { finOpsMiddleware } from './middleware/finops.js';\n\n// Import routers for working PRs\nimport { analyticsRouter } from './routes/analytics.js';\nimport { eventsRouter } from './routes/events.js';\nimport { cockpitRouter } from './routes/cockpit.js';\n// Import CRM routers\nimport { companiesRouter } from './routes/companies.js';\nimport { contactsRouter } from './routes/contacts.js';\nimport { dealsRouter } from './routes/deals.js';\nimport { invoicesRouter } from './routes/invoices.js';\nimport { agentsRouter } from './routes/agents.js';\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\n// Initialize error handler\nconst errorHandler = new ErrorHandler();\n\n// Security middleware (PR-28)\napp.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      scriptSrc: [\"'self'\", \"'unsafe-inline'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n      imgSrc: [\"'self'\", \"data:\", \"https:\"],\n      connectSrc: [\"'self'\", \"https:\"],\n    },\n  },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// CORS configuration (PR-28)\napp.use(cors({\n  origin: ['http://localhost:3000', 'http://localhost:3001'],\n  credentials: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-Org-ID', 'X-User-ID', 'X-Correlation-ID'],\n  exposedHeaders: ['X-System-Mode', 'X-Est-Cost-EUR', 'X-Budget-Pct', 'X-Latency-ms', 'X-Route']\n}));\n\n// Basic middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\n\n// Apply observability middleware (PR-23)\napp.use(observabilityMiddleware);\n\n// Apply FinOps middleware (PR-29)\napp.use(finOpsMiddleware);\n\n// Apply rate limiting middleware (PR-29)\napp.use(RateLimitMiddleware.createMiddleware({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  max: 100, // limit each IP to 100 requests per windowMs\n  keyGenerator: 'ip'\n}));\n\n// Apply validation middleware (PR-27)\napp.use(ValidationMiddleware.createMiddleware());\n\n// Apply security middleware (PR-28)\napp.use(SecurityMiddleware.createMiddleware());\n\n// Basic health check endpoint (< 200ms, no external dependencies)\napp.get(\"/health\", (req, res) => {\n  const ts = new Date().toISOString();\n  const version = process.env.npm_package_version || \"1.0.0\";\n  const currentMode = healthModeManager.getCurrentMode();\n  res.set('X-System-Mode', currentMode);\n  res.status(200).json({\n    status: \"ok\",\n    ts,\n    version,\n    mode: currentMode\n  });\n});\n\n// Enhanced Health check endpoints (PR-22)\napp.get(\"/health/live\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getLivenessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\napp.get(\"/health/ready\", async (req, res) => {\n  try {\n    const result = await healthModeManager.getReadinessProbe();\n    const statusCode = result.status === 'ok' ? 200 : 503;\n    res.set('X-System-Mode', result.mode);\n    res.status(statusCode).json(result);\n  } catch (error) {\n    res.status(503).json({\n      status: \"error\",\n      mode: \"degraded\",\n      timestamp: new Date().toISOString(),\n      version: process.env.npm_package_version || '1.0.0',\n      error: (error as Error).message\n    });\n  }\n});\n\n// System metrics endpoint\napp.get(\"/metrics\", async (req, res) => {\n  try {\n    const metrics = await healthMonitor.getSystemMetrics();\n    res.set('Content-Type', 'text/plain');\n    res.send(metrics);\n  } catch (error) {\n    res.status(500).json({\n      error: 'Failed to get metrics',\n      message: (error as Error).message\n    });\n  }\n});\n\n// API info endpoint with comprehensive feature list\napp.get(\"/\", (req, res) => {\n  res.json({\n    name: \"ECONEURA API\",\n    version: process.env.npm_package_version || \"1.0.0\",\n    status: \"running\",\n    timestamp: new Date().toISOString(),\n    features: [\n      \"PR-22: Health modes (live/ready/degraded)\",\n      \"PR-23: Observability coherente (logs + mtricas + traces)\",\n      \"PR-24: Analytics events with Zod validation\", \n      \"PR-27: Validacin Zod integral en routers\",\n      \"PR-28: Security middlewares (Helmet + CORS + CSP)\",\n      \"PR-29: Rate limiting + Budget guard\",\n      \"SSE: Real-time events and notifications\",\n      \"Cockpit: Operational dashboard endpoints\",\n      \"CRM: Companies, Contacts, Deals management\",\n      \"ERP: Invoice processing and management\",\n      \"AI: Agents orchestration and execution\"\n    ],\n    endpoints: [\n      \"GET /health - Basic health check\",\n      \"GET /health/live - Liveness probe (PR-22)\", \n      \"GET /health/ready - Readiness probe (PR-22)\",\n      \"GET /metrics - Prometheus metrics (PR-23)\",\n      \"POST /v1/analytics/events - Track analytics events (PR-24)\",\n      \"GET /v1/analytics/events - Query analytics events (PR-24)\",\n      \"GET /v1/analytics/metrics - Get aggregated metrics (PR-24)\",\n      \"GET /v1/events - Server-Sent Events for real-time updates\",\n      \"POST /v1/events/broadcast - Broadcast events to organization\",\n      \"GET /v1/cockpit/overview - Operational overview dashboard\",\n      \"GET /v1/cockpit/agents - Agent execution details\",\n      \"GET /v1/cockpit/costs - Cost breakdown by org/playbook\",\n      \"GET /v1/cockpit/system - System metrics and health\",\n      \"GET /v1/companies - List companies (CRM)\",\n      \"POST /v1/companies - Create company (CRM)\",\n      \"GET /v1/contacts - List contacts (CRM)\",\n      \"POST /v1/contacts - Create contact (CRM)\",\n      \"GET /v1/deals - List deals (CRM)\",\n      \"POST /v1/deals - Create deal (CRM)\",\n      \"GET /v1/invoices - List invoices (ERP)\",\n      \"POST /v1/invoices - Create invoice (ERP)\",\n      \"GET /v1/agents - List AI agents\",\n      \"POST /v1/agents/run - Execute AI agent\"\n    ]\n  });\n});\n\n// Mount Analytics routes (PR-24)\napp.use('/v1/analytics', analyticsRouter);\n\n// Mount Events (SSE) routes\napp.use('/v1/events', eventsRouter);\n\n// Mount Cockpit routes\napp.use('/v1/cockpit', cockpitRouter);\n\n// Mount CRM routes\napp.use('/v1/companies', companiesRouter);\napp.use('/v1/contacts', contactsRouter);\napp.use('/v1/deals', dealsRouter);\n\n// Mount ERP routes\napp.use('/v1/invoices', invoicesRouter);\n\n// Mount AI routes\napp.use('/v1/agents', agentsRouter);\n\n// Error handling middleware\napp.use(errorHandler.handleError.bind(errorHandler));\n\n// 404 handler\napp.use((req: express.Request, res: express.Response) => {\n  res.status(404).json({\n    error: 'Not found',\n    message: `Route ${req.method} ${req.path} not found`,\n    timestamp: new Date().toISOString(),\n    availableEndpoints: [\n      'GET /health', 'GET /health/live', 'GET /health/ready',\n      'GET /v1/analytics/*', 'GET /v1/events', 'GET /v1/cockpit/*',\n      'GET /v1/companies', 'GET /v1/contacts', 'GET /v1/deals',\n      'GET /v1/invoices', 'GET /v1/agents'\n    ]\n  });\n});\n\n// Start server\nconst server = app.listen(PORT, () => {\n  structuredLogger.info(`ECONEURA API Server running on port ${PORT}`, {\n    port: PORT,\n    environment: process.env.NODE_ENV || 'development',\n    version: process.env.npm_package_version || '1.0.0',\n    features: [\n      'PR-22: Health modes (live/ready/degraded)',\n      'PR-23: Observability coherente (logs + mtricas + traces)',\n      'PR-24: Analytics events with Zod validation', \n      'PR-27: Validacin Zod integral en routers',\n      'PR-28: Security middlewares (Helmet + CORS + CSP)',\n      'PR-29: Rate limiting + Budget guard',\n      'SSE: Real-time events and notifications',\n      'Cockpit: Operational dashboard endpoints',\n      'CRM: Companies, Contacts, Deals management',\n      'ERP: Invoice processing and management',\n      'AI: Agents orchestration and execution'\n    ]\n  });\n});\n\n// Graceful shutdown\nprocess.on('SIGTERM', () => {\n  structuredLogger.info('SIGTERM received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nprocess.on('SIGINT', () => {\n  structuredLogger.info('SIGINT received, shutting down gracefully');\n  server.close(() => {\n    structuredLogger.info('Process terminated');\n    process.exit(0);\n  });\n});\n\nexport default app;",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\backup\\index.expanded.backup.ts",
        "start": 1,
        "end": 274,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 274,
          "column": 2,
          "position": 2059
        }
      },
      "secondFile": {
        "name": "apps\\api\\src\\index.expanded.ts",
        "start": 1,
        "end": 326,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 326,
          "column": 2,
          "position": 2681
        }
      }
    },
    {
      "format": "javascript",
      "lines": 19,
      "fragment": "import js from '@eslint/js';\nimport tseslint from '@typescript-eslint/eslint-plugin';\nimport tsparser from '@typescript-eslint/parser';\nimport globals from 'globals';\n\nexport default [\n  js.configs.recommended,\n  {\n    files: ['**/*.ts', '**/*.tsx'],\n    languageOptions: {\n      parser: tsparser,\n      parserOptions: {\n        ecmaVersion: 'latest',\n        sourceType: 'module',\n      },\n      globals: {\n        ...globals.node,\n        ...globals.es2021,\n        vi",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\workers\\eslint.config.js",
        "start": 1,
        "end": 19,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 19,
          "column": 3,
          "position": 124
        }
      },
      "secondFile": {
        "name": "packages\\db\\eslint.config.js",
        "start": 1,
        "end": 19,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 19,
          "column": 2,
          "position": 124
        }
      }
    },
    {
      "format": "javascript",
      "lines": 19,
      "fragment": "import js from '@eslint/js';\nimport tseslint from '@typescript-eslint/eslint-plugin';\nimport tsparser from '@typescript-eslint/parser';\nimport globals from 'globals';\n\nexport default [\n  js.configs.recommended,\n  {\n    files: ['**/*.ts', '**/*.tsx'],\n    languageOptions: {\n      parser: tsparser,\n      parserOptions: {\n        ecmaVersion: 'latest',\n        sourceType: 'module',\n      },\n      globals: {\n        ...globals.node,\n        ...globals.es2021,\n        ...",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\eslint.config.js",
        "start": 1,
        "end": 19,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 19,
          "column": 4,
          "position": 124
        }
      },
      "secondFile": {
        "name": "packages\\db\\eslint.config.js",
        "start": 1,
        "end": 19,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 19,
          "column": 2,
          "position": 124
        }
      }
    },
    {
      "format": "javascript",
      "lines": 24,
      "fragment": "files: ['**/*.ts', '**/*.tsx'],\n    languageOptions: {\n      parser: tsparser,\n      parserOptions: {\n        ecmaVersion: 'latest',\n        sourceType: 'module',\n      },\n      globals: {\n        ...globals.node,\n        ...globals.es2021,\n        ...globals.browser,\n        fetch: 'readonly',\n        AbortController: 'readonly',\n        setTimeout: 'readonly',\n        setInterval: 'readonly',\n        clearTimeout: 'readonly',\n        clearInterval: 'readonly',\n      },\n    },\n    plugins: {\n      '@typescript-eslint': tseslint,\n    },\n    rules: {\n      '@typescript-eslint/no-unused-vars'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\eslint.config.js",
        "start": 9,
        "end": 32,
        "startLoc": {
          "line": 9,
          "column": 5,
          "position": 55
        },
        "endLoc": {
          "line": 32,
          "column": 36,
          "position": 204
        }
      },
      "secondFile": {
        "name": "packages\\shared\\eslint.config.js",
        "start": 10,
        "end": 32,
        "startLoc": {
          "line": 10,
          "column": 5,
          "position": 64
        },
        "endLoc": {
          "line": 32,
          "column": 2,
          "position": 211
        }
      }
    },
    {
      "format": "javascript",
      "lines": 20,
      "fragment": "files: ['**/*.js'],\n    languageOptions: {\n      ecmaVersion: 'latest',\n      sourceType: 'module',\n      globals: {\n        ...globals.node,\n        ...globals.es2021,\n        ...globals.browser,\n        fetch: 'readonly',\n        AbortController: 'readonly',\n        setTimeout: 'readonly',\n        setInterval: 'readonly',\n        clearTimeout: 'readonly',\n        clearInterval: 'readonly',\n      },\n    },\n    rules: {\n      'no-console': 'warn',\n      'no-unused-vars': 'warn',\n      'no-undef'",
      "tokens": 0,
      "firstFile": {
        "name": "apps\\api\\eslint.config.js",
        "start": 40,
        "end": 59,
        "startLoc": {
          "line": 40,
          "column": 5,
          "position": 254
        },
        "endLoc": {
          "line": 59,
          "column": 11,
          "position": 380
        }
      },
      "secondFile": {
        "name": "packages\\shared\\eslint.config.js",
        "start": 41,
        "end": 59,
        "startLoc": {
          "line": 41,
          "column": 5,
          "position": 266
        },
        "endLoc": {
          "line": 59,
          "column": 2,
          "position": 390
        }
      }
    }
  ]
}
