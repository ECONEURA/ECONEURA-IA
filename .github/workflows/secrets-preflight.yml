name: secrets-preflight
on:
  push:
    branches: ['**']
  workflow_dispatch: {}
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Verify required secrets
        shell: bash
        run: |
          missing=()
          if [ -z "${{ secrets.PLAYWRIGHT_BASE_URL }}" ]; then
            echo "Missing PLAYWRIGHT_BASE_URL"; missing+=(PLAYWRIGHT_BASE_URL); fi
          if [ -z "${{ secrets.K6_BASE_URL }}" ]; then
            echo "Missing K6_BASE_URL"; missing+=(K6_BASE_URL); fi
          if [ ${#missing[@]} -gt 0 ]; then
            echo "HIL_REQUIRED: add repository secrets -> ${missing[*]}" >&2
            exit 1
          fi